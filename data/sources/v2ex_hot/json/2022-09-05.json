[
  {
    "title": "腾讯这种行为是违规行为吗？",
    "url": "https://www.v2ex.com/t/877717",
    "summary": "airbotgo: 1 、游戏故意多分区<br />以王者荣耀为例，故意分出 iOS 、安卓、微信、QQ 四个组合分区，区之间账号隔离。目的是让用户重复消费。<br />这种行为违规吗？<br /><br />2 、故意限制外区游戏<br />以英雄联盟手游为例，外区英雄联盟手游，安卓、iOS 数据互通，且游戏内没有满天飞的广告。我玩外区（玩过美区、日区）必须挂梯子或加速器，否则无法连接服务器。<br />这种行为违规吗？<br /><br />3 、游戏账号仅允许 QQ 、微信登录<br />不能邮箱、游戏 ID 等其它登录方式，必须先下载它们的 QQ 、微信。<br />这种行为违规吗？<br /><br />4 、付费用户遇到问题找不到真人客服<br />提供的客服电话，从来没有打通过，对于付费用户来说，完全不能保障权益。<br />这种行为违规吗？<br /><br />我天天祈祷腾讯倒闭。",
    "publish_time": "2022-09-05 09:30:34",
    "source": {
      "name": "v2ex_hot",
      "desc": "v2ex 最热主题",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/v2ex.png"
    }
  },
  {
    "title": "我是如何把网站图片 cdn 流量成本压到全网最低(之一)的",
    "url": "https://www.v2ex.com/t/877718",
    "summary": "star7th: <h3>缘起</h3>\n<p>我经营的一些网站和产品的访问量越来越高，付出的 cdn 流量成本（主要是图片资源）也越来越大。抱着节省成本的想法，我尝试在网络上找下有没有便宜的 cdn 商家。 像阿里云、腾讯云、七牛云，这些公有云 cdn 的价格都大同小异，我感觉即使从这一家换到另一家，也节省不了多少成本，同时还增加了迁移的麻烦。因此我把目光投向传统机房，预感可能越接近机器底层，能优化的空间越大。</p>\n<p>经过几天的考察，发现很多非热门地区的机房都或多或少都有一些闲置的优惠产品，甚至其中也不乏优质带宽机器。特别是三四线机房，线路测试其实还不错。很明显这些闲置资源没有得到充分利用。一个点子在我脑海中酝酿了。</p>\n<h3>使用开源 or 自己原创？</h3>\n<p>假如我把各地的闲置机器组织起来，把它们当成一个个节点，组建起一个分布式网络，自动容灾切换，岂不就是一个廉价的自建 cdn 方案了？ 顺着这个思路，我去找一下开源的 cdn 软件 ，看看有没有现成的解决方案。</p>\n<p>然而事情没有我想的那么简单。开源 cdn 并没有很好的容灾切换机制，无法实时避障。 它核心原理里，用域名 cname 的方式指向某个节点 ip ，当节点挂了的时候，由于域名 cname 解析变更有 10 分钟以上的缓存，所以必定会导致用户有一段时间的访问故障。\n我现在探索的是把各地机房集成到一起，其中机器节点的可靠性是参差不齐的。如果想做成一套 cdn ，那么就必须要假设节点是不可靠的，随时可能故障的，然后为此设计一套完善的容灾解决方案。</p>\n<p>既然找不到现成的开源解决方案，那就自己动手写代码实现吧。</p>\n<h3>基本逻辑</h3>\n<p>我边啃着玉米，边用笔在纸上画着逻辑交互图。 经过一阵子的反复斟酌，基本逻辑已经成型。 </p>\n<p>1 ，这套程序主要有两个角色，调度服务器和节点服务器。调度服务器架设在阿里云 k8s 上，保障高可用。而节点服务器则是分布在各地机房，做好可能会故障、随时容灾切换的准备。</p>\n<p>2 ，调度服务器的作用是导流和容灾，将用户流量以重定向的方式导向可用的节点，同时避开故障节点，做到实时无缝切换。</p>\n<p>3 ，节点服务器的主要作用是拉取源文件到本地缓存，从而被用户访问。</p>\n<p>4 ，节点服务器跟调度服务器之间要用某 tcp 协议实时连接监控，监控粒度细分到每个文件，方便调度服务器实时避开故障节点，这样才能保证故障时候，用户访问的每个链接都可以正常切换访问。这里实时性是非常重要的，也是容灾方案的核心。</p>\n<h3>小试牛刀</h3>\n<p>于是我花了一个多月的时间去写代码来实现这个逻辑。核心代码其实写得很快，但是为了保障稳定性，增加了非常多的异常容灾措施，要花时间不断测试不断重写。 初期只放三个异地机房节点，把流量切进来看看。\n为了保险起见，先从小的做起。我一开始切日均 10G 流量过去，让它跑几天。\n几天后，没问题。\n试试日均 50G 流量？  50G 跑了几天，ok 。日均 300G ？ 依然正常运行 。</p>\n<h3>开放商用</h3>\n<p>现在，已经完美运行了一个月，每天承受超过 1000G 流量，暂时没发现有故障现象。我以及一些朋友的很多产品都在用。我刻意关掉其中一个节点，调度服务器马上切流量到其他节点。我刻意关闭全部节点，流量也马上转到源站。整个过程中，只要调度服务器正常运作，那么，无论节点故障与否，用户都将继续无感知地正常访问图片。 而调度服务器直接运行在阿里云 k8s 上，可靠性是非常高的。因此整套架构的可靠性很高。</p>\n<p>有了这个架构，如果需要承受更大流量，我只需要增加节点数即可。而全国范围内的机房机器多的是 ，我可以随时租机器来新增节点。当我意识到有规模化运作大流量的可能性后， 我决定把 cdn 能力包装出去 ，商业化运作。于是注册并备案了大风云网， 访问地址是  <a href=\"https://www.dfyun.com.cn/\" rel=\"nofollow\" title=\"www.dfyun.com.cn\">www.dfyun.com.cn</a> </p>\n<h3>结语</h3>\n<p>大风云<a href=\"https://www.dfyun.com.cn/\" rel=\"nofollow\" title=\" www.dfyun.com.cn \"> </a><a href=\"http://www.dfyun.com.cn/\" rel=\"nofollow\">www.dfyun.com.cn</a>  严格来讲不是传统 cdn ，它是另一种内容分发机制，基于传统 cdn 以及传统机房机器， 用软件技术实现资源整合，是应用层面的一种微创新，在图片访问，文件下载等这些场景下可以成倍地降低流量成本 ，成本低于 0.05G/元 ， 降低到公有云 cdn 价格的四分之一以下（只对比平时价格，不考虑搞活动的临时特价），几乎是全网 cdn 流量成本最低之一了。</p>",
    "publish_time": "2022-09-05 09:32:44",
    "source": {
      "name": "v2ex_hot",
      "desc": "v2ex 最热主题",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/v2ex.png"
    }
  },
  {
    "title": "大伙觉得这次的经济下行、互联网行业低潮大概会持续多久？",
    "url": "https://www.v2ex.com/t/877746",
    "summary": "silypie: 无数的公司裁员，很多公司今年也不怎么招人，上岸难度比往年难很多，很多人现在都放低要求、能有一个差不多的坑位就行。不止互联网，其他行业好像也没以前容易了。",
    "publish_time": "2022-09-05 10:23:04",
    "source": {
      "name": "v2ex_hot",
      "desc": "v2ex 最热主题",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/v2ex.png"
    }
  }
]