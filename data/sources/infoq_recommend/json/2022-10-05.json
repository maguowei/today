[
  {
    "title": "Terraform 1.3，简化重构体验",
    "url": "https://www.infoq.cn/article/t1OYQuveBtsjPBr6ETdx",
    "summary": "<p><a href=\"https://www.infoq.com/hashicorp/\">HashiCorp</a>\"宣布了<a href=\"https://www.infoq.com/terraform/\">Terraform</a>\" <a href=\"https://www.hashicorp.com/blog/terraform-1-3-improves-extensibility-and-maintainability-of-terraform-modules\">1.3版本</a>\"发布，该版本引入带有默认值的可选对象类型属性，并扩展了moved 模块的功能。</p><p></p><p>Terraform的<a href=\"https://www.terraform.io/language/values/variables#type-constraints\">类型约束</a>\"让模块作者能够对输入变量的值进行验证。为处理复杂情况，开发者常用object 类型以允许命名属性集合拥有各自的类型。然而，这也就意味着模块使用者需要为所有属性赋值，甚至包括那些与当前任务无关的。</p><p></p><p>在1.3版本中可以为对象属性赋默认值，这个功能最初是在Terraform 0.14版本中实验性质加入支持。下面的例子中展示了定义变量时如何设置默认值：</p><p><code lang=\"javascript\">variable \"buckets\" {\n  type = list(object({\n    name    = string\n    enabled = optional(bool, true)\n    website = optional(object({\n      index_document = optional(string, \"index.html\")\n      error_document = optional(string, \"error.html\")\n      routing_rules  = optional(string)\n    }), {})\n  }))\n}</code></p><p>&nbsp;</p><p>默认参数是可选的，如果不进行指定，Terraform将使用类型中对应的null 值为默认值。如果指定了非空值为默认值，那么这个属性在接收模块中永远非空。当调用者没有设置默认值或调用者明确将属性值设置为null时，Terraform都会设置默认值。</p><p></p><p>在1.1版本中引入了moved 移动块，为重构配置文件中的资源提供了程序化的手段。Terraform会通过每个模块或资源的地址对比新配置与先前状态，移动或重命名对象都会导致Terraform销毁旧地址的对象并在新地址创建新的对象。而借助配置文件的移动块可以让Terraform将旧地址的已有对象视为是当前属于新地址的对象。</p><p></p><p>这种行为与terraform state mv 命令相同，但移动块允许直接在配置文件内追踪资源的移动。在最初的版本中，移动块只支持在同一本地路径内的模块间重构。1.3版本中通过新增在第三方及不同来源模块中重构资源的功能，取消了这层限制。这也包括了从<a href=\"https://cloud.hashicorp.com/products/terraform\">Terraform云端</a>\"托管的私有注册中心，<a href=\"https://registry.terraform.io/\">Terraform注册中心</a>\"，或者任何source 参数中的选项。</p><p></p><p>1.3版本的发布与<a href=\"https://www.terraform.io/language/v1-compatibility-promises\">Terraform v1.0的兼容性承诺</a>\"相符，该承诺表示，1.x的任何版本更新都不会对工作流产生影响，也不需要升级任何工具。虽然大多用户都不会受这次版本升级的影响，但<a href=\"https://www.terraform.io/language/v1.3.x/upgrade-guides?_gl=1*6xqoci*_ga*MjExNzMxNzQyMy4xNjYzODk4MDA0*_ga_P7S46ZYEKW*MTY2Mzg5ODAwNC4xLjAuMTY2Mzg5ODAwNC4wLjAuMA..\">部分行为</a>\"可能会需要额外的升级步骤。比如在1.3版本中，一些未维护的状态存储后端将被废弃，包括：artifactory 、etcd 、manta ，以及swift 。</p><p></p><p>更多关于1.3版本发布的细节可以参考<a href=\"https://www.hashicorp.com/blog/terraform-1-3-improves-extensibility-and-maintainability-of-terraform-modules\">文档</a>\"和<a href=\"https://github.com/hashicorp/terraform/releases/tag/v1.3.0\">版本说明</a>\"。Terraform 1.3目前可从<a href=\"https://www.terraform.io/downloads.html\">HashiCorp官网</a>\"下载，也可以在Terraform云端使用。</p><p></p><p>&nbsp;</p><p>原文链接：</p><p><a href=\"https://www.infoq.com/news/2022/09/terraform-simplified-refactoring/\">Terraform 1.3 Release Introduces Simplified Refactoring Experience</a>\"</p><p></p><p>相关阅读：</p><p></p><p><a href=\"https://www.infoq.cn/article/wV78kwciwMAqeVxtAlfy\">基础设施即代码：只是漂移管理还不够</a>\"</p><p><a href=\"https://www.infoq.cn/article/MwasczNiyzIY7VCNlwo1\">Docker 之父：Go、Rust 为什么会成为云原生的主导语言？</a>\"</p>",
    "publish_time": "2022-10-05 10:46:54",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "AI绘画神器Stable Diffusion的疯狂与危险",
    "url": "https://www.infoq.cn/article/MYYhWiSNPaAQIGfZywa0",
    "summary": "<p></p><p></p><blockquote>最近几周，一款名为Stable Diffusion的文本到图像程序横空出世，瞬间颠覆了一切。Stable Diffusion将无过滤图像生成的门槛下放到历史最低。它一边被AI艺术界所称道，另一边则被传统艺术家激烈批评；有人想要拆解分析，有人把它捧上了天，也有人对它的强大能力感到担忧。</blockquote><p></p><p></p><p>输入文字描述，就能得到相应的图像结果——这就是AI文本到图像程序想要达成的唯一目标。</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/e3/64/e3c6f62af22decdd93a1d770f23f2664.png\" /></p><p></p><p>AI文本到图像生成器Stable Diffusion作品摘录</p><p></p><p>用户可以随意输入自己想要的内容——电子人版拜登总统挥舞武士刀；绘有青蛙格斗图案的中世纪挂毯等等。生成系统由现有艺术作品组成的巨大数据库训练而成，能够快速生成与提示信息有所关联的新奇图像。虽然目前最先进的模型也无法输出稳定且完美的成果，但在这项技术的支持者们看来，与这背后隐藏的巨大潜能相比，眼下的这一点点缺陷简直微不足道。</p><p></p><p>不过必须承认，现在这些“根据输入输出图像”的工具仍然由少数财力雄厚的企业所把持，包括构建了DELL-E的OpenAI和打造出Imagen的谷歌。这些都是大公司，玩得起也输得起，所以他们唯一需要考虑的就是在技术可能性与企业声誉之间寻求平衡。</p><p></p><p>对于像DALL-E这样的模型，感兴趣的朋友可能排队等待才有机会亲自上手体验。至于谷歌Imagen，则完全禁止向公众开放。当然，DALL-E的输出也会经过过滤，避免其生成包含暴力、裸露或逼真人脸的图像。另外，这种体验不是免费的，DALL-E的用户每月只能免费生成15张图像，额外生成的话每张约合0.08美元。虽然价格不贵，但还是劝退了不少只想随便玩玩的好事者。</p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/02/e9/020a03b7473bb1eabc7fd85102f7bbe9.jpeg\" /></p><p></p><p>Satble Diffusion的强大之处，在于极高的输出质量、顺畅自然的混搭风格、不理会图像的版权保护机制且能够支持大量公众人物。左上图为《米老鼠版二战宣传海报》，右上为《12世纪农民版鲍里斯·约翰逊油画》。</p><p></p><p>Stable Diffusion将无过滤图像生成的门槛下放到历史最低。</p><p></p><p>原本一切安好、各方平衡，但最近几周一款名叫Stable Diffusion的文本到图像程序横空出世，瞬间颠覆了一切。</p><p></p><p>它能够提供开源、未经过滤的图像生成功能，而且任何具备一点点技术知识的电脑用户都能轻松上手。该模型于8月22日公开发布，但影响力正在悄然扩散。它一边被AI艺术界所称道，另一边则被传统艺术家激烈批评；有人想要拆解分析，有人把它捧上了天，也有人对它的强大能力感到担忧。</p><p></p><p>为Stable Diffusion提供开发资金的Stability AI公司CEO Emad Mostaque在采访中表示，“真实情况是，这是一项堪称超能力般的外星科技。我们第一次见到一种老少咸宜的AI图像生成工具，但同时也发现不少人在用它生成伤害他人感情的内容。”</p><p></p><p>尽管AI生成艺术已然经历了一段时间的发展，但Stable Diffusion的出现可能才是这项技术的真正腾飞时刻。它可以免费使用，上手快捷，大大减少了用户生成内容的障碍。当这样一款工具落在普罗大众手中，接下来会发生什么实在难以预料。</p><p></p><h3>Stable Diffusion为什么与众不同？</h3><p></p><p></p><p>Stable Diffusion与其他AI艺术生成器的最大区别，就是它高度关注开源取向。即使是之前游离于科技巨头之外的文本到图像模型Midjourney，也从未如此广泛地开放其访问通道。</p><p></p><p>作为Stable Diffusion背后的公司，Stability AI以多种方式将这项技术打包起来。首先就是人人皆可体验的公开演示版（但速度很慢而且经常卡死），另外还有一个名为DreamStudio的快速测试版本（稳定性更好，但会在生成一定数量的图像后提示付费）。更重要的是，任何人都可以下载和修改该模型的完整版本。第三方开发者甚至在进一步降低这款软件的下载和使用门槛。例如，目前市面上已经出现了能够一键安装的macOS版本。（但请注意，即使难度不高、运行正常，这个版本在Mac上的图像生成速度也很慢。）</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/6d/af/6d0b79cf4ba7cbe180bffd4994d77caf.png\" /></p><p></p><p>由Satble&nbsp;DIssufion生成的图像，对应的文字描述是“〈疯狂麦克四4〉版伯尼·桑德斯，爆炸、白发、护目镜、衣衫褴褛、面部特征细致且对称、戏剧性的打光角度。”</p><p></p><p>Mostaque表示，正是这种开放性让Stable Diffusion获得了远超其他竞争对手的改进速度。例如，查看Stable Diffusion在Reddit上的子频道，就会发现用户不仅在这里分享自己最喜爱的图片描述（例如「日本江户时代风格的麦当劳」和「〈疯狂麦克斯4〉版伯尼·桑德斯」），而且该程序也被广泛集成至各类原有创意工具当中。</p><p></p><p>在以下示例中，用户构建了一款Photoshop插件，能以粗糙的涂鸦为基底用Stable Diffusion完成绘画。先从树木繁茂的日式山顶图像开始，Stable Diffusion能逐步在正确位置勾勒出草、树和天空，而后不断扩散并填补其间的空白，最后由用户手动完成收尾细修。一位Reddit用户在评论中赞叹，“Stable Diffusion开放还不到一周，这么多精彩作品真的令人惊叹。相信半年之后，它又会发展到完全不同的境界。”</p><p></p><p>根据Mostaque的解释，所谓开源就是“把它交给那些愿意构建并扩展这项技术的人们。”然而，这种能力一旦落入公众手中，或好或坏的各种后果也将一并涌来。</p><p></p><h3>不会吧，居然不加过滤</h3><p></p><p>Stability AI的开源方法之所以简单粗暴，就在于他们完全不对生成内容做任何审核或者过滤。与DALL-E不同，用户可以轻松指控Stable Diffusion生成黄*或暴力图像、描绘公众人物和名人；或者仿制受到版权保护的图像（包括非知名艺术家的作品和大企业的吉祥物）。这里我们就不一一列举Stable Diffusion的支持范围有多广了，感兴趣的朋友可以在Lexica搜索引擎中输入话题，结果中会包含大量由Diffusion生成的图像。</p><p></p><p>这里要澄清一点：目前发布的稳定版本其实还是包含了一定的关键字过滤，用于阻止用户生成不适合上班时间浏览（NFSW）的内容，以及公开的政治或暴力图。虽然下载版模型中也包含这些限制，但可以轻松绕过。</p><p></p><p>Reddit上的Stable Diffusion子版块就有“如何在5秒内移除安全过滤器”（&nbsp;<a href=\"https://www.reddit.com/r/StableDiffusion/comments/wv2nw0/tutorial_how_to_remove_the_safety_filter_in_5/\">https://www.reddit.com/r/StableDiffusion/comments/wv2nw0/tutorial_how_to_remove_the_safety_filter_in_5/</a>\"）的帖子。</p><p></p><p>Stable Diffusion让生成暴力和色情图像变得更容易，而且内容中往往包含大量真人特征。</p><p></p><p>此外，虽然模型的开源许可证禁止人们使用该软件实施各类犯罪行为（包括「以任何方式剥削、伤害或试图剥削/伤害未成年人」，以及「生成或传播可验证的虚假信息」），不过只要把Stable Diffusion下载到自己的计算机上，使用者完全可以肆无忌惮、不受任何约束。</p><p></p><p>Mostaque的态度非常明确。“归根结底，使用者自己需要为如何使用这项技术负责，包括是否合乎道德和法律。人们当然可能用它生成糟糕的内容……但我认为这只占总使用量中非常非常低的比例。”</p><p></p><p>但他以为的，也仅仅只是他以为的，目前还无法断言这样的模型被公开发布后会产生怎样的后果。我们很容易设想这项技术可能被用于各类恶意用途。不过还是那句话，一切暂时都只是假设。</p><p></p><p>还记得OpenAI刚刚发布AI文本生成器GPT-3的时候，该公司最初也会限制访问，理由是担心有人用这款软件制造大量垃圾邮件、虚假新闻和恶意宣传。不过到目前为止，这样的严重威胁并未实际出现。GPT-3的访问范围一直不断扩大，还没听说引发过什么特别恶劣的事件。</p><p></p><p>当然，隐患还是存在的。以AI Dungeon为例，这是一款基于GPT-3的文本幻想游戏，它就必须引入过滤器来阻止软件生成不适合未成年人游玩的性爱场景。但至少可以肯定，GPT-3并没有被用于大规模制造垃圾邮件、仇恨言论之类。顺带一提，GPT-3开源版本的开发工作中也有Stability AI的参与和支持。</p><p></p><p>截至目前，Stable Diffusion闹出的最大乱子也就集中在生成色情内容方面。在模型公开发布之后，一系列专门用于管理上班时不宜浏览内容的子版块如雨后春笋般涌现。尽管受到Reddit禁止传播色情deepfakes政策的约束，大多版块已被封禁，但仍有用户在不断生成名人和公众人物的实体图像。这类内容大多荒谬怪诞，人物经常三头六臂、摆着现实中根本做不出的姿势。但随着使用量的增加，输出的图像质量肯定会快速提高，于是AI生成色情内容的伦理问题也将被推上风口浪尖。</p><p></p><p>例如，Stable Diffusion几乎肯定有能力生成以儿童为主体的色情图像。只是这类内容往往只存在于网络上鲜为人知的边边角角。Mostaque指出，该公司已经在删除Stable Diffusion训练数据集中的儿童性虐待素材（CSAM），希望借此主动隔绝这类使用行为。“我们删掉了其中的非法内容，事情就是这样。”</p><p></p><p>但总的来说，Mostaque仍坚定地认为，Stability AI公开发布Stable Diffusion绝不是草率或者鲁莽的冲动行为。相反，他表示这家拥有约75名员工的公司其实考虑过要不要添加更多过滤条件，但最终认为还是把判断权交给开源社区更好。“一旦过滤的齿轮开始转动，就很难让它再停下来。”</p><p></p><p>归根结底，这家公司始终恪守技术行业中最久经考验、但也时常受到批评的理念：技术是中立的，创造总比不创造要好。Mostaque认为，“我们也在遵循这样的思路，把工具视为促进人类进步的潜在基础设施。我们认为这样做的积极因素远远大于消极因素。”</p><p></p><h3>抄袭艺术家，盗取版权</h3><p></p><p>Stability AI明确在训练数据中保留下来的一类视觉素材，就是受版权保护的作品。很多人觉得Stable Diffusion这种模仿在世艺术家风格和美学的行为不值得提倡：这不仅可能违反版权条例，更不符合道德规范。一条批评该软件的推文还详尽列出了该模型模仿过的部分在世艺术家（不过推文中认为Stability AI正「宣传」此功能的说法并不正确）。</p><p></p><p>跟大多数现代AI系统一样，Stable Diffusion同样是在庞大的数据集上训练而成的，它能识别模式并学习模仿。其训练数据的核心是一个名为LAION-5B的巨大素材包，包含50多亿张图像与匹配的文本标注。所有素材均抓取自公共网络。值得注意的是，LAION-5B并非由Stability AI亲自维护，而是归德国非营利组织LAION负责管理。</p><p></p><p>可以确定，LAION-5B中包含有大量受版权保护的内容。对1200个数据集样本进行独立分析后，结果发现其中近半数图片来自区区100个域。最受欢迎的是Pinterest，约占抽样图片的8.5%；第二大来源则是各专门托管用户生成内容的网站（包括Flickr、DeviantArt和Tumblr），以及Getty Images和Shutterstock等照片存储网站。换句话说，这些受版权保护的内容其实归众多独立艺术家和专业摄影师所有。</p><p></p><p>版权方面的争议，给Stable Diffusion这类工具招来了不少批评，人们抱怨它们在盗窃艺术家的创作成果。甚至有批评人士指出，AI不仅窃取了艺术家的心血，还践踏了人们用无数小时磨练出的精湛技艺。</p><p></p><p>担任艺术总监的Logan Preshaw就在最近关于AI艺术软件的热门推文中提到，“我最早以自由职业者的身份做过纸牌游戏插图、书籍封面和专辑封面等设计工作。但后来，这些行业开始充斥着AI生成的图像，空有抱负的艺术家越来越难以生存，这真的让人心碎。每个人都有创作艺术的权利，但这不该以牺牲他人的利益为代价。”</p><p></p><p>但能做的唯有适应，不是说我们真的需要艺术AI，而是它可能永久存在于无法解决的合法性空缺当中。</p><p></p><p></p><blockquote>很多人觉得我们生活在一个能够无休止实现技术创新的乌托邦中，这些技术总能转化为有益人类的成果。不，现实没那么美好。— Logan Preshaw (@wickedinsignia)&nbsp;<a href=\"https://twitter.com/wickedinsignia/status/1569185245169340418?ref_src=twsrc%5Etfw\">2022年9月12日</a>\"</blockquote><p></p><p></p><p>Stability AI做出的回应，则是再次重申技术中立的态度。Mostaque表示，从网络上抓取公共素材、包括受版权保护的内容，在美国和英国都是合法的（但未来可能会出台相关的约束性法规）。他还认为，Stable Diffusion的开源性质证明，这种能力不会被掌握在他和他的同事等少数人手中，而是被广泛分享给了每一个人。</p><p></p><p>Mostaque反问道，“想想Diffusion是怎么发布的？是像OpenAI那样遮遮掩掩、保持着保密服务的姿态吗？是作为艺术模型吗？不，它是由研究机构作为通用模型来发布的，所以最终结果只取决于用户自己如何使用。如果他们以侵犯版权的方式使用，那这些人就触犯了法律。”这里所说的“由研究机构”发布，是指Stable Diffusion的技术许可实际是由慕尼黑路德维希马克西米利安大学的CompVis实验室所发布，Stability AI只是负责出资和具体开发。</p><p></p><p>Mostaque还表示，Stable Diffusion的后续迭代将支持艺术家上传自己的作品集和姓名。这样如果他们不愿意，就可以过滤掉模型输出当中跟他们有关的元素。但与不宜上班浏览的内容一样，这些过滤器对于下载该软件开源版本的用户来说仍然没什么约束作用。换句话说：如果艺术家们不想让AI生成器模仿自己的作品，也没必要跟Stability AI较劲，公司方面也做不了什么。</p><p></p><p>（以下作品为Stable Diffusion模仿多位知名艺术家的画作。）</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/e2/e4/e2780f40344dfe9006850b114c398ce4.png\" /></p><p></p><p>迈克·米尼奥拉</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/4d/a7/4d22f1138d1ce18a4e31c52d9bdcf2a7.png\" /></p><p></p><p>阿尔丰斯·穆夏</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/10/05/103f0fbaf9b60b3bae77318fefb2dc05.png\" /></p><p></p><p>葛氏北斋</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/db/99/dba58058d0f0c8118d1f83c7b8a42a99.png\" /></p><p></p><p>巴勃罗·毕加索</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/da/0a/da3258e96e49cdacc4c61c3d2525040a.png\" /></p><p></p><p>克劳德·莫奈</p><p></p><p><img src=\"https://static001.geekbang.org/resource/image/02/1b/02af8c9ce694ff0b5fayy2a2e2f87a1b.png\" /></p><p></p><p>三浦健太郎</p><p></p><h3>这是一场博弈</h3><p></p><p>聊了这么多，我们最终引出了这样一个问题：Stability AI是做啥的，他们想要干什么？</p><p></p><p>Mostaque本人是一名前对冲基金经理，并为Stable Diffusion的开发贡献了一笔数额不详、但似乎相当可观的资金。他对项目的启动成本做出过估算，认为大概需要60万到75万美元之间。这是一大笔钱，远远超出了大多数学术机构的承受能力。但与最终产品的潜在价值相比，这个数字其实也不算夸张。而且Mostaque非常清楚，他希望Stability AI在坚持开源精神的同时实现盈利，甚至把它跟开源数据库市场上的独角兽企业相提并论。</p><p></p><p>但他也坚持宣称，自己最关心的并不是钱。他更希望能在AI领域掀起一场革命：推翻那些财力雄厚的企业巨头，用更智能、更快、更独立的开源社区取代那些腐朽僵化的昂贵系统。</p><p></p><p>“OpenAI和其他每家企业，都必须加入我们的社区和生态系统。”</p><p></p><p>在他看来，“那些企业和组织才像是迟缓又愚蠢的AI。总有人担心AI太聪明之后会反过来干掉人类，其实这些官僚机构才是每天都天都在折磨我们。”而将Stable Diffusion作为开源项目发布，正是战胜这些笨拙机构的好办法。“每家公司都将开发私有AI模型，但总有人要站出来公开自己的模型。从博弈论的角度看，有人打破规则之后，事态会如何发展？很简单，就是所有企业都得被迫公开。OpenAI和其他每家企业，都必须加入我们的社区和生态系统。”</p><p></p><p>Mostaque指出，推动这场变革的目的不只是为了加快技术开发，同时也是为了将这些系统真正推广到全世界。在他看来，AI世界正走向由硅谷文化和道德主导的道路，而开源软件可以开辟出新的战线。以图像生成工具为例，他希望不同国家能够开发属于自己的模型和数据集，借此“反映人类社会的多样性”，最终摆脱“以西方占主导的单一互联网文化”。</p><p></p><p>这是个宏伟的目标，他甚至将Stable Diffusion的降临形容为“将创意之神的火焰带来人间”。</p><p></p><p>好，都很好，最后的问题就是怎么保证这个世界不会被这把火彻底烧毁。</p><p></p><p>原文链接：</p><p></p><p><a href=\"https://www.theverge.com/2022/9/15/23340673/ai-image-generation-stable-diffusion-explained-ethics-copyright-data\">https://www.theverge.com/2022/9/15/23340673/ai-image-generation-stable-diffusion-explained-ethics-copyright-data</a>\"</p><p></p>",
    "publish_time": "2022-10-05 13:30:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]