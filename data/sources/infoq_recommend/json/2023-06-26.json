[
  {
    "title": "亚马逊云科技开源PBAC领域特定语言Cedar",
    "url": "https://www.infoq.cn/article/CC2RaXSKw5oRwzpymyxx",
    "summary": "<p><a href=\"https://www.infoq.com/aws/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">亚马逊云科技</a>\"<a href=\"https://aws.amazon.com/blogs/opensource/using-open-source-cedar-to-write-and-enforce-custom-authorization-policies/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">开源</a>\"了他们用来定义策略访问权限的领域特定语言<a href=\"https://github.com/cedar-policy?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">Cedar</a>\"。Cedar已集成在<a href=\"https://aws.amazon.com/verified-permissions/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">Amazon Verified Permissions</a>\"和<a href=\"https://aws.amazon.com/verified-access/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">AWS Verified Access</a>\"中，还可以通过SDK和语言规范将Cedar直接集成到应用程序中。</p><p></p><p><a href=\"https://www.infoq.com/news/2023/02/aws-policy-language-cedar/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">Cedar</a>\"可以在应用程序代码之外定义访问策略，这种分离使得它们能够独立地进行编写、分析和审计。Cedar支持基于角色的访问控制（RBAC）和基于属性的访问控制（ABAC）。</p><p></p><p>SDK可用于编写和验证策略和授权访问请求。Cedar是用Rust编写的，但同时提供了Rust crate和Java包，可以在<a href=\"https://github.com/cedar-policy/cedar-java?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">Java</a>\"中使用Cedar。</p><p></p><p>可以通过调用Cedar授权引擎来验证请求是否被授权。请求信息会被转换为Cedar请求并传给Cedar授权引擎。下面是在Rust中使用Cedar的示例：</p><p></p><p><code lang=\"java\">pub fn is_authorized(\n    &amp;self,\n    principal: impl AsRef,\n    action: impl AsRef,\n    resource: impl AsRef,\n) -&gt; Result&lt;()&gt; {\n    let es = self.entities.as_entities();\n    let q = Request::new(\n        Some(principal.as_ref().clone().into()),\n        Some(action.as_ref().clone().into()),\n        Some(resource.as_ref().clone().into()),\n        Context::empty(),\n    );\n    info!(\n        \"is_authorized request: principal: {}, action: {}, resource: {}\",\n        principal.as_ref(),\n        action.as_ref(),\n        resource.as_ref()\n    );\n    let response = self.authorizer.is_authorized(&amp;q, &amp;self.policies, &amp;es);\n    info!(\"Auth response: {:?}\", response);\n    match response.decision() {\n        Decision::Allow =&gt; Ok(()),\n        Decision::Deny =&gt; Err(Error::AuthDenied(response.diagnostics().clone())),\n    }\n}</code></p><p></p><p>可以使用self.authorizer.is_authorized(&amp;q, &amp;self.policies, &amp;es)self.authorizer来调用Cedar授权引擎。参数包括访问请求、Cedar策略和实体集合。访问请求包含了所需的主体、操作和资源信息。根据具体的分析结果，授权引擎将返回Decision::Allow或Decision::Deny。</p><p></p><p>策略也可以通过SDK来创建。在下面的Java示例中，我们创建了一个策略，允许主体Alice对Vacation资源的子资源执行View_Photo操作：</p><p></p><p><code lang=\"java\">private Set buildPolicySlice() {\n   Set ps = new HashSet&lt;&gt;();\n   String fullPolicy = \"permit(principal == User::\\\"Alice\\\", action == Action::\\\"View_Photo\\\", resource in Album::\\\"Vacation\\\");\";\n   ps.add(new Policy(fullPolicy, \"p1\"));\n   return ps;\n}</code></p><p></p><p>在Java中，可以调用isAuthorized方法来查询授权情况：</p><p></p><p><code lang=\"java\">public boolean sampleMethod() throws AuthException {\n    AuthorizationEngine ae = new WrapperAuthorizationEngine();\n    AuthorizationQuery q = new AuthorizationQuery(\"User::\\\"Alice\\\"\", \"Action::\\\"View_Photo\\\"\", \"Photo::\\\"pic01\\\"\");\n    return ae.isAuthorized(q, buildSlice()).isAllowed();\n}</code></p><p></p><p>在亚马逊云科技宣布开源Cedar之后，<a href=\"https://www.permit.io/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">Permit.io</a>\"发布了<a href=\"https://www.permit.io/blog/oss-aws-cedar-is-a-gamechanger-for-iam?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">Cedar-Agent</a>\"，一个HTTP服务器，作为基于Cedar的策略的策略存储和数据存储。策略存储支持创建、检索、更新和删除策略，数据存储支持在内存中存储应用程序数据。Cedar-Agent可以针对存储的数据执行授权检查，这些检查可以基于传入的请求进行。</p><p></p><p>HackerNews上的一位用户<a href=\"https://news.ycombinator.com/item?id=34867332&amp;accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">dadadad100</a>\"评论说，他们看到Cedar可能填补了应用程序授权领域的空白：</p><p></p><p></p><blockquote>Cedar介于OPA（基于数据的搜索方法）和<a href=\"https://zanzibar.tech/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">Zanzibar</a>\"之间。目前还不清楚哪一方会胜出，但不管怎样，现在这个问题开始引起人们的关注了。</blockquote><p></p><p></p><p>其他用户，如<a href=\"https://news.ycombinator.com/item?id=34867799&amp;accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">Oxbadcafebee</a>\"，对亚马逊云科技没有为Open Policy Agent提供支持表示失望。</p><p></p><p>Cedar采用了Apache License 2.0，托管在GitHub上。更多细节可以在最近的亚马逊云科技的博客中找到，或者加入<a href=\"http://cedar-policy.slack.com/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">Cedar Policy Slack</a>\"频道。</p><p></p><p></p><p>原文链接：</p><p><a href=\"https://www.infoq.com/news/2023/06/aws-cedar-open-source/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2ODc2NjUwMjUsImZpbGVHVUlEIjoibkdoOGVlUG4yT2tOZDhKaCIsImlhdCI6MTY4NzY2NDcyNSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.3_IK-LTZ2Fts1a8lgQxj-7sHEsQd1W4aFe3ckViFsSA\">https://www.infoq.com/news/2023/06/aws-cedar-open-source/</a>\"</p><p></p><p>相关阅读：</p><p><a href=\"https://www.infoq.cn/article/YgsLlr5LXF1yvoZfkm2i\">亚马逊云科技 Lambda引入响应有效负载流</a>\"</p><p><a href=\"https://www.infoq.cn/article/NU2Y3XiazG1cqiaNoXXa\">从微服务转为单体架构、成本降低 90%，亚马逊内部案例引发轰动！CTO：莫慌，要持开放心态</a>\"</p>",
    "publish_time": "2023-06-26 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]