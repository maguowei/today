[
  {
    "title": "Spring Batch 5.0发布，使用JDK 17作为基线版本并支持原生Java",
    "url": "https://www.infoq.cn/article/5GyCp1rm0IyPIfRoDyjQ",
    "summary": "<p>VMware<a href=\"https://spring.io/blog/2022/11/24/spring-batch-5-0-goes-ga\">发布Spring Batch 5.0</a>\"。基于Java 17和最新的Spring Framework 6.0，Spring Batch现在支持GraalVM原生镜像、新的Observation API、Java Record以及由50多位贡献者实现的一系列功能增强和缺陷修复。</p><p></p><p>Spring Batch 5依赖Spring Framework 6、Spring Integration 6、Spring Data 3、Spring AMQP 3和Micrometer 1.10。此外，对Jakarta EE API的所有导入语句需要从javax.*迁移至jakarta.*命名空间，这是因为该版本已经迁移至Jakarta EE 9。Spring Batch现在使用Hibernate 6来读取游标和分页条目。</p><p></p><p>Spring Batch 5引入了一个新的类，<a href=\"https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/core/configuration/support/DefaultBatchConfiguration.html\">DefaultBatchConfiguration</a>\"，作为<a href=\"https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/core/configuration/annotation/EnableBatchProcessing.html\">@EnableBatchProcessing</a>\"注解的替代者。它会为所有基础设施提供默认配置，用户可以据此进行自定义。用户可以声明事务管理器并使用<a href=\"https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/core/explore/JobExplorer.html\">JobExplorer</a>\"接口自定义其事务属性。最新版本还提供了增强功能，以更好地利用框架中的Record API，对Record API的支持是在Spring Batch 4中首次引入的。Spring Batch还扩展了对SAP HANA的支持和对MariaDB的完整支持。</p><p></p><p>@EnableBatchProcessing注解<a href=\"https://github.com/spring-projects/spring-batch/issues/816\">不会在</a>\"应用上下文中暴露事务管理器。这对用户定义的事务管理器来说是个好消息，因为能够避免以前版本无法控制的行为。用户必须在每个tasklet step定义中手动配置事务管理器，以避免XML和Java配置风格的<a href=\"https://github.com/spring-projects/spring-batch/issues/4130\">不一致性</a>\"。@EnableBatchProcessing注解还配置了一个基于JDBC的<a href=\"https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/core/repository/JobRepository.html\">JobRepository</a>\"接口。VMware建议使用嵌入式数据库来与内存中的job仓库协作。</p><p></p><p><a href=\"https://github.com/micrometer-metrics/micrometer/blob/main/README.md\">Micrometer</a>\"升级到了1.10版本，允许用户获得Batch追踪和Batch度量指标。Spring Batch现在还为每个job和step创建一个跨度（span）。这些数据可以在<a href=\"https://zipkin.io/\">Zipkin</a>\"等分布式追踪工具中查看。</p><p></p><p>另一个值得关注的变化是使用<a href=\"https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/core/JobParameter.htmltch/core/repository/JobRepository.html\">JobParameter</a>\"类来处理job参数。这样，用户不用像Spring Batch 4那样局限于long、double、string或date类型。这一变化对参数在数据库中的持久化会有<a href=\"https://github.com/spring-projects/spring-batch/wiki/Spring-Batch-5.0-Migration-Guide#column-change-in-batch_job_execution_params\">影响</a>\"。</p><p></p><p>Spring Batch 5还删除了对SQLFire、<a href=\"https://jcp.org/en/jsr/detail?id=352\">JSR-352</a>\"（Java平台的批处理应用）和GemFire的支持。</p><p></p><p>原文链接：</p><p><a href=\"https://www.infoq.com/news/2022/12/spring-batch-5-released/\">Spring Batch 5.0 Delivers JDK 17 Baseline and Support for Native Java</a>\"</p>",
    "publish_time": "2023-01-11 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "从游戏上云出发，底层技术迭代的复利正在被看见",
    "url": "https://www.infoq.cn/article/eZ2uQ7926ET3pAGsBb1M",
    "summary": "<p>近日，市场调研机构 Newzoo 发布了《<a href=\"https://newzoo.com/cn/trend-reports/newzoo-global-games-market-report-2022-free-version-cn\">2022 年全球游戏市场报告</a>\"》，报告内容显示，2022 年全球游戏玩家达到 32 亿，预计为游戏市场创造 1968 亿美元收入，同比增长 2.1%。其中，移动游戏是增长的主力。2022 年来自移动市场的收入预计达到 1035 亿美元，占全球游戏市场的 53%，同比增长 5.1%。</p><p></p><p>无论是手游还是端游，高交互、高画质的多人在线大型游戏越来越多。游戏厂商们渴望玩家活跃度和在线人数攀升，就要做好承接数据峰值的准备。2022 年 7 月，中科院研究团队首次定义了“<a href=\"https://www.jiemian.com/article/7792926.html\">游戏技术</a>\"”，并量化测算了游戏技术和芯片、5G、VR/AR 产业的关系，指出游戏技术在 2020 年对芯片产业的技术进步贡献率约为 14.9%。游戏行业底层技术或者说“游戏科技”在其他行业的应用，近年来也得到了广泛认同。</p><p></p><p>随着云计算技术、边缘计算、流媒体传输技术、GPU 虚拟技术、网络传输技术等关键技术的发展，以云计算为基础的云游戏也在不断发展，无论是游戏厂商还是上下游的云服务商、硬件厂商都需要做好扎实的技术储备。</p><p></p><h1>深受玩家喜爱的完美世界《幻塔》如何实现流畅的游戏体验？</h1><p></p><p></p><p>完美世界的轻科幻开放世界手游《幻塔》，以精美的画风、独特的设定、丰富多样的开放世界玩法，成为完美世界创新品类多元融合的自研代表作之一。</p><p></p><p>作为一款大型多人在线角色扮演类游戏，《幻塔》游戏的交互性很强，需要对客户端中玩家的操作、行为等进行及时地反馈并推送给共同游戏或对战的其他玩家，对网络质量更加敏感。同时，游戏需要保持会话状态，当玩家进行操作时，下次通信的数据会依赖之前的通信数据，对网络吞吐性能要求较高。另外，由于游戏需要高密度记录玩家的操作及结果，数据需要频繁写入，较强的 I/O 性能必不可少。为了保证游戏玩家的交互效果，对底层服务器的计算能力也有较高的要求。</p><p></p><p>为了向玩家提供低时延、流畅的游戏体验，使单服能够承载数千玩家，完美世界《幻塔》将每个游戏服部署在一台 1T 内存的超大规格云服务器上，而这对云服务器的性能提出了极高的要求：单个服务器需要提供足够的配置和性能承载数千名玩家，支持每个玩家的高资源需求；在使用大内存实例的情况下，需要提供超强稳定性以保障业务无间断、无损运行；峰值期间需要多个可用区提供数万核资源，新版本上线等节点会有周期性的高并发，游戏高峰期、低峰期、稳定期切换对算力的性能、稳定性、多地域分布，都有着较高要求；除了高性能、低时延之外，业务的可用性和稳定性也十分重要，尤其是面对黑客的 DDos 攻击 (分布式拒绝服务攻击) 时，需要保持游戏服务时刻不断线，最大程度保障玩家的服务。</p><p></p><p>为了满足上述核心需求并达到理想的效果，为用户带去稳定、流畅的游戏体验，阿里云基于英特尔硬件、软件及存储技术，为完美世界《幻塔》提供了针对性解决方案和全流程技术服务。</p><p></p><p>针对游戏服对处理器的高性能需求，阿里云为《幻塔》提供了搭载 2021 年发布的面向单路和双路的第三代英特尔® 至强® 可扩展处理器的第七代云服务器 ECS，其采用阿里云第三代神龙架构，计算、网络及存储能力大幅提升，同时叠加英特尔® SGX 可信计算与加密计算能力，可为云上业务提供可靠的安全可信环境，同时超高可用性架构、软硬协同的热升级和热迁移通道，也可让业务对底层硬件故障无感。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/7e/7e2fb26eabea34c76f967c1f37932736.png\" /></p><p>（来源：“以至强为底，阿里云助力完美世界打造流畅云上游戏体验”白皮书）</p><p></p><p>英特尔® 至强® 可扩展处理器能够提供更低的时延、更高的吞吐量以及更可靠的性能。其针对 AI、安全等应用场景提供了特定的加速能力，为人工智能、大数据分析、云计算、科学计算等关键负载提供了高效、可靠和灵活的支持。</p><p></p><p>完美世界《幻塔》可以通过阿里云云上游戏解决方案，调用英特尔开源的英特尔® 智能存储加速库（Intel® Intelligent Storage Acceleration Library，英特尔® ISA-L）。最新的英特尔® ISA-L 使用英特尔® AVX-512 指令集来加速数据的压缩 / 解压，利用英特尔® AVX-512 加速完美世界日志文件的压缩和解压缩性能，解决了日志压缩和解压缩场景的性能瓶颈问题，<a href=\"https://www.intel.cn/content/www/cn/zh/customer-spotlight/cases/ali-cloud-perfect-world-smooth-gaming-experience.html?wapkw=%E5%AE%8C%E7%BE%8E%E4%B8%96%E7%95%8C\">优化后压缩性能达到优化前 9 倍，解压性能达到 2 倍</a>\"。</p><p></p><p>在生产环境中，由于 log rotation 的存在，日志文件大小是可以预测的，可以直接使用 GKL 对 GZIP 优化，或使用 igzip-java 基于流的接口来优化。英特尔® ISA-L 提供了压缩 / 解压功能，支持 RFC1951 标准，并且针对英特尔® 架构做了优化，在略微损失压缩率的情况下相对 zlib 具有非常好的性能，这非常适合像游戏这样的高吞吐量存储应用。通过使用英特尔® ISA-L 对日志压缩进行优化，借助其较好的性能和压缩率， GZIP 算法得到了有效优化，且高效完成了对日志文件的压缩。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/69/691a5689e90b154f16db6582b900b9b0.png\" /></p><p>（英特尔® ISA-L 架构图示，来源：“以至强为底，阿里云助力完美世界打造流畅云上游戏体验”白皮书）</p><p></p><h1>不止于《幻塔》，看的见的英特尔软硬件技术复利</h1><p></p><p></p><p>游戏需要的音视频技术底层能力是看得见的技术复利。游戏场景之外，视频点播、AR/VR、智能语音、影视制作等场景，英特尔通过一系列软硬件产品与技术方案，提供和优化算力、存储、网络以及软件能力，满足多元应用的独特需求。在硬件基础设施上，英特尔通过英特尔® 至强® 可扩展处理器、英特尔® FPGA 产品、英特尔® 傲腾™ 持久内存，以及英特尔® 以太网网络适配器、英特尔® 视觉云媒体分析加速卡等产品，为各类基于音视频能力的创新方案提供强劲的计算、存储和网络处理能力；在软件优化加速上，英特尔® oneAPI、英特尔® Media SDK、 SVT 等，在不同应用场景中以完整的软件栈来加速音视频能力的工作效能。</p><p></p><p>如今，英特尔至强处理器迎来了最新一代的第四代英特尔® 至强® 可扩展处理器，其内置一系列加速器，包括新的指令集架构和集成 IP，能够高效应对人工智能、数据分析、网络、存储和其他高需求的工作负载，可以在不断变化且要求日益增高的数据中心使用中提供可观的计算性能，并对工作负载进行优化。值得一提的是，第四代英特尔® 至强® 可扩展处理器内置了全新 AI 加速器——英特尔® 高级矩阵扩展（英特尔® AMX），能够帮助用户通过扩展通用至强® 服务器平台，覆盖包括训练和微调在内的更多深度学习使用场景。该 AI 引擎已经过优化，基于行业标准框架，可提供相较于上一代深度学习训练模型多倍的性能。</p><p></p><p>底层算力技术每一次进步带来的技术复利，正在被看见。从基础音视频应用 ，到发展迅猛的游戏场景，英特尔底层技术和软硬件产品，将有更多元、更创新的应用可能。英特尔希望持续与阿里云、完美世界等众多合作伙伴一起，以灵活可扩展的生态和各类成熟的解决方案，满足更多互联网应用对音视频能力的需求，共同推动互联网迈向动态、丰富、多维和可交互的新纪元。</p><p></p><p>了解更多公有云和互联网软硬件创新技术实践，点击【<a href=\"https://www.intel.cn/content/www/cn/zh/cloud-computing/china-best-practice-public-cloud-internet-industry.html?cid=soc&amp;source=Wechat&amp;article_id=4303\">此处</a>\"】获取白皮书。</p>",
    "publish_time": "2023-01-11 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]