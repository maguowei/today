[
  {
    "title": "心理安全促进技术团队学习和成长",
    "url": "https://www.infoq.cn/article/1Y1ptRapcSNjJlElb14M",
    "summary": "<p>心理安全可以追溯到始于上个世纪的研究。对于技术团队来说，这变得越来越重要，因为他们需要更快的交付、创新、从失败中学习和试验。</p><p></p><p>至今，已经发表过许多关于心理安全的文章——我们收集了这些文章，并把它们归为了建立高绩效技术团队的视角。</p><p></p><p>这篇文章介绍了心理安全的相关基础，并展示了它是如何应用于团队有效性的。它探讨了心理安全如何支持学习和改进，以及我们如何在技术团队中培养心理安全的文化。</p><p></p><h2>心理安全的基础</h2><p></p><p>William A. Khan在1990年的一篇文章《<a href=\"https://journals.aom.org/doi/epub/10.5465/256287\">工作中全情投入和心不在焉的心理条件</a>\"》中描述了三种心理条件，三种条件成立会使人们全情投入，不成立则会使人们心不在焉，它们就是：意义、安全性和可用性。Khan将安全定义为“一种能够展示自我和自我发挥的感觉，而不用担心对自己的形象、地位或职业造成负面影响”，在这种感觉中，人们“感觉局势是可信的、安全的、可预测的，并且行为后果是明确的。”当人们认为某些情况在心理上是安全的，个人投入度就会增加。Khan发现，信任和支持性的人际行为促进了心理安全，这反过来使人们勇于尝试，甚至面对可能的失败也不担心后果。</p><p></p><p>在1992年的文章《<a href=\"https://core.ac.uk/download/pdf/4380058.pdf\">组织如何学得更快</a>\"》中Edgar Schein提到，当我们练习学习新技能时，错误就会发生。他认为，在心理安全的环境中进行辅导有助于加快学习速度。要想改变，人们必须有心理上的安全感：</p><p></p><p></p><blockquote>心理安全环境的基本要素是:1)训练和实践的机会;2)朝着正确方向努力的指导和奖励;3)使犯错合法化的规范;4)奖励创新思维和实验的规范。</blockquote><p></p><p></p><p>沙因总结道，在学习过程中对心理安全的需求可能是普遍的，不能忽视。</p><p></p><p>在1999年的文章《<a href=\"https://web.mit.edu/curhan/www/docs/Articles/15341_Readings/Group_Performance/Edmondson%20Psychological%20safety.pdf\">工作团队中的心理安全和学习行为</a>\"》中，Amy Edmondson介绍了团队心理安全的概念，即“团队成员的共同信念，即团队在人际冒险方面是安全的。”她从自己的研究中得出结论，团队心理安全影响学习行为，而学习行为反过来又影响团队绩效。结构因素，如情境支持和团队领导指导，以及人际特征，都影响着团队中的学习和绩效。</p><p></p><p>Edmondson认为团队心理安全超越了人际信任:</p><p></p><p></p><blockquote>有证据表明，每个群体内部都有一种连贯的人际氛围，其特征是是否缺乏信任、对彼此能力的遵循和人之间的相互关心。</blockquote><p></p><p></p><p>Jeroen Schepers、Ad de Jong、Martin Wetzels和Ko de Ruyter在2007年的文章《<a href=\"https://www.sciencedirect.com/science/article/abs/pii/S0360131507000954\">群件采用中的心理安全和社会支持：教育中的多层次评估</a>\"》中描述了一项关于在教育环境中技术采用的研究。他们的一项发现是，心理安全对群件的使用有直接影响:“在自己的环境中感到更安全、更舒适的学生使用群件的焦虑较少。”报告称，“导师支持和同伴支持都会影响个体层面的心理安全感”，这种支持与群体层面的效应相结合，会导致团队随着越来越多的学习而变得更具有创新性和适应性。</p><p></p><p>在2018年《哈佛商业评论》(HBR)的文章《<a href=\"https://hbr.org/2018/11/if-your-employees-arent-speaking-up-blame-company-culture\">如果员工不畅所欲言，不妨好好反思一下公司文化</a>\"》中，赫曼特·卡卡尔(Hemant Kakkar)和苏布拉·坦吉拉拉(Subra Tangirala)指出，“员工可能不畅所欲言，是因为他们觉得自己所处的工作环境不适合这样做。”根据他们的研究，“强有力的环境规范相较于性格对员工在工作中发言意愿的影响是压倒性的。”当人们认为别人对他们有强烈的期望时，他们往往会说出来。鼓励和奖励他们说出来很重要。</p><p></p><p><a href=\"https://www.bsigroup.com/en-GB/iso-45003/\">ISO 45003标准</a>\"提供了关于管理社会心理风险和促进工作幸福感的指导。该标准草案于2021年6月发布，其中包括:</p><p>关于如何识别可能影响员工的社会心理危害的信息，例如那些居家办工的危害；提供可以拿来管理这些和改善员工福利的有效(通常是简单的)举措的例子。</p><p></p><h2>心理安全应用于团队效能</h2><p></p><p>当团队中有了心理上的安全感，成员们就会敢于去冒险、承认错误、分享想法、实验、讨论冲突和寻求反馈。</p><p></p><p>谷歌的亚里士多德项目探索了高效团队的秘密。工作指南《<a href=\"https://rework.withgoogle.com/print/guides/5721312655835136/\">理解团队有效性</a>\"》介绍了本研究的结果，决定团队有效性的五个常见因素，按重要性排序：</p><p>心理安全可靠性结构和清晰度意义影响</p><p></p><p>以下是谷歌团队有效性指南对心理安全的描述：</p><p></p><p></p><blockquote>心理安全指的是个体对承担人际关系风险的后果的看法，或者相信在一个团队中冒那些被视为无知、无能、消极或具有破坏性的风险是安全的。在心理安全程度高的团队中，团队成员会觉得在团队成员身边冒险是安全的。他们相信团队中没有人会因为其他人承认错误、提出问题或提出新想法而让他们难堪或惩罚他们。</blockquote><p></p><p></p><p>博客文章《<a href=\"https://rework.withgoogle.com/blog/five-keys-to-a-successful-google-team/\">谷歌团队成功的5个关键</a>\"》解释了为什么在研究团队发现的5种动力中，心理安全是迄今为止最重要的:</p><p></p><p></p><blockquote>团队成员之间的关系越安全，他们就越有可能承认错误，合作，并承担新的角色。它几乎影响了我们对员工的每一个重要方面。心理安全感较高的团队成员不太可能离开谷歌，他们更有可能从队友提出的不同想法中汲取力量，带来更多的收入，高管认为他们的效率一般是其他人的两倍。</blockquote><p></p><p></p><p>Matt Sakaguchi在2016年旧金山<a href=\"https://www.infoq.com/presentations/google-effective-teams/\">QCon谷歌大会上谈到了如何创建有效的团队</a>\"。在<a href=\"https://www.infoq.com/podcasts/matt-sakaguchi-google-performing-teams/\">谷歌的播客《高效团队的关键》中</a>\"，他探讨了高效团队区别于其他团队的特征。其中之一是心理安全，他将其定义为:</p><p></p><p></p><blockquote>大家乐于冒险或提出问题，并且知道他们会得到队友的支持，他们感觉在分享个人的“疯狂”想法时是安全的。</blockquote><p></p><p></p><p>据Sakaguchi统计，安全的团队能够达成的目标会比既定目标多17%，不安全的团队能够达成的目标会比既定目标少19%。</p><p></p><p>2017年由Laura Delizonna撰写的HBR文章《<a href=\"https://hbr.org/2017/08/high-performing-teams-need-psychological-safety-heres-how-to-create-it\">高效团队需要心理安全</a>\"》提供了6个步骤来提高心理安全，这是Paul Santagata从谷歌的团队表现研究中得出的结论:</p><p>把冲突当作合作者来处理，而不是对手。人与人之间说话。预测反应并计划对策。用好奇心代替指责。询问交付反馈。测量心理安全。</p><p></p><p>Amy Edmondson在一篇关于<a href=\"https://www.hrmagazine.co.uk/content/features/the-importance-of-psychological-safety\">心理安全重要性</a>\"的人力资源杂志文章中指出，心理安全与高绩效是相关联的:</p><p></p><p></p><blockquote>欣赏错误报告、寻求帮助和其他学习行为的管理者可能会担心，培养心理安全意味着放松绩效标准。事实上，恰恰相反。因为心理安全用坦率和开放取代沉默和恐惧，这有助于制定宏大雄伟的目标。</blockquote><p></p><p></p><p>埃德蒙森认为，当绩效标准和心理安全都很高时，人们会直言不讳地提出问题、表达担忧、报告错误，并提出新想法。她说:“只有通过合作和相互学习，我们才能完成今天所需要的复杂的创新工作。”</p><p></p><h2>心理安全如何支持学习和提高</h2><p></p><p>心理安全培养了一种从失败中学习的态度，人们把失败视为学习的机会，并分享如何改进的想法。只有当人们感到被包容，感到学习和贡献是安全的，他们才能感到挑战现状是安全的。事后分析应以事件为中心，而不是以人为中心，防止成为一场推卸责任的游戏。</p><p></p><p>在InfoQ的一篇文章《<a href=\"https://www.infoq.com/articles/psychological-safety-models-experiences/\">心理安全:模型和经验</a>\"》中，Fabio和Giulia Armani将心理安全与敏捷软件开发的宣言联系起来:</p><p></p><p></p><blockquote>2001年《软件开发敏捷宣言》的第一个价值是“个人和交互超过过程和工具”——在我们看来这仍然是成立的，然而，如果没有一个真正的(付诸实施的)心理安全，信任是不可能的，交互可能会被恐惧、不确定性，甚至更糟，整个敏捷组织可能生活在一个不透明关系的虚假“世界”中。因此，剩下的基本上是一组流程和框架。</blockquote><p></p><p></p><p>根据作者的说法，基于心理安全的文化通过支持创新、促进从失败中学习的态度，使员工有更大的可能性分享他们关于如何改进组织的想法，对敏捷的采用有着积极的影响。</p><p></p><p>InfoQ对Timothy Clark的书《<a href=\"https://www.infoq.com/articles/book-stages-psychological-safety/\">心理安全的四个阶段</a>\"》进行了采访。在采访中，他表示，“心理安全意味着你可以与一个社会成员互动，而不会以某种感到尴尬、嘲笑或惩罚的方式。”</p><p></p><p>克拉克认为，心理安全遵循一个基于人类需求顺序的自然进程。四个相互依存的阶段是:</p><p>感觉是其中的一份子。感觉学习是安全的。感觉做贡献是安全的。感觉挑战现状是安全的。</p><p></p><p>根据克拉克的说法，安全水平要一步一步地从低开始提升，几乎不可能一步就达到最高的安全水平。</p><p>在《<a href=\"https://medium.com/@Harri_Kaloudis/psychological-safety-at-work-what-do-psychologically-safe-work-teams-look-like-5585ab0f2df4\">工作中的心理安全</a>\"》一文中，Harri Kaloudis探讨了心理安全的工作团队是什么样的。错误、日常问题和失败被视为学习的机会:</p><p></p><p></p><blockquote>该小组花时间和精力解决\"二级\"问题[...]确定问题的根本原因，并采取行动解决它们，而不是仅仅停留在它们的迹象和症状上。</blockquote><p></p><p></p><p>根据Kaloudis的说法，心理安全的团队会主动寻找他们可能错过的错误和问题。团队成员不会通过提出困难和具有挑战性的问题而公然回避建设性的任务冲突。</p><p></p><p>团队必须创造安全，以便讨论涉及到每个人的事情。在InfoQ的一篇关于<a href=\"https://www.infoq.com/news/2017/08/high-performing-team/\">构建高效团队</a>\"的文章中，Patrick Kua建议使用Norm Kerth的“基本指令”来创建一个安全的环境:</p><p></p><p></p><blockquote>团队可以尝试改变；如果出了问题，他们可以回到以前的做法。</blockquote><p></p><p></p><p>Kua建议采取一些小步骤，并专注于改善团队成员之间的互动。</p><p></p><p>在无指责的事后反思中，心理安全对于从发生的事件中学习至关重要。在一次关于<a href=\"https://www.infoq.com/news/2018/09/psychological-safety-post-mortem/\">事后反思的心理安全</a>\"的采访中，Matt Saunders 解释了如何做才能让所有参与的人在事后都感到安全：</p><p></p><p></p><blockquote>关键在于，我们是在对事故进行事后分析，而不是对犯错的人(如果确实是一个单一的错误导致了事故)。因此，会议应该以这种方式运行。在一开始就明确这是团队或组织学习的过程，而不是推卸责任的游戏。</blockquote><p></p><p></p><p>“以解决方案为中心”的方法可以有助于得到有价值的、赞赏的、有帮助的反馈。在《<a href=\"https://www.infoq.com/articles/feedback-psychologically-safe/\">促进反馈：心理安全</a>\"》这篇文章中，Roy marriott描述了ACE过程，它代表着目标、信心、甚至更多的信心：</p><p></p><p></p><blockquote>为了让反馈对接受者有价值，我们首先要了解他们的目的。这意味着我们的反馈更有可能是有帮助的，他们也更有可能信任我们。然后我们就可以根据他们的目的来倾听和理解他们的计划/设计等等。为了得到反馈，我们可以问自己两个问题:是什么让我有信心这个设计能够实现这个目标?什么能让我更有信心这个设计能实现目标?</blockquote><p></p><p></p><p>Marriot表示，如果人们的出发点是好的，ACE模式和会议形式将帮助他们以一种建立信任和心理安全的方式交流反馈。</p><p></p><h2>培养心理安全的文化</h2><p></p><p>在InfoQ的一篇<a href=\"https://www.infoq.com/articles/sooner-safer-happier-Jon-Smart-DOES-Las-Vegas-2020/\">关于更快、更安全、更快乐、更聪明的问答</a>\"中，作者描述了心理不安全的反模式：</p><p></p><p></p><blockquote>这里有一种恐惧的文化。人们害怕把事说出来，坏消息被掩盖。通常情况下，成本和进度优先于安全，有时会造成悲惨的后果。人不创新，是因为怕报复。没有实验，只有习得性无助。</blockquote><p></p><p></p><p>Smart 解释说，一种新的文化可能需要几年的时间才能生根发芽，变得有粘性:</p><p></p><p></p><blockquote>从一个传统的组织到一个更像青色组织，需要领导者去积极培养文化，去认可并奖励理想的行为，去创造适当的激励，去营造心理安全，去邀请参与，去交流，在环境中创造社会认同。</blockquote><p></p><p></p><p>Duena Blomstrom探索了如何通过减少人类债务来提高心理安全。在InfoQ文章《<a href=\"https://www.infoq.com/articles/human-debt/\">如何识别和减少人类债务</a>\"》中，她提供了一个增加心理安全的很具实用性的列表，其中包括思想创造和保持用于自我关怀和自省的空间，为人类工作腾出空间，寻找不断测量的方式以便可以展示的最小成就。</p><p></p><p>当领导者处于压力之下时，他们可能会陷入“暗黑面”的行为，如欺凌、攻击和支配，这些行为会对组织文化和心理安全造成深刻和持久的伤害。<a href=\"https://www.infoq.com/news/2021/01/psychological-safety-pressure/\">在压力下保持心理安全</a>\"是一项挑战——有意识地、谨慎地调节反应，防止不良行为，可能一个可行的解决方案。</p><p></p><p>学习文化的基础是心理安全，这是Adam Grant在<a href=\"https://www.strategy-business.com/article/Building-a-culture-of-learning-at-work\">建立工作学习文化</a>\"中所说的。他描述了一个实验，在这个实验中，他们要求管理者分享他们过去接受反馈的经验和他们未来的发展目标：</p><p></p><p></p><blockquote>我们建议他们告诉他们的团队，他们从建设性批评中获益并确定他们现在正在努力改进领域的经验。</blockquote><p></p><p></p><p>通过让管理者展示接受反馈并表示他们愿意接受反馈，他们将脆弱性标准化了:</p><p></p><p></p><blockquote>他们的员工给出了更有用的反馈，因为他们知道经理在努力做什么。</blockquote><p></p><p></p><p>创意可以来自Facebook的任何员工，无论资历高低或职位高低。正如Mehmet Baha在《<a href=\"https://www.infoq.com/articles/create-psychological-safety-teams/\">为你的团队创造心理安全</a>\"》一书中所解释的那样，Facebook已经授权员工积极主动产生影响。他认为，如果没有心理安全，我们就不能拥有高效的团队。</p><p></p><p>Baha提出了两种提高远程团队心理安全的方法:</p><p>包容是心理安全的基石。例如，为了确保每个人都参与到在线头脑风暴会议中，我要求与我一起工作的团队在给定的时间内写出他们的想法，而不是相互交谈。通常，在头脑风暴会议中，是一个或几个人主导讨论。无需交谈，每个人都可以写下自己的想法，每个人都包括在内。一旦团队成员彼此了解，他们就更有可能信任彼此。这会对团队的心理安全产生积极影响。在在线会议开始时，我会问团队成员一些简短的个人问题，比如:“你参加过的最好的音乐会是哪场?是什么让那场音乐让你感到如此特别?”每个人都会回答这个问题。谈论音乐很有趣，它在团队中创造了一种积极的氛围，让团队成员相互了解。</p><p></p><h2>培养学习和改进的有效团队</h2><p></p><p>当技术团队对人际关系冒险感到安全时，就会有更多的个人参与，当有什么事情困扰他们或他们有想法时，大家就会大声说出来。团队成员更有可能承担风险，承认错误，分享想法，试验，讨论冲突，并寻求反馈。这对团队的表现有直接的影响。</p><p></p><p>我们应该关注事件而不是人，以避免指责。心理安全促进从失败中学习——失败被视为学习和改进的机会。但是，只有当人们感到被包容、感到学习和贡献是安全的，他们才能感到挑战现状是安全的。</p><p></p><p>在压力下，领导者可能会陷入“黑暗面”，造成沉重而持久的伤害。领导者可以通过变得弱势、减少对人的指责、创造激励机制并奖励安全行为，以及建立包容的环境，积极地培养安全文化。没有心理上的安全，我们就无法拥有高效的团队。</p><p></p><h2>附加资源</h2><p></p><p><a href=\"https://en.m.wikipedia.org/wiki/Psychological_safety\">心理安全</a>\"<a href=\"https://www.psychsafety.co.uk/\">包括关于心理安全的时事通讯</a>\"</p><p></p><p>作者简介：&nbsp;</p><p>Ben Linders是荷兰敏捷、精益、质量和持续改进的独立顾问。《<a href=\"https://www.benlinders.com/getting-value-out-of-agile-retrospectives/\">从敏捷回顾中获得价值</a>\"》、《<a href=\"https://www.benlinders.com/waardevolle-agile-retrospectives/\">Waardevolle Agile</a>\"》的作者。</p><p>&nbsp;</p><p>原文链接：</p><p><a href=\"https://www.infoq.com/articles/psychological-safety-tech-teams/\">How Psychological Safety at Work Creates Effective Software Tech Teams that Learn and Grow</a>\"</p><p></p><p>译者简介：</p><p>冬雨，小小技术宅一枚，现从事研发过程改进及质量改进方面的工作，关注研发、测试、软件工程、敏捷、DevOps、云计算、人工智能等领域，非常乐意将国外新鲜的IT资讯和深度技术文章翻译分享给大家，已翻译出版《深入敏捷测试》、《持续交付实战》。</p>",
    "publish_time": "2022-07-08 10:57:15",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "每个架构师，都是一种成长方法｜InfoQ大会早班车第7期",
    "url": "https://www.infoq.cn/article/EZAq2KlWbREKyiaxOOfq",
    "summary": "<p>两位嘉宾的工作年限加起来有25年，在技术架构和团队管理方面都有各自的理解，每个人的经验都是一个方法，方法不一定能复制，但至少可以借鉴。希望他们俩的分享对你有帮助。</p>\n<p>2022年ArchSummit上海站即将落地，<a href=\"http://archsummit.infoq.cn/2022/shanghai/schedule?utm_source=infoq&amp;utm_medium=zaobanche\">点击查看最新日程</a>。</p>",
    "publish_time": "2022-07-08 11:48:08",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "Babylon.js 将成构建元宇宙重要工具？| 专访 Babylon.js 团队负责人",
    "url": "https://www.infoq.cn/article/XG8y9eziI842ysF9xLOC",
    "summary": "<p>采访嘉宾 | Jason Carter</p><p>采访编辑 | 闫园园</p><p></p><p>近期，微软旗下 WebGL 框架 Babylon.js 开发者之一 David Rousset 在接受采访时透漏，微软将很快披露其在元宇宙中的愿景，同时他还在访谈中谈到了自己对元宇宙的看法。根据 Rousset 的描述，未来的互联网用户应该能够从网络上的 3D 场景或网页 ( 例如用 Babylon.js 构建 )，通过 VR 中的链接，“被传送到另一个网站，该网站将处于另一个元宇宙”。</p><p>&nbsp;</p><p>虽然这只是 Rousset 个人的设想，并不代表微软的官方说法，但外界依然从他的描述中猜测微软或将把 Web 标准纳入其元宇宙战略中。而这也意味着，Babylon.js 很大概率上会成为微软构建元宇宙的重要工具。</p><p>&nbsp;</p><p>Babylon.js 刚刚于五月初正式发布了 5.0 版本，带来了诸多新特性，例如跨平台原生开发、Mixed Reality Toolkit 等等。那么对于 Babylon.js 团队来说，他们接下来的目标是什么？在开发支持 WebGPU 中，有没有遇见问题和挑战？又如何看待 WebVR 和元宇宙之间的联系？针对这些问题，InfoQ 有幸采访了微软 Babylon.js 的首席工程和产品负责人 Jason Carter，以下为其部分回答译文。</p><p>&nbsp;</p><p>InfoQ：首先，请您向介绍一下自己以及您的团队目前在做的工作。</p><p>&nbsp;</p><p>Jason Carter：大家好，我叫 Jason Carter，负责领导 Babylon.js 开发团队。Babylon.js 是一套使用 JS 的开源 Web 渲染与游戏引擎，我们的目标是把它打造成世界上最强大、最美观、最简单同时也是最开放的 Web 渲染平台之一。</p><p>&nbsp;</p><p>InfoQ：请您讲讲 Babylon.js 开发的初衷是什么？</p><p>&nbsp;</p><p>Jason Carter：开发 Babylon.js 的初衷，是希望帮助所有 Web 开发者在应用程序中充分运用 GPU 的强大功能。</p><p>&nbsp;</p><p>WebGL 是一个面向浏览器的强大图形 API，目前已经得到全部主流浏览器的支持，但其本身既复杂又极具深度。很多 Web 开发者发现，直接使用 WebGL API 进行编程难度非常高。因此，Babylon.js 希望可以降低，甚至消除这种门槛。</p><p>&nbsp;</p><p>Babylon.js 是一个非常简单的JavaScript API，对所有开发人员都非常友好，它的意义就是简化开发流程，让更多 Web 开发者能够在自己的应用程序中利用 GPU 资源。</p><p>&nbsp;</p><p>InfoQ：有开发者认为 Babylon.js 相较其他 WebGL 框架入门稍难，您有没有推荐新手快速上手的方法？</p><p>&nbsp;</p><p>Jason Carter：每个人的教育背景和从业经历有所不同，这些使我们有了不同于他人的知识和技能储备。所以在学习新的技术平台时，我们总会结合自己的独特知识、经验做出判断，比如觉得它似乎很好上手，又或者不容易掌握。</p><p>&nbsp;</p><p>Babylon.js 也不例外，有些人觉得它平易近人，但也有人觉得门槛太高。但无论大家的教育背景如何，我总会向 Babylon.js 学习者推荐三大资源：</p><p>&nbsp;</p><p>首先是 Babylon.js <a href=\"https://playground.babylonjs.com/\">playground</a>\"，这里是最适合新手的入门课堂。大家可以在这里更改代码，并立即查看渲染结果，全程无需任何特殊设置。</p><p>&nbsp;</p><p>第二个就是 Babylon.js 丰富的<a href=\"https://doc.babylonjs.com/\">说明文档</a>\"。Babylon.js 整个社区都在努力提供丰富、完整且易于理解的文档资源，这也是开启 Babylon.js 学习之旅的最佳起点。我们也一直在对文档内容做出改进，希望它能受到所有人，包括缺少开发经验的新手们的欢迎。就在两周之前，我们刚撰写了最新文档，题为《<a href=\"https://doc.babylonjs.com/journey/theFirstStep\">你的第一步</a>\"》，这份新文档将提供完整引导，帮助初学者一步步打开 Playground，做出更改，下载准备就绪的托管网站，最终把成果托管并运行起来。</p><p>&nbsp;</p><p>最后推荐给 Babylon.js 学习者们的是社区论坛。Babylon.js <a href=\"https://forum.babylonjs.com/\">论坛</a>\"汇聚了世界各地友好、善良、乐于助人的贡献者们。我想把所有美好的词汇都献给我们的社区。总之，强烈建议各位学习者来看看 Babylon.js 论坛，打个招呼并开始提问。无论什么样的问题，都会有全世界最强的 Babylon 用户热情为你解答。</p><p>&nbsp;</p><p>InfoQ：在开发 WebGPU 版本中，有没有遇见问题和挑战，是如何解决的？</p><p>&nbsp;</p><p>Jason Carter：近两年来，我们一直致力于在 Babylon.js 中支持 WebGPU 。这是段疯狂、艰险，但又充满意义的探索。WebGPU 为Web 开发者们带来了一系列令人难以置信的全新功能，例如使用计算着色器执行更高级的 GPU 运算。</p><p>&nbsp;</p><p>但是想支持 WebGPU，最复杂的问题在于其中涉及一种全新的着色器语言（WGSL）。因为我们建立 Babylon.js 的目的就是发挥 WebGL 的能力，所以之前就已经完全支持 GLSL 。而这一次，我们必须考虑让 Babylon.js 支持多种着色器语言。</p><p>&nbsp;</p><p>我们一直希望 Babylon.js 能够成为Web 开发者访问 GPU 的唯一 API，避免纷繁复杂的底层浏览器 API（WebGL、WebGL2 或者 WebGPU ）再给开发者带来额外的困扰。为此，我们决定开发一些特殊的工具，将 WGSL 着色器转换为 GLSL 着色器。</p><p>&nbsp;</p><p>大家可以参考<a href=\"https://doc.babylonjs.com/advanced_topics/webGPU/webGPUWGSL\">此处文档</a>\"，了解关于这些工具的更多信息和演示案例。</p><p>&nbsp;</p><p>InfoQ：在开发 Babylon.js 时，团队是如何平衡包体积、性能、功能等因素的？</p><p>&nbsp;</p><p>Jason Carter：这确实是个复杂的问题，因为每位开发人员的需求各不相同。使用 Babylon.js 平台的开发者很多，所以唯一的解决方案就是提升灵活性。我们努力采用最新的 Web 标准和技术，允许大家在 Babylon.js 中进行高级摇树优化，从而在尽可能削减包大小的同时，继续保留必要的一部分功能。</p><p>&nbsp;</p><p>如此一来，每个人都能获得最适合自身需求的 Babylon.js 定制版本。当然，如果各位想在浏览器上开发 3A 级游戏，需要使用到 Babylon.js 的全部功能，那也可以照单全收。总之，Babylon.js 的构建充分考虑到模块化设计，保证每位开发者的需求都能得到完美满足。</p><p>&nbsp;</p><p>InfoQ：有开发者认为 Babylon.js 包体积偏大，您和团队怎么看待这个问题？</p><p>&nbsp;</p><p>Jason Carter：大家也可以根据实际需求构建定制化 Babylon.js 包。我们已经看到不少 Web 应用程序在特定场景中使用定制化 Babylon.js 包，大小仅为 92 kb；但如果需要完整功能集，大家也可以在 Web 应用中使用完整包。</p><p>&nbsp;</p><p>Babylon.js 具备模块化特性，能够满足所有开发人员的具体需求。关于 Babylon.js 摇树设计的更多细节信息，请参阅我们的<a href=\"https://doc.babylonjs.com/divingDeeper/developWithBjs/treeShaking\">相关文档</a>\"。</p><p>&nbsp;</p><p>InfoQ：有开发者提到，Babylon.js 面向游戏开发缺少必要的工作流和组件化设计，对此您怎么看？未来会增加必要工作流和组件化设计吗？</p><p>&nbsp;</p><p>Jason Carter：其实这方面工作会一直持续下去。我们始终在努力为游戏开发者提供更多备受期待的现代功能和特性。我们也在 Babylon.js 身上倾注了不少野心勃勃的理想，希望能进一步降低游戏开发者的使用门槛，改进使用体验。</p><p>&nbsp;</p><p>然而 JavaScript 仍然只支持单线程，所以 Web 游戏的开发只能依赖于一种不同于原生游戏开发的独特解决思路。但已经有不少游戏开发者利用 Babylon.js 带来了令人难以置信的精彩体验。《我的世界：经典版》、《神庙逃亡2》等等案例都是明证，大家可以参阅此处<a href=\"https://www.babylonjs.com/games/\">链接</a>\"。</p><p>&nbsp;</p><p>另外，我们还使用最新的 Babylon.js 5.0 版本开发了一段全新的《<a href=\"https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fspacepirates.babylonjs.com%2F&amp;data=05%7C01%7Cjaca%40microsoft.com%7C5ac0429e40524ff0794708da38d66fb3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637884790896265505%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=CeLepyXYyfjIqPg1ibSNdykx4Rz8Q2sdjfq0B8MW7%2BY%3D&amp;reserved=0\">太空海盗</a>\"》游戏演示，大家可以看看。</p><p>&nbsp;</p><p>InfoQ：目前 WebVR 技术的发展现状是怎样的？您认为元宇宙等概念是否会对推动其有较大的发展？</p><p>&nbsp;</p><p>Jason Carter：WebVR 在很大程度上已经被更新的 WebXR API 所取代。Babylon.js 一直保持着对 WebXR 最新功能的跟进和支持。随着沉浸式设备在各国市场变得更便宜，普及度更高，相信人们会对创建沉浸式网络体验产生更强烈的兴趣。实际上，我们最近发现这一领域的人气和关注度已经出现了爆发式增长。</p><p>&nbsp;</p><p>随着新冠疫情席卷全球，很多人被迫长期居家，远程办公。于是乎，很多企业开始使用 Babylon.js 构建起真实、生动的元宇宙体验。<a href=\"https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fframevr.io%2F&amp;data=05%7C01%7Cjaca%40microsoft.com%7C5ac0429e40524ff0794708da38d66fb3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637884790896265505%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=xSHXL9%2BQD42bZ5PvrpPFDQWCQq1KRclcuxWuyU6tiFk%3D&amp;reserved=0\">Frame</a>\" 就是个很好的例子。这种令人难忘的虚拟共享与共存体验完全建立在 Babylon.js 之上，也真正展现出元宇宙的价值所在。</p><p>&nbsp;</p><p>所以大众对于虚拟世界的关注和渴望，一定会吸引更多人投向于沉浸式共享虚拟体验的开发中来。未来，我们也会看到更多开发者在 Babylon.js 的支持下将这种灵感转化为现实。</p><p>&nbsp;</p><p>InfoQ：Babylon.js 接下来短期目标和长期目标是什么？</p><p>&nbsp;</p><p>Jason Carter：我们刚刚发布了迄今为止体量最大，变化最多，最雄心勃勃的 Babylon.js 版本——Babylon.js 5.0。但这并不是终点，我们已经在为下个版本积极筹备。我们目前最核心的开发目标，就是让开发者们能使用 Babylon.js API 在所有平台上（包括 Web 和原生平台）创建体验。</p><p>&nbsp;</p><p>我们正在开发 Babylon Native 技术集合，希望让创作者们能够以 Web 优先的方式开发出跨平台体验。在这方面，我们必须想办法保证为开发者提供统一的渲染和体验效果。我们遵从社区成员们的呼吁，正在为此努力。</p><p>&nbsp;</p><p>必须承认，大部分现代游戏和渲染解决方案在“跨平台”功能中并没有充分考虑到 Web 端的需求。但我们想要有所突破，从出色的 Web 体验起步，再慢慢通过统一的性能、沉浸效果和部署流程满足访问者的一切期待。我们正在关注并思考这个问题，Babylon Native 正是这项计划中的关键一环。</p><p>&nbsp;</p><p>InfoQ：Three.js 和 Babylon.js 经常会拿来一起作比较，对此您怎么看？</p><p>&nbsp;</p><p>Jason Carter：其实没啥冲突。我们也很喜欢 Three.js，欣赏那些使用 Three.js 将精彩的想法转化成现实的开发人员。我们双方相互激励，共同进步。我们有着相同 的热情，就是想把强大的GPU 功能交付到 Web 开发者手中。</p><p>&nbsp;</p><p>Three.js 和 Babylon.js 都在为这个目标而努力，我们也乐于看到共同的热情孕育出相似的成果，把理想中的效果鲜活展现在每个人眼前。所以两个有着共同努力方向的项目怎么会有冲突呢，我觉得双方更像是队友的关系。&nbsp;😊</p><p>&nbsp;</p><p>InfoQ：您认为 WebGL 标准的前景如何？</p><p>&nbsp;</p><p>Jason Carter：WebGL 是个令人印象深刻的 API，而 WebGL 2 基本已经被行业视为“最终完整版”。</p><p>&nbsp;</p><p>在 Babylon.js 上，我们期待能在支持 WebGPU 的浏览器上直接连通 GPU。我们坚信这个全新 API 能为全球 Web 开发者们解锁更多超能力，也为 Babylon.js 能够全面支持 WebGPU 感到无比自豪！</p><p>&nbsp;</p><p>InfoQ：最后，您有没有想对中国开发者们想说的话？</p><p>&nbsp;</p><p>Jason Carter：感谢各位中国开发者对沉浸式 Web 开发的关注，也感谢大家支持 Babylon.js。在这里，我诚邀大家加入 Babylon.js 大家庭，了解其中蕴藏的无穷可能性。请相信，这个友好、温暖、乐于互助的社区正在敞开怀抱，欢迎你来！</p><p>&nbsp;</p><p>Jason Carter：微软 Babylon.js 负责人和技术布道者。</p>",
    "publish_time": "2022-07-08 14:00:59",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "前端基础设施怎么搞？看腾讯TDesign跨技术栈组件库的最佳实践！",
    "url": "https://www.infoq.cn/article/OvM3VwyY5SMfvXswlvjL",
    "summary": "<p>在 6 月 28 日的首届 Techo Day 腾讯技术开放日上，腾讯发布了一系列“轻量级”产品，将腾讯多年自研产品的底层能力释放给了开发者。</p><p></p><p>正如腾讯云高级副总裁 &amp; CTO 王慧星，在前不久的腾讯 TDesign 技术生态日提到的那样：“自腾讯确立了开源协同，自研上云的技术战略，成立了十大技术领域委员会，推出了众多 PaaS 能力，并将这样的能力放在云上，实现对内部和外部用户的统一服务。”</p><p></p><p>而腾讯设计云旗下的企业级产品设计体系腾讯 TDesign 正是这样一款产品，其也在首届 Techo Day 腾讯技术开放日活动中，发布了新的产品动态。据了解，目前腾讯 TDesign 的大部分组件已经完成了内测版本的发布， Vue 2、Vue 3、React 和移动端 Vue 3 也已经发布了公测版本和候选版本。与此同时，Augular、Flutter 、taro 等热门技术栈也在开发的行列当中。</p><p></p><h1>避免重复造轮子</h1><p></p><p></p><p>如果要回溯腾讯自研 UI 组件库的缘由，这或许要先了解下前端领域的发展史。</p><p></p><p>纵览底层的前端框架领域，先是经历了 JQuery 一统江湖的时代，而后过渡到了 MVVM 框架成为主流的时期。目前，Vue、React 以及 Angular 则成为了前端开发人员使用最多、最广的底层框架。可以看出，业界并没有完全占据主导地位的前端开发框架，这也就导致前端技术团队在迭代技术栈时，往往存在较大的切换成本，跨团队共享前端资产时也会遇到技术栈差异的壁垒。</p><p></p><p>此外，由于组件库和团队技术栈存在一定耦合性的关系，对于很多企业中后台系统这样的弱设计风格场景，我们可以根据整个栈的风格，大致推测出这个项目使用了哪种组件库。例如，前端团队选择了 React 开发框架，大概率会用 AntD 组件库；使用 Vue 开发框架，则大概率会直接用 iview-admin 页面模板。这样一来，技术栈的差异不仅会导致整个组件库的选型受到一定限制，还会让对外曝露的产品体验存在较大的偏差。</p><p></p><p>因此，在产品体验、开发效率与设计效率等因素的驱动下，腾讯通过开源协同的方式，与多个业务团队共建了企业级设计体系<a href=\"https://design.tencent.com/?from=infoqfri\">腾讯 TDesign </a>\"，通过提供复用性的设计体系，为设计研发各个流程环节提供需要的设计和研发等解决方案。</p><p></p><p>在代码组件库中，腾讯 TDesign 基于业界实际的使用需求，已经覆盖了 Vue、Vue Next、React 等主流的前端开发框架，目的在于让公司内外部使用的同学都可以根据自身实际需求，选择对应的组件库产品，不再受技术选型的限制。当项目同时有桌面端和移动端使用需求的时候，腾讯 TDesign 还可以统一产品在两端上的业务体验。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;</p><p><img src=\"https://static001.geekbang.org/infoq/bd/bde8d73b800c7682fe05e2df59a2dc90.png\" /></p><p>&nbsp; &nbsp; &nbsp; &nbsp;</p><p>从另一个角度来看，如果没有统一的 UI 组件体系，UI 设计师的工作效率同样是大打折扣的。在“腾讯前端通用 UI 组件库技术生态日”活动中，腾讯用户研究与体验设计部总经理陈妍说道：“如果没有腾讯 TDesign 这样的 UI 组件库，设计师是最大的受害者，因为我们的工作需要不断的重复，没有办法把时间节省下来做更加有价值的事情。”</p><p></p><p>基于设计师的痛点，腾讯 TDesign 目前也提供了 Figma、Sketch、Axure 等设计资源以及 Sketch 设计插件，让设计和代码能够无缝衔接，使设计资源分配到必要的环节。</p><p></p><h1>维护跨技术栈产品的挑战与解法</h1><p></p><p></p><p>既然腾讯 TDesign 选择了支持各种技术栈的原生开发，就不可避免地会遇到几类问题。例如，UI 组件库怎么保证与技术栈产物一致性？交互和 UI 实现怎么保持一致？组件 API 怎么保持一致？官网体验与用户的实际使用如何保持一致？</p><p></p><p>据腾讯 TDesign 团队透露，虽然业界基于上述挑战已经有几种不同实现的方式，但其各有优劣：</p><p>一种方案是基于 Web Components 做一个组件，将其使用在各个框架当中，但 Web Components 方案的优势与具体实现框架没有太大关系，因为是由浏览器原生支持，其最大的问题还是浏览器的兼容性，部分浏览器可以通过 polyfill 解决，但是有些政企浏览器的兼容性依然是不可小觑的问题。</p><p></p><p>另一种方案是直接将一份 React 代码转成 Vue，这带来的好处是可以真正做到维护一份代码，同时支持多技术栈，但统一整个前端技术栈其实是比较大的课题，目前业界还没有统一的方案。另外，代码转换支持多技术栈的方案，其实在应用开发层会更常见，对于腾讯 TDesign 这种底层依赖而言，转化后代码的稳定性还是难以得到保障。</p><p></p><p>不仅于此，这种转化方案的中间层代码相当于是新的框架，既不是 Vue，也不是 React，对于贡献者来说门槛比较高，会进一步导致开源社区不够活跃，这同样是腾讯 TDesign 团队需要考虑的问题。</p><p></p><p>最终，腾讯 TDesign 团队决定选择用 Vue 开发 Vue 技术栈，React 开发 React 技术栈，除了 Angular、小程序等受技术栈限制，其他技术栈均统一用 Jsx 来维护组件实现，并主要解决了以下几个问题：</p><p></p><p>组件 API 保持一致</p><p></p><p>腾讯 TDesign 团队梳理出了开源项目前端组件上线的流程，在组件进入开发的前置阶段，设置了 API / 交互稿统一评审环节，邀请各技术栈的实现者、UI/ 交互设计师以及 PMC 成员同学一起针对组件 API 的易用性、灵活性以及必要性进行评审，充分的讨论过后，会将大家的意见形成整个组件的 API 描述，并录入腾讯 TDesign 的组件 API 管理平台。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/a0/a0be226c81394cfde9e9687c9db03fa1.png\" /></p><p></p><p>最终，API 管理平台会生成各个技术栈的 API 文档、某个组件的 props.ts、typeb.ts 等文件。当组件开发者进行开发时，不需要对照文档做开发，直接根据已经生成的定义文件开发即可，做 API 开发同学提了 PR 做 review 时，有任何更改会同步到各个技术栈实现的仓库。</p><p></p><p>用户实际使用与官网体验保持一致</p><p></p><p>为了让用户的实际使用感受与官网体验保持一致，腾讯 TDesign 做了一层官网共同的架构，目前所有的组件文档包括文字部分，以及我们要展示的组件 Demo。各个端实现时，会各自引入一个 Web Components 实现官网的公共部分，通过统一的 Markdown 解析工具，最终解析出来的栈点就会完全一样。</p><p></p><p>各个技术栈产物的 UI 和交互保持一致</p><p></p><p>除了要保证组件 API 一致，还要保证各个技术栈的产物里 UI 和交互都要完全一样，这里 TDesign 做了两件事情：第一，以 TDesign Token 贯穿设计开发流程，从最初设计师提供的设计稿，到组件库里代码的实现变量，一直到最终组件库里面 NPM 包产物，每个变量都有一一对应的关系；第二，抽取一个独立的仓库，将每个组件都独立维护在 TDesign-common 仓库，通过 Submodule 的方式引入到实现仓库里。当 UI 需要调整的时候，直接在独立的库里修改，再同步到各个技术栈实现的仓库，最终保证整个 UI 和交互在各个技术栈上面实现完全一样。</p><p></p><p>部分组件代码复用</p><p></p><p>除了 UI 相关实现代码做到了各技术栈复用，腾讯 TDesign 也参考了业界类似组件库产品的实践，探索了一些代码逻辑复用的方案：一些与技术栈无关的组件抽象类，也抽取到了 TDesign-common 仓库中；合理分层组件实现，通过 Hooks 和 &nbsp;Composition API 来跨技术栈复用部分代码实现。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/d3/d34f1dab28cd8735d9f3fc807aea2b83.png\" /></p><p></p><h1>未来怎么走？</h1><p></p><p></p><p>据了解，当前腾讯 TDesign 在内外部已经有了比较广泛的应用基础，腾讯内部在积极推动各个业务统一到 TDesign，也支持了多个领域和行业外部项目落地，并从中孵化出了多个行业组件库。这些组件库也将在未来逐步开源，持续支持各行业领域的系统建设。</p><p></p><p>而当我们开始回溯<a href=\"https://mp.weixin.qq.com/s/co1fxCxgmxyui92BwpN2FA\">腾讯 TDesign 自开源以来的历程</a>\"，可以发现其取得的成绩已经可圈可点：在开源社区的建设方面，腾讯 TDesign 仍然秉持着为社区贡献价值的初心，不断向有活力、高质量的开源社区进阶。据统计，上半年 TDesign 共有 280+ 贡献者，其中外部 17 ⼈，核⼼贡献者 47 ⼈，GitHub star 4k+。</p><p>展望未来，腾讯 TDesign 还将继续围绕着两个既定目标迈进：</p><p></p><p>第一，让更多人使用腾讯 TDesign。后续组件库各技术栈将发布 Stable 版本，并针对移动端开展专项优化，以确保提升组件质量和用户使用体验。为了最大化提升设计师的工作效率，还将提供⻚⾯模板、移动端 Figma UIKit Variant（设计可配置能⼒）等设计资源，并建设物料市场，承载更多的⾏业组件和模板资源。除此之外，TDesign 还计划支持国际化以及无障碍适老化的适配；</p><p></p><p>第二，建设更有活⼒、更⾼质量的开源社区。为了帮助更多从业者了解企业级设计体系 腾讯 TDesign，社区后续计划沉淀、总结设计体系和组件库专业⽂章 / 课程。另外，为了吸引更多外部开发者加⼊贡献，透明化内外部协作进度，开源社区将优化开发者的招募和激励机制。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/1d/1dab53a0b2256cb2ce4a3e5be2565364.png\" /></p><p></p><p>谈及未来的发展规划，腾讯 TDesign 团队在接受 InfoQ 采访时表示，未来除了会支持现有的前端技术栈，还将协同社区的力量推出 Web components、Flutter 等更多技术栈产品，服务于公司内外使用者。同时，也期待更进一步复用跨框架实现的代码，在降低维护成本的同时，不显著额外提升参与贡献的门槛。</p><p></p><h1>写在最后</h1><p></p><p></p><p>作为腾讯设计云的关键产品，腾讯 TDesign 的诞生便是为了让 UI 组件库摆脱技术选型的影响，让其回归到前端基础设施的地位上来。事实证明，在一步步的迭代与优化之下，腾讯 TDesign 已经逐步地将开源协同能力渗透给了更多企业。</p><p></p><p>与此同时，腾讯用户研究与体验设计部总经理陈妍还在接受 InfoQ 采访时透露：未来，腾讯设计云将继续在设计资产、设计协作效率发力，针对图标库、设计资产开源平台以及智能设计工具进行迭代升级。目前，腾讯设计云已经初步完成平台建设阶段，后续腾讯设计云将逐步向内容建设方面进阶。</p><p></p><p>我们也坚信，今后腾讯设计云在实现高效设计、轻松协同目标的过程中，也将迈出更加坚实的一步。</p><p></p><p>如果你对腾讯设计云及腾讯 TDesign 感兴趣，欢迎点击<a href=\"https://design.tencent.com/?from=infoqfri\">访问腾讯设计云</a>\"进一步了解。</p>",
    "publish_time": "2022-07-08 15:52:04",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "甲骨文、IBM在中国本土数据库中渐渐失去优势",
    "url": "https://www.infoq.cn/article/dmHmbK0fKmcp9SzL35Z6",
    "summary": "<p>根据市场分析机构 IDC 的研究，中国本土关系型数据库的市场份额正在迅速增长，并大有赶上甲骨文、IBM等国际厂商之势。</p><p></p><p>整体来看，2021 下半年，中国关系型数据库软件市场规模达到 15.8 亿美元，同比增长 34.9%。IDC预测，到 2026 年市场规模将继续增长至 95.5 亿美元，未来 5 年市场年复合增长率为 28.1%。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/a7/a7ea9317af3121189cdfa95382c394f0.jpeg\" /></p><p>2021年下半年，中国公有云关系型数据库规模8.7亿美元，同比增长48.7%；本地部署关系型数据库规模7.1亿美元，同比增长21.1%。</p><p></p><p>IDC分析指出，随着云计算、大数据、人工智能以及 5G 等新技术的不断出现，数据环境呈现出大规模、高增长、多样化和分布化等特征，而随着企业数字化转型的深入，企业对数据的管理和使用也有了更高的智能化和自动化需求。关系型数据库正向着分布式、云原生、AI使能、HTAP（混合事务与分析型数据库）、多模等方向发展。</p><p></p><p>“当前中国关系型数据库市场中活跃的供应商可分为国际厂商、本土传统数据库厂商、新兴厂商、云厂商、开源厂商、数据库服务商等多种类型，甚至行业头部最终用户也已经通过自研与联创进入市场。”IDC此前亦曾<a href=\"https://www.idc.com/getdoc.jsp?containerId=prCHC48779922\">评价</a>\"道：中国关系型数据库软件市场进入百花齐放时代。</p><p></p><p>值得一提的是，本地部署模式市场中，由于利好政策的驱动，国内本土厂商市场份额都得到迅速扩大，比如：在政府行业，达梦数据库、人大金仓在过去一年中获得了大量的订单；华为在政企、金融行业也获得了突破。目前，达梦也正在<a href=\"https://www.infoq.cn/article/KaIIi6FxILSFeQAT430Q\">推进IPO</a>\"，业界认为其有望成为A股市场的“国产数据库第一股”。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/b4/b41c167eed5636210c3b9de6731a6de2.jpeg\" /></p><p>本土厂商的份额正在快速追赶上Oracle、IBM等国际厂商</p><p></p><p>IDC 中国企业软件市场分析师王楠表示： “在新兴数据库技术层面，中国本土数据库厂商与国际厂商的差距不大，部分领域还处于领先地位，产品性价比更有优势。在宏观层面，政策极大利好本土厂商，本土厂商的市场机会将会高于国际厂商。在数据库技术发展和宏观政策驱动的双重因素影响下，中国关系型数据库市场过去的格局正在被打破，变革即将到来。”</p>",
    "publish_time": "2022-07-08 18:04:45",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "4k/8k超高清时代，如何利用媒体处理技术加速数字化升级",
    "url": "https://www.infoq.cn/article/BNTdDsqwG0sPSzXJxFbf",
    "summary": "<p>4K、8K超高清音视频服务场景，加速推动超高清音视频处理技术在多媒体行业的融合创新发展，催生了新技术、新业态和新模式，腾讯明眸在媒体处理方面提供了最全的技术支持，针对海量多媒体数据，提供的云端转码和音视频处理服务可以让客户实现按需将云存储中的视频文件转码为适合在 OTT、PC 或移动端播放的格式，并且实现在各类平台将视频文件转为不同码率和分辨率的需求，以及叠加水印、视频截图、智能封面、智能编辑等媒体处理服务。</p>\n<p>本期直播将重点分享广电级媒体直播、4K/8K超高清解决方案以及视频AI处理等技术。</p>",
    "publish_time": "2022-07-08 18:46:20",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "音视频玩法多样， 如何使用腾讯云视立方终端SDK助力创新增长",
    "url": "https://www.infoq.cn/article/3xf0JO39hRmNHp3xW5cH",
    "summary": "<p>在音视频技术日趋成熟的今天，谈起开发音视频应用或集成音视频新功能时，开发者仍然逃不开新旧 SDK 兼容、长时间的联调、多个授权管理等等问题。</p>\n<p>腾讯云音视频推出终端一体化产品【腾讯云视立方】为开发者排忧解难：直播 SDK、短视频 SDK、“腾讯视频”同款播放能力的全新版本播放器 SDK，拥有海量素材和精准AI能力的美颜特效 SDK…带你领略音视频 SDK 一次集成，处处调用。全新产品架构、轻量化集成体验，1天内即可上线音视频应用。</p>",
    "publish_time": "2022-07-08 19:15:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "腾讯超大 Apache Pulsar 集群的客户端性能调优实践",
    "url": "https://www.infoq.cn/article/4P6SN4xzYtLtPgIRmzkU",
    "summary": "<p></p><p>近期，腾讯 TEG 数据平部 MQ 团队开发部署了一套底层运维指标性能分析系统（本文简称 Data 项目） ，目前作为通用基础设施服务整个腾讯集团。该系统旨在收集性能指标、上报数据以用于业务的运维监控，后续也将延用至前后端实时分析场景。</p><p></p><p>腾讯 Data 项目选用 Apache Pulsar 作为消息系统，其服务端采用 CVM 服务器（Cloud Virtual Machine，CVM）部署，并将生产者和消费者部署在 Kubernetes 上，该项目 Pulsar 集群是腾讯数据平台部 MQ 团队接入的消息量最大的 Pulsar 集群。在整个项目中，我们在 Apache Pulsar 大规模集群运维过程中遇到了一些问题和挑战。本文将对这些问题展开描述分析，并分享对应处理方案，同时也会解析涉及到的相关 Apache Pulsar 设计原理。</p><p></p><p>希望本文能够对面临同类场景的用户与开发者提供参考。</p><p></p><p></p><h2>业务消息量大，对生产与消费耗时指标敏感</h2><p></p><p></p><p>Data 项目的业务场景，具有非常明显的特点。首先，业务系统运行过程中，消息的生产、消费量都非常大，而且生产消息的 QPS（每秒查询率）波动性不明显，即业务会在近乎固定的 QPS 生产和消费数据。</p><p></p><p>其次，业务方对系统的可靠性、生产耗时、消费耗时这几个指标项比较敏感，需要在比较低的延迟基础上完成业务处理流程。像 Data 项目这样的业务场景和需求，对集群的部署、运营和系统稳定性都提出了非常高的要求。</p><p></p><p>Data 项目集群最大的特点是消息量大、节点多，一个订阅里可高达数千消费者。虽然 Data 项目当前 Topic 总量并不多，但单个 Topic 对应的客户端比较多，每个分区要对应 100+ 个生产者和 10000+ 个消费者。在对消息系统选型时，团队将消息系统的低延迟、高吞吐设为关键指标。经过综合对比市面上常见的消息系统，Apache Pulsar 凭借其功能和性能胜出。</p><p></p><p>Apache Pulsar 提供了诸多消费模型如独占、故障转移、共享（Shared）和键共享（Key_Shared），其中在 Key_Shared 和 Shared 订阅下可以支撑大量消费者节点。其他消息流系统如 Kafka，因为消费者节点受限于分区个数，导致其在多分区时性能相对较低。（编者注：Pulsar 和 Kafka 的最新性能测评，敬请期待 StreamNative 即将发布的 2022 版报告）</p><p></p><p></p><h2>超大 Pulsar 集群：单分区最大消费者数量超 8K</h2><p></p><p></p><p>目前 Data 项目业务数据接入两套 Pulsar 集群，分为 T-1 和 T-2。其中，T-1 对接的业务的客户端 Pod（分为生产者和消费者，且不在同一个 Pod 上，部署在腾讯云容器化平台 (STKE) ，与 Pulsar 集群在相同机房；T-2 对接业务的客户端 Pod 与 Pulsar 集群不在相同的机房（注：机房之间的数据时延相比同机房内部略高）。</p><p></p><p>服务器侧相关参数</p><p></p><p><img src=\"https://static001.geekbang.org/wechat/images/6e/6e1ddc009979081bbf5052e063668fe3.png\" /></p><p></p><p>业务侧相关参数</p><p></p><p>Data 项目业务侧使用 Go 语言开发，接入 Pulsar 集群使用 Pulsar Go Client 社区 Master 分支的最新版本。使用云梯 STKE 容器方式部署。</p><p></p><p><img src=\"https://static001.geekbang.org/wechat/images/17/170c7e0937bcd0427891f66d929761d0.png\" /></p><p></p><p>本文接下来将介绍 Pulsar 客户端在多种场景下的性能调优，分别针对项目在使用 Pulsar 的过程中遇到的客户端生产超时、客户端频繁断开等情况进行原因解析，并提供我们的解决方案，供大家参考。</p><p></p><p></p><h2>客戶端性能调优：问题与方案</h2><p></p><p></p><p></p><h3>调优一：客户端生产超时，服务器端排查</h3><p></p><p></p><p>在大集群下，导致客户端生产消息耗时较长或生产超时的原因有很多，我们先来看几个服务器端的原因，包括：</p><p></p><p>消息确认信息过大（确认空洞）Pulsar-io 线程卡死Ledger 切换耗时过长BookKeeper-io 单线程耗时过长DEBUG 级别日志影响Topic 分区数据分布不均</p><p></p><p>接下来，针对每个可能的服务器端原因，我们逐个进行解析。</p><p></p><p>解析 1：消费确认信息过大（确认空洞）</p><p></p><p>与 Kafka、RocketMQ、TubeMQ 等不同，Apache Pulsar 不仅仅会针对每个订阅的消费进度保存一个最小的确认位置（即这个位置之前的消息都已经被确认已消费），也会针对这个位置之后且已经收到确认响应的消息，用 range 区间段的方式保存确认信息。</p><p></p><p>如下图所示：</p><p></p><p><img src=\"https://static001.geekbang.org/wechat/images/91/913f450f287a5dbf42717f8bb1ce46f9.png\" /></p><p></p><p>另外，由于 Pulsar 的每个分区都会对应一个订阅组下的所有消费者。Broker 向客户端推送消息的时候，通过轮询的方式（此处指 Shared 共享订阅；Key_Shared 订阅是通过 key 与一个消费者做关联来进行推送）给每个消费者推送一部分消息。每个消费者分别确认一部分消息后，Broker 端可能会保存很多这种确认区段信息。如下图所示：</p><p></p><p><img src=\"https://static001.geekbang.org/wechat/images/b0/b074907be6e59e80dbac5fa1f4eddb21.png\" /></p><p></p><p>确认空洞是两个连续区间之间的点，用于表示确认信息的区间段的个数。确认空洞受相同订阅组下消费者个数的多少、消费者消费进度的快慢等因素的影响。空洞较多或特别多即表示消费确认的信息非常大。</p><p></p><p>Pulsar 会周期性地将每个消费组的确认信息组成一个 Entry，写入到 Bookie 中进行存储，写入流程与普通消息写入流程一样。因此当消费组的消费确认空洞比较多、消费确认信息比较大、写入比较频繁的时候，会对系统的整体响应机制产生压力，在客户端体现为生产耗时增长、生产超时增多、耗时毛刺明显等现象。</p><p></p><p>在此情况下，可以通过减少消费者个数、提高消费者消费速率、调整保存确认信息的频率和保存的 range 段的个数等方式处理确认空洞。</p><p></p><p>解析 2：Pulsar-io 线程卡死</p><p></p><p>Pulsar-io 线程池是 Pulsar Broker 端用于处理客户端请求的线程池。当这里的线程处理慢或卡住的时候，会导致客户端生产超时、连接断连等。Pulsar-io 线程池的问题，可以通过 jstack 信息进行分析，在 Broker 端体现为存在大量的 CLOSE_WAIT 状态的连接，如下图所示：</p><p></p><p>Pulsar-io 线程池卡住的现象，一般为服务器端代码 bug 导致，目前处理过的有：</p><p></p><p>部分并发场景产生的死锁；异步编程 Future 异常分支未处理结束等。</p><p></p><p>除了程序自身的 bug 外，配置也可能引起线程池卡住。如果 Pulsar-io 线程池的线程长时间处于运行状态，在机器 CPU 资源足够的情况下，可以通过变更 broker.conf 中的 numioThreads 参数来调整 Pulsar-io 线程池中的工作线程个数，来提高程序的并行处理性能。</p><p></p><p>注意：Pulsar-io 线程池繁忙，本身并不会导致问题。 但是，Broker 端有一个后台线程，会周期的判断每一个 Channel（连接）有没有在阈值时间内收到客户端的请求信息。如果没有收到，Broker 会主动的关闭这个连接（相反，客户端 SDK 中也有类似的逻辑）。因此，当 Pulsar-io 线程池被卡住或者处理慢的时候，客户端会出现频繁的断连 - 重联的现象。</p><p></p><p>解析 3：Ledger 切换耗时过长</p><p></p><p>Ledger 作为 Pulsar 单个分区消息的一个逻辑组织单位，每个 Ledger 下包含一定大小和数量的 Entry，而每个 Entry 下会保存至少一条消息（ batch 参数开启后，可能是多条）。每个 Ledger 在满足一定的条件时，如包含的 Entry 数量、总的消息大小、存活的时间三个维度中的任何一个超过配置限制，都会触发 Ledger 的切换。</p><p></p><p>Ledger 切换时间耗时比较长的现象如下：</p><p></p><p><img src=\"https://static001.geekbang.org/wechat/images/64/6400920f054e25bf88b990c03701e530.png\" /></p><p></p><p>当 Ledger 发生切换时，Broker 端新接收到或还未处理完的消息会放在 appendingQueue 队列中，当新的 Ledger 创建完成后，会继续处理这个队列中的数据，保证消息不丢失。</p><p></p><p>因此，当 Ledger 切换过程比较慢时会导致消息生产的耗时比较长甚至超时。这个场景下，一般需要关注下 ZooKeeper 的性能，排查下 ZooKeeper 所在机器的性能和 ZooKeeper 进程的 GC 状况。</p><p></p><p>解析 4：BookKeeper-io 单线程耗时过长</p><p></p><p>目前 Pulsar 集群中，BookKeeper 的版本要相对比较稳定，一般通过调整相应的客户端线程个数、保存数据时的 E、QW、QA 等参数可以达到预期的性能。</p><p></p><p>如果通过 Broker 的 jstack 信息发现 BookKeeper 客户端的 Bookkeeper-io 线程池比较繁忙时或线程池中的单个线程比较繁忙时，首先要排查 ZooKeeper、Bookie 进程的 Full GC 情况。如果没有问题，可以考虑调整 Bookkeeper-io 线程池的线程个数和 Topic 的分区数。</p><p></p><p>解析 5：Debug 级别日志影响</p><p></p><p>在日志级别下，影响生产耗时的场景一般出现在 Java 客户端。如客户端业务引入的是 Log4j，使用的是 Log4j 的日志输出方式，同时开启了 Debug 级别的日志则会对 Pulsar Client SDK 的性能有一定的影响。建议使用 Pulsar Java 程序引入 Log4j 或 Log4j + SLF4J 的方式输出日志。同时，针对 Pulsar 包调整日志级别至少到 INFO 或 ERROR 级别。在比较夸张的情况下，Debug 日志影响生产耗时的线程能将生产耗时拉长到秒级别，调整后降低到正常水平（毫秒级）。具体现象如下：</p><p></p><p><img src=\"https://static001.geekbang.org/wechat/images/5e/5e8dc17091c7cb0e63dba9386fc44ee1.png\" /></p><p></p><p>在消息量特别大的场景下，服务器端的 Pulsar 集群需要关闭 Broker、Bookie 端的 Debug 级别的日志打印（建议线网环境），直接将日志调整至 INFO 或 ERROR 级别。</p><p></p><p>解析 6：Topic 分区分布不均</p><p></p><p>Pulsar 会在每个 Namespace 级别配置 bundles ，默认 4 个，如下图所示。每个 bundle range 范围会与一个 Broker 关联，而每个 Topic 的每个分区会经过 hash 运算，落到对应的 Broker 进行生产和消费。当过多的 Topic 分区落入到相同的 Broker 上面，会导致这个 Broker 上面的负载过高，影响消息的生产和消费效率。</p><p></p><p><img src=\"https://static001.geekbang.org/wechat/images/74/74f8523e57bb6436925c8be4486ad059.png\" /></p><p></p><p>Data 项目在开始部署的时候，每个 Topic 的分区数和每个 Namespace 的 bundle 数都比较少。通过调整 Topic 的分区个数和 bundle 的分割个数，使得 Topic 的分区在 Broker 上面达到逐步均衡分布的目的。</p><p></p><p>在 bundle 的动态分割和 Topic 的分布调整上，Pulsar 还是有很大的提升空间，需要在 bundle 的分割算法（目前支持 range_equally_divide、topic_count_equally_divide，默认目前支持 range_equally_divide，建议使用 topic_count_equally_divide）、Topic 分区的分布层面，在保证系统稳定、负载均衡的情况下做进一步的提升。</p><p></p><p></p><h3>调优二：客户端频繁断开与重连</h3><p></p><p></p><p>客户端断连 / 重连的原因有很多，结合腾讯 Data 项目场景，我们总结出客户端 SDK 导致断连的主要有如下几个原因，主要包括：</p><p></p><p>客户端超时断连 - 重连机制Go SDK 的异常处理Go SDK 生产者 sequence id 处理消费者大量、频繁的创建和销毁</p><p></p><p>下面依次为大家解析这些问题的原因与解决方案。</p><p></p><p>解析 1：客户端超时断连 - 重连机制</p><p></p><p>Pulsar 客户端 SDK 中有与 Broker 端类似逻辑（可参考 # 解析 2 部分内容），周期判断是否在阈值的时间内收到服务器端的数据，如果没有收到则会断开连接。</p><p></p><p>这种现象，排除服务器端问题的前提下，一般问题出现在客户端的机器资源比较少，且使用率比较高的情况，导致应用程序没有足够的 CPU 能力处理服务器端的数据。此种情况，可以调整客户端的业务逻辑或部署方式，进行规避处理。</p><p></p><p>解析 2：Go SDK 的异常处理</p><p></p><p>Pulsar 社区提供多语言的客户端的接入能力，如支持 Java、Go、C++、Python 等。但是除了 Java 和 Go 语言客户端外，其他的语言实现相对要弱一些。Go 语言的 SDK 相对于 Java 语言 SDK 还有很多地方需要完善和细化，比方说在细节处理上与 Java 语言 SDK 相比还不够细腻。</p><p></p><p>如收到服务器端的异常时，Java SDK 能够区分哪些异常需要销毁连接重连、哪些异常不用销毁连接（如 ServerError_TooManyRequests），但 Go 客户端会直接销毁 Channel ，重新创建。</p><p></p><p>解析 3：Go SDK 生产者 Sequence id 处理</p><p></p><p>发送消息后，低版本的 Go SDK 生产者会收到 Broker 的响应。如果响应消息中的 sequenceID 与本端维护的队列头部的 sequenceID 不相等时会直接断开连接——这在部分场景下，会导致误断，需要区分小于和大于等于两种场景。</p><p></p><p>这里描述的场景和解析 1- 客户端超时中的部分异常场景，已经在高版本 Go SDK 中做了细化和处理，建议大家在选用 Go SDK 时尽量选用新的版本使用。目前，Pulsar Go SDK 也在快速的迭代中，欢迎感兴趣的同学一起参与和贡献。</p><p></p><p>解析 4：消费者大量且频繁地创建和销毁</p><p></p><p>集群运维过程中在更新 Topic 的分区数后，消费者会大量且频繁地创建和销毁。针对这个场景，我们已排查到是 SDK &nbsp;bug 导致，该问题会在 Java 2.6.2 版本出现。运维期间，消费者与 Broker 端已经建立了稳定的连接；运维过程中，因业务消息量的增长需求，需要调整 Topic 的分区数。客户端在不需要重启的前提下，感知到了服务器端的调整，开始创建新增分区的消费者，这是因为处理逻辑的 bug，会导致客户端大量且频繁地反复创建消费者。如果你也遇到类似问题，建议升级 Java 客户端的版本。</p><p></p><p>除了上面的断连 - 重连场景外，在我们腾讯 Data 项目的客户端还遇到过 Pod 频繁重启的问题。经过排查和分析，我们确定是客户端出现异常时，抛出 Panic 错误导致。建议在业务实现时，要考虑相关的容错场景，在实现逻辑层面进行一定程度的规避。</p><p></p><p></p><h3>调优三：升级 ZooKeeper</h3><p></p><p></p><p>由于我们腾讯 Data 项目中使用的 Pulsar 集群消息量比较大，机器的负载也相对较高。涉及到 ZooKeeper，我们开始使用的是 ZooKeeper 3.4.6 版本。在日常运维过程中，整个集群多次触发 ZooKeeper 的一个 bug，现象如下截图所示：</p><p></p><p><img src=\"https://static001.geekbang.org/wechat/images/eb/eb9f430cad5d443817e00eaa46599786.png\" /></p><p></p><p>当前，ZooKeeper 项目已经修复该 Bug，感兴趣的小伙伴可以点击该连接查看详情：<a href=\"https://issues.apache.org/jira/browse/ZOOKEEPER-2044%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%9C%A8\">https://issues.apache.org/jira/browse/ZOOKEEPER-2044。因此，在</a>\" Pulsar 集群部署的时候建议打上相应的补丁或升级 ZooKeeper 版本。在腾讯 Data 项目中，我们则是选择将 ZooKeeper 版本升级到 3.6.3 进行了对应处理。</p><p></p><p></p><h2>小结：Pulsar 集群运维排查指南</h2><p></p><p></p><p>不同的业务有不同的场景和要求，接入和运维 Apache Pulsar 集群时遇到的问题，可能也不太一样，但我们还是能从问题排查角度方面做个梳理，以便找到相应规律提升效率。</p><p></p><p>针对 Apache Pulsar 集群运维过程中遇到的问题，如生产耗时长、生产超时（timeout）、消息推送慢、消费堆积等，如果日志中没有什么明显的或有价值的异常（Exception）、错误（Error） 之类的信息时，可以从如下几个方面进行排查：</p><p></p><p>集群资源配置及使用现状客户端消费状况消息确认信息线程状态日志分析</p><p></p><p>下面针对每个方面做个简要说明。</p><p></p><p>1. 集群资源配置及使用现状</p><p></p><p>首先，需要排查进程的资源配置是否能够满足当前系统负载状况。可以通过 Pulsar 集群监控仪表盘平台查看 Broker、Bookie、ZooKeeper 的 CPU、内存及磁盘 IO 的状态。</p><p></p><p>其次，查看 Java 进程的 GC 情况（特别是 Full GC 情况），处理 Full GC 频繁的进程。如果是资源配置方面的问题，需要集群管理人员或者运维人员调整集群的资源配置。</p><p></p><p>2. 客户端消费状况</p><p></p><p>可以排查消费能力不足引起的反压（背压）。出现背压的现象一般是存在消费者进程，但是收不到消息或缓慢收到消息。</p><p></p><p>可以通过 Pulsar 管理命令，查看受影响 Topic 的统计信息（stats），可重点关注未确认消息数量数量（unackedMessages）、backlog 数量和消费订阅类型，以及处理未确认消息（unackmessage）比较大的订阅 / 消费者。如果未确认消息（unackmessage）数量过多，会影响 Broker 向客户端的消息分发推送。这类问题一般是业务侧的代码处理有问题，需要业务侧排查是否有异常分支，没有进行消息的 ack 处理。</p><p></p><p>3. 消息确认信息</p><p></p><p>如果集群生产耗时比较长或生产耗时毛刺比较多，除了系统资源配置方面排查外，还需要查看是否有过大的消息确认信息。</p><p></p><p>查看是否有过大的确认空洞信息，可以通过管理命令针对单个 Topic 使用 stats-internal 信息，查看订阅组中的 individuallyDeletedMessages 字段保存的信息大小。</p><p></p><p>消息确认信息的保存过程与消息的保存过程是一样的，过大的确认信息如果频繁下发存储，则会对集群存储造成压力，进而影响消息的生产耗时。</p><p></p><p>4. 线程状态</p><p></p><p>如果经过上面的步骤，问题还没有分析清楚，则需要再排查下 Broker 端的线程状态，主要关注 pulsar-io、bookkeeper-io、bookkeeper-ml-workers-OrderedExecutor 线程池的状态，查看是否有线程池资源不够或者线程池中某个线程被长期占用。</p><p></p><p>可以使用 top -p PID(具体 pid) H 命令，查看当前 CPU 占用比较大的线程，结合 jstack 信息找到具体的线程。</p><p></p><p>5. 日志分析</p><p></p><p>如果经过上面所述步骤仍然没有确认问题来源，就需要进一步查看日志，找到含有有价值的信息，并结合客户端、Broker 和 Bookie 的日志及业务的使用特点、问题出现时的场景、最近的操作等进行综合分析。</p><p></p><p></p><h2>回顾与计划</h2><p></p><p></p><p>上面我们花了很大篇幅来介绍客户端性能调优的内容，给到客户端生产超时、频繁断开与重连、ZooKeeper 等相应的排查思路与解决方案，并汇总了常见 Pulsar 集群问题排查指南 5 条建议，为在大消息量、多节点、一个订阅里高达数千消费者的 Pulsar 应用场景运维提供参考。</p><p></p><p>当然，我们对 Pulsar 集群的调优不会停止，也会继续深入并参与社区项目共建。</p><p></p><p>由于单个 Topic 对应的客户端比较多，每个客户端所在的 Pod、Client 内部会针对每个 Topic 创建大量的生产者和消费者。由此就对 Pulsar SDK 在断连、重连、生产等细节的处理方面的要求比较高，对各种细节处理流程都会非常的敏感。SDK 内部处理比较粗糙的地方会导致大面积的重连，进而影响生产和消费。目前，Pulsar Go SDK 在很多细节方面处理不够细腻，与 Pulsar Java SDK 的处理有很多不一样的地方，需要持续优化和完善。腾讯 TEG 数据平台 MQ 团队也在积极参与到社区，与社区共建逐步完善 Go SDK 版本。</p><p></p><p>另外，针对腾讯 Data 项目的特大规模和业务特点，Broker 端需要处理大量的元数据信息，后续 Broker 自身的配置仍需要做部分的配置和持续调整。同时，我们除了扩容机器资源外，还计划在 Apache Pulsar 的读 / 写线程数、Entry 缓存大小、Bookie 读 / 写 Cache 配置、Bookie 读写线程数等配置方面做进一步的调优处理。</p><p></p><p>作者简介：</p><p></p><p>鲍明宇，腾讯高级软件工程师，目前就职于腾讯 TEG 数据平台部，负责 Apache Pulsar、Apache Inlong、DB 数据采集等项目的开发工作。目前专注于大数据领域，消息中间件、大数据数据接入等方向，拥有 10 年 Java 相关开发经验。</p><p></p><p>张大伟，腾讯高级软件工程师，Apache Pulsar Committer，目前就职于腾讯 TEG 数据平台部，主要负责 Apache Pulsar 项目相关工作。目前专注于 MQ 和数据实时处理等领域，拥有 6 年大数据平台相关开发经验。</p><p></p><p>关于 Apache Pulsar</p><p></p><p>云原生时代消息队列和流融合系统，提供统一的消费模型，支持消息队列和流两种场景，既能为队列场景提供企业级读写服务质量和强一致性保障，又能为流场景提供高吞吐、低延迟；采用存储计算分离架构，支持大集群、多租户、百万级 Topic、跨地域数据复制、持久化存储、分层存储、高可扩展性等企业级和金融级功能。</p><p></p><p>GitHub 地址：<a href=\"http://github.com/apache/pulsar/\">http://github.com/apache/pulsar/</a>\"</p><p></p>",
    "publish_time": "2022-07-08 19:50:48",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]