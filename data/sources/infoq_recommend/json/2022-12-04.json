[
  {
    "title": "异步代码审查优化实践",
    "url": "https://www.infoq.cn/article/JkxKPqJTNwTTa2XjgBJq",
    "summary": "<p>几十年前，开源软件使我们能够让世界上的任何人都可以为公共项目的代码库做出贡献。贡献者可能在世界的不同角落，在截然不同的时区，甚至不知道彼此的名字。项目的贡献者提出改进想法，做出变更，并提出拉取请求（PR）。然后，项目的所有者可以审查变更，并在合适的时候，决定他们是否愿意集成该提议的变更。</p><p>&nbsp;</p><p>许多年后，拉取请求和异步工作方式成为产品开发团队中开发人员审查彼此工作的主要方式。但是，我们必须非常谨慎地采用来自上下文的解决方案，这些解决方案并不一定能优化产品开发团队在日常工作中所做的相同工作。</p><p>&nbsp;</p><p>本文深入探讨异步代码审查过程的吞吐量和质量，这是产品开发团队非常重要的优化维度。它还解释了为什么共创（co-creation）模式——结对（Pair）和Mob编程——作为一种替代工作方式能够对这两个维度进行优化，而不需要在它们之间进行权衡。</p><p>&nbsp;</p><p></p><h2>异步代码审查</h2><p></p><p>&nbsp;</p><p>在我有机会与之合作或观察的大多数团队中，开发人员都是单独处理自己的工作项。起初，这听起来像是一个明智的想法，但我们常常忘记我们与团队中其他人的融合程度。毕竟，我们不是无缘无故就会同属一个团队的，对吧？代码审查就是这些集成点之一，开发人员试图使用代码审查作为构建质量和获得人工判断的手段，将工作向下游推进，直到最终投入到生产环境中。</p><p>&nbsp;</p><p>它的工作方式是，一旦开发人员认为他们已经完成了编码，他们就会邀请团队其他成员来审查他们的工作。现在，这通常是通过提交拉取请求并邀请他人进行审查来完成的。但是，由于审查人员忙于他们自己的工作项及团队所产生的其他大量事情，他们往往无法立即做出响应。因此，当作者在等待审查时，他们也希望能让自己更有效率，因此他们会开始做其他事情，而不是在等待审查。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/6a/6a1e26312bec515f1d83f1808479e47c.png\" /></p><p></p><p>图1——基于PR的异步代码审查</p><p>&nbsp;</p><p>最终，当审查人员有空并提供了关于该PR的反馈和/或要求更改时，PR的作者却不在了，因为他们正忙于其他事情。这种延迟的“乒乓”（Ping-Pong）沟通方式可能会持续几天/几周和几次迭代，直到作者和审查人员达成一个他们都满意的解决方案，并将其合并到主干分支中。</p><p>&nbsp;</p><p></p><h2>异步代码审查研究</h2><p></p><p>在我的职业生涯我有机会指导和建议的团队中，有相当一部分人都对尝试不同于异步代码审查的工作方式感到好奇。他们不确定的是，他们目前的表现如何，以及什么样的指标可以帮助他们理解这一点。</p><p>&nbsp;</p><p>此外，由于有过极限编程（XP）、精益和约束理论的背景，我很好奇在异步代码审查领域看到的一些指标，所以我决定做一项研究。它一开始时很小，但后来变得相当广泛了，我分析了40000多个PR，它们来自40多个非常活跃的产品开发团队的代码库，这些团队都在执行基于PR的异步代码审查。</p><p>&nbsp;</p><p>在研究过程中，我突然想到了一些系统性的见解。从个人和轶事的经验来看，其中一些是我期望看到的，但有些是意料之外的。</p><p>&nbsp;</p><p></p><h2>大的拉取请求抑制了构建质量的能力</h2><p></p><p>&nbsp;</p><p>PR越大，越有可能患上所谓的“LGTM综合征”。如果PR很大，审查人员就没有那么大的动力来提高质量。他们花了很长时间来审查，来与作者反复讨论交流，拖了几天/几周的时间，而交付的压力也越来越大。在工作到达审查人员手中时，已经太晚了，也很难纠正。他们往往倾向于放弃指导工作的能力，只评论“LGTM”（我觉得不错），并批准PR，希望能在之后提高质量。当然，之后提高质量这种情况很少发生。</p><p>&nbsp;</p><p>即使是审查人员想要投入时间、精力和耐心来审查大的PR，如果作者在征求反馈之前做了很多更改，如果他们在某一点上走错了方向（这种可能性会随着工作量的增加而增加），那么从情感上来说，脱离他们所采用的解决方案是非常痛苦的。沉没成本谬论开始出现，并且很难抵消。</p><p>&nbsp;</p><p>所有这些要点都是我们在整个行业中分享过的经验，但从数据中看到这些还是很有趣。</p><p>&nbsp;</p><p>在这里，我们有一个散点图，其中每个点代表一个合并的PR。在X轴上，我们以更改的代码行数作为PR的大小规模，在Y轴上，可以看到每个规模的参与度（每100行代码的评论数）。这个数据集只是一个例子，但需要强调的是，这种行为在所有其他分析的数据集中都可以看到。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/ec/eca580953ca24df2ca48c501e02cd374.png\" /></p><p></p><p>图 2——每个规模的参与度散点图</p><p>&nbsp;</p><p>随着PR规模的增加，我们会看到每个规模的参与度变得越来越低。我们有一个基于反馈和邀请人工判断的过程来帮助我们构建质量，但如果系统激励限制了我们获得反馈的能力，这也意味着我们不太可能构建质量。因此，我们最终引入了延迟，代价是无法提高质量。要我说，这是两败俱伤。</p><p>&nbsp;</p><p>为什么大的PR会影响我们构建质量的能力，还有其他原因，这些原因不在研究范围内，但在这里却值得一提。</p><p>&nbsp;</p><p>随着反馈的延迟，上下文往往会衰减，这意味着审查人员更可能难以理解作者决策背后的推理和背景。这使得审查人员不太可能对工作质量做出贡献。</p><p>&nbsp;</p><p>因为它们将一系列的更改捆绑在了一起，所以大的PR更有可能在生产环境中造成问题，这意味着它们更有可能导致大量的返工。根据我的经验，返工的可能性会随着一次引入的变更数量呈指数级增长。</p><p>&nbsp;</p><p>当生产环境中出现问题时，我们还需要花费更长的时间来排查问题并找出导致问题的根源，犹如大海捞针。上下文的丢失，作为同时引入太多更改的次级效应，也是导致故障排除时间更长的另一个原因。</p><p>&nbsp;</p><p></p><h2>小型拉取请求的好处</h2><p></p><p>&nbsp;</p><p>自从我们的行业了解了精益小批量的价值以来，已经有很长一段时间了。较小的PR花费更少的时间来编写，这意味着我们可以更快地得到反馈，并且如果我们走错了方向，我们也可以更早地发现。相比于要在日程安排中花几个小时来审查一份大的PR，审查人员更容易抽出10分钟的时间来审查一个小的PR。这使得PR更有可能得到更快的审查。</p><p>&nbsp;</p><p>此外，由于审查人员能更快地收到反馈邀请，我们可以看到较小的PR比较大的PR参与度要更高。当他们能够尽早提供反馈时，审查人员就会有一种能够为质量做出贡献的感觉。小PR的部署风险也比大PR的低，因为较小的更改可能出错的情况也更少。</p><p>&nbsp;</p><p>此外，如果出现问题，更容易确定导致问题的更改，这意味着我们能够更快地发现并解决故障。所有这些都对DORA的四个关键指标做出了积极的贡献：</p><p>&nbsp;</p><p>部署频率——组织成功发布到生产环境的频率变更的交付周期——从提交到投入生产所需的时间变更失败率——在生产中导致失败的部署的百分比恢复服务的时间——组织从生产故障中恢复所需的时间</p><p>&nbsp;</p><p></p><h2>异步审查中小型拉取请求的吞吐量较低</h2><p></p><p>这项研究中一个令人惊讶的发现是我没有预料到的，并且在所有的数据集中它都存在，那就是围绕每个规模PR等待时间的可视化。</p><p>&nbsp;</p><p>PR等待或排队时间表示PR在队列中所花费的时间，未被处理，等待某人的注意；例如，等待审查人员的审查，等待作者回复评论，或根据审查人员的要求进行更改，批准后等待合并，等等。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/99/99c10d4ce196fa462848f3049e46c35f.png\" /></p><p></p><p>&nbsp;</p><p>图3——按大小规模列出的每个规模的等待时间</p><p>&nbsp;</p><p>正如我们从这个散点图中看到的，当我们减少PR的规模时，团队进行异步代码审查会导致每个PR规模的等待时间呈指数级增长。当我们使PR变小时，这种指数级增长的等待时间也会转化为呈指数级增长的每个规模代码审查的感知成本。</p><p>&nbsp;</p><p>每个规模的等待时间在较小的PR规模上占主导地位的原因之一是，在较小的PR上每个规模的参与度更高，正如我们在每个规模的参与度散点图上看到的那样。随着我们减小PR的规模，异步沟通产生的延迟和延迟成本呈指数级增长。</p><p>&nbsp;</p><p>需要牢记的一件重要的事情是，随着我们每个PR规模等待时间的增加，我们每次PR也都会产生更多的浪费，从而导致我们工作系统中产生更多的累积浪费。因此，随着我们不断缩小PR规模，我们在工作系统中推动变更的能力也受到了指数级的限制。</p><p>&nbsp;</p><p>这一点也得到了平均PR流动效率的支持。</p><p>&nbsp;</p><p>流动效率度量指标表示花费在项目上的时间占项目交付周期的百分比。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/59/599d4b912fcbe0ac4b4090a7c690f8f4.png\" /></p><p></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/7c/7cdc18c917a1cd9570b80247d20690f9.png\" /></p><p></p><p>&nbsp;</p><p>流动效率越低，系统中的浪费就越多，流程的效率就越低，反之亦然。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/79/79680cfbe9b546e8195c8455bf3688d6.png\" /></p><p></p><p>图 4——不同规模的平均流动效率</p><p>&nbsp;</p><p>正如你所看到的，当我们减小PR的规模时，某一点的流动效率急剧下降。这意味着，如果我们将相同数量的代码拆分为多个较小的PR，与在一个较大的PR中执行时相比，我们需要更长的累积交付周期才能将其推送到系统中。随着流程中等待时间的增加，流动效率的分母增加，导致流动效率下降，交付周期增加，吞吐量下降。</p><p>&nbsp;</p><p>因此，通过异步工作方式，我们不得不在损失质量（大的PR）和损失吞吐量（小的PR）之间进行权衡。</p><p>&nbsp;</p><p>有趣的是，当团队将PR规模缩小到超过等待时间开始主导PR交付周期的程度时，他团队就会直观地感受到这种痛苦。</p><p>&nbsp;</p><p></p><h2>系统中的库存会膨胀，直到与交易成本匹配</h2><p></p><p>在精益制造中，有一个称为批量交易成本的概念描述了将一批工作发送到下一加工阶段的成本。在知识工作中，这种成本可以是实际成本（例如美元价值）和/或感知成本，并且可能有多种因素影响它。这个概念之所以非常重要是原因，一个加工阶段的交易成本越高，我们在该阶段前堆积的库存就会越多，以补偿转移批次的成本。</p><p>&nbsp;</p><p>这里有一个来自现实世界的例子。如果电子商务网站的运费是3美元，那么你通常不会订购1美元的商品，对吧？在订购之前，你通常会将其与购物篮中的其他一些物品一起进行批处理。另一方面，当运费非常低甚至免费时（想想亚马逊的Prime），订购低价商品在经济上就会变得合理了。</p><p>&nbsp;</p><p>此外，与在订购前分批处理购物篮中的商品相比，你将在需要时准确地订购商品，而不是仅在等到购物篮中的价值高到足以弥合运费时才订购。这意味着物品也将更快地到达，一个接一个地，而不是等到批次中的最后一个到达时才一起到达。商品的流动增加了。</p><p>&nbsp;</p><p>这里适用于产品开发的一个普遍观点是，任何为了尽快将产品推出市场的努力都必须涉及降低系统中的交易成本，否则，我们将开始在整个工作系统中对库存进行批处理。这反过来又会延迟交付、反馈和我们从客户和生产系统中获得的学习，这意味着我们的学习节奏会减慢。一旦我们的学习节奏减慢，我们就会变得厌恶风险，并倾向于采用更保守的解决方案，因为系统发出的信号表明，学习成本很高。这就是我们工作体系的经济性抑制我们创新能力的方式，因为尝试风险更大的想法在经济上变得不那么可行。如果系统的激励结构强烈反对，那么仅仅要求人们更加规避风险和创新是没有意义的。我们看到的行为是由系统控制的，所以如果我们想看到不同的行为，我们需要在系统上做工作。</p><p>&nbsp;</p><p>现在，当我们谈论交易成本时，系统中的延迟也是其中的一种，因此会激励参与者增加批处理的规模来补偿它。</p><p>&nbsp;</p><p>如果你最喜欢的网上服装店送货需要一周的时间，而你想在决定保留哪一件衣服之前先试穿多件衣服，你可能会订购你正在考虑的所有选项和尺码。相反，如果是当日送达，你可能会订购更少的商品，可能只订购一件，试试看是否合适，如果不合适，再订购下一件。</p><p>&nbsp;</p><p>运行缓慢的测试套件也会发生同样的情况。如果运行测试需要20分钟，我不会在每行代码更改后都运行它们。如此频繁地产生那么多开销没有任何经济意义，所以我将减少测试的次数，这意味着在得到反馈之前对系统进行了更多的更改。这让我退回到更大的批次，正如前面提到的，这带来了一系列我们想要避免的问题。</p><p>&nbsp;</p><p>在异步代码审查的世界中，如果我花10分钟做一个更改，花2小时才能获得审查，那么这个更改的等待/工作时间比是120/10=12。换句话说，我们的流动效率只有7.7%，而工作等待的时间是其交付周期的92.3%！该系统显示代码审查的成本很高，这激励了系统中的参与者减少请求的频率，这意味着在请求之前进行更多的更改，这就意味着回到了更大的PR中。一个昂贵的流程永远不会激励进行小的变更，这意味着小步重构和增量开发变得不太可能。因此，在流程中具有较低延迟和较低等待/工作时间比的团队，通过启用随着时间推移不断进行的小变更流程，更有可能保持代码库的健康，并保持其对更改的响应。</p><p>&nbsp;</p><p>换一种说法，如果流程中存在延迟（这是异步工作方式所固有的），我总能找到一个足够小的批处理规模，但流动效率非常差，因此使用这么小的批处理规模没有任何经济意义。这反过来又激励我们回到更大的批次。</p><p>&nbsp;</p><p></p><blockquote>虽然你可能忽视了经济学，但它不会忽视你。——Don Reinertsen</blockquote><p></p><p>&nbsp;</p><p>延迟和异步工作方式的另一个问题是，它们使人们更有可能引入更多的东西，增加在制品（WIP）库存和上下文的切换。我们在“图1——基于PR的异步代码审查”中看到了Ema和Luka的情况。当Ema等待Luka审查时，她认为自己可以开始做其他事情了。根据Little定律，平均周期时间与平均在制品成正比，与平均吞吐量成反比。这意味着，像Ema在等待时所做的那样，投入更多的工作会增加延迟，从而使周期时间增加，吞吐量下降。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/ce/ce0170685a90d4118c215d349dec0044.png\" /></p><p></p><p>&nbsp;</p><p>当我们单独工作并异步审查代码时，WIP通常比我们想象的要高得多。如果我们有4个人在一个团队中，并且他们单独工作，我们可能会认为我们有4件事情在进行中。但当系统出现延迟时，我们依赖于从其他人那里获得反馈，就像我们在代码审查中所做的那样，很可能我们最终会得到至少两倍的WIP。Ema在等待时会做更多工作，这种情况也会发生在团队其他人身上，因为他们也需要等待各自的PR审查。因此，我们最终完成了8件事。根据我的经验，看到团队的WIP数量是团队人数的几倍并不奇怪。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/7e/7e5f14ded1d371fb434a4d927c565b45.png\" /></p><p></p><p>图5——高WIP数量导致更多WIP数量的<a href=\"https://thesystemsthinker.com/causal-loop-construction-the-basics/\">因果循环图</a>\"</p><p>&nbsp;</p><p>与此同时，具有讽刺意味的是，如果你要问Ema和团队中的其他人，他们可能会说他们在这段时间里感觉很有效率。系统思考最重要的教训之一是，系统往往会恶化，尽管我们努力在改进它们。最直观的解决方案往往与那些有助于将系统转向更理想状态的解决方案相去甚远。</p><p>&nbsp;</p><p>这里的一个普遍观点是，高WIP的二级效应是它会自我强化。我们在系统中拥有的WIP越多，响应就越慢，等待时间和延迟就越长，这反过来又激励了更高的WIP，因为人们在需要等待的时候拉进了更多的东西。当人类面临延迟时，他们很擅长堆积库存和增加WIP。</p><p>&nbsp;</p><p></p><h2>共创模式</h2><p></p><p>&nbsp;</p><p>我所做的研究得出的结论是，为了在我们减少PR的平均大小规模时不以指数的方式损失吞吐量，作者和审查人员需要以指数的方式更快地响应对方的请求。这最终导致了我们采用同步、连续的代码审查和共创建模式。</p><p>&nbsp;</p><p>共创（Co-creation）模式、结对（Pair）和Mob编程是我们在同一时间一起处理同一件事的工作方式。我们一起开始，一起工作，一起完成。结对编程【1】是一种技术，两个开发人员在同一件事情上工作，而Mob编程【2】更专注于在会话中掌握将功能交付给客户所需的所有技能。根据手头工作的特性，这可能不仅涉及开发人员，还会涉及其他技能（设计、产品、内容……）。</p><p>&nbsp;</p><p>这个想法是让人们去解决问题，而不是把问题转移到人身上；后者涉及到问题拆分，并给每个人一个问题的部分，让他们单独解决，然后尝试重新组装整个问题。当我们蜂拥而至地处理问题时，作为副产品，我们在交互过程中减少了延迟，这意味着将工作交付给客户的时间更短了。想想看：当生产出现中断时，我们该如何处理？通常，所有需要解决问题的人都会接到电话，然后共同努力解决问题。</p><p>&nbsp;</p><p>我们这样做的原因是我们希望尽快解决问题，这样我们就可以缩短恢复时间，从而将影响降至最低。但重要的一点是，我们可以使用相同的工作方式来最大限度地缩短交付周期。这反过来又加快了学习节奏，帮助我们更快地消除那些不起作用的解决方案，从而最大限度地提高团队的价值。</p><p>&nbsp;</p><p>约束理论的创始人Eli Goldratt对紧急情况是一个很好的学习机会有很多话要说。在紧急情况下使用的规则违反了我们的标准规则，挑战了毫无疑问的假设，但我们很少问自己，我们的“特殊规则”是否真的应该成为我们的标准规则。</p><p>&nbsp;</p><p>此外，作为共创的副产品，我们获得的激励结构也与典型的“你烧，我刮”方法非常不同。我们没有“作者和审查者”的基调，而是让人们一起建设并负责使之运行起来。</p><p>&nbsp;</p><p></p><blockquote>……我们的制作和检查系统，如果适用于制作吐司，它会表达：“你烧，我刮。”——W. Edwards Deming</blockquote><p></p><p>&nbsp;</p><p>我听到的支持PR和异步代码审查的一个典型论点是：“代码应该由没有参与构建流程的人来审查”。但是，根据我的经验，延迟和脱离上下文的审查实际上是这个流程的缺点，而不是优点。</p><p>&nbsp;</p><p>如果提供了脱离上下文且延迟审查的人同时编写了代码，那么是什么保证了他们不会提供相同或更好的反馈呢？这是一件很难甚至是不可能衡量的事情，但根据我的经验，更多的上下文、更少的流程延迟和更快的沟通有助于提高质量和更及时、更便宜地整合反馈。我猜这也是我观察到的共创团队返工至少少了一个数量级的原因，其中包括生产中的缺陷和问题更少。</p><p>&nbsp;</p><p></p><h2>吞吐量和质量两个都要</h2><p></p><p>&nbsp;</p><p>我知道这听起来像乌托邦，但实际上我们可以鱼与熊掌兼得。我们可以同时拥有高吞吐量和高质量。这也不是第一次发现这是可能的，因为DORA研究表明稳定性和吞吐量之间存在“与”（AND）而非“或”（OR）的关系。我们要么有吞吐量和稳定性，要么两者都没有。</p><p>&nbsp;</p><p>共创模式改变系统经济性的方式是，通过组队（Pair）和Mob编程，审查延迟和等待时间在设计上基本上是不存在的。当有人物理或虚拟地坐在我旁边，做着和我一样的事情时，他们能够对我在代码中所做的每一个原子更改进行持续的代码审查，反之亦然。该流程本身保证了参与者的可用性，这是必要的，以便立即进行代码审查，从而不会因PR较小而损失吞吐量。</p><p>&nbsp;</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/23/2353c007613f2da8a4fb85268448a91c.png\" /></p><p></p><p>&nbsp;</p><p>图6——减少交易成本驱动更小的最佳批处理规模</p><p>特色动画：<a href=\"https://lastcallmedia.com/blog/why-devops-most-important-tech-strategy-today\">Kelly Albrecht</a>\"</p><p>&nbsp;</p><p>实际上，用精益的术语来说，我们能够最大限度地降低交易成本，因为我们将代码审查的成本降到了最低，实现了更小的批次，并增加了系统的流动。PR的规模实际上变成了一个最小的、原子性的更改，甚至可能低至一行代码。</p><p>&nbsp;</p><p>当我们有了即时可用性和免费的代码审查成本时，我能够得到更及时、更频繁和更丰富的反馈（口头的、即时的和来自上下文的）。这对于提高质量至关重要，但作为副产品，它也减少了返工量。原因是，当我们走错了方向时，我们避免了长时间的偏离，因为路线修正发生得更快，这会导致更多的时间用于增值工作，从而提高生产率。我们达到了质量保证速度的状态。</p><p>&nbsp;</p><p>另一个经常被忽视的优势是，一起工作不仅可以最大限度地缩短等待时间。通常，它还减少了处理/工作时间，因为其他人通常知道如何以更快的方式完成某件事，这意味着处理时间也会减少。这反过来又转化为更短的交付周期和更高的吞吐量。</p><p>&nbsp;</p><p>当我们通过持续的代码审查实现快速的路线修正时，我们也倾向于抵消沉没成本谬误，并爱上解决方案。我唯一要失去的就是我刚刚做的一个最小的变更。与不得不放弃一周的努力相比，我可以更好地处理这个问题。因此，我们更可能提高质量。</p><p>&nbsp;</p><p>除此之外，与异步代码审查相反，作为同时处理同一件事情的副产品，我们减少了在制品，这加快了系统中的工作流程。如前所述，需要集成的异步工作使我们倾向于引入更多的工作项，这使事情变得更糟。在一个4人团队的情况下，当他们单独工作时，他们很容易得到两倍的WIP。在结对编程的情况下，他们的WIP为2，少了4倍！使用Mob编程，WIP就更少了。这是一个大幅减少WIP的机会，这也是不容忽视的。</p><p>&nbsp;</p><p></p><h2>常见的误解</h2><p></p><p>&nbsp;</p><p>说了这么多，我不认为每个人都应该一直做Pair/Mob编程——这是我从怀疑这些做法的人那里听到的一个常见误解。</p><p>&nbsp;</p><p>重点是，我认为，当涉及到工作方式时，我们作为一个行业存在错误的默认设置，大多数时候每个人都是单独工作的。大多数团队以N个1人团队方式运作，而不是N人1个团队的方式。</p><p>&nbsp;</p><p>&nbsp;</p><p>疫情似乎也促成了这一点。从一开始，随着整个行业的远程化，出于某种原因，我们在远程工作和异步工作之间画上了等号。这两个想法是相互正交的。我们既可以远程工作，也可以共创，因此我们既保持了上述共同工作的好处，同时还具有在家工作的灵活性。</p><p>&nbsp;</p><p>我经常被问到的一个问题是：“共创如何允许我们使用在异步工作中所获得的各个时间表的灵活性呢？”有一些团队想要尝试结对编程，但他们遇到了个人日程安排中出现延误的问题，并且在需要时无法找到结对伙伴。这是一个重要的十字路口，在这里，团队通常会走错方向，走向异步。此时的异步需要是对某些事情的反馈。这是关于给定时间表的低流动弹性的反馈。我们可以考虑通过让更多人参与会话来提高团队的弹性，而不是采用异步方式。这就允许了更多的时间表重叠，同时保持了较高的流动效率，并使事情更快地走出大门。Mob编程尤其提供了这种弹性，人们可以根据需要退出并回来。并不是每个人都需要一直在那里。这也不是我们想要的。</p><p>&nbsp;</p><p>现在，如果你有一个团队，其团队成员位于非常遥远的时区，并且在工作日团队成员之间没有太多的重叠，我会质疑组建该团队的决定，而不是跳到异步的马车上。撇开这个话题不说，我都希望一个团队是由工作时间足够重叠的团队成员组成。“足够”的定义可能有所不同，但根据我的经验，至少5小时的重叠时间是一个很好的目标。</p><p>&nbsp;</p><p>有趣的是，它在实践中的表现方式是，个人日程安排的灵活性加上团队的高度弹性实际上是一种优势。通常，与在办公室工作一样，有些人喜欢早点开始新的一天，有些人则喜欢晚点开始。尽早开始工作的人已开始工作，然后其他人加入，然后晚结束工作的人结束一天的工作。由于我们在一天中工作了更长的时间，因此我们可能会更快地完成这项工作，同时人们保持了灵活的个人时间表。这可能是一个双赢的局面。</p><p>&nbsp;</p><p>不幸的是，在这个世界上，大多数人都只有单独工作的经验，学习合作是一项需要时间和耐心才能掌握的新技能。我记得我参加过Woody Zuill关于“Mob编程”的研讨会。在为期三天的研讨会中，他花了第一天整整一天的时间来让人们练习一起工作，及时做出贡献，并用善意、体贴和尊重的态度对待彼此。这些原则是合作的基本规则。老实说，当时花这么多时间在这个话题上我觉得有点多余。但多年来，随着我开始观察并与越来越多试图共创的团队合作时，我明白了为什么专注于学习这些原则和技能是如此重要。</p><p>&nbsp;</p><p>对于那些想要踏上共创之旅的团队来说，进行适当的指导和辅导是非常重要的，尤其是如果团队中没有人有过共创的经验。否则，团队可能会在评估一种技术时，认为他们正在进行结对或Mod编程，而实际上，他们正在做一些非常不同的事情。人们劫持键盘、个人主导对话、过长或根本不存在的轮换、人们被孤立或心不在焉等等，这些都不是共创理念的组成部分，然而，这也是我经常看到团队说“这不适合我们”的原因。他们是对的。但是，首先，我们需要确保我们正在评估的技术是我们认为我们正在评估的。花时间学习更多关于这些实践的知识并获得适当的支持可以帮助我们做到这一点。</p><p>&nbsp;</p><p>另一个关键点是，一起工作可以非常快地解决团队中的潜在问题。当我们单独工作时，按照设计，人与人之间没有太多的互动，因此潜在的问题往往不那么明显，而且延迟时间更长。一旦团队合作困难的问题变得明显，人们往往会倾向于认为“共创不适合我们”。情况可能是这样，但前提是解决团队中出现的特定技术问题不是我们所追求的。该技术只是潜在团队动态的一面镜子。我们可以选择如何处理反馈，但最终，我们不能将没有反馈的问题归咎于技术。</p><p>&nbsp;</p><p>然而，合作不应该强加于任何人。毕竟，你可能会试一试，发现它真的不是你的菜。每个人都应该努力寻找最能满足自己需求的环境。希望这能让我们更接近一个让更多人在工作中找到快乐的状态。</p><p>&nbsp;</p><p></p><h2>总结</h2><p></p><p>&nbsp;</p><p>在异步代码审查中减少PR大小规模只能让你走到这一步。在某种程度上，较小的PR规模在经济上是不可行的，我们必须在吞吐量和质量之间做出权衡。从异步代码审查转移到结对代码审查，再到一起工作（Pair/Mob编程），我们行业中的许多团队都可以从中受益。</p><p>&nbsp;</p><p>还有很多其他好处【3】，团队可能会考虑尝试一下，根据我的经验，这是一种工作方式，它为我有机会与之合作的团队带来了如此多的乐趣和生产力，我相信这是一种能力，能为采用团队和公司提供竞争优势。</p><p>&nbsp;</p><p></p><h2>参考文献</h2><p></p><p><a href=\"https://martinfowler.com/articles/on-pair-programming.html\">结对编程</a>\"<a href=\"https://www.agilealliance.org/resources/experience-reports/mob-programming-agile2014\">Mob编程——一种全团队方法</a>\"<a href=\"https://www.youtube.com/watch?v=NJWeM7beAGE\">共创的好处 //超越编码播客#27——Patrick Akil 和 Dragan Stepanović</a>\"</p><p>&nbsp;</p><p>作者介绍：</p><p>&nbsp;</p><p>Dragan Stepanović常驻柏林，作为首席工程师，他帮助公司发展他们的工程文化，克服瓶颈，并最大限度地发挥价值。他正在寻找更好的工作方式，探索光谱的两端，并帮助团队和组织尝试反直觉的想法，这些想法最初没有多大意义，但令人惊讶的是，这些想法完全相反。他喜欢无休止地讨论极限编程、约束理论、系统思考、精益和社会情感技术主题。</p><p>&nbsp;</p><p>原文链接：</p><p><a href=\"https://www.infoq.com/articles/co-creation-patterns-software-development/\">https://www.infoq.com/articles/co-creation-patterns-software-development/</a>\"几十年前，开源软件使我们能够让世界上的任何人都可以为公共项目的代码库做出贡献。贡献者可能在世界的不同角落，在截然不同的时区，甚至不知道彼此的名字。项目的贡献者提出改进想法，做出变更，并提出拉取请求（PR）。然后，项目的所有者可以审查变更，并在合适的时候，决定他们是否愿意集成该提议的变更。</p><p>&nbsp;</p><p>许多年后，拉取请求和异步工作方式成为产品开发团队中开发人员审查彼此工作的主要方式。但是，我们必须非常谨慎地采用来自上下文的解决方案，这些解决方案并不一定能优化产品开发团队在日常工作中所做的相同工作。</p><p>&nbsp;</p><p>本文深入探讨异步代码审查过程的吞吐量和质量，这是产品开发团队非常重要的优化维度。它还解释了为什么共创（co-creation）模式——结对（Pair）和Mob编程——作为一种替代工作方式能够对这两个维度进行优化，而不需要在它们之间进行权衡。</p><p>&nbsp;</p><p></p><h2>异步代码审查</h2><p></p><p>&nbsp;</p><p>在我有机会与之合作或观察的大多数团队中，开发人员都是单独处理自己的工作项。起初，这听起来像是一个明智的想法，但我们常常忘记我们与团队中其他人的融合程度。毕竟，我们不是无缘无故就会同属一个团队的，对吧？代码审查就是这些集成点之一，开发人员试图使用代码审查作为构建质量和获得人工判断的手段，将工作向下游推进，直到最终投入到生产环境中。</p><p>&nbsp;</p><p>它的工作方式是，一旦开发人员认为他们已经完成了编码，他们就会邀请团队其他成员来审查他们的工作。现在，这通常是通过提交拉取请求并邀请他人进行审查来完成的。但是，由于审查人员忙于他们自己的工作项及团队所产生的其他大量事情，他们往往无法立即做出响应。因此，当作者在等待审查时，他们也希望能让自己更有效率，因此他们会开始做其他事情，而不是在等待审查。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/6a/6a1e26312bec515f1d83f1808479e47c.png\" /></p><p></p><p>图1——基于PR的异步代码审查</p><p>&nbsp;</p><p>最终，当审查人员有空并提供了关于该PR的反馈和/或要求更改时，PR的作者却不在了，因为他们正忙于其他事情。这种延迟的“乒乓”（Ping-Pong）沟通方式可能会持续几天/几周和几次迭代，直到作者和审查人员达成一个他们都满意的解决方案，并将其合并到主干分支中。</p><p>&nbsp;</p><p></p><h2>异步代码审查研究</h2><p></p><p>在我的职业生涯我有机会指导和建议的团队中，有相当一部分人都对尝试不同于异步代码审查的工作方式感到好奇。他们不确定的是，他们目前的表现如何，以及什么样的指标可以帮助他们理解这一点。</p><p>&nbsp;</p><p>此外，由于有过极限编程（XP）、精益和约束理论的背景，我很好奇在异步代码审查领域看到的一些指标，所以我决定做一项研究。它一开始时很小，但后来变得相当广泛了，我分析了40000多个PR，它们来自40多个非常活跃的产品开发团队的代码库，这些团队都在执行基于PR的异步代码审查。</p><p>&nbsp;</p><p>在研究过程中，我突然想到了一些系统性的见解。从个人和轶事的经验来看，其中一些是我期望看到的，但有些是意料之外的。</p><p>&nbsp;</p><p></p><h2>大的拉取请求抑制了构建质量的能力</h2><p></p><p>&nbsp;</p><p>PR越大，越有可能患上所谓的“LGTM综合征”。如果PR很大，审查人员就没有那么大的动力来提高质量。他们花了很长时间来审查，来与作者反复讨论交流，拖了几天/几周的时间，而交付的压力也越来越大。在工作到达审查人员手中时，已经太晚了，也很难纠正。他们往往倾向于放弃指导工作的能力，只评论“LGTM”（我觉得不错），并批准PR，希望能在之后提高质量。当然，之后提高质量这种情况很少发生。</p><p>&nbsp;</p><p>即使是审查人员想要投入时间、精力和耐心来审查大的PR，如果作者在征求反馈之前做了很多更改，如果他们在某一点上走错了方向（这种可能性会随着工作量的增加而增加），那么从情感上来说，脱离他们所采用的解决方案是非常痛苦的。沉没成本谬论开始出现，并且很难抵消。</p><p>&nbsp;</p><p>所有这些要点都是我们在整个行业中分享过的经验，但从数据中看到这些还是很有趣。</p><p>&nbsp;</p><p>在这里，我们有一个散点图，其中每个点代表一个合并的PR。在X轴上，我们以更改的代码行数作为PR的大小规模，在Y轴上，可以看到每个规模的参与度（每100行代码的评论数）。这个数据集只是一个例子，但需要强调的是，这种行为在所有其他分析的数据集中都可以看到。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/ec/eca580953ca24df2ca48c501e02cd374.png\" /></p><p></p><p>图 2——每个规模的参与度散点图</p><p>&nbsp;</p><p>随着PR规模的增加，我们会看到每个规模的参与度变得越来越低。我们有一个基于反馈和邀请人工判断的过程来帮助我们构建质量，但如果系统激励限制了我们获得反馈的能力，这也意味着我们不太可能构建质量。因此，我们最终引入了延迟，代价是无法提高质量。要我说，这是两败俱伤。</p><p>&nbsp;</p><p>为什么大的PR会影响我们构建质量的能力，还有其他原因，这些原因不在研究范围内，但在这里却值得一提。</p><p>&nbsp;</p><p>随着反馈的延迟，上下文往往会衰减，这意味着审查人员更可能难以理解作者决策背后的推理和背景。这使得审查人员不太可能对工作质量做出贡献。</p><p>&nbsp;</p><p>因为它们将一系列的更改捆绑在了一起，所以大的PR更有可能在生产环境中造成问题，这意味着它们更有可能导致大量的返工。根据我的经验，返工的可能性会随着一次引入的变更数量呈指数级增长。</p><p>&nbsp;</p><p>当生产环境中出现问题时，我们还需要花费更长的时间来排查问题并找出导致问题的根源，犹如大海捞针。上下文的丢失，作为同时引入太多更改的次级效应，也是导致故障排除时间更长的另一个原因。</p><p>&nbsp;</p><p></p><h2>小型拉取请求的好处</h2><p></p><p>&nbsp;</p><p>自从我们的行业了解了精益小批量的价值以来，已经有很长一段时间了。较小的PR花费更少的时间来编写，这意味着我们可以更快地得到反馈，并且如果我们走错了方向，我们也可以更早地发现。相比于要在日程安排中花几个小时来审查一份大的PR，审查人员更容易抽出10分钟的时间来审查一个小的PR。这使得PR更有可能得到更快的审查。</p><p>&nbsp;</p><p>此外，由于审查人员能更快地收到反馈邀请，我们可以看到较小的PR比较大的PR参与度要更高。当他们能够尽早提供反馈时，审查人员就会有一种能够为质量做出贡献的感觉。小PR的部署风险也比大PR的低，因为较小的更改可能出错的情况也更少。</p><p>&nbsp;</p><p>此外，如果出现问题，更容易确定导致问题的更改，这意味着我们能够更快地发现并解决故障。所有这些都对DORA的四个关键指标做出了积极的贡献：</p><p>&nbsp;</p><p>部署频率——组织成功发布到生产环境的频率变更的交付周期——从提交到投入生产所需的时间变更失败率——在生产中导致失败的部署的百分比恢复服务的时间——组织从生产故障中恢复所需的时间</p><p>&nbsp;</p><p></p><h2>异步审查中小型拉取请求的吞吐量较低</h2><p></p><p>这项研究中一个令人惊讶的发现是我没有预料到的，并且在所有的数据集中它都存在，那就是围绕每个规模PR等待时间的可视化。</p><p>&nbsp;</p><p>PR等待或排队时间表示PR在队列中所花费的时间，未被处理，等待某人的注意；例如，等待审查人员的审查，等待作者回复评论，或根据审查人员的要求进行更改，批准后等待合并，等等。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/99/99c10d4ce196fa462848f3049e46c35f.png\" /></p><p></p><p>&nbsp;</p><p>图3——按大小规模列出的每个规模的等待时间</p><p>&nbsp;</p><p>正如我们从这个散点图中看到的，当我们减少PR的规模时，团队进行异步代码审查会导致每个PR规模的等待时间呈指数级增长。当我们使PR变小时，这种指数级增长的等待时间也会转化为呈指数级增长的每个规模代码审查的感知成本。</p><p>&nbsp;</p><p>每个规模的等待时间在较小的PR规模上占主导地位的原因之一是，在较小的PR上每个规模的参与度更高，正如我们在每个规模的参与度散点图上看到的那样。随着我们减小PR的规模，异步沟通产生的延迟和延迟成本呈指数级增长。</p><p>&nbsp;</p><p>需要牢记的一件重要的事情是，随着我们每个PR规模等待时间的增加，我们每次PR也都会产生更多的浪费，从而导致我们工作系统中产生更多的累积浪费。因此，随着我们不断缩小PR规模，我们在工作系统中推动变更的能力也受到了指数级的限制。</p><p>&nbsp;</p><p>这一点也得到了平均PR流动效率的支持。</p><p>&nbsp;</p><p>流动效率度量指标表示花费在项目上的时间占项目交付周期的百分比。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/59/599d4b912fcbe0ac4b4090a7c690f8f4.png\" /></p><p></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/7c/7cdc18c917a1cd9570b80247d20690f9.png\" /></p><p></p><p>&nbsp;</p><p>流动效率越低，系统中的浪费就越多，流程的效率就越低，反之亦然。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/79/79680cfbe9b546e8195c8455bf3688d6.png\" /></p><p></p><p>图 4——不同规模的平均流动效率</p><p>&nbsp;</p><p>正如你所看到的，当我们减小PR的规模时，某一点的流动效率急剧下降。这意味着，如果我们将相同数量的代码拆分为多个较小的PR，与在一个较大的PR中执行时相比，我们需要更长的累积交付周期才能将其推送到系统中。随着流程中等待时间的增加，流动效率的分母增加，导致流动效率下降，交付周期增加，吞吐量下降。</p><p>&nbsp;</p><p>因此，通过异步工作方式，我们不得不在损失质量（大的PR）和损失吞吐量（小的PR）之间进行权衡。</p><p>&nbsp;</p><p>有趣的是，当团队将PR规模缩小到超过等待时间开始主导PR交付周期的程度时，他团队就会直观地感受到这种痛苦。</p><p>&nbsp;</p><p></p><h2>系统中的库存会膨胀，直到与交易成本匹配</h2><p></p><p>在精益制造中，有一个称为批量交易成本的概念描述了将一批工作发送到下一加工阶段的成本。在知识工作中，这种成本可以是实际成本（例如美元价值）和/或感知成本，并且可能有多种因素影响它。这个概念之所以非常重要是原因，一个加工阶段的交易成本越高，我们在该阶段前堆积的库存就会越多，以补偿转移批次的成本。</p><p>&nbsp;</p><p>这里有一个来自现实世界的例子。如果电子商务网站的运费是3美元，那么你通常不会订购1美元的商品，对吧？在订购之前，你通常会将其与购物篮中的其他一些物品一起进行批处理。另一方面，当运费非常低甚至免费时（想想亚马逊的Prime），订购低价商品在经济上就会变得合理了。</p><p>&nbsp;</p><p>此外，与在订购前分批处理购物篮中的商品相比，你将在需要时准确地订购商品，而不是仅在等到购物篮中的价值高到足以弥合运费时才订购。这意味着物品也将更快地到达，一个接一个地，而不是等到批次中的最后一个到达时才一起到达。商品的流动增加了。</p><p>&nbsp;</p><p>这里适用于产品开发的一个普遍观点是，任何为了尽快将产品推出市场的努力都必须涉及降低系统中的交易成本，否则，我们将开始在整个工作系统中对库存进行批处理。这反过来又会延迟交付、反馈和我们从客户和生产系统中获得的学习，这意味着我们的学习节奏会减慢。一旦我们的学习节奏减慢，我们就会变得厌恶风险，并倾向于采用更保守的解决方案，因为系统发出的信号表明，学习成本很高。这就是我们工作体系的经济性抑制我们创新能力的方式，因为尝试风险更大的想法在经济上变得不那么可行。如果系统的激励结构强烈反对，那么仅仅要求人们更加规避风险和创新是没有意义的。我们看到的行为是由系统控制的，所以如果我们想看到不同的行为，我们需要在系统上做工作。</p><p>&nbsp;</p><p>现在，当我们谈论交易成本时，系统中的延迟也是其中的一种，因此会激励参与者增加批处理的规模来补偿它。</p><p>&nbsp;</p><p>如果你最喜欢的网上服装店送货需要一周的时间，而你想在决定保留哪一件衣服之前先试穿多件衣服，你可能会订购你正在考虑的所有选项和尺码。相反，如果是当日送达，你可能会订购更少的商品，可能只订购一件，试试看是否合适，如果不合适，再订购下一件。</p><p>&nbsp;</p><p>运行缓慢的测试套件也会发生同样的情况。如果运行测试需要20分钟，我不会在每行代码更改后都运行它们。如此频繁地产生那么多开销没有任何经济意义，所以我将减少测试的次数，这意味着在得到反馈之前对系统进行了更多的更改。这让我退回到更大的批次，正如前面提到的，这带来了一系列我们想要避免的问题。</p><p>&nbsp;</p><p>在异步代码审查的世界中，如果我花10分钟做一个更改，花2小时才能获得审查，那么这个更改的等待/工作时间比是120/10=12。换句话说，我们的流动效率只有7.7%，而工作等待的时间是其交付周期的92.3%！该系统显示代码审查的成本很高，这激励了系统中的参与者减少请求的频率，这意味着在请求之前进行更多的更改，这就意味着回到了更大的PR中。一个昂贵的流程永远不会激励进行小的变更，这意味着小步重构和增量开发变得不太可能。因此，在流程中具有较低延迟和较低等待/工作时间比的团队，通过启用随着时间推移不断进行的小变更流程，更有可能保持代码库的健康，并保持其对更改的响应。</p><p>&nbsp;</p><p>换一种说法，如果流程中存在延迟（这是异步工作方式所固有的），我总能找到一个足够小的批处理规模，但流动效率非常差，因此使用这么小的批处理规模没有任何经济意义。这反过来又激励我们回到更大的批次。</p><p>&nbsp;</p><p></p><blockquote>虽然你可能忽视了经济学，但它不会忽视你。——Don Reinertsen</blockquote><p></p><p>&nbsp;</p><p>延迟和异步工作方式的另一个问题是，它们使人们更有可能引入更多的东西，增加在制品（WIP）库存和上下文的切换。我们在“图1——基于PR的异步代码审查”中看到了Ema和Luka的情况。当Ema等待Luka审查时，她认为自己可以开始做其他事情了。根据Little定律，平均周期时间与平均在制品成正比，与平均吞吐量成反比。这意味着，像Ema在等待时所做的那样，投入更多的工作会增加延迟，从而使周期时间增加，吞吐量下降。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/ce/ce0170685a90d4118c215d349dec0044.png\" /></p><p></p><p>&nbsp;</p><p>当我们单独工作并异步审查代码时，WIP通常比我们想象的要高得多。如果我们有4个人在一个团队中，并且他们单独工作，我们可能会认为我们有4件事情在进行中。但当系统出现延迟时，我们依赖于从其他人那里获得反馈，就像我们在代码审查中所做的那样，很可能我们最终会得到至少两倍的WIP。Ema在等待时会做更多工作，这种情况也会发生在团队其他人身上，因为他们也需要等待各自的PR审查。因此，我们最终完成了8件事。根据我的经验，看到团队的WIP数量是团队人数的几倍并不奇怪。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/7e/7e5f14ded1d371fb434a4d927c565b45.png\" /></p><p></p><p>图5——高WIP数量导致更多WIP数量的<a href=\"https://thesystemsthinker.com/causal-loop-construction-the-basics/\">因果循环图</a>\"</p><p>&nbsp;</p><p>与此同时，具有讽刺意味的是，如果你要问Ema和团队中的其他人，他们可能会说他们在这段时间里感觉很有效率。系统思考最重要的教训之一是，系统往往会恶化，尽管我们努力在改进它们。最直观的解决方案往往与那些有助于将系统转向更理想状态的解决方案相去甚远。</p><p>&nbsp;</p><p>这里的一个普遍观点是，高WIP的二级效应是它会自我强化。我们在系统中拥有的WIP越多，响应就越慢，等待时间和延迟就越长，这反过来又激励了更高的WIP，因为人们在需要等待的时候拉进了更多的东西。当人类面临延迟时，他们很擅长堆积库存和增加WIP。</p><p>&nbsp;</p><p></p><h2>共创模式</h2><p></p><p>&nbsp;</p><p>我所做的研究得出的结论是，为了在我们减少PR的平均大小规模时不以指数的方式损失吞吐量，作者和审查人员需要以指数的方式更快地响应对方的请求。这最终导致了我们采用同步、连续的代码审查和共创建模式。</p><p>&nbsp;</p><p>共创（Co-creation）模式、结对（Pair）和Mob编程是我们在同一时间一起处理同一件事的工作方式。我们一起开始，一起工作，一起完成。结对编程【1】是一种技术，两个开发人员在同一件事情上工作，而Mob编程【2】更专注于在会话中掌握将功能交付给客户所需的所有技能。根据手头工作的特性，这可能不仅涉及开发人员，还会涉及其他技能（设计、产品、内容……）。</p><p>&nbsp;</p><p>这个想法是让人们去解决问题，而不是把问题转移到人身上；后者涉及到问题拆分，并给每个人一个问题的部分，让他们单独解决，然后尝试重新组装整个问题。当我们蜂拥而至地处理问题时，作为副产品，我们在交互过程中减少了延迟，这意味着将工作交付给客户的时间更短了。想想看：当生产出现中断时，我们该如何处理？通常，所有需要解决问题的人都会接到电话，然后共同努力解决问题。</p><p>&nbsp;</p><p>我们这样做的原因是我们希望尽快解决问题，这样我们就可以缩短恢复时间，从而将影响降至最低。但重要的一点是，我们可以使用相同的工作方式来最大限度地缩短交付周期。这反过来又加快了学习节奏，帮助我们更快地消除那些不起作用的解决方案，从而最大限度地提高团队的价值。</p><p>&nbsp;</p><p>约束理论的创始人Eli Goldratt对紧急情况是一个很好的学习机会有很多话要说。在紧急情况下使用的规则违反了我们的标准规则，挑战了毫无疑问的假设，但我们很少问自己，我们的“特殊规则”是否真的应该成为我们的标准规则。</p><p>&nbsp;</p><p>此外，作为共创的副产品，我们获得的激励结构也与典型的“你烧，我刮”方法非常不同。我们没有“作者和审查者”的基调，而是让人们一起建设并负责使之运行起来。</p><p>&nbsp;</p><p></p><blockquote>……我们的制作和检查系统，如果适用于制作吐司，它会表达：“你烧，我刮。”——W. Edwards Deming</blockquote><p></p><p>&nbsp;</p><p>我听到的支持PR和异步代码审查的一个典型论点是：“代码应该由没有参与构建流程的人来审查”。但是，根据我的经验，延迟和脱离上下文的审查实际上是这个流程的缺点，而不是优点。</p><p>&nbsp;</p><p>如果提供了脱离上下文且延迟审查的人同时编写了代码，那么是什么保证了他们不会提供相同或更好的反馈呢？这是一件很难甚至是不可能衡量的事情，但根据我的经验，更多的上下文、更少的流程延迟和更快的沟通有助于提高质量和更及时、更便宜地整合反馈。我猜这也是我观察到的共创团队返工至少少了一个数量级的原因，其中包括生产中的缺陷和问题更少。</p><p>&nbsp;</p><p></p><h2>吞吐量和质量两个都要</h2><p></p><p>&nbsp;</p><p>我知道这听起来像乌托邦，但实际上我们可以鱼与熊掌兼得。我们可以同时拥有高吞吐量和高质量。这也不是第一次发现这是可能的，因为DORA研究表明稳定性和吞吐量之间存在“与”（AND）而非“或”（OR）的关系。我们要么有吞吐量和稳定性，要么两者都没有。</p><p>&nbsp;</p><p>共创模式改变系统经济性的方式是，通过组队（Pair）和Mob编程，审查延迟和等待时间在设计上基本上是不存在的。当有人物理或虚拟地坐在我旁边，做着和我一样的事情时，他们能够对我在代码中所做的每一个原子更改进行持续的代码审查，反之亦然。该流程本身保证了参与者的可用性，这是必要的，以便立即进行代码审查，从而不会因PR较小而损失吞吐量。</p><p>&nbsp;</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/23/2353c007613f2da8a4fb85268448a91c.png\" /></p><p></p><p>&nbsp;</p><p>图6——减少交易成本驱动更小的最佳批处理规模</p><p>特色动画：<a href=\"https://lastcallmedia.com/blog/why-devops-most-important-tech-strategy-today\">Kelly Albrecht</a>\"</p><p>&nbsp;</p><p>实际上，用精益的术语来说，我们能够最大限度地降低交易成本，因为我们将代码审查的成本降到了最低，实现了更小的批次，并增加了系统的流动。PR的规模实际上变成了一个最小的、原子性的更改，甚至可能低至一行代码。</p><p>&nbsp;</p><p>当我们有了即时可用性和免费的代码审查成本时，我能够得到更及时、更频繁和更丰富的反馈（口头的、即时的和来自上下文的）。这对于提高质量至关重要，但作为副产品，它也减少了返工量。原因是，当我们走错了方向时，我们避免了长时间的偏离，因为路线修正发生得更快，这会导致更多的时间用于增值工作，从而提高生产率。我们达到了质量保证速度的状态。</p><p>&nbsp;</p><p>另一个经常被忽视的优势是，一起工作不仅可以最大限度地缩短等待时间。通常，它还减少了处理/工作时间，因为其他人通常知道如何以更快的方式完成某件事，这意味着处理时间也会减少。这反过来又转化为更短的交付周期和更高的吞吐量。</p><p>&nbsp;</p><p>当我们通过持续的代码审查实现快速的路线修正时，我们也倾向于抵消沉没成本谬误，并爱上解决方案。我唯一要失去的就是我刚刚做的一个最小的变更。与不得不放弃一周的努力相比，我可以更好地处理这个问题。因此，我们更可能提高质量。</p><p>&nbsp;</p><p>除此之外，与异步代码审查相反，作为同时处理同一件事情的副产品，我们减少了在制品，这加快了系统中的工作流程。如前所述，需要集成的异步工作使我们倾向于引入更多的工作项，这使事情变得更糟。在一个4人团队的情况下，当他们单独工作时，他们很容易得到两倍的WIP。在结对编程的情况下，他们的WIP为2，少了4倍！使用Mob编程，WIP就更少了。这是一个大幅减少WIP的机会，这也是不容忽视的。</p><p></p><h2>常见的误解</h2><p></p><p>&nbsp;</p><p>说了这么多，我不认为每个人都应该一直做Pair/Mob编程——这是我从怀疑这些做法的人那里听到的一个常见误解。</p><p>&nbsp;</p><p>重点是，我认为，当涉及到工作方式时，我们作为一个行业存在错误的默认设置，大多数时候每个人都是单独工作的。大多数团队以N个1人团队方式运作，而不是N人1个团队的方式。</p><p>&nbsp;</p><p>&nbsp;</p><p>疫情似乎也促成了这一点。从一开始，随着整个行业的远程化，出于某种原因，我们在远程工作和异步工作之间画上了等号。这两个想法是相互正交的。我们既可以远程工作，也可以共创，因此我们既保持了上述共同工作的好处，同时还具有在家工作的灵活性。</p><p>&nbsp;</p><p>我经常被问到的一个问题是：“共创如何允许我们使用在异步工作中所获得的各个时间表的灵活性呢？”有一些团队想要尝试结对编程，但他们遇到了个人日程安排中出现延误的问题，并且在需要时无法找到结对伙伴。这是一个重要的十字路口，在这里，团队通常会走错方向，走向异步。此时的异步需要是对某些事情的反馈。这是关于给定时间表的低流动弹性的反馈。我们可以考虑通过让更多人参与会话来提高团队的弹性，而不是采用异步方式。这就允许了更多的时间表重叠，同时保持了较高的流动效率，并使事情更快地走出大门。Mob编程尤其提供了这种弹性，人们可以根据需要退出并回来。并不是每个人都需要一直在那里。这也不是我们想要的。</p><p>&nbsp;</p><p>现在，如果你有一个团队，其团队成员位于非常遥远的时区，并且在工作日团队成员之间没有太多的重叠，我会质疑组建该团队的决定，而不是跳到异步的马车上。撇开这个话题不说，我都希望一个团队是由工作时间足够重叠的团队成员组成。“足够”的定义可能有所不同，但根据我的经验，至少5小时的重叠时间是一个很好的目标。</p><p>&nbsp;</p><p>有趣的是，它在实践中的表现方式是，个人日程安排的灵活性加上团队的高度弹性实际上是一种优势。通常，与在办公室工作一样，有些人喜欢早点开始新的一天，有些人则喜欢晚点开始。尽早开始工作的人已开始工作，然后其他人加入，然后晚结束工作的人结束一天的工作。由于我们在一天中工作了更长的时间，因此我们可能会更快地完成这项工作，同时人们保持了灵活的个人时间表。这可能是一个双赢的局面。</p><p>&nbsp;</p><p>不幸的是，在这个世界上，大多数人都只有单独工作的经验，学习合作是一项需要时间和耐心才能掌握的新技能。我记得我参加过Woody Zuill关于“Mob编程”的研讨会。在为期三天的研讨会中，他花了第一天整整一天的时间来让人们练习一起工作，及时做出贡献，并用善意、体贴和尊重的态度对待彼此。这些原则是合作的基本规则。老实说，当时花这么多时间在这个话题上我觉得有点多余。但多年来，随着我开始观察并与越来越多试图共创的团队合作时，我明白了为什么专注于学习这些原则和技能是如此重要。</p><p>&nbsp;</p><p>对于那些想要踏上共创之旅的团队来说，进行适当的指导和辅导是非常重要的，尤其是如果团队中没有人有过共创的经验。否则，团队可能会在评估一种技术时，认为他们正在进行结对或Mod编程，而实际上，他们正在做一些非常不同的事情。人们劫持键盘、个人主导对话、过长或根本不存在的轮换、人们被孤立或心不在焉等等，这些都不是共创理念的组成部分，然而，这也是我经常看到团队说“这不适合我们”的原因。他们是对的。但是，首先，我们需要确保我们正在评估的技术是我们认为我们正在评估的。花时间学习更多关于这些实践的知识并获得适当的支持可以帮助我们做到这一点。</p><p>&nbsp;</p><p>另一个关键点是，一起工作可以非常快地解决团队中的潜在问题。当我们单独工作时，按照设计，人与人之间没有太多的互动，因此潜在的问题往往不那么明显，而且延迟时间更长。一旦团队合作困难的问题变得明显，人们往往会倾向于认为“共创不适合我们”。情况可能是这样，但前提是解决团队中出现的特定技术问题不是我们所追求的。该技术只是潜在团队动态的一面镜子。我们可以选择如何处理反馈，但最终，我们不能将没有反馈的问题归咎于技术。</p><p>&nbsp;</p><p>然而，合作不应该强加于任何人。毕竟，你可能会试一试，发现它真的不是你的菜。每个人都应该努力寻找最能满足自己需求的环境。希望这能让我们更接近一个让更多人在工作中找到快乐的状态。</p><p>&nbsp;</p><p></p><h2>总结</h2><p></p><p>&nbsp;</p><p>在异步代码审查中减少PR大小规模只能让你走到这一步。在某种程度上，较小的PR规模在经济上是不可行的，我们必须在吞吐量和质量之间做出权衡。从异步代码审查转移到结对代码审查，再到一起工作（Pair/Mob编程），我们行业中的许多团队都可以从中受益。</p><p>&nbsp;</p><p>还有很多其他好处【3】，团队可能会考虑尝试一下，根据我的经验，这是一种工作方式，它为我有机会与之合作的团队带来了如此多的乐趣和生产力，我相信这是一种能力，能为采用团队和公司提供竞争优势。</p><p>&nbsp;</p><p></p><h2>参考文献</h2><p></p><p><a href=\"https://martinfowler.com/articles/on-pair-programming.html\">结对编程</a>\"<a href=\"https://www.agilealliance.org/resources/experience-reports/mob-programming-agile2014\">Mob编程——一种全团队方法</a>\"<a href=\"https://www.youtube.com/watch?v=NJWeM7beAGE\">共创的好处 //超越编码播客#27——Patrick Akil 和 Dragan Stepanović</a>\"</p><p>&nbsp;</p><p>作者介绍：</p><p>&nbsp;</p><p>Dragan Stepanović常驻柏林，作为首席工程师，他帮助公司发展他们的工程文化，克服瓶颈，并最大限度地发挥价值。他正在寻找更好的工作方式，探索光谱的两端，并帮助团队和组织尝试反直觉的想法，这些想法最初没有多大意义，但令人惊讶的是，这些想法完全相反。他喜欢无休止地讨论极限编程、约束理论、系统思考、精益和社会情感技术主题。</p><p>&nbsp;</p><p>原文链接：</p><p><a href=\"https://www.infoq.com/articles/co-creation-patterns-software-development/\">https://www.infoq.com/articles/co-creation-patterns-software-development/</a>\"</p><p></p><p>相关阅读：</p><p><a href=\"https://www.infoq.cn/article/vFRbLyN4tqPhLi3kHYLx\">Meta 提出代码审查新方案：杜绝代码 Bug，日均代码审查总量增长 17%</a>\"</p><p><a href=\"https://www.infoq.cn/article/AC9vNtGvClqFw67YFcQc\">代码审查指南：不只关注细节</a>\"</p><p><a href=\"https://www.infoq.cn/article/3fGpN15LymXwh9OqvOmC\">代码审查普遍存在的6大问题</a>\"</p><p></p>",
    "publish_time": "2022-12-04 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "re:Invent 众多新发布，到底哪款才是开发者心中的Top1？(2)",
    "url": "https://www.infoq.cn/article/wRENOQgi8ZWtkOyJTGhp",
    "summary": "<p>新发布的 Amazon EventBridge Pipes 提供针对生产者、消费者的点对点流程，自动完成模块集成，避免编写“胶水”代码；Amazon SageMaker 特性更新，支持地理空间机器学习；Graviton 3E 芯片发布将工作负载提高了35%…到底那款才是开发者心中的 Top1 呢？</p>",
    "publish_time": "2022-12-04 10:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "Flag Boot：基于范畴论的新一代极简开源微服务框架 | InfoQ《极客有约》",
    "url": "https://www.infoq.cn/article/YoR074jiv0cOkezLUCxf",
    "summary": "<p>近期，智源北京人工智能研究院开源了Flag Boot。Flag Boot是一个基于Scala开发的轻量级的高并发微服务框架，为类型安全、服务治理等常见问题，给出了简洁且可扩展性强的解决方案。同时，它使用了基于范畴论的Cats/Cats_Effect等框架，针对抽象代数运算有天然支持。本期InfoQ《极客有约》邀请到了清华大学交叉信息研究院助理教授袁洋和博士生杨景钦来给我们分享Flag Boot开源的二三事。</p>",
    "publish_time": "2022-12-04 10:50:20",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "台积电新人入职8个月能领30.4个月奖金；马斯克计划在自己大脑接入脑机接口设备；PyTorch 2.0重磅发布 | AI一周资讯",
    "url": "https://www.infoq.cn/article/Zm87Vr86Om5k5XAgkFBG",
    "summary": "<p></p><blockquote>马斯克：已和库克“解除误会”，苹果不会下架Twitter；台积电计划2024年在亚利桑那州工厂生产4纳米芯片；AMD 前全球副总裁单羿加入自动驾驶公司鉴智机器人；62岁工程师指控SpaceX 因年龄原因将其调岗；PyTorch 2.0 正式发布 ；工信部：1—10月我国规模以上互联网企业利润总额1119亿元，同比下降11.1%；粤芯半导体宣布完成数亿元B轮战略融资......</blockquote><p></p><p></p><h2>资讯</h2><p></p><p></p><h4>谷歌曝光安全漏洞：可影响数百万安卓设备</h4><p></p><p></p><p>据IT之家12月3日报道，谷歌安卓合作伙伴漏洞计划（APVI）网站上的一个新帖子中，曝光了一个影响数百万安卓设备的安全漏洞。黑客利用该漏洞，就能够在三星、LG、小米等诸多OEM厂商品牌手机中植入恶意软件。而且这些恶意软件可以获得系统级别的最高权限。</p><p></p><p>据悉，这个安全漏洞的关键就是平台证书。谷歌员工和恶意软件逆向工程师ŁukaszSiewierski率先发现了这个证书问题，他表示这些证书或签名密钥决定了设备上安卓版本的合法性。供应商也使用这些证书来签署应用程序。</p><p></p><h4>台积电分红曝光，入职 8 个月能领 30.4 个月奖金</h4><p></p><p></p><p>据台媒《经济日报》报道，台积电分红奖金近日曝光，有台积电员工分享他是一位工龄只有8个月的工程师，分红领到3.8个月，按照台积电的分红惯例，相当于全年可领超过44个月工资，而且“工作到现在还没加班过”。</p><p></p><p>根据该网友分享的台积电年薪计算方式，台积电固定年薪14个月，分红月数需要乘以8，因为台积电分红分八包发，前四次各一包，隔年下半年某月会把前一年剩下的四包一次发。因此分红3.8个月为一包，乘以8包共30.4个月，再加上年薪14个月，网友共可拿44.4个月薪。</p><p></p><h4>消息称苹果最早明年推出MR头显</h4><p></p><p></p><p>据界面报道，彭博12月2日援引知情人士消息称，苹果公司正在加紧开发混合现实（MR）头显，这是自Apple Watch以来的第一个主要新产品类别，苹果还重新命名了配套的操作系统，这是不久后推出的迹象。</p><p></p><p>知情人士透露，苹果公司计划最早于明年推出这款头显，并同时推出专门的操作系统和第三方软件的应用商店。该公司内部最近将操作系统的名称从“realityOS”改为“xrOS”。新的操作系统名意在强化“XR”（扩展现实）概念，它包括虚拟现实（VR）、增强现实（AR）和混合现实（MR）等多种沉浸式技术。</p><p></p><h4>马斯克的脑机接口公司将在6个月内开始人体试验</h4><p></p><p></p><p>路透社12月1日消息，埃隆·马斯克当地时间周三表示，预计其<a href=\"https://www.infoq.cn/article/6s4aDChIwYEOjVH62lGa\">脑机接口公司Neuralink</a>\"开发的无线大脑芯片将在6个月内开始人体临床试验，此前该公司错过了他先前设定的时间表。据介绍，该公司正在开发大脑芯片接口，可以使残疾病人重新行动和交流。</p><p></p><p>马斯克还表示，他相信Neuralink可以恢复视力，即使有人以前从未见过东西，生来就是盲人。他解释说，这将是Neuralink针对人类的首批应用之一。“大脑皮层的视觉部分仍然存在。即使他们以前从未见过，我们也相信他们能看到。”</p><p></p><p>马斯克还表示，他计划在自己大脑中植入脑机接口设备。他说：“现在就可能有了可植入的 Neuralink 设备，而你甚至不知道。当然，我是在假设。事实上，我自己也会植入该设备。”技术演示后，马斯克在推特上重申了这一点。</p><p></p><h4>亏损近200亿美元后，扎克伯格：元宇宙算不上公司重点业务</h4><p></p><p></p><p>据凤凰网科技消息，由于在元宇宙业务上耗资巨大，Facebook创始人扎克伯格正面临越来越大的反对声音。不过，他在周三辩解称，公司对于元宇宙的押注“不是我们正在做的大部分工作”。 扎克伯格周三称：“我们大约 80% 的投资，还略多一点，投向了核心业务以及与之相关的广告业务，也就是我们所称的应用家族，包括Facebook、Instagram、WhatsApp Messenger。然后，不到 20% 的投资用于现实实验室。因此，在相当长一段时间内，我们仍要做，并且会继续做的绝大多数事情是朝着社交媒体发展，直到元宇宙规模变得更大。”</p><p></p><h4>大摩CEO力挺马斯克：他与乔布斯、盖茨齐名，不会输的</h4><p></p><p></p><p>12月2日消息，马斯克的入主让推特公司经历了一次大动荡，导致大量员工被解雇，名人退出该社交网络，广告商出逃。但是，有一个人没有放弃这位世界首富，他就是摩根士丹利CEO詹姆斯·戈尔曼。“我是不会赌马斯克输的。”戈尔曼周四在纽约举行的媒体会议上表示。他把推特称之为“一家伟大的公司”，马斯克是“一位非凡的高管”，并谈到了他参观特斯拉洛杉矶地区汽车工厂的情景。此前，摩根士丹利牵头的银行向马斯克提供了130亿美元的债务，帮助他收购推特。</p><p></p><h4>台积电计划2024年在亚利桑那州工厂生产4纳米芯片</h4><p></p><p></p><p>据彭博12月1日报道，知情人士透露，受苹果等美国客户敦促，台积电将于2024年在美国亚利桑那州工厂生产4纳米芯片，预计该公司将在美国总统拜登下周二访问亚利桑那州台积电工厂时宣布这一新计划。</p><p></p><p>知情人士表示，台积电的客户要求该公司在台湾地区和美国同时推出其最新技术，但台积电并未承诺采用这种方式。此前，台当局经济部门曾表示，台积电持续投资台湾、先进制程留在台湾的方向不会改变。</p><p></p><h4>腾讯首发数字孪生云</h4><p></p><p></p><p>12 月 1 日，在 2022 腾讯全球数字生态大会上，腾讯数字孪生产品部总经理苏奎峰全面介绍了腾讯在数字孪生领域技术布局，并向业内首次发布了<a href=\"https://www.infoq.cn/article/lz4xxpqPCadNj181bCwP\">数字孪生云平台</a>\"。</p><p></p><p>该产品基于腾讯的游戏科技、云计算/云渲染、人工智能、模拟仿真、全息感知以及音视频传输等核心技术，重点解决全过流程及决策可视、决策优化、跨时空在场协同以及泛在触达等问题。据腾讯智慧交通副总裁施雪松透露，目前数字孪生技术已经在高速、轨交、港口、智能网联等领域持续落地应用。</p><p></p><h4>AMD 前全球副总裁单羿加入自动驾驶公司鉴智机器人</h4><p></p><p></p><p>据晚点 Auto 报道，AMD 前全球副总裁单羿已正式加入去年 8 月成立的自动驾驶公司鉴智机器人，以联合创始人身份担任 CEO。</p><p></p><p>鉴智机器人还于近日完成了数千万美元的 A+ 轮融资，领投方为襄禾资本，跟投方为老股东渶策资本。据了解，鉴智机器人投后估值为数亿美元。这是鉴智机器人成立 15 个月来完成的第 5 轮融资，公司的其它投资方包括 Atypical Ventures、 五源资本、金沙江创投、深创投和自动驾驶芯片公司地平线等。目前鉴智机器人有超 200 名员工，分布在北京、上海、杭州和苏州。</p><p></p><h4>NEC研发出瞬间识别多人的人脸识别技术</h4><p></p><p></p><p>据共同社报道，NEC 11月30日发布消息称，公司开发出了通过摄像机瞬间识别多人的人脸识别技术。不需要像以往那样单人依次通过识别门，即使不停留而是像往常一样走进，也可分辨是否是事先登记的人物。1台摄像机每分钟可识别100人以上，且无需刻意将脸转向摄像机。该公司在写字楼、工厂和主题公园等推进出入管理等的测试，力争2024年度能实际应用。</p><p></p><h4>索尼推出便携式动作捕捉设备mocopi，可应用于元宇宙</h4><p></p><p></p><p>索尼11月29日宣布，2023年1月下旬将推出捕捉身体动作并做成数字内容的传感器，预计将应用于虚拟空间（元宇宙）等。</p><p></p><p>商品名称为“mocopi”。由配备在头、两手腕、腰、两脚腕上6个传感器构成，每个重8g。佩戴好传感器，与支持专用APP的手机组合，就可制作虚拟形象视频，身体的动作也可数据化。传感器可通过索尼的网购平台预订和购买，价格为4.95万日元（约合人民币2552.5元）。</p><p></p><h4>粤芯半导体宣布完成数亿元B轮战略融资</h4><p></p><p></p><p>11月29日下午，粤芯半导体宣布公司近日完成B轮战略融资。本轮融资由广州产业投资控股集团下属广州科创产业投资基金和广东粤财控股下属广东省半导体及集成电路产业投资基金联合领投，同时获得中国农业银行下属农银投资和中国建设银行下属建信投资等既有和新战略投资股东追加投资。</p><p></p><p>粤芯半导体介绍，本次融资所获资金，将全部用于粤芯半导体三期项目的投资建设。作为粤港澳大湾区唯一一家专注于模拟芯片领域和进入全面量产12英寸芯片制造企业，粤芯半导体先后于2019年及2021年，相继实现一期、二期项目正式量产，从消费级芯片起步延伸发展至工业级和车规级芯片。</p><p></p><h4>国产EDA企业芯华章宣布完成数亿元B轮融资</h4><p></p><p></p><p>11月28日消息，EDA（集成电路设计工具）智能软件和系统企业芯华章宣布完成数亿元 B 轮融资，由中金资本旗下中电中金基金领投，Mirae Asset (未来资产)、衡庐资产等参投。成立仅两年，芯华章已完成8轮投资，每轮融资均数亿元。今年1月，国家制造业转型升级基金刚刚对其完成一轮战略投资，在此之前，云锋基金、经纬创投、普罗资本、红杉宽带、高瓴创投等多家明星机构均多轮跟投。</p><p></p><h4>腾讯WiFi管家宣布停止服务：将删除用户资料等数据</h4><p></p><p></p><p>腾讯WiFi管家发布的公告称，因业务调整，腾讯WiFi管家于2022年12月1日零时零分起正式停止服务，用户将无法使用腾讯WiFi管家的任何功能和服务，在停止服务后将依法对用户的资料等数据进行删除。</p><p></p><h4>工信部：1—10月我国规模以上互联网企业利润总额1119亿元，同比下降11.1%</h4><p></p><p></p><p>中国工业和信息化部11月30日发布的数据显示，1-10月份，中国互联网业务收入降幅收窄，利润总额降幅扩大，研发经费规模恢复两位数增长。</p><p></p><p>数据显示，1-10月份，中国规模以上互联网和相关服务企业(简称互联网企业)完成互联网业务收入12235亿元人民币，同比下降0.8%，降幅较前三季度收窄0.1个百分点。同期，中国规模以上互联网企业营业成本同比增长3.3%，增速较前三季度回落0.6个百分点。实现利润总额1119亿元，同比下降11.1%，降幅较前三季度扩大2.8个百分点。</p><p></p><h2>AI 开源工具</h2><p></p><p></p><h4>PyTorch 2.0 正式发布</h4><p></p><p></p><p>12月2日，<a href=\"https://www.infoq.cn/article/li0ymL7ZbSb9oPSroF5Q\">PyTorch</a>\" 官方正式发布 PyTorch 2.0。目前，PyTorch 2.0还处在测试阶段，预计第一个稳定版本会在2023年3月初面世。</p><p></p><p>据Meta称，PyTorch 2.0 是迈向下一代 PyTorch 2 系列版本的第一步。PyTorch 2.0 中发布了大量足以改变 PyTorch 使用方式的新功能，它提供了相同的 eager mode 和用户体验，同时通过 torch.compile 增加了一个编译模式，在训练和推理过程中可以对模型进行加速，从而提供更佳的性能和对 Dynamic Shapes 及  Distributed 的支持。</p><p></p><p>“PyTorch 2.0 体现了深度学习框架的未来，”grid.ai 的首席技术官兼 PyTorch Lightning 的主要维护者之一 Luca Antiga 说。“在没有用户干预的情况下捕获 PyTorch 程序并获得大规模的设备加速和开箱即用的程序操作的可能性为 AI 开发人员开启了一个全新的维度。”</p><p></p><h2>IT 业界热评新闻</h2><p></p><p></p><h4>马斯克：已和库克“解除误会”，苹果不会下架Twitter</h4><p></p><p></p><p>11 月 26 日，马斯克在回复网友时表示，如果谷歌和苹果将 Twitter 从他们的应用商店中移除，他将生产一款自己的智能手机作为替代品。此外，马斯克还表示，苹果一直在对 App Store 上各软件产品的应用内购抽取 30% 费用。出于“公义”，马斯克开始连发推文声讨这笔“<a href=\"https://www.infoq.cn/article/xRw96EdKlLucNOsmYq0p\">苹果税</a>\"”。11月29日，马斯克发推文强调，苹果已经“基本停止在 Twitter 平台上投放广告”。</p><p></p><p>美东时间周三，Meta首席执行官扎克伯格（在接受采访时也加入了对苹果的批评中。扎克伯格批评称，苹果公司的App Store存在利益冲突，“一家公司能够控制设备上的应用体验是有问题的。移动生态系统的绝大多数利润都流向了苹果。”</p><p></p><p>不过有点尴尬的是，就在这场马斯克对抗苹果的“大战”似乎要开启前夕，尽管扎克伯格似乎刚刚才选择“力挺”马斯克，但马斯克本人却提前“鸣金收兵”。据 BBC 12月1日报道，马斯克在推特上称自己11月30日参观了苹果总部，并与库克举行了“愉快的交谈”。谈及苹果可能把推特下架一事，马斯克说，库克“明确表示，苹果从未考虑这么做”。不过马斯克并没有说明两人是否谈及了苹果在推特上的广告投放问题。</p><p></p><p>网友热评：刚吵架就言和了。</p><p></p><h4>62岁工程师指控SpaceX 因年龄原因将其调岗</h4><p></p><p></p><p>据外媒报道，现年62岁的工程师 John Johnson发文称，他在SpaceX受到年龄歧视，因为经理担心他可能会“退休或死亡”而将其调离核心岗位。Johnson表示，他已向华盛顿州人权委员会提出申诉，该机构尚未回应置评请求。</p><p></p><p>据悉，Johnson于2018年加入SpaceX，担任该公司的光学工程领域首席工程师。Johnson强调，他经常在公司的加州办公室每天工作10到12个小时，每周工作7天。</p><p></p><p>在2020年初，Johnson接受了背部手术，但几天后就回到了工作岗位，没有耽误任何工作。然而，Johnson在起诉书中表示，他后来被剥夺了工作职责，并被年轻得多、经验更少的工程师取代。</p><p></p><h4>女子假扮孕妇藏202块CPU入境被查</h4><p></p><p></p><p>11月25日，广东珠海，女子赵某身穿黄色连衣裙由澳门经珠海拱北口岸进境。海关关员观其体态异常，遂上前问询。该旅客称自己怀孕大概5、6个月，可是她肚子很大，看起来像孕晚期。工作人员检查发现其肚子部分有一个硅胶假体，拿掉假体后，露出了用透明胶带绑藏得严严实实的CPU和手机。经清点，共有CPU202块、手机9台。海关已按规定对该案做进一步处理。</p><p></p><p>网友热评：现在都还在用这种远古的方式啊？</p><p></p><h4>为削减成本，英特尔要求在爱尔兰工作的2000名员工无薪休假三个月</h4><p></p><p></p><p>12月2日消息，据国外媒体报道，作为成本削减措施的一部分，英特尔让在爱尔兰工作的多达2000名员工无薪休假三个月。据报道，在爱尔兰工作的英特尔制造部门员工被要求无薪休假，这也是该公司正在实施的“自愿休假”计划的一部分。</p>",
    "publish_time": "2022-12-04 15:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "开发者们玩嗨了！DJ 狂欢、乒乓球赛……",
    "url": "https://www.infoq.cn/article/iBct0Sw62dSN9svkiQf1",
    "summary": "<p>紧张研发之外，开发者们的另一面：DJ狂欢、游戏、运动……</p>",
    "publish_time": "2022-12-04 15:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]