[
  {
    "title": "近80%的雇主提高工资，50%的员工“悄悄”离职，科技企业如何提高员工的留存率和绩效？",
    "url": "https://www.infoq.cn/article/fpr3EKR19VyTCEEk5w8q",
    "summary": "<p></p><h2>尽管经济存在不确定性，但劳动力市场竞争仍然激烈</h2><p></p><p>&nbsp;</p><p>这些数字是前所未有的。尽管美联储努力抑制通胀，但劳动力市场的竞争仍然异常激烈。截至2022年9月，仅在美国，<a href=\"https://www.uschamber.com/workforce/america-works-data-center\">每100个职位就有66名劳工的空缺</a>\"，美国的<a href=\"https://www.nytimes.com/live/2022/10/07/business/jobs-report-september-economy\">就业增长可能已经放缓</a>\"，失业率也有所下降，劳动力市场依然强劲。</p><p>&nbsp;</p><p>到目前为止，即使是经济的不确定性也未能让市场放松下来。尽管有一些<a href=\"https://www.businessinsider.com/layoffs-sweeping-the-us-these-are-the-companies-making-cuts-2022-5\">行业裁员</a>\"的消息，但预计明年美国劳动力市场整体上仍将持续吃紧。</p><p>&nbsp;</p><p>而且，员工们也并不害怕跳槽到能满足他们职业和生活目标的公司。根据Gartner的数据，人员流动率预计将比以往<a href=\"https://hbr.org/2022/07/its-time-to-reimagine-employee-retention\">高出50%到75%</a>\"。虽然这对员工来说看似不错，但这意味着留住员工必须是重中之重。即使你的公司计划裁员，也必须要留住你所需要的员工，以确保连续性，提高绩效，并做好经济恢复到稳定增长阶段后的增长准备。</p><p>&nbsp;</p><p></p><h2>未来的工作意味着企业必须降低离职率</h2><p></p><p>&nbsp;</p><p>离职率高的公司（尤其是顶尖人才离职率高的公司）的本能反应是加薪、增加福利，或两者兼而有之。 让我们来分解一下。</p><p>&nbsp;</p><p></p><h3>单靠提高基本工资并不能解决问题</h3><p></p><p>&nbsp;</p><p><a href=\"https://www.bls.gov/opub/ted/2022/consumer-prices-up-9-1-percent-over-the-year-ended-june-2022-largest-increase-in-40-years.htm#:~:text=Consumer%20prices%20up%209.1%20percent,U.S.%20Bureau%20of%20Labor%20Statistics\">随着通货膨胀率达到40年来的最高水平</a>\"，员工们的家庭预算受到了冲击。因此，企业自然会把提高基本工资作为首要任务。</p><p>&nbsp;</p><p>这次冲击有两个问题。首先，在不确定的经济时期，削减预算可能意味着没有钱加薪。通常，工资率是预算中第一个要削减的，因为每一笔支出都必须要有同等的价值。</p><p>&nbsp;</p><p>其次，仅2022年的大幅加薪对遏制离职率几乎没有作用。根据加Gallagher关于职业幸福的“2022年劳动力趋势报告”，近80%的雇主提高了基本工资，但<a href=\"https://www.bls.gov/news.release/jolts.t04.htm\">离职率</a>\"几乎没有变化。</p><p>&nbsp;</p><p></p><h3>疫情前的津贴不再有效。幸福和抑制通胀的福利已经成为组织的必备条件。</h3><p></p><p>&nbsp;</p><p>很明显，在2021年，疫情前的津贴，如桶装啤酒和乒乓球桌等，对求职者来说不再感兴趣。越来越多的组织转而寻求新的幸福和抑制通胀的福利。最近对708家公司进行的<a href=\"https://hrexecutive.com/among-the-top-2023-benefits-trends-affordability-and-family-support/\">一项调查发现</a>\"，超过三分之二的美国雇主希望在2023年提高福利待遇。金融服务集团<a href=\"https://www.limra.com/en/\">LIMRA</a>\"的数据显示，60%的雇主正在考虑在未来两年内增加新的保险福利。</p><p>&nbsp;</p><p>在可能的情况下，雇主正在努力遏制员工分摊成本的增加，并引入新的方法来确保使用健康福利。</p><p>&nbsp;</p><p></p><h3>其他潜在原因</h3><p></p><p>&nbsp;</p><p>即使是新的福利计划也不一定能改变离职率。<a href=\"https://www.pewresearch.org/fact-tank/2022/03/09/majority-of-workers-who-quit-a-job-in-2021-cite-low-pay-no-opportunities-for-advancement-feeling-disrespected/\">2022年3月皮尤研究中心的一项研究表明</a>\"，单靠福利不足以阻止离职。</p><p>&nbsp;</p><p>在离职的员工中，63%的人表示他们看不到晋升机会，57%的人表示在工作中感到不受尊重。在那些家中有18岁以下孩子的人中，48%的人表示育儿问题是问题所在。同样，45%的人表示，他们的离开是因为工作时间缺乏灵活性，43%的人离开是因为没有带薪休假时间。</p><p>&nbsp;</p><p>微软的“<a href=\"https://www.microsoft.com/en-us/worklab/work-trend-index/great-expectations-making-hybrid-work-work\">2022年工作趋势指数</a>\"”也凸显出了对领导缺乏信心，以及对个人幸福感的担忧。</p><p>&nbsp;</p><p></p><h3>原地离职</h3><p></p><p>&nbsp;</p><p>由于对未来的不确定性，一些员工对就业市场采取观望态度。这意味着他们虽仍在工作岗位上，但会降低绩效和生产力。根据Gallup的说法，这种“悄悄离职”可能会影响到50%的员工。这意味着一旦经济趋于平衡，生产力将面临风险，离职率可能会继续上升。</p><p>&nbsp;</p><p></p><h2>招聘时，留住新人才可能会很困难</h2><p></p><p>&nbsp;</p><p>伴随“大洗牌”而来的是“大遗憾”。<a href=\"https://www.cnbc.com/2022/03/02/72percent-of-young-workers-say-theyve-regretted-a-new-job-after-starting.html\">The Muse</a>\"最近对2500多名千禧一代和Z世代求职者进行的一项调查显示，<a href=\"https://www.themuse.com/advice/shift-shock-muse-survey-2022\">72%的跳槽者</a>\"感到惊讶或后悔。为什么呢？他们觉得被骗了。</p><p>&nbsp;</p><p>在进入一个新的岗位后，他们发现这份工作或公司与他们在招聘过程中所认识到的大不相同。</p><p>&nbsp;</p><p>当远程工作、预期工作时间、文化困难和管理风格等情况与描述不符时，20%的年轻员工表示，如果情况没有好转，他们会在一个月内离职，另有41%的人会在四到六个月内离职。</p><p>&nbsp;</p><p>招聘、培养、面试和入职的所有辛勤工作都会付诸东流，这个过程必须重新开始，这既浪费了雇主的时间和金钱，又降低了生产力。</p><p>&nbsp;</p><p></p><h2>有人说，解决方案是将员工与目标联系起来</h2><p></p><p>&nbsp;</p><p>最近的头条新闻都在大声疾呼，工人们要求与目标挂钩。<a href=\"https://www.mckinsey.com/business-functions/people-and-organizational-performance/our-insights/the-great-attrition-is-making-hiring-harder-are-you-searching-the-right-talent-pools?stcr=BA9E07F88B58440CA852479B68C7D145&amp;cid=other-eml-alt-mip-mck&amp;hlkid=6dc9c39157a549738fe86850eb72bd36&amp;hctky=13315742&amp;hdpid=a20583c7-6cd9-4f76-aa3c-adbed6fc7a04\">麦肯锡</a>\"的数据也支持这一点。调查显示，31%的人离职是因为缺乏有意义的工作。这使得各组织争相更新他们的使命宣言，制定更广泛的组织目标战略，并就组织目标进行培训。</p><p>&nbsp;</p><p>但是，仅仅重新设计你的使命和愿景宣言就足以提供有意义的工作吗？</p><p>&nbsp;</p><p>答案是否定的。</p><p>&nbsp;</p><p>让我们从定义“有意义的工作”开始。斯坦福大学的一份<a href=\"https://www.gsb.stanford.edu/faculty-research/publications/job-crafting-meaningful-work\">研究出版物</a>\"将有意义的工作定义为“员工认为重要的工作，因为它服务于一个重要的目标”。要想获得成功并从一开始就推动员工留存率，组织必须能够个性化并将意义与要完成的工作联系起来。这从招聘过程的开始时就开始了。组织必须将每个职位和每个求职者赋予个性化的意义和使命。</p><p>&nbsp;</p><p></p><h2>留住员工可以更具策略性，并从招聘的透明度开始</h2><p></p><p>&nbsp;</p><p>当疫情结束，就业市场重新开放时，根本没有足够的劳工来填补空缺的工作岗位。招聘人员和招聘经理面临着巨大的压力，需要快速填补职位空缺。</p><p>&nbsp;</p><p>Muse的首席执行官兼创始人<a href=\"https://www.cnbc.com/2022/03/02/72percent-of-young-workers-say-theyve-regretted-a-new-job-after-starting.html\">Kathryn Minshew</a>\"是这样解释的：随着公司迫切需要招聘，人力资源专业人员捉襟见肘，招聘人员可能会变得不择手段，夸大事实来填补职位空缺。或者，他们可能会说一些他们认为是真实的情况，但他们并不了解工作场所的全貌。</p><p>&nbsp;</p><p>她建议公司要诚实地讲述在那里工作的感觉，包括成功之处和需要改进的地方。面试应该是双向的，你必须要给求职者足够的时间来询问有关公司文化方面的问题。</p><p>&nbsp;</p><p>Minshew说：“当人们觉得自己已经睁大眼睛选择了一种情况时，他们更有可能接受它的好和坏，并表现出敬业、高效、满意的员工形象。”。</p><p>&nbsp;</p><p></p><h3>创建清晰准确的职位描述</h3><p></p><p>&nbsp;</p><p>比起空洞的使命宣言，如果从求职者第一次接触到你的雇主品牌，你就能够公开透明地将候选人与他们的个人目标联系起来，会怎样呢？</p><p>&nbsp;</p><p>要做到这一点，你必须清楚地了解你的职位描述和每个求职者的接触点。而不是列出一系列崇高的甚至是无法定义的术语，比如：</p><p>&nbsp;</p><p></p><blockquote>“招聘：具有5-7年SaaS经验的摇滚明星软件工程师，从事尖端产品开发工作，其使命是为不同的员工创造一个更美好的世界。我们寻找具有灵活技能的求职者，他们希望发展自己的职业生涯，并帮助客户拥有他们的未来。”</blockquote><p></p><p>&nbsp;</p><p>试试这个：</p><p>&nbsp;</p><p></p><blockquote>“我们的产品营销团队需要一名具有五到七年经验的软件工程师，以便快速加入并帮助完成前60天、90天和120天的产品更新。一旦这些项目完成，你就会完全融入团队，我们希望你能够创造性地推动团队，并将你的经验持续带入到未来的项目计划中。我们的团队充分协作，我们希望你能够以一种深思熟虑、以团队为中心的方式提供见解。这是一个展示你的经验和创造力的机会，并能帮助我们的产品变得更好。\"</blockquote><p></p><p>&nbsp;</p><p>通过将职位描述与实际工作的目标联系起来——完成产品更新并在未来的项目中协作——你可以更好地将求职者的期望与你需要他们完成的工作使命和目标联系起来。</p><p>&nbsp;</p><p></p><h3>提供明确的职业发展路径</h3><p></p><p>&nbsp;</p><p>寻求顶尖人才并希望留住人才的雇主需要提供明确的晋升途径。不幸的是，这个简单的修复方法经常被忽视。多年来，许多组织都秉承员工无论如何都会离职的理念，因此只提供工作，而不提供职业生涯，隐含的理解是，员工会一直工作，直到他们从一个职位上学会了他们所能学会的一切，厌倦了，或两者兼而有之，然后离开继续他们的职业生涯。</p><p>&nbsp;</p><p>但当你考虑到人员流动、技能损失和组织知识损失的成本时，很容易看出公司必须提供更多的东西。相反，对待职业要采取有组织的、基于技能的方法，并提供成长机会。要做到这一点，你必须要了解你的组织现在需要什么技能，未来又可能需要哪些技能。并且你必须要清楚地了解新员工如何从这里到那里，并为组织和求职者提供长期价值。</p><p>&nbsp;</p><p>一旦你了解了所需的技能集，现代招聘平台就可以帮助招聘人员根据特定的技能搜索求职者，甚至可以过滤掉与工作不太相关的标准，如性别、种族或学历。一些公司允许招聘团队通过使用布尔逻辑字符串来进行关键字搜索，以锁定特定的求职者技能集。</p><p>&nbsp;</p><p>使用电子邮件模板和编程序列等正确的技术可以帮助招聘人员在不牺牲数量的情况下采用个性化的方法。这一点至关重要，因为根据hireEZ的“2022年境外招聘状况”报告，五分之一的企业组织招聘人员表示，他们一次会同时管理多达50份或更多的求职申请。一些软件甚至提供分析，帮助招聘人员衡量敬业度，以更好地了解能哪些信息与求职者产生共鸣，从而让他们能够创建一个更能与求职者建立更深层次联系的对话。</p><p>&nbsp;</p><p>这样做的最终目的是为了促进与更高质量的求职者进行更好的对话。为了支持这种方法，招聘人员应该问这样的问题：在接下来的两年里，你想要获得什么技能？你想从事什么类型的工作？你是否有想要争取的头衔或角色？</p><p>&nbsp;</p><p>然后将这些答案与组织的需求联系起来，并对能将他们带到哪里的个人成长，以及可以预期的附加值（比如薪酬、自主权或地位的提高）建立明确的预期。</p><p>&nbsp;</p><p></p><h2>将求职者与相关的、个性化的任务联系起来，从一开始就可以提高留存率</h2><p></p><p></p><p>无论经济前景如何，留住员工都是组织健康的关键。这在劳动力市场上变得更加重要，因为劳动力市场的劳工更少，对突出技能的需求也更高。这就是招聘的关键所在。</p><p>&nbsp;</p><p>招聘人员从一开始就在培养敬业度和留住员工方面发挥着关键作用。通过用清晰透明的信息吸引合适的求职者，通过与目标的个性化联系来大规模培养求职者，并提供基于技能的对话来解释求职者的未来之路，你可以为长期的组织健康建立一条完美的路径，并在紧张的劳动力市场中赢得短期的胜利。</p><p></p><p>&nbsp;</p><p>原文链接：</p><p><a href=\"https://www.infoq.com/articles/employee-retention-recruiting/\">https://www.infoq.com/articles/employee-retention-recruiting/</a>\"</p><p></p><p>相关阅读：</p><p><a href=\"https://xie.infoq.cn/article/50a6188f339d482398b1b304f\">如何应对核心员工提离职？</a>\"</p><p><a href=\"https://xie.infoq.cn/article/45b8cebdb4d7c42347d1a7a34\">离职交接，心态要好</a>\"</p><p></p>",
    "publish_time": "2023-02-02 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "“杀猪盘”APP成功潜入苹果和谷歌应用商店",
    "url": "https://www.infoq.cn/article/q48yZJQL8JhVZ4YCwKf5",
    "summary": "<p>&nbsp;</p><p>当地时间2月1日，安全公司 <a href=\"https://news.sophos.com/en-us/2023/02/01/fraudulent-cryptorom-trading-apps-sneak-into-apple-and-google-app-stores/\">Sophos 的研究人员</a>\"表示，他们<a href=\"https://www.infoq.cn/article/e5JQptqbfFE8hOmzgNXi\">在苹果和谷歌的应用商店</a>\"中发现了“杀猪盘”App。这些“杀猪盘”App经过精心设计，欺骗人们将大笔资金投入虚假投资骗局。</p><p>&nbsp;</p><p>Sophos以诈骗团伙 CryptoRom 为例介绍了诈骗过程。欺诈者在与受害者通过约会应用程序（Facebook 和 Tinder）接触并培养“感情”，然后他们被要求转移到 WhatsApp。建立了比较融洽的关系后，诈骗者称自己的亲戚在某个金融分析公司工作，并邀请受害者一起进行加密货币交易。此时，诈骗者会向受害者发送一个指向 Apple 应用商店的假冒应用程序链接，并指导受害者如何开始使用该应用程序进行“投资”：诈骗者让受害人将资金转移到 Binance 交易所，然后从 Binance 转移到假应用程序。</p><p>&nbsp;</p><p>最初，受害者能够提取少量加密货币。但当受害者之后想要提取更多金额时，账户就被锁定了，并通过应用程序中的“客户支持”聊天被告知需要支付 20% 的费用才能继续访问。</p><p>&nbsp;</p><p>Sophos 表示，此前，诈骗者为了诱导受害人安装App需要说服他们安装配置文件以启用应用程序安装。但最近诈骗者使用的应用程序已成功放入 <a href=\"https://xie.infoq.cn/article/f75bb963c5414edde2ea901fe\">Apple App Store</a>\"，大大减少了将应用程序安装到受害者设备上的步骤。</p><p>&nbsp;</p><p>Sophos 检查出的第一个“杀猪盘”App与加密货币无关，而是一款名为“Ace Pro”的应用，其在应用商店中的描述为“二维码检查应用”。这类应用程序都成功通过了苹果 App Store 的审核流程。</p><p>&nbsp;</p><p>据悉，所有通过 App Store 安装的应用程序都必须由开发人员使用 Apple 提供的证书进行签名，并且必须经过严格的审查程序以验证它们是否遵循 App Store指南。如果犯罪分子能够通过这些检查，他们就有可能侵入数百万台设备。</p><p>&nbsp;</p><p>那它们是如何绕过审核的呢？Sophos 发现，它们都使用远程内容来提供其恶意功能——这些内容可能在 App Store 审查完成之前一直被隐藏起来。</p><p>&nbsp;</p><p>在 Ace Pro 应用程序案例中，恶意开发人员在应用程序中插入了与 QR 检查相关的代码和其他 iOS 应用程序库代码，以便让审核者误认为其是合法的。但是当应用程序启动时，它会向亚洲注册域 (rest[.]apizza[.]net) 发送请求，该域会使用来自另一个主机 (acedealex[.]xyz/wap) 的内容进行响应。正是这种响应机制提供了虚假的 CryptoRom 交易界面。犯罪分子很可能在应用程序审查时使用了看起来合法的网站进行响应，然后切换到 CryptoRom URL。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/65/65fc6c5a0f2f88bb20ad85b92e75c15b.png\" /></p><p></p><p>&nbsp;目前，苹果和谷歌都已经删除了Sophos 报告的“杀猪盘”应用程序。</p>",
    "publish_time": "2023-02-02 10:46:18",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "更高性能表现，一文解读高精度计算数据类型 DecimalV3",
    "url": "https://www.infoq.cn/article/RlLFaVQcjSMah4MuBZcX",
    "summary": "<p>数值运算是数据库中十分常见的需求，例如计算数量、重量、价格等，为了适应多样化运算场景，数据库系统通常支持精准的数字类型和近似的数字类型，当我们需要精确地表示小数并计算小数时，通常会考虑使用 Decimal 数据类型。区别于浮点小数，Decimal 作为定点小数类型，可以支持高精度的小数运算，因此适用于各种高精度计算的场景，常见的应用场景有以下几种：</p><p></p><p>金融行业：在金融交易中经常涉及到小数，比如利息、金额的计算，金融场景对数字准确的要求极高，因此精确的小数运算是必要的。财务软件：财务软件通常需要进行复杂的财务计算，Decimal 类型可以提供精确的小数计算，避免计算过程中产生的舍入误差。科学计算、工程计算等其他场景。</p><p></p><h3>DecimalV3 功能介绍</h3><p></p><p></p><p>在 <a href=\"https://github.com/apache/doris\">Apache Doris</a>\" 1.2.1 之前的版本中，我们已对 Decimal(precision, scale)(precision&lt;=27) 数据类型进行了支持，随着 Apache Doris 用户的持续增长，银行、证券、基金等金融领域的用户也随之快速增长，对高精度的小数计算场景也提出了更高的要求，旧的 Decimal 数据类型已无法满足。因此，我们在 Apache Doris 1.2.1 推出了精度更高、速度更快的 DecimalV3(precision, scale)(precision&lt;=38)，实现了真正意义上的高精度定点数，相比于老版本中的 Decimal ，DecimalV3 有以下核心优势：</p><p></p><p>可表示范围更大。DECIMALV3 对 Precision 和 Scale 的取值范围进行扩充。内存占用更低，性能更高。老版本的 Decimal 需要占用 16 Bytes 的内存，而 DecimalV3 对内存可进行自适应调整，如下所示。</p><p></p><p><code lang=\"text\">+----------------------+-------------------+\n|     precision        | 占用空间（内存/磁盘）|\n+----------------------+-------------------+\n| 0 &lt; precision &lt;= 8   |      4 bytes      |\n+----------------------+-------------------+\n| 8 &lt; precision &lt;= 18  |      8 bytes      |\n+----------------------+-------------------+\n| 18 &lt; precision &lt;= 38 |     16 bytes      |\n+----------------------+-------------------+</code></p><p></p><p>更完备的精度推演。</p><p></p><h3>精度推演规则</h3><p></p><p></p><p>DECIMALV3 有一套很复杂的类型推演规则，针对不同的表达式，会应用不同规则进行精度推演，下面来介绍一下推演规则：</p><p></p><p>四则运算</p><p></p><p>加法 / 减法：DECIMALV3(a, b) + DECIMALV3(x, y) -&gt; DECIMALV3(max(a - b, x - y) + max(b, y), max(b, y))，即整数部分和小数部分都分别使用两个操作数中较大的值。乘法：DECIMALV3(a, b) * DECIMALV3(x, y) -&gt; DECIMALV3(a + x, b + y)除法：DECIMALV3(a, b) / DECIMALV3(x, y) -&gt; DECIMALV3(a + y, b)</p><p></p><p>聚合运算</p><p></p><p>SUM / MULTI_DISTINCT_SUM：SUM(DECIMALV3(a, b)) -&gt; DECIMALV3(38, b)。AVG：AVG(DECIMALV3(a, b)) -&gt; DECIMALV3(38, max(b, 4))（鉴于每个系统 AVG 的精度不同，且不同用户对精度的需求也不一样，经调研，决定选择与 SQLServer 相同的策略，因此选择“4”既能保证较好的性能，也不会有较大的精度损失。）</p><p></p><p>默认规则</p><p></p><p>除上述提到的函数外，其余表达式都使用默认规则进行精度推演。即对于表达式 expr(DECIMALV3(a, b))，结果类型同样也是 DECIMALV3(a, b)。</p><p></p><h3>结果精度调整</h3><p></p><p></p><p>上述几种规则为当前 Doris 的默认行为，而不同场景对 DECIMALV3 的精度要求各不相同，远超出以上几种规则。当用户有不同的精度需求，可以通过以下方式进行精度调整：</p><p></p><p>当期望的结果精度大于默认精度时，可通过调整入参精度来调整结果精度。例如用户期望计算AVG(col)得到DECIMALV3(x, y)作为结果，其中col的类型为 DECIMALV3(a, b)，则可以改写表达式为AVG(CAST(col as DECIMALV3(x, y)))。当期望的结果精度小于默认精度时，可通过对输出结果求近似得到想要的精度。例如用户期望计算AVG(col)得到DECIMALV3(x, y)作为结果，其中col的类型为DECIMALV3(a, b)，则可以改写表达式为ROUND(AVG(col), y)。</p><p></p><h3>使用演示</h3><p></p><p></p><p>这里我们采用 <a href=\"https://www.kaggle.com/datasets/prasoonkottarathil/btcinusd\">Bitcoin 的数据集</a>\"对 DecimalV3 进行演示。</p><p></p><p>Bitcoin 的数据集部分示例如下：</p><p></p><p>Unix - 时间戳Date - 时间Symbol - 时间序列数据所指代的交易品种Open - 该时间段的开盘价High - 该时间段的最高价Low - 该时间段的最低价Close - 该时间段的收盘价Volume BTC - BTC 金额Volume USD - USD 金额</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/7e/7e3393bedc2bc45e4d732b94c866c2fd.png\" /></p><p></p><p>以下是在 Doris 中的建表存储数据，其中小数的列分别用 DecimalV3 进行存储：</p><p></p><p><code lang=\"sql\">CREATE TABLE `btc` (\n  `unix` bigint(20) NOT NULL,\n  `date` datetime NULL,\n  `symbol` varchar(30) NULL,\n  `open` decimalv3(8, 2) NULL,\n  `high` decimalv3(8, 2) NULL,\n  `low` decimalv3(8, 2) NULL,\n  `close` decimalv3(7, 2) NULL,\n  `Volume_BTC` decimalv3(10, 8) NULL,\n  `Volume_USD` decimalv3(38, 30) NULL\n) ENGINE=OLAP\nDUPLICATE KEY(`unix`)\nCOMMENT 'OLAP'\nDISTRIBUTED BY HASH(`unix`) BUCKETS 4\nPROPERTIES (\n\"replication_allocation\" = \"tag.location.default: 1\"\n);</code></p><p></p><p>我们来计算一下 2022 年 1 月 1 日这一天的平均 Volume_BTC/Volume_USD 以及总的 Volume_BTC/Volume_USD：</p><p></p><p><code lang=\"sql\">mysql&gt; select avg(Volume_BTC),avg(Volume_USD),sum(Volume_BTC),sum(Volume_USD) from btc where to_date(date)='2022-01-01';\n+-------------------+--------------------------------------+-------------------+-----------------------------------------+\n| avg(`Volume_BTC`) | avg(`Volume_USD`)                    | sum(`Volume_BTC`) | sum(`Volume_USD`)                       |\n+-------------------+--------------------------------------+-------------------+-----------------------------------------+\n|        0.51494486 | 24236.665942788256243957638888888888 |      741.52060313 | 34900798.957615088991299000000000000000 |\n+-------------------+--------------------------------------+-------------------+-----------------------------------------+</code></p><p></p><p>通过 SQL 的执行结果可以看到，通过 DecimalV3，在 Volume_USD 这一列的平均结果和总和上，实现了保留 30 位的小数。而旧的 Decimal 类型在这个例子中只能实现保留不超过 20 位。</p><p></p><h3>性能对比</h3><p></p><p></p><p>我们采用 <a href=\"https://doris.apache.org/zh-CN/docs/dev/benchmark/tpch\">TPC-H Benchmark 100G</a>\" 来对比 DecimalV3 与老版本 Decimal 的执行速度、存储占用、内存占用等性能。</p><p></p><p>我们在两个库分别对新版 DecimalV3 和老版本 Decimal 进行<a href=\"https://github.com/apache/doris/blob/master/tools/tpch-tools/ddl/create-tpch-tables.sql\">建表</a>\"。建表完成如下：</p><p></p><p>tpch1库为DecimalV3</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/2f/2f982231758ea17aff4be5dc5d49733b.png\" /></p><p></p><p>tpch2库为老版本Decimal</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/ac/acb25cf99da98afb20b1e4111f6dc99a.png\" /></p><p></p><h4>执行速度</h4><p></p><p>采用 TPC-H Benchmark 对执行速度进行测试：</p><p></p><p><a href=\"https://github.com/apache/doris/blob/master/tools/tpch-tools/queries/q1.sql\">SQL Q1</a>\"</p><p></p><p><code lang=\"sql\">select /*+SET_VAR(exec_mem_limit=8589934592, parallel_fragment_exec_instance_num=16, enable_vectorized_engine=true, batch_size=4096, disable_join_reorder=false, enable_cost_based_join_reorder=false, enable_projection=false) */\n    l_returnflag,\n    l_linestatus,\n    sum(l_quantity) as sum_qty,\n    sum(l_extendedprice) as sum_base_price,\n    sum(l_extendedprice * (1 - l_discount)) as sum_disc_price,\n    sum(l_extendedprice * (1 - l_discount) * (1 + l_tax)) as sum_charge,\n    avg(l_quantity) as avg_qty,\n    avg(l_extendedprice) as avg_price,\n    avg(l_discount) as avg_disc,\n    count(*) as count_order\nfrom\n    lineitem\nwhere\n    l_shipdate &lt;= date '1998-12-01' - interval '90' day\ngroup by\n    l_returnflag,\n    l_linestatus\norder by\n    l_returnflag,\n    l_linestatus;</code></p><p></p><p>tpch1库（DecimalV3）的 SQL 执行结果为 6.38s</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/d7/d7ea91b824437329c5eb2b3d0a1269c8.png\" /></p><p></p><p>tpch2 库（老版本 Decimal）的 SQL 执行结果为 8.13s</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/6d/6d10007613de4e3afc0f02e161c8097d.png\" /></p><p></p><p>SQL Q1 所查询的表是上述展示字段的表 Lineitem，我们可以看到在 DecimalV3 的情况下，查询 速度较老版本有 27.4% 的提升。</p><p></p><h4>存储占用</h4><p></p><p></p><p>tpch1库（DecimalV3）的 Lineitem 表的存储占用为 18.475GB</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/8a/8a115a23d7053dd6e323098d78b0468a.png\" /></p><p></p><p>tpch2 库（老版本 Decimal）的 Lineitem 表的存储占用为 20.893GB</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/19/1964efae996ea3f17cb5de025f654b0b.png\" /></p><p></p><p>可以看到在有四个字段由 Decimal 改为 DecimalV3 的情况下，存储占用有 13.1%的降低。</p><p></p><h4>内存占用</h4><p></p><p></p><p>内存占用测试我们同样使用 Lineitem 表，采用自己改写的一条 SQL</p><p></p><p><code lang=\"sql\">select count(*) \nfrom \n(   select l_quantity,l_extendedprice,l_discount,l_tax \n    from lineitem \n    where l_shipdate &lt; '1995-01-01' \n    group by l_quantity,l_extendedprice,l_discount,l_tax\n)tmp;</code></p><p></p><p>下图的 Grafana 监控中可以看到执行测试前的 Doris 内存稳定为 12.2GB</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/ee/ee716e5c0ae99daecbe0ddd8f18dacc8.png\" /></p><p></p><p>分别在两个库执行上述 SQL</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/3d/3d72b49c743fb1b09811a7a4423bb953.png\" /></p><p></p><p>在 tpch1库（DecimalV3）下执行，内存占用峰值为 26.6GB</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/d6/d6ed987b454386560ddeee04384ed4c7.png\" /></p><p></p><p>内存回落正常后，在 tpch2 库（老版本 Decimal）下执行，内存占用峰值为 30.8GB</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/7d/7de152c09ad6b8d0e0cf5251a1aa5b67.png\" /></p><p></p><p>从上方三张图中可以看到，这条 SQL 在 DecimalV3 的情况下不仅内存占用降低了 15.8%，执行时间也缩短了10s。</p><p></p><h3>总结</h3><p></p><p></p><p>Apache Doris 1.2.1 版本推出的 DecimalV3 实现了更高的精度，更高的性能，更完备的精度推演，使得 Doris 更加适用于金融财务、科学计算等有精确计算需求的应用场景，结合 Apache Doris 强大的分析计算性能，给相关用户及行业提供了更准确、完善的数据服务。</p><p></p><p>接下来，社区还将实现 JDBC 外表对 DecimalV3 类型的支持，JDBC Catalog 可以通过标准 JDBC 协议，连接其他数据源，连接后 Doris 会自动同步数据源下的 Database 和 Table 的元数据，以便快速访问这些外部数据。基于 JDBC 的通用性，结合 Apache Doris 的 高性能分析能力，实现对各类数据库数据联邦查询的高精度计算。</p><p></p><p>作者介绍：</p><p></p><p>钟永康，SelectDB 生态研发工程师</p><p>李文强，SelectDB 数据库内核研发工程师，Apache Doris Committer</p>",
    "publish_time": "2023-02-02 10:49:30",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "AI编程成本只有人类程序员的万分之一，速度却快了10000倍，再雇人类来写代码就离了大谱？",
    "url": "https://www.infoq.cn/article/PdeirrcOUj5LVTfA9EBA",
    "summary": "<p></p><p></p><blockquote>人工智能将变得非常非常擅长编写代码，其成本只有人类的几千分之一乃至几万分之一，这对软件行业意味着什么？</blockquote><p></p><p></p><p>本文是我最近的 CACM 文章《编程的终结》的姊妹篇。在那篇文章中我讨论了当编写代码这项工作被训练出来的 AI 取代时会发生什么事情。在这一篇文章中，我要研究的是 AI 在不久之后变得非常擅长为我们编写软件的话，会给我们带来哪些影响。</p><p></p><p>很明显，用于生成、调试和重构代码的 AI 在未来几年只会变得非常出色。我不认为这个结论有什么争议，但为了支持这个论点我提两点：（1）CoPilot 在给定适当的上下文和提示的情况下生成的新代码已经非常棒了；（2）让 CoPilot 的性能提升一个数量级之 u 需要更多数据和更大的模型即可。</p><p></p><p>在频繁使用 CoPilot 之前，我认为它只会鹦鹉学舌地给出相当于本科家庭作业水平的玩具解决方案。结果我发现，在实践中 CoPilot 能更频繁地读懂我的想法，出乎意料。比如说我要写一个单元测试，或写几行代码来处理一些数据结构或其他什么东西——CoPilot 就能神奇地写出我准备打出来的代码，太惊人了。</p><p>那么，当 AI 的代码生成能力比现在好 100 倍时会发生什么呢？</p><p></p><h2>在 0.001 秒内 把 PRD 变成代码</h2><p></p><p></p><p>我听到有很多人怀疑 AI 编写代码、审查代码或修复错误的能力——他们觉得这是很难解决的问题，而且 AI 工具目前表现不佳，以后也不会有什么改善。我认为这是一个典型的例子，说明人类真的很不擅长依据最近的数据点来判断问题。</p><p></p><p>我的猜测是，在不久的将来——也许是 3 年——我们将有可能指示 AI 获取软件的高级自然语言规范——比如说 PRD，或错误报告，或者一个 Slack 帖子——并从中生成“非常棒”的代码。“非常棒”是什么意思？首先我们来认真思考一下典型的人类开发团队生成的代码质量。我曾在谷歌和苹果这样的地方工作过，其实那里的代码质量并不总是最好的。即使在谷歌，代码审查是一种信仰，风格指南是福音书，每个团队的代码都接受审查，有时甚至被公司其他工程师找出漏洞——我也得承认，这样的地方也会有很多糟糕的代码。</p><p></p><p>我们需要摒弃这样一种想法，就是认为人类软件团队只要投入足够的时间和精力，就可以在某种程度上编写出正确且高性能的代码。其实在任何重要的软件项目中都不是这样的。在现实世界中，我们容忍了人类生产的软件中的大量草率和错误，那么为什么要对人工智能生成的代码设定不一样的期望呢？</p><p></p><p>到 2026 年，我们是否能完全信任 AI，可以让它在没有人类的任何输入的情况下喷出代码呢？可能暂时不会，但还好我们可以让人类审查人工智能生成的代码，并对其进行迭代（在人工智能的帮助下）。即使 AI 生成的代码比人类编写的代码更难审查，这也比依赖手速较慢的人类来编写代码有着更好的成本效益和时间效率。</p><p></p><p></p><h2>人工智能比人类便宜得多。</h2><p></p><p></p><p>人工智能驱动的“软件团队”需要多少钱？</p><p></p><p>我们可以使用 GPT-3 davinci 模型的当前定价——0.02 美元 /1K token——作为一个保守的基准（这个价格肯定会随着时间的推移而下降）。假设一名典型的人类软件工程师每天输出大约 100 行 cheked in 的新代码或更改代码。（我没有计算所有从未落在主分支上的废弃或实验代码。）是的，这个数字完全是虚构的，但即使我偏离了 10 倍，甚至 100 倍，我的观点也依旧成立。一个典型的源代码行大约有 10 个 token，因此相当于每天大约 1,000 个 token。</p><p></p><p>（为了进一步说明这一点，我从我们的代码库中提取了一个典型的源文件，该文件由几百行非常紧凑的 Python 代码组成，并使用 OpenAI 的 Codex tokenizer 对其做了 token 分析，结果平均每行产生 9.55 个 token。所以我猜一行 10 个 token 应该是个合理的估计。）</p><p></p><p>GPT-3 按输入和输出 token 计费，所以为了论证，我们假设未来 CoPilot 支持的软件创建代理的输入上下文将是最终代码输出大小的 5 倍。这相当于 5,000 个输入 token 加上上述 1,000 个输出 token，总共 6,000 个。换句话说，使用 GPT-3，以其当前的价格，生成与人类工程师一天相同数量的代码的成本高达 0.12 美元。</p><p></p><p>一名人类软件工程师每天要花多少钱？好吧，如果他们喝的健怡可乐和我一样多，那就已经超过 12 美分了。保守地假设年度总成本为 30 万美元（包括工资、福利、健怡可乐、停车场），一个自然年大约有 250 个工作日，算下来一名典型的软件工程师每天的成本约为 1200 美元，换句话说是 AI 的超过 1 万倍成本，做的却是相同的工作。</p><p></p><p>如果一个 AI 生成的代码水平与人类工程师大致相当，成本只有后者万分之一，而输出代码的速度要快大约 10,000 倍——也就是说大约 1 亿倍的成本效率——那我以后都会选择 AI 来干活儿了。这还只是取代了一名人类工程师的结果。（抱歉，前端团队的 Rob，你已经被自动化取代了！）一旦 AI 变得足够好，你再雇人类来写代码不就很离谱了吗。</p><p></p><p></p><h2>编程艺术发生了什么变化？</h2><p></p><p></p><p>哪怕上面的说法夸张了十倍，你也能看出来软件工程师是一个濒临灭绝的物种。但是，如果开发计算机软件的艺术和科学不再有人类参与，它们会发生什么变化呢？</p><p></p><p>任何软件系统都需要在代码复杂性、通用性、性能和完成时间方面做出权衡。因此，即使我们解雇了所有开发人员并用 CoPilot 2030 取而代之，我们仍然需要一种方法让（可能仍然是人类？）PM 和基于 AI 的开发团队在产品构建时就做好沟通，做出权衡，选择一个软件解决方案。</p><p></p><p>等等……我到底在说什么？！？如果编写代码的 AI，谁在乎它需要多长时间呢——无论你要求 AI 做什么，结果都是即时的。你可以获得完全通用的高性能解决方案，所需时间与人类生成粗略原型所需的时间是一样短的。于是代码的复杂程度无关紧要了，因为它不再需要传统意义上的可维护性了。如果你在星期二发布的代码在星期三没有很好地完成工作，只需启动 AI 并在几秒钟内做出来 1000 个新版本就搞定了。</p><p></p><p>关键是，当人类不再编写和维护代码时，我们所有以人为中心的软件工程艺术概念都会消失。作为程序员，我们所做的很多事情——花费最多时间的事情——都是为了让缓慢且容易出错的人类更容易做事而设计的：编写注释、为了方便以后的重构写下的代码、让代码更通用从而可复用的设计，等等。问题是，如果代码变成了主要由机器生成和维护，那么所有这些“额外”工作都是完全没有必要的。</p><p></p><p>显然，AI 编程技术要达到这一点还有很长的路要走，但我认为 AI 生成的代码在未来几年内成为常态这个预想并不怎么离谱。考虑到节约的大量成本和时间，就像 Stable Diffusion 冲击艺术界一样，类似的事件很可能很快就会冲击软件工业。我们需要弄清楚的是，后 AI 软件行业会是什么样子，以及我们现在可以做些什么来为此做好准备。</p><p></p><p>原文链接：</p><p></p><p>https://mdwdotla.medium.com/hey-lets-fire-all-the-devs-and-replace-them-with-ai-8a0c3011d12</p>",
    "publish_time": "2023-02-02 00:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "2022 中国开源年度报告",
    "url": "https://www.infoq.cn/article/EA3IfyXsCLTzSzJNc10z",
    "summary": "<h2>前言</h2>\n<p>2022 年终于过去了，我们也走出了三年 COVID 疫情的艰难岁月。新一年的《中国开源年度报告》，再一次如约呈现在各位朋友们的面前，又到了万事俱备，只差“前言”的时候了。回看过去几年撰写的报告前言，阅读待发布的报告内容，整理这一年来的大事与个人的心路历程，关于“年报”，咱们可以聊些什么呢?</p>\n<h3>关于“剧变”</h3>\n<p>在 2020 年的报告中，我写道:“也许多年以后，我们回看 2020 年，会将其称之为:世界剧变之始。”，在 2021 年的报告中，我也写了:“世界正在发生巨变，我们所处的世界，正在高速朝着某个未知的方向前进。”。在 2022 年，我们能看到些什么变化呢? 世界剧变的趋势不会毫无征兆，我们能够看出些什么趋势呢?对于未知的方向，我们可以做出哪些猜测呢?</p>\n<p>一个可能需要引起注意的现象是:科技、软件、开源，正在推动世界发生变化的同时，其自身也在被这个世界所改变。开源，正在进入下一个发展阶段。开源的个人英雄主义的时代已近⻩昏，大企业、基金会主导的开源正在成为现实。读者们可以在这几年的《年度报告》中，看出端倪。</p>\n<h3>关于“生产”</h3>\n<p>农业社会的生产，无非是等待(帮助)动植物生长。工业社会的生产，已经变得非常的庞大、精细、复杂，但是毕竟还是看得见、摸得着的。到了数字世界，在 0 和 1 组成的网 络之中，生产、创新、协作、共赢，都需要被重新定义。成本、利润、市场占有率也需要被重新计算。⸺这还是最近 20 年出现的趋势。</p>\n<p>到了 2022 年，我们看到了 ChatGPT、看到了 AIGC，看到了在各种生产环节中，AI 的介入与助力。生产，需要被再次重新定义了!</p>\n<p>在这样的过程中，开源又会发生什么变化呢?</p>\n<h3>关于“责任”</h3>\n<p>2022 年的另一件大事，就是因俄乌战争引发的全球范围内的各种连锁反应，即使在开源社区，也无法避免。在最近与朋友讨论的过程中，我表达了一种意见:“我们需要了解真实的开源世界，才能理性地思考如何面对真实的开源世界?”，“任何听风就是雨的夸大⻛险，或者掩耳盗铃式的忽略⻛险，都是不负责任的。”</p>\n<p>作为一位负责任的开源人，我们需要尽力了解、理解真实的开源世界，并且尽我们所能，推动开源世界走向好的方向，或者至少阻止它滑向更坏的方向。带着这样的思考，让我们迎接新的一年吧!</p>\n<p>庄表伟 2023.01.22</p>",
    "publish_time": "2023-02-02 13:30:30",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "又一个让马斯克害怕的“推特杀手”出现了",
    "url": "https://www.infoq.cn/article/3v2U9Ik1FCMkvW11XLyg",
    "summary": "<p></p><p></p><blockquote>又一款挑战 Twitter 的去中心化社交应用 Damus，现已正式登陆 App Store。</blockquote><p></p><p></p><p></p><h2>Damus 在 Apple App Store 上架</h2><p></p><p></p><p>2 月 1 日，Twitter 前 CEO Jack Dorsey 发推称，基于去中心化社交媒体协议 Nostr 的社交产品 Damus 已上线苹果 App Store，任何人都可以下载。</p><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/96/964931c7a6916b6893c7d24de0654f3b.png\" /></p><p></p><p></p><p>Jack Dorsey 在个人社交媒体签名中公开了自己的<a href=\"https://www.coindesk.com/tech/2023/02/01/decentralized-social-media-project-nostrs-damus-gets-listed-on-apple-app-store/\"> Nostr </a>\"公钥。他还对 Damus 上线苹果应用商店大加赞赏。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/43/4309699ebf18304f664d3537aaa1151b.png\" /></p><p></p><p>不过，Damus 上线苹果应用商店的过程并不顺利。其实上架时间本来可以再提前几周，但 Damus 却反复受到苹果的“刁难”。</p><p></p><p>Damus 的去中心化特质在最初的应用审查环节惹了点麻烦。从拒绝信息来看，苹果很明显还是在用 Twitter 等传统社交网络的指导方针对 Damus 开展审查，并没有考虑到其开放信息访问协议的特性。苹果一直要求该应用遵循与其他社交网络相同的规则，比如为用户提供标记反感内容的选项，同时发布明确的滥用约束政策。</p><p></p><p>Damus 官方账户之前曾发推文称，虽然已经解决了苹果提出的问题，但该应用还是多次被拒绝上架 App Store。</p><p></p><p>但昨天，情况发生了重大变化，Damus 应用终于获得批准。Jack Dorsey 激动地声称，Damus 在 App Store 上的首次亮相是“开放协议的一次里程碑”，代表着不受技术巨头操纵的新一代社交工具已经开始落地……</p><p></p><p>Nostr 甫一上线，便迅速在加密社区引起了热烈的讨论，很多社区成员纷纷在社交媒体和社区内分享个人 Nostr 公钥。今天，Nostr 在国内刷屏了朋友圈。</p><p></p><p>截至 2 月 1 日，Damus 的 Twitter 账户拥有 17700 名粉丝。Damus 现已入驻 GitHub（https://github.com/damus-io/damus）和 App Store（https://apps.apple.com/ca/app/damus/id1628663131），目前在美国 iOS 社交网络类应用中排名第 10。Damus 还在其他四个国家 / 地区进入了应用人气总榜，分别为：香港（第 9）、瓦努阿图（第 90）、新加坡（第 91）和澳门（第 92）。</p><p></p><p>Damus 的外观设计和使用感受跟 iOS Twitter 应用非常相似。但它跟其他社交网络应用间的最大区别，在于隐私信息使用范围。</p><p></p><p>根据苹果的要求，Twitter 官方应用承认会收集用户的的购买记录、联系人信息、浏览记录使用情况数据，位置，用户内容，身份，搜索历史，诊断等数据。</p><p></p><p>而与之对应，Damus 的描述相当简洁：未收集数据。开发商不会通过此应用收集任何数据。</p><p></p><p>媒体评论员将 Nostr 描述为去年被马斯克收购的推特的替代品。有加密社区成员认为，Nostr 将成为“推特杀手”。</p><p></p><p>去年，Twitter 联合创始人 Jack Dorsey 豪掷 14 枚比特币（当时约合 24 万 5 千美元），资助开发基于加密密钥对的开放式去中心化社交网络协议 Nostr。</p><p></p><p>根据 Nostr 官网的介绍，Damus 只是多个正在开发中的 Nostr 项目之一。此外还有 Anigma，一种类似 Telegram 的聊天应用；Nostros，一个移动客户端；Jester，一个国际象棋应用程序。</p><p></p><p>这位 Twitter 前任高管一直忙于构建 Bluesky，这是另外一个由新型 AT 协议支持的去中心化社交网络，未来也准备发布类似的客户端应用。</p><p></p><p></p><h2>如何注册，详解功能和体验</h2><p></p><p></p><p>Damus 产品于 2022 年 4 月份开放内测，目前开放苹果手机端、iPad 和谷歌商店下载，用户可直接创建账户，且创建账户时只需输入个人习惯使用的 username，无需电话号码、电子邮件、姓名等个人信息。</p><p></p><p>创建好账户后，系统会弹出公钥（npub 开头，对应用户的“ID”，可以分享给朋友来关注，也可以自行设置用户名），点击公钥旁边的复制按钮，随后系统自动弹出私钥（nsec 开头，对应用户对账号的最高控制权，需要自己保存），继续点击私钥旁边的复制按钮可进入 Damus 产品界面。</p><p></p><p>与推特类似，Damus 首页右下方「+」为发帖入口。与当前大多数社交网路类似，Damus 也设置了话题标签功能，在发布帖子时可以在 # 后加上主题或者话题单词。不过如果发帖时要加图片，只能将图片先转换为连结才可发布。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/bb/bb340b8a5ff60773ba5b44621d18ce61.jpeg\" /></p><p></p><p>Damus 首页下方有朋友圈、私信和新朋友请求、Global 和通知四个按钮，朋友圈时间线栏可以接收到关注用户的动态，Global 中可以实时浏览所有 Damus 用户的动态，也支持直接搜索其他用户名或者公钥地址，但仅支持搜索用户名或者公钥，不能搜索具体内容。除此之外，Damus 还支持用户报告和屏蔽功能，可以报告骗局、非法、冒充等帐号。</p><p></p><p>整体而言，Damus 页面设计简约大方，但很多功能有些粗糙且不完善，例如发帖不支持样式编辑、发文后不可删除、点赞或转推后不可撤销、图片需要转成连结才能发布。此外，趋势、过滤器等高级需求也亟待添加。值得一提的是，Amethyst 还有群聊功能，在这里可以结交志趣相投的朋友，也有利于形成强大的社群网路效应。</p><p></p><p>网站版 snort.social 有删文选项，但存在 bug，删除后刷新还是会显示出来。也有用户反馈，下载的 Damus 手机版为德文或者西班牙语版本，而且未发现有语言变更选项。此外，Damus、Amethyst 和网页 snort.social 也可以用一个私钥地址登陆，个人发布动态也会同步。</p><p></p><p></p><h2>去中心化社交媒体协议Nostr 是什么？</h2><p></p><p></p><p>Nostr 是一个开放协议，旨在创建一个抗审查的全球社交网络，这不是一个单一的网站，而是一个由成千上万的用户组成的网路，这些用户可以相互发布到彼此的中继服务器，服务器可以无缝地相互交互。</p><p>其实 Nostr 这项技术的基本定义并不新鲜：基于加密密钥对的非点对点去中心化网络。</p><p></p><p>Nostr 的全称也透露出更多信息：“Notes and Other Stuff Transmitted by Relays”，即由中继传送的笔记和其他资料。本质上，它允许任何人创建自己的社交网络平台，并分享给你所指定的任何对象。</p><p></p><p>大家不需要任何服务器或者技术知识，甚至不需要 Nostr 账户，因为 Nostr 当中就不存在账户这个概念。Nostr 并非平台，而是一种协议。没有 Nostr 公司、没有 CEO 或者董事会，只有为开源协议做出贡献的开发人员。只要掌握公钥，它就能识别出你的身份。</p><p></p><p>目前，Nostr 的主要用例是打造类似于 Twitter 的社交网络服务，但其应用前景远不止于此。Nostr 之于社交网络，就如同 HTTP 之于信息或者 IMAP 之于通信。它是种底层协议，你可以在其上构建自己需要的任何项目。</p><p></p><p>Nostr 强调自己的无审查制度：没有监督方控制哪些内容允许、哪些内容不允许。Nostr 以中继为基础，而使用该协议的 Damus 应用也只是提供推荐内容，并在后续使用中弹出更多新消息。</p><p></p><p>某些付费中继号称可用于过滤垃圾邮件，但这部分业务可能将很快消失。Start9 这类家庭服务器产品甚至在开发中就用到了 Nostr 中继。Nostr 还支持端到端的加密私人消息传递，同样不依赖任何服务器。</p><p>Nostr 协议能否成功仍有待观察，但在 Twitter 和 Facebook 等主流社交网络引发巨大争议的同时，这无疑给我们带来了新的、相当有趣的选项。</p><p></p><p></p><h2>整合比特币的Lightning Network</h2><p></p><p></p><p>Nostr 在比特币用户中很受欢迎，部分原因是它的大多数实现都支持通过比特币的的 <a href=\"https://www.infoq.cn/article/GuXeWAFLaLW2pQlKVdHb\">Lightning Network </a>\"进行支付。</p><p></p><p>对比特币的集成也是 Damus 体验中的重要组成部分。Damus 这类 Nostr 应用能访问比特币的 Lightning Network，借此开放创作打赏功能。例如，用户可以使用比特币打赏好友的帖子，借助的是比特币的 Lightning Network。通过 Strike 等应用，Damus 用户可以向作者发送 0.10 美元，借此支持对方创作的优质博文、播客或帖子。</p><p></p><p>Visa 卡不支持 0.10 美元这类小额转账，但比特币的 L2 Lightning Network 却允许人们以几乎免费的方式向世界各地的他人汇款，全程无需借助银行。有 Nostr 支持者提到，Twitter 上的货币载体是流量，而 Nostr 的则 Sats（即中本聪 Satoshi 的缩写）。1 比特币等于 1 亿 Sats。</p><p></p><p>Profile 设置方面，Damus 允许更换头像和背景图片（通过图片连结）、添加自己的网站以及简介信息，还支持设置比特币闪电小费地址，这也是 Damus 的一个核心亮点。</p><p></p><p>当前，Damus 支持的闪电小费支付平台包括 Strike、Cash App、Muun、Blue Wallet、Wallet of Satoshi、Zebedee、Zeus LN、LNLink、Phoenix、Breez、Bitcoin Beach、Blixt Wallet、River。</p><p></p><p></p><h3>Damus 六大优势</h3><p></p><p></p><p>Damus 将自己定位为「你可以控制的社交网路」。根据 Damus 官网描述，Damus 有以下六大优势：</p><p></p><p>用户控制：建立在开放的网路协议 Nostr 之上，没有任何平台可以禁止或审查，用户可以控制自己的数据和语音；讯息加密：端到端加密的私人消息传递；无需注册：创建帐户不需要电话号码、电子邮件或姓名；无需服务器：消息通过去中心化的中继分发，无需运行任何基础设施，也没有单点故障；可程式设计：允许轻松集成机器人，帮助用户实现生活或业务自动化。Damus 也会在你的服务器出现故障时进行通知。小费：支持用比特币和闪电网路打赏朋友的贴文和 stack sats。</p><p></p><p></p><h2>替代 Twitter 的另一个选择</h2><p></p><p></p><p>这款新应用，也是马斯克接手 Twitter 之后涌现的替代品大军中的最新一员。</p><p></p><p>由于担心马斯克粗暴干涉 Twitter 社区规则，人们纷纷转向 Tumblr 等原有应用，甚至开始积极尝试 <a href=\"https://www.infoq.cn/article/8cCHD4twQffIKwyC23OT\">Mastodon </a>\"等去中心化社交服务。T2 和 Spill 等仍在种子轮融资阶段的初创公司，也在开发自己的 Twitter 替代方案。</p><p></p><p>但 Damus 并不是一家由风险投资支持的初创企业。相反，他们希望为去中心化社交网络设计新的实验。所谓去中心化社交网络，就是放弃 Facebook 或 Twitter 那样以中央机构决定网络发布内容 / 用户参与权的基本制度，转而打造完全开放的社交环境。</p><p></p><p>Damus 在主页中写道，“一切尽在你的掌控……无需担心任何封禁或审查，你的数据由你控制。”网站还专门宣传了消息加密——Twitter 并不具备这项功能，很多用户在马斯克接手之后才意识到加密的重要性。</p><p></p><p>在 Nostr 的支持下，Damus 也不需要通过电话号码、电子邮件或者姓名进行注册，这就跟 Mastodon 形成了差异。在 Mastodon 中，用户账户被附加至特定服务器，管理员能在一定程度上控制该服务器的注册用户。也就是说，用户当前使用的 Mastodon 服务器一旦出现问题（例如宕机），则可能影响用户正常访问社交网络。而如果突发故障或永久下线，数据也可能丢失。</p><p></p><p>在 Damus 上，消息通过去中心化中继实现分发——Nostr 全称是“Notes and Other Stuff Transmitted by Relays”，即由中继传送的笔记和其他资料。其中不涉及 Mastodon 那样的服务器联合网络，但某些 Nostr 中继据说能更好地过滤垃圾邮件。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/5e/5e4aa61f3ff1cd446288ff7f7a2501f9.png\" /></p><p></p><p>更安全的 Nostr 中继（可过滤掉回复和全局提要中的垃圾邮件）</p><p></p><p>另外，跟 Twitter 不同，Damus 上帖子的长度可以超过 280 个字符。</p><p></p><p>据外媒体报道，Nostr 的早期测试人员包括以太坊联合创始人 Vitalik Buterin，曾因解密震动全球的爱德华·斯诺登，以及支持加密货币的美国参议员 Cynthia Lummis。</p><p></p><p>相比之下，作为马斯克时代下 Twitter 用户的主要逃离目标，Mastodon 使用的是一种名叫 ActivityPub 的旧协议。Bluesky 和 Mastodon 将无法交互，除非其中一方选择与另一方的协议集成、或者设计出其他过渡系统。</p><p></p><p>Damus 开发者 William Casarin 表示，基于 Nostr 协议的新应用同样无法跟 Mastodon 或 Bluesky 实现互操作，但未来“可能会在这些协议间架起桥梁”。</p><p></p><p>Damus 的面世让开放协议生态又增一员，现在看来 Twitter 替代品之争绝不仅仅是硅谷初创公司之间的对抗，更是对于未来社交网络底层技术主导权的争夺。</p><p></p><p>不过，Damus 和作为基础设施的 Nostr 目前还处于早期阶段，与比特币和 Web3 的结合给了我们很多想象空间。Jack Dorsey 的去中心化社交愿景能否大规模实现，让我们拭目以待。</p><p></p><p>参考链接：</p><p>https://www.coindesk.com/tech/2023/02/01/decentralized-social-media-project-nostrs-damus-gets-listed-on-apple-app-store/</p><p>https://www.blocktempo.com/decentralized-twitter-damus-user-experience-sharing/</p><p>https://9to5mac.com/2023/02/01/nostr-iphone-app-damus/</p><p>https://techcrunch.com/2023/02/01/damus-another-decentralized-social-networking-app-arrives-to-take-on-twitter/</p><p>https://www.infoworld.com/article/3686511/google-blew-it-with-open-source-layoffs.html</p>",
    "publish_time": "2023-02-02 15:04:30",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "管理不好软件复杂度，大厦倾颓随时可能发生 | 独家对话《代码大全》作者",
    "url": "https://www.infoq.cn/article/45V2FCGDxm9YYWf8oWIX",
    "summary": "<p>史蒂夫·迈克康奈尔（Steve McConnell）被公认为软件开发社区中的首要作者和发言人之一。他是Construx Software公司的首席软件工程师。他所编著的图书包括曾被《软件开发》杂志授予优异产品震撼大奖的《代码大全》和《快速软件开发》，以及《软件项目生存指南》和《专业软件开发》等等。</p><p>&nbsp;</p><p>他撰写的无论是《代码大全》还是《快速软件开发》，主要聚焦的内容都是敏捷开发、高效开发，许多开发者在阅读过两本书后均表示Steve撰写的书实用性很高，是历久弥新、永不褪色的经典之作。</p><p>&nbsp;</p><p>从第一版《代码大全》到最新出版的《卓有成效的敏捷》，20多年来，Steve一直倡导敏捷开发、高效开发。不久前，InfoQ有幸采访到了Steve，与他聊到了创作《代码大全》的过程以及他对敏捷开发、编程复杂性、代码可读性等时下热门话题的理解。</p><p>&nbsp;</p><p>Steve称，在最初写作时，他并没有想过写一本篇幅如此宏大、知识点覆盖如此全面的书籍。据他回忆，为了完成《代码大全》，他曾翻阅80多本书，但在翻阅书籍的过程中却发现并没有一本书能详实关于软件开发实践的细节，于是Steve决定自己写一本这样的书来填补空白。</p><p>&nbsp;</p><p>在书中，Steve特别强调了要<a href=\"https://mp.weixin.qq.com/s?__biz=MzU1NDA4NjU2MA==&amp;mid=2247534140&amp;idx=3&amp;sn=ad8fa6bf4119e9d7f6e5e3e6b1934246&amp;chksm=fbeafff3cc9d76e5550027cfd177178b96121cc42aab36b590cc34a7661ce81ebd20a0082bb3&amp;scene=27#wechat_redirect\">管理软件的复杂性</a>\"，Steve认为大型编程项目极具挑战，要管理成千上万人写的代码，如果不对复杂性做出限制，那么项目的每个步骤都可能崩溃失控。</p><p>&nbsp;</p><p>提及敏捷开发时，Steve认为不能把敏捷单独列出，也不把它当成独立于<a href=\"https://qcon.infoq.cn/2023/beijing/track/1299\">编程</a>\"之外的东西，它只是一种普通的编程方式，很大程度上已经成了良好实践的统称，不必过于纠结是否是敏捷。除了敏捷之外，另一种好的编程方式是写出可读强的代码，Steve表示，“能跑起来的代码不一定是好代码”，代码是为人服务的，真正的好代码得能随时间推移而持续成功，这样才能供他人处理和扩展而且可以更正，还要看他人能不能读懂代码内容。</p><p>&nbsp;</p><p>以下为 InfoQ 与《代码大全》作者的独家访谈实录，经编辑。</p><p></p><p></p><p></p><p></p><h2>耗时三年半，写完900多页《代码大全》</h2><p></p><p>&nbsp;</p><p></p><blockquote>InfoQ：您最近都在忙什么？在关注哪些技术呢？</blockquote><p></p><p>&nbsp;</p><p>Steve：我最近在研究领导力方面的内容，我觉得很多软件从业者，在职业生涯后期总会进入一种模式——会更多地开始<a href=\"https://gmtc.infoq.cn/2023/beijing/track/1314\">扮演领导角色</a>\"，我本人也是如此。就技术发展和技术趋势而言，在第一版《代码大全》出版以来，我觉得这些年间最让人印象深刻的变化就是程序员们往往将大部分时间花在一种技术上或者说只关注一种编程语言。</p><p>&nbsp;</p><p>当然，人们也会学习其他工具，但多数人确实可能每天都在用C或者<a href=\"https://www.infoq.cn/article/Y9KJX5zaEXov90wK68JP\">C++</a>\"，如果再回溯得更古早些时候，也可能是Fortran。到我完成第二版《代码大全》时，人们将大部分时间花在同一种技术上的情况也仍然非常普遍。</p><p>&nbsp;</p><p>即使是现在程序员们的工作技术栈，也总有种例行公事的感觉，他们只是在象征性地使用多种语言或者是把低级语言跟脚本语言混合使用。在《代码大全》的序言部分，我说我认为程序员职业生涯中的分水岭，就是开始学习第二语言，但时至今日我发现使用两种语言才是普遍现象。这已经成为他们日常业务的一部分，甚至不只两种语言，我不知道该不该称其为趋势，这种情况在最近这几年已经屡见不鲜了。</p><p>&nbsp;</p><p></p><blockquote>InfoQ：您当初创作《代码大全》的初衷是什么？第一版耗时多久完成的？中间发生过哪些令您印象深刻的事？</blockquote><p></p><p>&nbsp;</p><p>Steve：这本书大概花了我三年半的时间才完成，差不多3500个小时的全身心投入。我最初只打算写篇杂志投稿，只想写点编程风格和编程技巧之类的短文，于是我特意为此收集了一些资料。在写第一版那会儿还没有互联网，所以不能靠搜索引擎来找到我想要的答案，而是得去大学、去学术图书馆里找资料。我花了很长的时间在巨大的馆廊里跑来跑去，翻阅各种杂志，还得查看那些实体卡片目录，然后再到相应的书架上找书。</p><p>&nbsp;</p><p>我住的地方离华盛顿大学很近，所以我就去了那边校区里至少三处不同的图书馆查阅资料。当时，我以为肯定已经有人写了关于软件开发实践的书籍，只是我没听说过罢了。</p><p>&nbsp;</p><p>当时，我大概翻阅了80多种不同的书籍和文章，随着资料查得越来越多，研究越来越深入，我发现市面上与软件编程实践相关的书籍并不多，甚至没有一本书是专门讨论<a href=\"https://gmtc.infoq.cn/2023/beijing/track/1311\">软件编程实践</a>\"主题的，这让我十分震惊。而在我翻阅众多书籍的过程中，我积累了许多关于这方面的知识，所以我决定自己写一本这样的书来填补这一空白。</p><p>&nbsp;</p><p>在这三年半期间，我用了大概一年半的时间收集资料、试写部分章节，之后花了一年时间全职写书，又用了近一年时间参与编辑。</p><p>&nbsp;</p><p>在我心里，我深知软件开发实践内容的重要性，但当我写这么一本书的时候，我发现很难向他人解释书的内容，他们理解不了我在说什么、做什么。我甚至专门找了位朋友帮我从头到尾审阅手稿，我觉得这样边写边给他看，理解起来应该很简单。让我感到意外的是，他并不能完全理解我在写些什么，这也让我意识到，很多对我自己显而易见的问题对其他人来说很难理解，所以我写这本书时尽量让内容详实、易懂。</p><p>&nbsp;</p><p>在写书的三年多时间里，让我印象最深刻的就是为手稿和大纲收集同行评审意见。我跟出版商签过合同 所以得先提供一份大纲，我就试写了几个章节交给五六个朋友审阅，他们的意见非常重要，我最终提交给出版商的素材至少是评审之前的两倍。而在真正开始写手稿时，内容接受了约12个人的审阅，那时还没有互联网，我就把纸质版手稿分章节寄给他们，收到的意见反馈同样是手写信件或电邮副本，而最终出版的第一版《代码大全》的篇幅也从最初设想的250到350页激增至900多页。</p><p>&nbsp;</p><p>回顾整段经历，我体会到了同行评审的价值，时至今日，这些手写信件和电邮对我来说都弥足珍贵。</p><p>&nbsp;</p><p></p><blockquote>InfoQ：这本书取得的成就是否满足了您的预期？</blockquote><p></p><p>&nbsp;</p><p>Steve：在1992年向出版商提交第一版手稿时，我从没想过25年后会在采访中谈写书的感受，太奇妙了！</p><p>&nbsp;</p><p>创作初期，我给自己定的目标没有那么高，如果当时就想到要写900多页，可能就会头大了。总之，虽然最终耗费了很大的工作量，但最终《代码大全》的反馈很好，它的销量远超我的想象。当时我觉得最好的情况大概能卖10万册，但在被翻译成不同语言和版本之后，它卖出了超100万册，这比我最乐观的估计都要多得多。</p><p>&nbsp;</p><p></p><h2>编程语言没有好坏之分</h2><p></p><p>&nbsp;</p><p></p><blockquote>InfoQ：您在《代码大全》书中曾提到，“与使用低级语言的程序员相比，使用高级语言的程序员可以获得更高的生产力和质量。与汇编语言和 C 等低级语言相比，C++、Java、Smalltalk 和 Visual Basic 等语言在提高生产率、可靠性、简单性和可理解性方面被认为提高了 5 到 15 倍”。但据TIOBE 2022年10月编程语言排名来看，Python、Java、C 成为了TIOBE 榜单的前三甲，还是有很多人愿意使用C语言，对此现象您怎么看？</blockquote><p></p><p>&nbsp;</p><p>Steve：在我当初发表这条评论，或者引用程序员使用高级语言时效率更好的结果时，谈论的主体其实都是通用语言，而实际上绝大多数语言也都属于<a href=\"https://gmtc.infoq.cn/2023/beijing/track/1312\">通用语言</a>\"。所以我想要表达的是只要任务能用通用语言来完成，那使用高级通用语言要比使用低级通用语言的效率高。但之后多年当中，语言本身的专业化倾向越来越显著，语言在特定用途上的表现也更好了，换言之，某些语言确实不再像过去那么“通用”了。</p><p>&nbsp;</p><p>C语言之所以还那么受欢迎，是因为一些从事硬件设备或其他类型的低级编程的程序员们确实还是很喜欢使用它。对于这类特定用途的编程来说，C仍是个好工具。需要强调的是，我提到的高级编程语言可以提高效率这一概念的核心是为合适的工作选择合适的语言，而不是单纯地评价哪种语言是好或是坏。</p><p>&nbsp;</p><p>我现在的观点是，如果某种语言对于任务来说太高级了，那就得额外花时间搞清很多实现细节，这就跟设计目的错位了。同样地，如果选的语言对任务来说太低级，那就得额外做大量编码才能完成工作，所以语言的优劣只体现为更适合哪种工作场景，而不是说一种语言天生就比另一种语言好。</p><p>&nbsp;</p><p></p><blockquote>InfoQ：第二版《代码大全》和第一版最大的区别是什么？</blockquote><p></p><p>&nbsp;</p><p>Steve：第二版《代码大全》确实跟第一版那会儿有不同。在写第一版时，确实花了很长时间来打磨内容。面向对象编程其实更像是研究课题，而非具体实现，那时候敏捷理念还没出现。到我写第二版的时候，面向对象编程已经成为实用议题，而且在商业实践中得到了广泛应用，其普及度之高，甚至火出了圈，成为了一种可供人们参考的编程方式。另一方面，在编写第二版时，<a href=\"https://www.infoq.cn/article/QiEA7L4yQNaoBluK51Ps\">敏捷的概念</a>\"仍然很新，所以编写第二版时的一大挑战，就是决定要在多大程度上把敏捷设置成独立议题，或者说把相关良好实践整合到常规工作当中。</p><p>&nbsp;</p><p>最终我决定不把<a href=\"https://www.infoq.cn/article/GVQf1JJq5DNICm2aLtze\">敏捷</a>\"单独列出，也不把它当成独立于编程之外的东西，我只谈它的好处，视它为一种普通的编程方式，我觉得这个决定还挺明智的，我认为敏捷很大程度上已经成了良好实践的统称，这些实践普遍有效而且包含或成功或失败的文化迭代，这就是第一版与第二版之间发生的大变化。</p><p>&nbsp;</p><p>具体来讲，编程语言及其使用方式都与以往有了很大不同，我认为第二版中使用的编程语言到现在仍未过时，而且如今人们在用的语言数量则出现了爆炸式增长，这是实实在在的转变。</p><p>&nbsp;</p><p></p><h2>软件构建的核心就是管理复杂度</h2><p></p><p>&nbsp;</p><p></p><blockquote>InfoQ：您身上有很多标签，比如技术作家、演讲者、企业家等，这些角色中您最喜欢哪一个，为什么？</blockquote><p></p><p>&nbsp;</p><p>Steve：我自己其实一直在程序员和作家这两个角色间反复横跳。从一线程序员到全职作家，单这个过渡期就有一年。在写了一阵子书之后，我感觉自己爱写书开始多于写代码。但到后面我又开始厌倦了，我迫切想要回去编程，当时我甚至感觉自己以后再不会写书了。</p><p>&nbsp;</p><p>在又编了几年程之后，我觉得编程挺好，却也怀念写作，所以又开心地投入到第二本书中，边写边觉得写书才最快乐。但第二版写到了一定阶段，我又想起了编程的好，最终我意识到自己其实不太定性，喜欢反复横跳。</p><p>&nbsp;</p><p>但我也从编程中学到了很多写编程书所用的知识，如果我仅仅是一名作家，那可能永远没机会验证自己写的东西能不能真正跑起来。所以不能说我单纯喜欢写作或者编程，这两者对我来说是相辅相成，相互成就的。</p><p>&nbsp;</p><p></p><blockquote>InfoQ：您书中传递出来两个很重要的观点：1，软件构建的核心就是管理复杂度；2，以程序员为本。先来说说第一个，软件构建的核心就是管理复杂度，为什么会这样认为，能举个具体的例子吗？写代码时该如何管理好复杂度，您有什么建议吗？</blockquote><p></p><p>&nbsp;</p><p>Steve：没错，我在书里谈了不少如何<a href=\"https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;mid=2651005812&amp;idx=1&amp;sn=975d9b02e74206d167f523c17b1b2e91&amp;chksm=bdbedb278ac952319a24e3919bab0e4fe10afd3a8714f38affbaf4b8e1c8c6cb861876d0389d&amp;scene=27#wechat_redirect\">管理复杂性</a>\"，因为我觉得只要了解编程的基础知识，那小型编程项目其实都不困难。但大型编程项目却极具挑战，部分原因在于人员管理问题以及如何协调大量人员，这是一项极其困难的脑力工作。</p><p>&nbsp;</p><p>实际上，软件开发是极少数既需要协调人量人力又不具备实体的工程技术项目，建筑项目也很复杂而且涉及大量参与者，但他们面对的是有形的实体，所以能以物理形式进行跟踪。同样，桥梁隧道之类的工程项目也是如此，现场参与者虽然成百上千，但各个步骤或者施工环节确有切实的线索可抓。但在软件中很多工作无形无相，所以除了我们自己的想象力外再无跟踪事态的可靠线索。所以大型软件项目因复杂性而失控的可能性远超人类从事过的几乎任何其他项目，其根源就是软件项目的无形性，而且大型软件项目很快就会超出个人的理解力上限，没人能理解项目中的所有代码，毕竟这是成百上千人的成果。</p><p>&nbsp;</p><p>所以面对这些规模更大的项目，如果不对复杂性做出限制，那么项目的每个步骤都可能崩溃失控。以往，无数大型项目都在砸下巨量资金后失败了，原因就是其<a href=\"https://www.infoq.cn/article/01lSNZeEKNTyh3wwGfvo\">过于复杂</a>\"，已经无人能理解究竟发生了什么，就如同过于庞大的巨兽被自身重量所压垮。</p><p>&nbsp;</p><p>具体来讲，复杂性其实贯穿于软件开发的各个阶段，复杂性在编码过程中，因为如果底层代码的质量不好，超大规模系统也可能就由此崩溃。所以必须立足底层，立足细节抓代码质量，关注每个语句、例程和类，步步为营，以此为基础才能扩大规模，同时继续保持代码质量，即在设计和架构层级控制复杂性，对复杂性控制要广泛而深入地体现在软件开发的各个阶段。</p><p></p><h2>“能跑起来的代码不一定是好代码”</h2><p></p><p>&nbsp;</p><p></p><blockquote>InfoQ：您书中传递出来的第二个观点是以程序员为本，您书中提到的“以程序员为本”，即代码是为了人而写的，不是为了机器，所以代码要以程序员为本，为程序员服务，那么该如何提高代码的可读性呢？</blockquote><p></p><p>&nbsp;</p><p>Steve：很多科班出身的程序员尤其是很多初入职场的新手一直有个误区，他们认为能跑得起来的代码就是好代码。但专业级别的商业编程有新的要求，代码不能只跑通一次。学校作业能跑通一次就算合格，但商业代码得能稳定运行多年，工作五年、十年、二十年，还得易于理解，这样移交后，其他人也能处理后续，继续移交，并仍然能保持稳定。第四、五、六个人都能接手，这明显跟大学教育里的要求完全不同了。能跑通的<a href=\"https://www.infoq.cn/video/lclHl49VedBpoqUVXM6h\">代码</a>\"并不可靠，必须做得更好，否则你就不算是专业的程序员，真正的好代码得能随时间推移而持续成功，这样才能供他人处理和扩展而且可以更正，还要看他人能不能读懂代码内容。</p><p>&nbsp;</p><p>很多程序员认为自己的主要工作是跟计算机沟通，编写计算机能懂的代码就行。确实，但也不完全对，还有另一部分，就是通过代码跟其他人沟通，这是一种非常重要的心理转变。</p><p>&nbsp;</p><p>有时候，甚至富有经验的程序员也会犯错，误以为代码能跑就万事大吉。在我看来，代码能跑通只是万里长征的第一步，往上还有很多级，拾级而上才能让代码具有可理解性，可供他人接手处理。</p><p>&nbsp;</p><p></p><h2>是否敏捷并不重要，重要的是能解决问题</h2><p></p><p>&nbsp;</p><p></p><blockquote>InfoQ：在您的书中，您大部分内容都聚焦在敏捷开发上，但似乎敏捷开发并不适合所有企业，您认为什么样的团队适合敏捷？</blockquote><p></p><p>&nbsp;</p><p>Steve：关于<a href=\"https://www.infoq.cn/article/2014/10/importance-discipline-in-agile\">敏捷开发</a>\"，我写了一本新书《More Effective Agile》。“Effective（有效）”这个词我是认真考量过的，我觉得关于敏捷开发有不少认知误区，好像开发只有敏捷或者不敏捷之分。事实上，不能这样简单粗暴地定义敏捷开发。</p><p>&nbsp;</p><p>现在，敏捷概念下集中了大量实践。二十多年来，我们一直在讨论实践、讨论敏捷，讨论能不能支持敏捷原则和价值主张，但我觉得这些讨论并没有抓住重点，重点应该是真正用软件和开发来达成某些目标，某些敏捷案例能够支持业务目标，而某些则不能，所以与其硬去评判某个项目是否敏捷，倒不如考虑该向项目引入哪些元素来支持业务目标。如果我们开发的是移动应用，而且该应用的更新需求比较频繁，那也许可以每周更新一次，有些组织的软件每天可能更新几百次，对于这类组织，敏捷就很有意义。但如果所开发的是嵌入式固件软件，比如是那些需要安装在飞机、航天器或者船舶上的设备，而且设备本身的更新频率不会太高，我觉得这类软件就不适合敏捷。</p><p>&nbsp;</p><p>可靠性跟高质量是两个不同的目标，而敏捷并不普遍适用。当然，也有一些办法能把敏捷实践元素引入到安装到飞机上的软件中，这时候它们的意义就不在于敏捷而只是种被证明能提高质量的有效办法。到底是否是敏捷并不重要，重要的是这些实践能否帮助项目达成目标。</p><p>&nbsp;</p><p></p><blockquote>InfoQ：“试图通过增加测试量来提高软件质量，就像试图通过更频繁地称重自己来减肥一样。你在上秤前吃的东西决定了你的体重，而你使用的软件开发技术决定了测试会发现多少错误”，但不经过足够的测试，如何判定软件的质量呢？您认为软件测试的量多少为最佳，是否有个标准？</blockquote><p></p><p>&nbsp;</p><p>Steve：我并不是说测试不重要，测试当然很重要，我想表达的是，按当时的软件开发方式，人们更倾向于先编写大量代码后再统一做测试，那时候的测试属于事后环节。</p><p>&nbsp;</p><p>在之后的几年中，开发模式发生了很大变化，测试开始更多融入到开发流程当中。所以现在来看那个比喻已经不适用了，更准确的说法应该是：我刚吃了一根胡萝卜，就跑到秤上称一下看看有什么变化，之后再吃一根胡萝卜，再称一下，这么做对于结果来说毫无影响。吃点东西就去称体重的做法是荒谬的，但写点代码就去测确实是正确的软件测试思路，更理想的思路甚至希望在编写代码前先编写测试。</p><p>&nbsp;</p><p>我在《代码大全》第一版里分享过一个故事，故事说有个女人每天起床都会上秤，只要发现超重，她就只吃胡萝卜和芹菜直到恢复到她理想的体重状态，因为她每天都坚持这么做，所以她从不会超重太多，因为每次发现超重后她就会立刻纠正，这基本就是软件测试的意义。只要测试够频繁就不会遇到太多麻烦。</p><p>&nbsp;</p><p></p><h2>编写代码的最快方法就是提高代码质量</h2><p></p><p>&nbsp;</p><p></p><blockquote>InfoQ：您提到过，“复制和粘贴是一种设计错误”，但其实很多代码是通用的，我们如何能“既保证代码的原创性又不去重复造轮子”呢？这中间的尺度该如何把握？</blockquote><p></p><p>&nbsp;</p><p>Steve：“复制和粘贴是一种设计错误”其实不是我提出来的，是其他开发伙伴提出来的，我很喜欢这句话。这话的意思是，如果你正在编写代码而且在复制和粘贴代码片段，那你就错过了深入剖析代码的机会。当然，复制和粘贴也有其必要性，我自己有时候也会复制和粘贴，但我想强调的是希望大家在复制粘贴时能思考下到底要不要深入琢磨问题中的共性，这背后是不是有需要关注的规律？</p><p>&nbsp;</p><p>技术发展至今，开发者们变得更加聪明，开发效率也更高效，他们已经习惯把经常调用的模块打包起来以便随时复用，这和简单的复制粘贴还是不完全一样的。我们现在的全球基础设施令人赞叹，它的根基就是大规模的软件复制，这是很正常的现象，没什么不对。</p><p>&nbsp;</p><p></p><blockquote>InfoQ：复制粘贴能提高一些编程效率，但如果想要在更短时间内写出更高质量的代码，程序员应该培养哪些技能或编程习惯？</blockquote><p></p><p>&nbsp;</p><p>Steve：长久以来的经验表明，编写代码的最快方法就是提高代码质量。1970年，IBM的一项经典研究发现，被要求尽快完成工作的编程团队最容易写出有缺陷的代码，而且交付速度也最慢；被要求保证质量的团队不光代码质量好，交付也更及时。</p><p>&nbsp;</p><p>所以这个问题的答案就很明确了：要重视代码质量，质量就是结果。对于那些需要超级可靠的软件，比如飞机的飞行控制软件或者嵌入心脏起搏器或医疗设备的软件，那就得通过更长的时间和额外的步骤才能保证这样的质量水平。但对于常规的商业编程、应用编程而言，最有效的办法就是尽量保证初始代码的高质量，这样就不用花太多时间调试和重写。</p><p>&nbsp;</p><p>很多程序员是花半个小时写代码然后花四个小时做调试，这明显大有问题，如果程序员最初能花一个小时甚至更多时间对代码“精雕细琢”，那也许后期的调试只需要半个小时且整体效果更好。</p><p>&nbsp;</p><p></p><h2>80%的情况下没必要重构代码</h2><p></p><p>&nbsp;</p><p></p><blockquote>InfoQ：《代码大全》这本书主张开发者应跳过“先做再修正”（code and fix） 和“始于大设计”（Big Design Up Front）的瀑布模型，近年来这个模型有哪些变化吗？您想通过这个模型向外传递的价值点是什么？</blockquote><p></p><p>&nbsp;</p><p>Steve：我写这本书绝不是让大家跳过瀑布模型，或者让人们以特定某种方式做事，比如预先做整体设计，这本书想让人们摆脱纯编码和纯修复，把编程变成一件有趣的事。我认为有更多系统性的方法能帮助大家缩短代码编写时间，但这种方法不会是僵化的，人们不该耗费大量时间调试代码、纠正代码和修复错误代码，我写这本书的目标是帮助大家以一种能保证代码质量的方式来编程，享受编程带来的乐趣。</p><p>&nbsp;</p><p>在敏捷方面，特别是在20年前首次开始讨论敏捷时，我提出“提前做整体设计”其实是要受抨击的。当时人们认为预先做整体设计不值得提倡，我自己对这个问题的看法也在逐渐发生变化。在我早期的职业生涯，特别是在写初版《代码大全》时，我确实觉得预先做整体设计是对的，那时这个理念并不盛行，大家做项目时只是在尽量做预估，在投身于细节之前至少先想想要干什么。</p><p>&nbsp;</p><p>但多年来我意识到，不同开发者所掌握的技能组合确实差异很大，部分开发者更擅长以抽象方式设计之后再实现这些设计代码，也有些开发者更擅长编写代码然后边写边学，边写边改。这两种方式或许最终都能得令人满意的结果，而这两类开发者都无法照抄照搬对方的工作模式。</p><p>&nbsp;</p><p>技术项目能否取得成功的重点在于人的思维是如何跃动的，所以如果某个程序员的思维是从抽象到具象的演绎，而另一个人的思维是从具象到抽象的归纳，那绝不能把两人的思维模式强行互换。</p><p>&nbsp;</p><p>略显遗憾的是，过去二三十年间，编程行业一直想强迫每个人以相同的思维方式工作，这是注定要失败的。</p><p>&nbsp;</p><p></p><blockquote>InfoQ：您曾提到，“将时间花在提供 80% 收益的 20% 的重构上”，这句话我们该怎样理解？</blockquote><p></p><p>&nbsp;</p><p>Steve：说起重构，我曾在网上看到过一个帖子，说的是程序员的代码能跑，就不用改，根本就不需要去碰它。但出于种种原因，它还是会出bug，所以最后还是进行了<a href=\"https://www.infoq.cn/article/3O5IA8avKUlWNrab5j9w\">重构</a>\"。</p><p>&nbsp;</p><p>但在我看来，重构其实没什么必要。因为就算不改，代码也能运行良好，这样的代码实际就如同黑盒，没必要打开盒子换里面的东西，因为没有改进的潜在价值，所以没有动它的必要，相反，重构还可能搞出新的错误。</p><p>&nbsp;</p><p>所以我说的二八定律其实是说，绝大多数更迭往往只涉及代码库中的很小一部分，只要将重构集中在实际变更的那部分代码上就可以了，所以在更改代码时，大家应该把更多精力放在提高代码质量上，而不是单纯为了改而改，重构应该有明确理由，随便选段代码来改没什么意思。</p><p>&nbsp;</p><p></p><h2>编程年限增加，开发者越要重视质量设计</h2><p></p><p>&nbsp;</p><p></p><blockquote>InfoQ：您认为不同阶段的开发者该培养哪些技能？</blockquote><p></p><p>&nbsp;</p><p>Steve：程序员的从业生涯肯定会经历几个阶段，在生涯早期需要努力跟编程语言或工具作斗争。现在的情况跟我写《代码大全》时已经完全不同了，那时候，程序员在学校和公司里都在鼓捣语言和工具，而现在很多程序员从青少年时就起步了，很多孩子在10岁甚至更小的时候就在接受系统的编程教育，所以他们早早过了前面的阶段。</p><p>&nbsp;</p><p>过了编程的早期阶段，我觉得下个阶段应该是提高代码质量，特别是重视质量设计。人们意识到哪怕代码再好，如果质量设计不足，那写好的代码只能废弃掉。再往后，程序员们会进入新的阶段，他们开始意识到编码是一种团队行为，靠个人编写的代码是有极限的，依靠团队编写出优质的代码才是关键。这就回到了我之前提到的观点，编程中的沟通不只是跟计算机沟通，更多是跟其他人沟通。所以程序员们终将意识到编程不是一切、设计也不是一切，团队合作同样重要。</p><p>&nbsp;</p><p>有个观点叫康威定律，认为软件系统的结构反映的是构建该系统的人类组织的结构，只要能重视这一点，人们就能在组织内良好协作，这种良好的协作特性也将反映在软件当中。我也见到过那些因为团队内部协作不足导致软件开发失败的例子，这样的团队中的成员们只关注开发任务，成员之间不做沟通，那软件是不可能成功的。所以我认为软件最终能否顺利交付最关键的部分在于人。</p><p></p><h2>&nbsp;</h2><p></p>",
    "publish_time": "2023-02-02 15:33:48",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]