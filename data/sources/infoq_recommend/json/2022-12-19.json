[
  {
    "title": "2022 Gartner全球数据库魔力象限发布，腾讯云数据库入选",
    "url": "https://www.infoq.cn/article/bdb91d86f14adb16009dd76ec",
    "summary": "<p>12月16日，在刚刚发布的 Gartner® 2022年度《云数据库管理系统魔力象限》研究报告中，腾讯云数据库进入特定领域者（Niche Players）象限。同时，据Gartner云数据库管理系统运行用例关键功能报告，腾讯云数据库在OLTP（TDSQL/TDSQL-C）及轻量级TP能力（KeeWiDB）得分均为国内第一。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/46/4646552a55022bda3e3db9b31fb9d67f.png\" /></p><p></p><p></p><p>根据Gartner云数据库管理系统运行用例关键功能报告，腾讯云数据库TDSQL在OLTP事务、轻量级事务和增强事务三个用例中得分均高于3.0（总分5分，3分以上代表满足要求），其中OLTP事务用例得分最高（3.7）。</p><p></p><p></p><h1>OLTP 第一</h1><p></p><p></p><p>截止目前，腾讯云数据库TDSQL核心代码自研率已达到100%，管理超过50万个节点，金融级容灾要求下，单实例存储规模达到PB级别，单实例日请求次数超百亿次，服务客户资源完成百万核和百PB的“双百”里程碑。</p><p></p><p>市场对腾讯优异的OLTP产品能力进行了印证：TDSQL正在被国内各行业广泛采用，以取代Oracle 和IBM在其核心业务中的应用。</p><p></p><p>通过对OLTP数据库能力的持续投入，腾讯云数据库TDSQL迅速抓住了中国金融行业数字化转型的需求，并在其核心系统国产化替换场景中表现抢眼。目前，腾讯云数据库TDSQL已经服务了TOP 10银行中的七家，在TOP 20银行中也服务过半，在不同金融机构核心系统中的渗透率均有显著提升。</p><p></p><p></p><h1>轻量级事务 第一</h1><p></p><p></p><p>腾讯云自研的分布式数据库KeeWiDB实现国内首个三级存储架构设计，搭载全自研存储引擎，一举解决了IO放大、性能抖动等KV存储难题，单节点性能可达到18万写入、28万读取，P99.9延迟小于10ms。</p><p></p><p>KeeWiDB通过日志实时持久化来实现数据的高速存储，支持数据的冷热分级、优化了存储成本，分布式架构支持单集群可线性堆叠至千万级并发吞吐量、PB级存储规模，解决了键值存储场景在性能、持久化、成本和规模存在的四大挑战。</p><p></p><p>凭借产品优势和独特价值，KeeWiDB已在电商、社交、媒资、游戏等行业核心业务中获得了广泛应用，助力企业完成存储系统性能、成本、易用性的优化。</p><p></p><p></p><h1>OLAP&nbsp;大提升</h1><p></p><p></p><p>在OLAP方面，腾讯云数据库TDSQL集高并发、高SQL兼容度、高扩展性、以及企业安全审计等多项能力于一身。产品采用无共享架构，支持海量数据高并发实时在线交易和完整的事务分布式 ACID 能力，支持海量数据多维统计分析。今年6月，新升级后的TDSQL带来了通用场景下查询性能10倍以上的提升。</p><p></p><p>基于持续的产品与生态建设，腾讯云数据库TDSQL已应用于超过50万客户，包括主流金融、政务、运营商、工业制造企业，并在亚太、日本和欧洲等海外市场拥有广泛业务布局。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/b9/b90bf1a99164f659153659a504507c7c.gif\" /></p><p></p><p></p><p>在产品能力上，腾讯云数据库TDSQL旗下已涵盖金融级分布式、云原生、分析型等多引擎融合的完整数据库产品体系，提供了业界领先的金融级高可用、存算分离、数据仓库、企业级安全等能力，同时具备智能运维平台、Serverless版本等完善的产品服务。</p><p></p><p></p><p>Gartner, Magic Quadrant for Cloud Database Management Systems, December 2022.</p><p>Gartner, Critical Capabilities for Cloud Database Management Systems for Operational Use Cases, December 2022.</p><p>Gartner Peer Insights,&nbsp;https://www.gartner.com/reviews/market/cloud-database-management-systems/vendor/tencent-cloud/product/tencent-cloud-database, as of 15th December 2022</p><p>Gartner不对其研究出版物中所述的任何厂商、产品或服务做背书，也不建议技术使用者只选择那些评价最高或其他指定的厂商。Gartner 研究出版物包含 Gartner 研究组织的观点，不应被解释为事实陈述。Gartner 对这项研究不提供明示或默示的所有担保，包括适售性之任何担保或符合特定目的之任何担保。Gartner Peer Insights 内容包含个人用户根据自己的经验发表的意见，不代表 Gartner或其附属公司的观点。GARTNER, Magic Quadrant和Peer Insights是 Gartner, Inc 和/或其在美国与全球关係企业的注册商标和服务标章，经许可使用。著作权所有，并保留一切权利。</p>",
    "publish_time": "2022-12-19 12:03:13",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "谷歌开源安全的机器学习操作系统KataOS",
    "url": "https://www.infoq.cn/article/aXGs7kI0AqYMwd0KiqDJ",
    "summary": "<p>谷歌的AmbiML团队最近开源了<a href=\"https://opensource.googleblog.com/2022/10/announcing-kataos-and-sparrow.html?m=1\">KataOS</a>\"，这是一个适用于嵌入式机器学习硬件的可证明安全操作系统。KataOS基于<a href=\"https://sel4.systems/\">seL4</a>\"微内核，使用<a href=\"https://www.rust-lang.org/\">Rust</a>\"实现。除了KataOS，谷歌正在发布Sparrow，这是针对基于<a href=\"https://riscv.org/\">RISC-V</a>\"架构安全硬件平台的操作系统参考实现。</p><p></p><p>该版本发布是在谷歌开源博客上宣布的。AmbiML团队在安全的嵌入式环境上为机器学习构建工具，他们开发了KataOS，以解决智能设备所收集的数据在隐私和安全性方面所面临的挑战。该解决方案的基础是seL4，一个在数学上已证明其安全性的微内核。其他组件是使用Rust编写的，该团队选择Rust的部分原因在于其内存安全性。KataOS是使用<a href=\"https://docs.sel4.systems/projects/camkes/\">CAmkES</a>\"构建系统构建的，适用于RISC-V或ARM架构。按照AmbiML团队的说法：</p><p></p><p></p><blockquote>我们的目标是开源整个Sparrow，包括所有的硬件和软件设计。目前，我们刚刚开始在GitHub上发布KataOS的早期版本。所以，这只是一个开始，我们希望你能加入我们，构建智能环境（ambient）机器学习系统的可信任的未来。</blockquote><p></p><p></p><p>近年来，始终在线或环境智能设备已经变得越来越普遍，它们收集和使用个人数据进行机器学习，这引起了人们对隐私的关注。尽管像谷歌这样的公司已经开发了诸如<a href=\"https://www.infoq.com/articles/federated-ml-edge/\">联合学习</a>\"这样的技术，以帮助保护机器学习数据集的隐私，但是这仍然有设备被破坏或黑客攻击的隐私风险。</p><p></p><p>作为提升这些设备安全性的基础，谷歌最近与<a href=\"https://antmicro.com/\">Antmicro</a>\"合作，为RISC-V矢量指令开发了<a href=\"https://opensource.googleblog.com/2022/09/co-simulating-ml-with-springbok-using-renode.html\">Renode仿真支持</a>\"。这项工作是谷歌开发Springbok的一部分，这是一个基于RISC-V的机器学习硬件加速器。Renode仿真环境允许谷歌团队共同开发适用于安全嵌入式机器学习平台的硬件和软件。</p><p></p><p>谷歌团队<a href=\"https://antmicro.com/blog/2022/08/running-rust-programs-in-sel4/\">继续与Antmicro合作</a>\"开发了KataOS。团队通过开发seL4-sys crate为seL4微内核添加了Rust支持。他们还为面向微内核的RISC-V实现做出了贡献，并为Renode添加了针对sel4的调试功能。</p><p>在Twitter上，有些用户想知道KataOS的发布是不是意味着谷歌会将<a href=\"https://en.wikipedia.org/wiki/Fuchsia_%28operating_system%29\">Fuschia</a>\"淘汰，Fuschia是一个由谷歌开发并在Nest设备中使用的嵌入式操作系统。软件开发人员<a href=\"https://twitter.com/DThompsonDev/status/1582704902630875141\">Danny Thompson指出：</a>\"</p><p></p><p></p><blockquote>根据我的理解，它依然在运转之中。Fuschia会作为Android和其他系统的操作系统，我认为KataOS的意图更加倾向于嵌入式设备。</blockquote><p></p><p></p><p>KataOS项目组负责人<a href=\"https://github.com/jtg-google\">June Tate-Gans</a>\"参加了Hacker News上的讨论，并<a href=\"https://news.ycombinator.com/item?id=33222400\">回答了用户的问题</a>\"。当一位用户指出，可证明安全的硬件和软件是更安全的系统的“筹码”时，Tate-Gans回答说：</p><p></p><p></p><blockquote>绝对如此，这也是为何我选择开启seL4并使用Rust作为用户层的原因。seL4已经有一个验证框架，所以可以使用它来确保我们的系统设计和实现是良好的。我们花了一些时间与seL4的人合作，在这些变化中找到了一个很好的中间地带，我们在这个过程中会不断验证设计，但我们想尽快把这些东西公布出来，而不是一直等待，因为这有助于获取反馈和合作。我们唯一的遗憾是不能公开整个源码树。但我们会做到这一点的，在此期间，这是一个很好的开端。</blockquote><p></p><p></p><p><a href=\"https://github.com/AmbiML/sparrow-kata-full\">KataOS的源代码</a>\"可以在GitHub上找到。</p><p></p><p>原文链接：</p><p><a href=\"https://www.infoq.com/news/2022/11/google-kataos-ambient-ml/\">Google Open-Sources Secure ML Operating System KataOS</a>\"</p><p></p><p>相关阅读：</p><p><a href=\"https://www.infoq.cn/article/kRwmRjy1uqro43McteIj\">医学生自学机器学习，利用GPT-3开发写作助手，收入月月翻倍，项目被收购后成人生赢家</a>\"</p><p><a href=\"https://www.infoq.cn/article/bNkyoLzwxU7Li2v94Noe\">InfoQ 2022年趋势报告：人工智能、机器学习和数据工程篇</a>\"</p><p><a href=\"https://www.infoq.cn/article/ipYGCdLZ7O1ON8opTH17\">机器学习工程化，企业AI的下一个起点</a>\"</p>",
    "publish_time": "2022-12-19 13:52:27",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "从优化持久谈起，如何让NoSQL数据库更加灵活易用？",
    "url": "https://www.infoq.cn/article/f0whs5tlNlTkXiMw9ZLa",
    "summary": "<p>大数据时代，数据体量和复杂性对于数据库提出更高要求，仅依靠关系型数据库难以处理这些数据，非关系型数据库得以快速发展壮大。主流的的非关系型数据库有<a href=\"https://s.geekbang.org/search/c=0/k=Redis/t=\">Redis</a>\"、Memcache、MongoDB、HBase等。</p><p>&nbsp;</p><p>为了满足广泛的业务场景对于数据库提出的高可用、高效率、高可扩展性的要求，Redis的应用场景也早已突破了缓存的范畴，并提供了<a href=\"https://s.geekbang.org/search/c=0/k=%E6%8C%81%E4%B9%85%E5%86%85%E5%AD%98/t=\">持久内存</a>\"的解决方案。业务数据量爆炸式增长，Redis的内存消耗在不断增加。这意味着，作为一个基于内存的数据库，Redis的内存是否被高效合理的利用至关重要。在持久内存的主流思路下，是否有一种方案可以平衡企业对于性能、成本、持久化和规模的需求？</p><p></p><h1>Redis提供的持久化方案行不通了吗？</h1><p></p><p></p><p>我们先来系统看下Redis提供的AOF和RDB两种持久化方案。AOF可以通俗地理解为日志记录，将每一个收到的写命令都通过write函数追加到文件中，好处在于写入性能高，没有磁盘寻址的开销，后台重写不影响客户端读写，秒存的方式能够紧急回复误删的数据，但劣处在于日志文件过大，写QPS相对低，数据恢复不能保证100%实现。</p><p>&nbsp;</p><p>RDB的持久化通过在指定的时间间隔内将内存中的数据集快照写入磁盘来实现。生成RDB文件时，Redis主进程不需要进行任何磁盘IO操作，通过子进程来进行保存，适合进行备份和灾难恢复，并且恢复速度比AOF更快。但RDB也有自己的局限，正是因为保存动作由子进程来实现，所以在快照持久化期间修改的数据不会被保存，丢失数据的可能性变大。</p><p>&nbsp;</p><p>所以Redis 4.0提出了混合式持久化策略，取两种方案的优点，但兼容性不佳。如果从内存消耗的角度来看，Redis内存消耗主要在于其主进程的自身内存、对象内存、缓冲区内存、内存碎片方面，和子进程的AOF/RDB重写时的内存消耗。通过优化管理Redis内存的使用，达到用更少的内存存储更多数据、节省成本的目的，才能真正实现Redis的高性能和高可用，但难以从根本上缓解内存消耗大带来的成本压力问题。业内也有一些基于磁盘的KV存储产品，例如Pika、Kvrocks、SSDB等，难比Redis的性能。</p><p>&nbsp;</p><p>行业内有句话，软件优化三年不如硬件更新一代。Redis提供的持久化方案是软件角度的解决方案，或许我们可以从硬件角度来找到解决内存成本、容量限制以及持久化等一系列问题的方法。&nbsp;</p><p></p><h1>从硬件的角度能否优化持久内存？</h1><p></p><p>&nbsp;</p><p>英特尔®傲腾™持久内存(PMem)和Redis的结合提供了一个思路。传统的内存和存储架构中，通过DRAM内存直接访问存储设备，虽然快但是容量有限，成本也高，并且无法做到持久内存。持久内存处在内存DRAM和外存（HDD或者SSD）之间，性能优于外存输于内存，既可以当做内存使用，也可以当做持久化外存设备使用。英特尔®傲腾™持久内存通过在DRAM内存和块存储之间加入大容量持久内存层，提供了接近DRAM内存的性能、更大的存储容量、降低了数据的易失性。</p><p>&nbsp;</p><p>英特尔®傲腾™持久内存(PMem)和Redis的结合一度被业内视为“天作之合”。但是仅仅基于内存的Redis依然给企业带来了不小的成本压力。传统数据库的设计原则中，默认以存储IO为瓶颈进行设计。而英特尔®傲腾™持久内存(PMem)存储模式优化，主要解决的就是外部数据存储IO性能瓶颈的问题。云时代高并发场景下大量的IOPS，也要求数据存储找到新的解决方案。</p><p>&nbsp;</p><p>腾讯云数据库团队一直在寻找让Redis“快和低成本兼具”的优化方案，曾推出Redis4.0集群版解决方案。为了进一步释放英特尔®傲腾™持久内存(PMem)的性能，如今，腾讯云数据库团队基于全新的架构设计思路推出了首款软硬件结合、高速低延迟的NoSQL数据库产品——KeeWiDB键值数据库，提供了高性能、低成本的分布式KV存储方案。</p><p>&nbsp;</p><p>据悉，KeeWiDB整体架构由代理层和服务层两个部分构成，代理层负责与客户端进行交互，服务层负责数据的存储以及在机器发生故障时可以自动进行故障切换。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/ce/ced8bddbdd75b184c243fa24984bedd0.png\" /></p><p></p><p>值得关注的是，KeeWiDB服务层后端集群架构的具体实现上参考了Redis的集群模式，用多个分片和节点实现一主多从的高可用架构，并通过每个分片的主节点Slot数据实现弹性扩缩容。据悉，KeeWiDB的设计目的，就是为了解决Redis的痛点问题，目标实现更大容量，更高性能以及更低延迟。所以与Redis的数据存储在内存中不同，KeeWiDB的数据主要存储在持久内存（PMEM）和固态硬盘（SSD）上。</p><p><img src=\"https://static001.geekbang.org/infoq/c0/c0469d00fdc8430fdde380b959809ecd.png\" /></p><p>KeeWiDB采取了“内存（DRAM）+持久内存（PMEM）+固态硬盘（SSD）”分级存储的架构设计，根据数据访问热度自动分级、自动升热降冷，将不同的同访问密度的数据存储到不同成本的介质中，预期在实现高性能和低延迟的同时，提高性价比。</p><p>&nbsp;</p><p>以查询操作为例，如果查询操作命中DRAM中存储的少量高速索引，则最多仅需要一次IO就可以定位到value的位置；如果没有命中，才会通过PMEM来做热数据的查找；如果依然没有命中，才会从SSD中读取冷数据。这意味着在主要读的场景下，KeeWiDB的性能优势将更加明显。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/e9/e9bf9e980d3d12579b3610d7515322db.png\" /></p><p></p><p>值得关注的是，在写入方面，KeeWiDB采用了英特尔®傲腾™持久内存(PMem)作为高速写入的存储介质，通过持久内存对数据进行实时持久化，延迟相对SSD降低了2个数量级，IO更少吞吐更高；在读取方面，KeeWiDB自研了一个基于Hash存储的KV引擎，而Hash结构和KV存储在数据模型、访问模型上天然的匹配。</p><p>&nbsp;</p><p>在文件操作场景，从大容量低成本的角度出发，KeeWiDB将数据文件存放在SSD上，在处理用户请求期间不再直接操作SSD上的数据页，而是操作读写延迟更低的PMem，使数据库的性能和吞吐量得到了进一步的提升。</p><p>&nbsp;</p><p>为了避免日志文件在写入的过程中涉及到的持久化操作有可能会成为整个系统的瓶颈，KeeWiDB通过将WAL存放在PMem上，可以大幅降低日志持久化操作耗时。由于PMem比SSD更快的读写速度，数据库整体的故障恢复速度也得到了大幅提升，进而提升了整个系统的可用性。</p><p>&nbsp;</p><p>来自腾讯云的压测数据显示，KeeWiDB在长时间压测中，P99和P99.9都保持非常稳定且达到个位数的响应延迟；吞吐量方面，KeeWiDB的延迟始终能保持在12万以上，比基于RocksDB方案要高50%以上。KeeWiDB完全兼容Redis协议，使用Redis的业务无需修改任何代码便可以迁移到KeeWiDB上。原生分布式架构，让KeeWiDB可以提供百TB级的存储容量，并且支持水平扩展。</p><p>&nbsp;</p><p>总体而言，KeeWiDB实现了：</p><p>&nbsp;</p><p>性能（单节点）：28万读取，18万写入，P99&lt;2ms可水平堆叠，性能线性提升；</p><p>成本：分级存储，冷数据成本下降97%；</p><p>持久化：命令级持久化；毫秒级稳定写入延迟；SSD提供低成本持久化；</p><p>大容量：单节点提供TB级容量空间；集群方式提供128TB容量空间。</p><p>&nbsp;</p><p>虽然<a href=\"http://www.dostor.com/p/82025.html\">第四代英特尔®傲腾™持久内存不再开发</a>\"有些遗憾，但是第四代英特尔®至强®可扩展处理器（Sapphire Rapids）将内置一系列加速器，包括新的指令集架构和集成IP，能够高效应对人工智能、数据分析、网络、存储和其他高需求的工作负载，为提升软硬件性能提供了灵活的解决方案。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/43/4352d7fc092d1d28862f05c2f245d23a.png\" /></p><p></p><p>出色的数据库性能优化离不开计算、网络、存储以及监控运维等各方面技术优化，腾讯云数据库依托英特尔在硬件平台、架构层、应用层提供全栈优化的技术支持：除了前文提到的持久内存，在计算层面，英特尔至强处理器内置的密码操作加速，可以把数据库上的加密负载卸载到专用芯片上，从而降低CPU的负载，提高整体吞吐量。同时，在软件平台优化、参考架构设计、性能测试验证和创新技术应用方面，英特尔和腾讯云数据库团队展开了全面的合作，构筑了坚实的技术创新基座。&nbsp;</p><p></p><h1>NoSQL数据库需要更加灵活易用</h1><p></p><p>&nbsp;</p><p>无论是对于持久内存方案的探索，还是对于硬件性能的进一步挖掘，都是为了打造一款更加灵活易用的NoSQL数据库，满足业务场景的需求。从电商、游戏、直播、短视频等一系列移动端应用场景的发展态势来看，“高并发、低延迟、低成本”的需求只会越来越旺盛。</p><p>&nbsp;</p><p>无论是因“快”备受追捧的KV数据库Redis，还是用文档取代关系型数据库的表格后，赋予数据更大的灵活性的MongoDB，都在试图将NoSQL数据库在架构层面进一步提升高并发、易扩展和灵活易用等特性，服务海量并发访问和大数据业务场景。</p><p>&nbsp;</p><p>随着数字化转型在企业内部的进一步深入，大量的数据被分层，海量语音、图像视频等非结构化的数据亟待被挖掘价值，将推动NoSQL数据库拥有更细颗粒度和更高水平的技术创新出现。NoSQL数据库需要更加灵活易用，也将朝着更加灵活易用的方向发展。</p>",
    "publish_time": "2022-12-19 14:19:55",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]