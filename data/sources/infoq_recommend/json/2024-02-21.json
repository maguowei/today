[
  {
    "title": "数据资源摸底来了！多部门联合开展全国数据资源调查",
    "url": "https://www.infoq.cn/article/ep2AzBWzxFPO4HObURB8",
    "summary": "<p>为深入实施<a href=\"https://mp.weixin.qq.com/s/uHQEpQZnbqs9J3gX_iRitQ\">《数字中国建设整体布局规划》</a>\"，国家数据局、中央网络安全和信息化委员会办公室、工业和信息化部以及公安部近日联合下发通知，宣布开展全国数据资源情况调查，全面调研国内数据资源生产存储、流通交易、开发利用、安全等情况。</p><p></p><p>通过调查，有关单位将能更准确地掌握数据资源的分布、类型和安全情况，为制定相关政策、进行试点示范等工作提供有力的数据支持，进一步加快数据资源的开发利用。</p><p></p><p>本轮调查范围广泛，包括省级数据管理机构、工业和信息化主管部门、公安厅（局），以及各省的重点数据采集和存储设备商、消费互联网平台和工业互联网平台企业、大数据和人工智能技术企业、数据交易所、国家实验室等。此外，国家信息中心、中央企业和行业协会商会也在调查之列。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/f4/f4718a3e1b41ebad4b15d91a3f856bd3.png\" /></p><p></p><p>所有参与单位需登录全国数据资源调查管理平台填报相应的调查表，以2023年12月31日为标准时点。关键时间节点方面，相关单位需在2024年2月20日前反馈工作联系人信息至国家数据局数据资源司，并确保在2024年2月18日至3月5日之间完成调查表的填报。</p><p></p><p>事实上，为激活数据要素的价值和潜能，上个月国家数据局等 17 部⻔联合印发<a href=\"https://mp.weixin.qq.com/s/iQfWqRb85KIGnOlUVhCiKQ\">《“数据要素×”三年⾏动计划 （2024—2026 年）》</a>\"。《行动计划》选取工业制造、现代农业、商贸流通、交通运输、金融服务、科技创新、文化旅游、医疗健康、应急管理、气象服务、城市治理、绿色低碳等12个行业和领域，推动发挥数据要素乘数效应，释放数据要素价值。其总体目标提到，到 2026 年底，数据要素应用广度和深度大幅拓展，打造 300 个以上示范性强、显示度高、带动性广的典型应用场景，实现数据产业年均增速超过 20%。</p><p></p><p>通过摸清国内数据资源的现状，相信也将为行动计划的顺利实施提供坚实的基础和数据支持。</p><p></p><p>全国数据资源调查管理平台链接：<a href=\"https://wenjuan.data-smp.cn/index/login/index.html\">https://wenjuan.data-smp.cn/index/login/index.html</a>\"</p><p></p><h4>专题征稿启事</h4><p></p><p>InfoQ数字化经纬正策划一项专题《数据要素×千⾏百业，数据驱动企业转型创新》，希望通过本专题，从不同⾏业⻆度出发，探讨数据驱动策略在企业转型过程中的应⽤实践，挖掘数据要素×创新场景和案例。借此让从业者和相关利益⽅深⼊了解企业如何管理好数据资产，挖掘数据价值，从⽽助⼒企业在⾯对变⾰时作出更明智的决策，实现⻓期发展。</p><p></p><p>我们欢迎相关企业实践案例的投稿，或是希望接受我们采访的企业与个人主动联系我们。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/55/55f1eb31edb55ee718374545cbd6ade1.jpeg\" /></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/f4/f43a99beb5bfa91f166539cceb2553d5.jpeg\" /></p><p></p><p></p><p></p>",
    "publish_time": "2024-02-21 14:15:18",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "AI 创投公司 ElevenLabs 推新模型，可文字生成各式语音",
    "url": "https://www.infoq.cn/article/AI4DiYvZCJWvQ27ai6Uf",
    "summary": "<p><a href=\"https://elevenlabs.io/\">ElevenLabs</a>\"，一家AI语音克隆初创公司，最近推出了一项创新技术，旨在为视频内容添加逼真的声音效果。这项技术特别针对那些缺乏声音背景的视频，类似于早期的默片。想象一下，就像1895年路易斯·卢米埃尔导演的《火车进站》一样，原本静默无声的场景，现在可以通过AI技术增添生动的声音，从而为观众带来更加丰富的观影体验。</p><p></p><p>ElevenLabs利用文本到音效的模型，通过简单的文字提示，比如“海浪撞击”、“金属铿锵声”或“鸟鸣声”，就能生成相应的声音，并将其叠加到视频上。他们最近发布的一分钟预告片展示了这一技术的能力，不仅包括城市背景下的脚步声、海浪声、火车的咔哒声，甚至还有未来机器人的机械声和好莱坞风格的宣传片人声，所有这些都是通过文本提示生成的。</p><p><img src=\"https://static001.infoq.cn/resource/image/34/a2/34f59d3bf129a33ae90c84b10f5cf1a2.png\" /></p><p></p><p>ElevenLabs的这项新技术，虽然还未正式发布，但已经预示着它将为内容创作者提供一个全新的工具，使他们能够为原本无声的视频片段添加丰富的声效，包括脚步声、波浪声和氛围声等。这不仅为AI生成的内容开辟了新的领域，也为任何需要背景音效的视频，如Instagram视频、商业广告或视频游戏预告片等提供了无限可能。</p><p></p><p>不过，要生成准确的模拟效果并不是件容易的事，需要系统同时对文本和视频像素进行学习，以精确映射视频和音频之间的关系。这项技术的发展受到了包括英伟达AI科学家Jim&nbsp;Fan在内的业界专家的关注，他们认为，要完美模拟声效，需要考虑许多因素，这还是非常有挑战的。</p><p></p><p>活动推荐：</p><p>AICon 全球人工智能与大模型开发与应用大会暨通用人工智能开发与应用生态展·2024 即将于5月17-18日举行。这是一场主要面向工程师、产品经理、数据分析师的大模型会议，会议聚焦大模型训练与推理、AI agent、RAG、多模态大模型等热门方向，会议不仅安排了精彩的演讲，还策划了包括闭门会议、圆桌交流、大模型应用互动展演等多种社交活动，一方面为参会人员提供宝贵的交流学习、拓展人脉的机会，另一方面也为相关企业和机构提供一个展示自身实力和成果的舞台。</p><p></p><p>目前已确认出席嘉宾：</p><p>林咏华，北京智源人工智能研究院，副院长兼总工程师</p><p>谢剑，百川智能，技术联合创始人</p><p>余锋（褚霸），蚂蚁集团，蚂蚁超级计算部负责人，专题出品人</p><p>张佶，阿里巴巴，通义实验室 NLP 资深算法专家</p><p>杨萍，字节跳动，Code AI 团队技术负责人</p><p>李鑫 博士，科大讯飞，AI 研究院副院长、科研部部长</p><p>郭瑞杰，阿里巴巴，总监</p><p>陈祖龙，阿里巴巴，企业智能算法负责人</p><p>杨浩 博士，华为，文本机器翻译实验室主任</p><p>张科，蚂蚁集团，AI Infra 负责人</p><p>孟二利，小米，AI 实验室机器学习团队技术主管，专题演讲嘉宾</p><p>崔慧敏，中科加禾，创始人 &amp; CEO</p><p>汪晟杰，腾讯，资深产品经理</p><p>陈鸿，蚂蚁集团，资深算法专家</p><p>陶万杰，马上消费金融，算法总监</p><p>季超，科大讯飞，人形机器人总负责人</p><p></p><p>更多精彩议题上线中... 详细内容可<a href=\"https://aicon.infoq.cn/2024/beijing/\">点击这里</a>\"查看。</p>",
    "publish_time": "2024-02-21 14:17:23",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "3700万美元“卖身救命”？泥潭深陷的 MariaDB 准备退市",
    "url": "https://www.infoq.cn/article/V1aboaidLxu8KrwojHCa",
    "summary": "<p></p><p>2月19日，MariaDB发布公告称正在积极寻求收购。作为同名开源关系数据库管理系统（RDBMS）背后的运营厂商，MariaDB 已确认收到了来自加利福尼亚州投资管理公司K1 Investment Management 的临时收购要约。</p><p>&nbsp;</p><p>K1 也已经于上周五低调透露，其已经向MariaDB递交了所谓“主动提出且不具现实约束力的指导性提案”。顾名思义，这是一份非约束性探索提议，具体内容将根据未来几周的谈判进展而随时调整。提案内容包括以每股0.55美元价格收购所有MariaDB股票，这一估值基于MariaDB公司2月5日收盘日的估值，总交易金额约为3700万美元。但提案并未确定收购要约的具体交易形式。</p><p>&nbsp;</p><p>值此消息发布之际，MariaDB公司正身陷一系列重大动荡。除了走马换将迎来新任CEO之外，MariaDB还因剥离数据库即服务以及地理空间业务而进行了大规模裁员。</p><p>&nbsp;</p><p></p><h2>上市，红极一时</h2><p></p><p>&nbsp;</p><p>MariaDB诞生于15年前，最早只是MySQL的一个分叉版本。2008年1月，MySQL项目的缔造者们，包括MySQL第一行代码作者 Michael“Monty” Widenius（人们常称其为Monty） ，将MySQL以10亿美元卖给了Sun，Monty也凭借这笔收入成为这一年芬兰的10大富豪之一。</p><p>&nbsp;</p><p>但后来Sun最后又被Oracle给收购了，这样Monty等人本不愿卖给Oracle的MySQL最终在2009年实际落到了Oracle手中。这不禁让人们开始担心项目的后续独立性。</p><p>&nbsp;</p><p>2009 年 2 月 5 日，Monty宣布从Sun离职，并在 MySQL 代码库的一个分支上开发出了一款数据库 MariaDB。同时，Monty 创办了 Monty Program AB 公司。此外，他还成立了 MariaDB 基金会，致力于推广、维护和发展 MariaDB 代码库、社群和生态系统，不为营利。</p><p>&nbsp;</p><p>而 MariaDB 也没有让 Monty 失望：在颇具公信力的 db-engines “最流行数据库”排行榜上，MariaDB 名列第 12 位。时至今日，其依然受开发者欢迎。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/c4/c40bd42aed8b1fa34cd95c21d2577bc0.png\" /></p><p></p><p>&nbsp;</p><p>作为替代品的MariaDB应运而生，专门服务于希望使用纯开源MySQL方案的用户，而且被众多知名企业纳入各类数据存储与操作等应用场景。根据MariaDB公司官网消息，MariaDB 目前已经拥有超过 10 亿次下载、近 200,000 个开源贡献，并通过 Linux 发行版覆盖了超过 10 亿用户，同时在全球拥有 600 多家客户。</p><p>&nbsp;</p><p>MariaDB 公司多年来先后筹得约2.3亿美元风险投资，主要用于在核心项目之上开发优质功能与服务，并最终于2022年12月与 Angel Pond Holdings 公司完成合并，通过特殊目的收购公司（SPAC）的形式成功上市。</p><p>&nbsp;</p><p><img src=\"https://static001.geekbang.org/infoq/bc/bc0581ae919a3cf07f8caccf94fc8c29.png\" /></p><p></p><p>对于创立MariaDB， Monty 曾分享称，他需要一个能永远保持开源的MySQL替代品，因此他吸取了MySQL AB的教训，把MariaDB的版权授予了MariaDB基金会，这是一个NPO（非营利性组织），依靠捐赠运营，以保证MariaDB永远开源，而不会因为MariaDB 公司的兴衰或者被收购而导致MariaDB的版权被收购或流失。同时MariaDB 公司通过售卖MariaDB/MySQL的服务来赚钱，为MariaDB基金会提供MariaDB的持续开发资源。</p><p>&nbsp;</p><p></p><h2>市场表现，长期不行</h2><p></p><p>&nbsp;</p><p>但与大多数采取SPAC的首轮公开募股一样，MariaDB的上市未能取得重大成功。</p><p>&nbsp;</p><p>MariaDB市值自2022年底4.45亿美元的首日峰值之后一路下跌（而且这个数字已经远低于MariaDB上市前D轮融资中的6.72亿美元估值）。经过一年多的持续缩水，今年年初以来MariaDB的市值开始稳定维持在1000万美元出头。</p><p>&nbsp;</p><p>造成这一切的核心，自然是该公司长期达不到市场均值的盈利表现。纽约证券交易所（NYSE）曾在去年9月向MariaDB发出警告，称其已经违反了上市公司全球市场平均市值不得连续30个交易日低于5000万美元的规定。</p><p>&nbsp;</p><p>在接下来几个月间，MariaDB收到了第一份“主动提出且不具现实约束力的指导性提案”，伸出橄榄枝的是原MariaDB投资方Runa Capital。提案开出的价码为每股0.56美元，以现金交易。三周之后，Runa最终表示不会收购MariaDB，而将通过一家名为RP Ventures的联营公司提供2650万美元贷款。</p><p>&nbsp;</p><p>时间快进到今年2月初，MariaDB宣布与其债权人达成临时延期协议，意味着债权人在寻求替代性融资解决方案时，暂不采取贷款协议中规定的各项补救措施。利好一出，MariaDB的股价在几天之内上涨了一倍有余。也正是考虑到这一点，K1才决定以延期协议公布之前的MariaDB股票收盘价为基准提出收购要约。</p><p>&nbsp;</p><p>事实上，K1表示其报价比MariaDB今年2月5日的收盘价还高出了189%，当日股价收于0.19美元，总市值约为1290万美元。</p><p>&nbsp;</p><p>虽然目前还无法保证K1会正式竞购MariaDB，但与传统风险投资公司Runa Capital不同，K1在其12年的发展历程中曾有过大量后期投资记录，在决策上也更接近于私人资本股权投资。更重要的是，K1已进行过多笔收购，包括2022年以3.19亿美元收购澳大利亚ELMO Software，并通过收购将其私有化。</p><p>&nbsp;</p><p>所以从各个方面来看，K1似乎比Runa要更适合接管MariaDB，目前唯一的变数就要看K1会不会将提案坚持到底。</p><p>&nbsp;</p><p></p><h2>转型难</h2><p></p><p>&nbsp;</p><p>在去年5月发布的2023年Q1财报会上，时任 MariaDB 首席执行官的 Michael Howard 表示：“我们的业务正在向云加速转型，与云相关的订阅收入同比增长 101%，高于上季度的 90%。”&nbsp;“收入同比增长 20%……这只是一个开始，我们将扩展云数据库产品以扩大目标受众。”</p><p>&nbsp;</p><p>这也揭示了，MariaDB 业务受云计算的影响是很大的。实际上，整个数据库市场都在加速云化，包括亚马逊云科技、Google Cloud 、微软 Azure 和传统数据库巨头Oracle等。</p><p>&nbsp;</p><p>然而，MariaDB 虽然上市了，但业务转型却并不顺利。云数据库市场本来就很拥挤，MySQL Heatwave、Amazon Aurora、PlanetScale 等均能实现MariaDB主打的MySQL API 产品兼容，后来者的MariaDB还没有惊艳到直接跟大厂对打的程度。</p><p>&nbsp;</p><p>同时，MariaDB 也急于构建自己的云数据库产品，因此在没有大量现金储备的情况下依然大投入大量财力和人力去研发SkySQL 和 Xband，这直接就给公司带来了财务压力。而这两款产品也没有带来理想的收入。</p><p>&nbsp;</p><p></p><h2>重组，MariaDB 的挣扎</h2><p></p><p>&nbsp;</p><p>去年3月底，MariaDB在一份备案声明中表示，裁员 26 人以实现降低成本的目标。尽管只是该企业所报告的 340 名员工的一小部分，但备案文件中的其他细节可能进一步表明了公司高管对于经营状况的担忧。</p><p>&nbsp;</p><p>声明中提到，该公司当前的现金和现金等价物“不足以为我们的运营提供资金，包括从 2023 年 2 月 13 日起至少 12 个月的资本支出要求，这引发了对我们的重大怀疑持续经营的能力。”MariaDB方面预计，通过数据库订阅和服务筹集的资金将不足以满足其预计的营运资金和运营需求。</p><p>&nbsp;</p><p>“我们目前正在寻求额外的资金，以满足 2023 年 9 月 30 日之后的预计营运资金、运营和债务偿还需求……展望未来，我们无法确定我们的业务何时或者是否会产生足够的现金来支持业务的正常运行，”MariaDB 如是说。</p><p>&nbsp;</p><p>去年5月，<a href=\"https://cts.businesswire.com/ct/CT?id=smartlink&amp;url=https%3A%2F%2Fmariadb.com%2F&amp;esheet=53409564&amp;newsitemid=20230530005578&amp;lan=en-US&amp;anchor=MariaDB+plc&amp;index=1&amp;md5=147657ddb0d1365594459b17bb59edb4\">MariaDB plc</a>\"&nbsp;宣布进行管理层重组，宣布 Paul O'Brien 已被任命为公司新任首席执行官（CEO）并将担任董事会成员，而之前的 CEO Michael Howard 将继续留在董事会，提供战略规划和监督。此外，董事会还任命 Tom Siegel 为首席营收官 (CRO)，领导销售、咨询、支持和培训团队；Jonah Harris 为首席技术官 (CTO)。</p><p>&nbsp;</p><p>MariaDB 的人员变动算得上频繁。Monty在公司上市后就不再担任董事会成员，后来也不再担任 CTO职位。CEO、CFO 也是更换频繁。MariaDB 这条船，始终没有找到好的“舵手”。</p><p>&nbsp;</p><p>去年10月底，MariaDB 被爆业务重组，放弃了战略性产品SkySQL 和 Xpand。MariaDB 解释称：“作为重组计划的一部分，公司将把注意力集中在其核心 MariaDB Enterprise Server 数据库产品上。”&nbsp;“与核心 MariaDB Enterprise Server 业务无关的产品，包括 SkySQL 和 Xpand，将不再销售，公司已实施一项计划来帮助现有客户迁移这些产品。”</p><p>&nbsp;</p><p>当时外媒给予的评价是：这不仅对 MariaDB 不利，对其许多客户也不利。据悉，韩国科技巨头三星依靠 50 个 Xpand 节点作为单个数据库运行，每天处理超过 100 亿笔交易。而三星现在必须尽快更换这些设备，这将是一笔昂贵的开支，并且也会导致 MariaDB 损失这部分收入来源。</p><p>&nbsp;</p><p>MariaDB 在财务状况如此艰难的时刻选择放弃两款核心数据库产品的行为，惹来了诸多争议。</p><p>&nbsp;</p><p>“停止云原生数据库即服务产品与我们认为的市场发展方向不符”，Gartner公司分析师 Adam Ronthal认为，“采用开源API的竞争产品（PostgreSQL或MySQL）拥有巨大的市场发展势头，这将使MariaDB越来越难以进行有效竞争。”IDC 研究副总裁 Carl Olofson也表示“他们的未来可谓晦暗不明。”</p><p>&nbsp;</p><p>“MariaDB 正在对自己的财务问题作出反应，但似乎并没有找到最好的问题解决方式。”英国数据库咨询公司 Vettabase 创始人兼董事 Federico Razzoli 评价道。</p><p>&nbsp;</p><p>除了停止销售 SkySQL 和 Xpand 外，MariaDB 还宣布裁减 84 个工作岗位，即约 28%的劳动力，以降低运营成本，甚至时任首席营销官的Franz Aman也在裁员名单中。</p><p>&nbsp;</p><p>根据MariaDB最新财报，2023年第四季度，MariaDB 的年度经常性收入 (ARR) 同比增长 11%，调整后的 EBITDA 亏损 270 万美元，对比去年的亏损 1160 万美元，减少了 77%。MariaDB 净亏损为 880 万美元，比上季度净亏损 1270 万美元减少了 390 万美元。</p><p>&nbsp;</p><p>Paul O'Brien B 表示，“这是我们在过去几个月中采取措施停止某些产品并专注于核心产品 MariaDB Enterprise Server 以及全公司范围内努力减少支出的结果。”&nbsp;</p><p>&nbsp;</p><p></p><h2>结束语</h2><p></p><p>&nbsp;</p><p>去年 10 月 10 日，MariaDB 宣布签订了 2650 万美元融资协议，但目前看也只是缓解，并未解决其困境。</p><p>&nbsp;</p><p>根据《爱尔兰收购规则》要求，K1 必须在2024年3月9日之前正式确定其收购要约、或者彻底放弃该计划。这是由于MariaDB的总部之一位于爱尔兰都柏林，因此必须遵守规则条款。MariaDB的另一处总部位于加利福尼亚州雷德伍德城。</p><p>&nbsp;</p><p>另外值得注意的是，考虑到MariaDB商业组织当前面临的困境，负责开源MariaDB项目治理工作的MariaDB基金会最近刚刚与亚马逊云科技签订一项重大赞助协议，这份协议也许将帮助社区找到帮助MariaDB摆脱泥潭、重新上路的可行途径。但具体情况，还需要时间的验证。</p><p>&nbsp;</p><p>&nbsp;</p><p>相关链接：</p><p><a href=\"https://techcrunch.com/2024/02/19/struggling-database-company-mariadb-could-be-taken-private-in-a-37m-deal/?guccounter=1\">https://techcrunch.com/2024/02/19/struggling-database-company-mariadb-could-be-taken-private-in-a-37m-deal/?guccounter=1</a>\"</p><p><a href=\"https://k1.com/meridian/\">https://k1.com/meridian/</a>\"</p><p><a href=\"https://investors.mariadb.com/news/news-details/2023/MariaDB-Announces-Second-Quarter-Fiscal-2023-Financial-Results/default.aspx\">https://investors.mariadb.com/news/news-details/2023/MariaDB-Announces-Second-Quarter-Fiscal-2023-Financial-Results/default.aspx</a>\"</p><p><a href=\"https://www.infoq.cn/article/ZERqNPB6jM9beFELCaQ7?utm_campaign=geek_search&amp;utm_content=geek_search&amp;utm_medium=geek_search&amp;utm_source=geek_search&amp;utm_term=geek_search\">https://www.infoq.cn/article/ZERqNPB6jM9beFELCaQ7?utm_campaign=geek_search&amp;utm_content=geek_search&amp;utm_medium=geek_search&amp;utm_source=geek_search&amp;utm_term=geek_search</a>\"</p><p><a href=\"https://investors.mariadb.com/news/news-details/2023/MariaDB-Announces-New-Management-Appointments/default.aspx\">https://investors.mariadb.com/news/news-details/2023/MariaDB-Announces-New-Management-Appointments/default.aspx</a>\"</p><p><a href=\"https://investors.mariadb.com/news/news-details/2024/Announcement-Regarding-Possible-Offer/default.aspx\">https://investors.mariadb.com/news/news-details/2024/Announcement-Regarding-Possible-Offer/default.aspx</a>\"</p>",
    "publish_time": "2024-02-21 15:05:55",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "ByConity 替换 ClickHouse 构建 OLAP 数据平台，资源成本大幅降低",
    "url": "https://www.infoq.cn/article/GplNWAl8ggEu7INhvJNK",
    "summary": "<p>MetaApp 是国内领先的游戏开发与运营商，专注移动端信息高效分发，致力于构建面向全年龄段的虚拟世界。截至 2023 年，MetaApp 注册用户已超 2 亿，联运合作 20 万款游戏，累计分发量过 10 亿。</p><p>MetaApp 在 ByConity 开源早期便保持关注，是最早进行测试并在生产环境上线的用户之一。抱着了解开源数仓项目能力的想法，MetaApp 大数据研发团队对 ByConity 进行了初步测试。其存算分离的架构、优秀的性能，尤其在日志分析场景中，对于大规模数据复杂查询的支持，吸引 MetaApp 对 ByConity 进行了深入测试，最终在生产环境全量替换 ClickHouse，使资源成本降低超 50%。</p><p>本文将主要介绍 MetaApp 数据分析平台的功能，业务场景中遇到的问题及解决方案以及引入 ByConity 对其业务的帮助。</p><p></p><h2>MetaApp OLAP 数据分析平台架构及功能</h2><p></p><p></p><p>随着业务的增长，精细化运营的提出，产品对数据部门提出了更高的要求，包括需要对实时数据进行查询分析，快速调整运营策略；对小部分人群做 AB 实验，验证新功能的有效性；减少数据查询时间，降低数据查询难度，让非专业人员可以自主分析、探查数据等。为满足业务需求，MateApp 实现了集事件分析、转化分析、自定义留存、用户分群、行为流分析等功能于一体的&nbsp;OLAP 数据分析平台。</p><p><img src=\"https://static001.geekbang.org/infoq/f7/f77efdf3b4de99042974c3f860c94089.png\" /></p><p>这是一个典型的 OLAP 的架构，分成两部分，一部分是离线，一部分是实时。</p><p>在离线场景中，我们使用 DataX 把 Kafka 的数据集成到 Hive 数仓，再生成 BI 报表。BI 报表使用了 Superset 组件来进行结果展示；</p><p>在实时场景中，一条线使用 GoSink 进行数据集成，把 GoSink 的数据集成到 ClickHouse，另外一条线使用 CnchKafka 把数据集成到 ByConity。最后通过 OLAP 查询平台获取数据进行查询。</p><p></p><h4>ByConity 和 ClickHouse 功能对比</h4><p></p><p></p><p>ByConity 是基于 ClickHouse 内核研发的开源云原生数据仓库，采用存算分离的架构。两者都具有以下特点：</p><p>写入速度非常快，适用于大量数据的写入，写入数据量可达 50MB - 200MB/s查询速度非常快，在海量数据下，查询速度可达2-30GB/s数据压缩比高，存储成本低，压缩比 可达 0.2～0.3</p><p>ByConity 拥有 ClickHouse 的优点，与 ClickHouse 保持了较好的兼容性，在读写分离、弹性扩缩容、数据强一致方面进行了增强。两者对于以下 OLAP 场景均适用：</p><p>数据集可能很大 - 数十亿或数万亿行数据表中包含许多列仅查询特定几列结果必须以毫秒或秒为单位返回</p><p>在之前的分享中，<a href=\"http://mp.weixin.qq.com/s?__biz=MzkwMTQzMjc2OQ==&amp;mid=2247484143&amp;idx=1&amp;sn=d36ef1ace104611a36a9bc9ba9c9b3d3&amp;chksm=c0b59641f7c21f577f60cefaf04186c46c359b055ec0bdf13e6f28dffcfef4e8cb80940eae56&amp;scene=21#wechat_redirect\">ByConity 社区对二者从使用角度进行过对比</a>\"，概括总结如下：</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/6a/6ad0118826fbd9b8a2901fd02b174e5f.png\" /></p><p></p><p>&gt; 详见：<a href=\"http://mp.weixin.qq.com/s?__biz=MzkwMTQzMjc2OQ==&amp;mid=2247484143&amp;idx=1&amp;sn=d36ef1ace104611a36a9bc9ba9c9b3d3&amp;chksm=c0b59641f7c21f577f60cefaf04186c46c359b055ec0bdf13e6f28dffcfef4e8cb80940eae56&amp;scene=21#wechat_redirect\">从使用的角度看 ByConity 和 ClickHouse 的差异</a>\"</p><p>在 OLAP 平台构建过程中，我们主要关注资源隔离、在扩缩容、复杂查询，以及对分布式事务的支持。</p><p></p><h4>使用 ClickHouse 遇到的问题</h4><p></p><p></p><p>问题一：读写一体容易抢占资源，无法保证读/写稳定</p><p>业务高峰期时，数据写入将大量挤占 IO 和 CPU 资源，导致查询受到影响（查询时间变长）。数据查询也是如此。</p><p>问题二：扩/缩容麻烦，周期长</p><p>扩/缩容时间长：由于机器在 IDC，属于私有云，其中一个问题在于，节点增加周期特别长。从增加节点需求发出到真正增加好节点需要一周到两周的时间，影响业务；无法快速进行扩缩容：扩缩容以后要重新进行数据分布，否则节点压力非常大。</p><p>问题三：运维繁琐，业务高峰期无法保证 SLA</p><p>常常因为业务的节点故障导致数据查询缓慢，数据写入延迟（从延迟几小时到几天的程度）；业务高峰期时资源出现严重不足，短期内无法扩容资源，只能通过删减部分业务的数据，为优先级高的业务提供服务；业务低峰期时，资源大量空闲，成本虚高。虽然我们在 IDC，但是 IDC 的机器购买也受成本控制，且不能无限制的节点扩容，另外在正常使用时也有一定的成本消耗；无法和云上资源进行交互使用。</p><p></p><h4>引入 ByConity 后的改善效果</h4><p></p><p></p><p>首先，ByConity 读写分离计算资源隔离可以保证读写任务比较稳定。如果读的任务不够，可以扩展相应资源，哪里不够补哪里，包括使用云上资源进行扩容。</p><p>其次，扩缩容比较简单，可以在分钟级别进行扩缩容。由于使用 HDFS/S3 分布式存储，计算存储分离，所以扩容以后不需要进行数据重分布，扩容后可以直接使用。</p><p>另外，云原生部署，运维相对简单。</p><p>HDFS/S3 的组件相对成熟稳定，扩缩容，灾备方案成熟，出现问题可快速解决；业务高峰期时，可以通过快速扩容资源保障 SLA；业务低峰期时，可以通过缩减存储/计算资源达到降低成本的目的。</p><p></p><h2>ByConity 的使用与运维</h2><p></p><p></p><h4>ByConity&nbsp;集群使用情况</h4><p></p><p></p><p>目前，我们平台已经在业务场景稳定使用 ByConity。通过陆续迁移，ByConity 已经完全接管了 ClickHouse 集群的数据，并已经开始稳定提供服务。我们使用云上 S3 加 K8s 的模式搭建了 ByConity 集群；同时使用了定时扩缩容方案，可以在工作日早上 10 点进行扩容，晚上 8 点进行缩容，一天只需要使用十多个小时的资源。通过计算，此方式比直接使用包年包月降低资源 40%- 50% 左右。另外，我们也正在推进私有云 + 公有云相结合的方式，以达到降低成本与提升服务稳定性的目的。</p><p>下图为我们目前的使用情况，通过 OLAP 服务器对线下 IDC 机房的 ClickHouse 集群和 ByConity 进行联合查询。短期内 ClickHouse 集群将依然使用，作为部分依赖 ClickHouse 业务的过渡。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/21/218df5ea446bf71ae45565bd1c8ae1ab.png\" /></p><p></p><p>未来我们会在线下进行查询和合并数据，而 Kafka 消耗的资源放到线上使用。在资源扩容时，可以将 vw_default 和 &nbsp;vw_write 的资源扩到线上，合理使用公有云的资源应对资源不足的问题。同时在业务低峰时进行缩容，降低公有云消耗。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/d4/d442ab91fd43fc85e83dd3fe297ea6d9.png\" /></p><p></p><h4>ByConity 和 ClickHouse 在业务数据中的查询对比</h4><p></p><p></p><h5>测试数据集及资源配置</h5><p></p><p></p><p>数据条数：按日期做分区，单日 40 亿条，10 日共计 400 亿表列数据：2800 列</p><p></p><p>由上表可以看出：</p><p>ClickHouse 集群查询使用的资源为：400核 2560G内存</p><p>ByConity 8 worker 集群查询使用的资源为：120核 880G内存</p><p>ByConity 16 worker 集群查询使用的资源为：240核 1760G内存</p><p></p><h5>业务 SQL 查询结果汇总</h5><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/b9/b9a3a0031dfed196f34745319aecb3f1.png\" /></p><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/d2/d2e96ed55d3bbc7e3e55cd40bdbbfd73.png\" /></p><p></p><p></p><p>这里的汇总都采用的是平均值，可以看到：</p><p>常规 OLAP - 去重、留存、转化、点查都可以通过比较小的资源代价（120C, 880G）达到与 ClickHouse 集群（400C, 2560G）一致的查询效果，并且可以通过扩展一倍资源（240C, 1760G）达到查询速度提升翻倍的效果。如果需要更高的查询速度，可以扩展更多的资源；not in 过滤可能需要适中的资源代价（240C, 1760G）可以达到和 ClickHouse 集群（400C, 2560G）相似的效果；bitmap 可能需要更大的资源代价可以达到和 ClickHouse 集群相似的效果。</p><p></p><p>常规查询/事件分析查询</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/8f/8f90ebd7f1f46267abe78f1d838d07a8.png\" /></p><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/d9/d96dec6e65ee2d3da667a2b817e01d9e.png\" /></p><p></p><p></p><p>由上图可知：</p><p>去重查询场景上 ByConity 开启优化与不开启优化区别不大；8 worker (120C 880G) 基本上达到与 ClickHouse 接近的查询时间；去重场景上，可以通过扩展计算资源来加快查询速度。</p><p></p><p>留存计算</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/94/9469711ab420e0755c8d407677c56069.png\" /></p><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/19/196b2795061628d303326063ba238fcf.png\" /></p><p></p><p>由上图可知：</p><p>留存计算场景上 ByConity 开启优化后查询时间是不开启优化查询时间的33%；8 worker (120C 880G) 开启优化的查询时间是 查询时间的30%；留存计算场景，可以通过扩展计算资源+优化的方式来将查询速度加速至 CK查询时间的16%。</p><p></p><p>转化计算</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/bb/bb0842b519cdf1c3e387c5498ea406dd.png\" /></p><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/8d/8dbd44c8b1a66f2f10ac2a33c9093496.png\" /></p><p></p><p>由上图可知：</p><p>转化计算场景上ByConity开启优化后查询时间是不开启优化查询时间的 60%；8 worker (120C 880G) 开启优化的查询时间与 ClickHouse 查询时间接近；转化计算场景，可以通过扩展计算资源+优化的方式将查询速度加速至 ClickHouse 查询时间的 53%。</p><p></p><p>not in 过滤</p><p>not in 过滤主要应用于用户分群场景，以及用户打标签场景。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/6c/6cfabec3aaf6c9f3a0194929da67a065.png\" /></p><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/22/221e1fb88be9324914d24f1634d2fffb.png\" /></p><p></p><p>由上图可知：</p><p>no in 过滤场景上 ByConity 开启优化后比 ByConity 不开启优化差，所以此场景下我们直接使用不开启优化的方式；8 worker (120C 880G) 不开启优化的查询时间比 ClickHouse 查询时间慢一些，但并不多；no in 过滤场景，可以通过扩展计算资源方式来将查询速度加速至 ClickHouse 查询时间的86%。</p><p></p><p>点查计算</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/f5/f54503b159a8f5f5851e10ad0a7d43d9.png\" /></p><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/13/133270df2a9176422c4f60a951906dc6.png\" /></p><p></p><p>由上图可知：</p><p>点查场景上 ByConity 开启优化后比 ByConity 不开启优化好；8 worker (120C 880G) 不开启优化的查询时间与 ClickHouse 查询时间接近；点查场景，可以通过扩展计算资源+开启优化的方式来将查询速度加速至 ClickHouse 查询时间的 26%。</p><p></p><p>bitmap 查询</p><p>bitmap 查询是在 AB 测试中使用更多的一种场景。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/c4/c40f67cae0ae0f5762ceaa2fe7241a4e.png\" /></p><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/3e/3e0876ac7d72af064d977d4df682649b.png\" /></p><p></p><p>由上图可知：</p><p>bitmap 过滤场景上 ByConity 开启优化后比 ByConity 不开启优化好一点；8 worker (120C 880G) 不开启优化的查询时间比 ClickHouse 查询时间慢很多；bitmap 过滤场景，扩展资源至 16 worker(240C 1769G) 比 ClickHouse &nbsp;查询慢。</p><p></p><h4>ByConity 全量迁移后的收获</h4><p></p><p></p><h5>资源降低</h5><p></p><p></p><p></p><blockquote>以下未统计 CPU 的差异性，数据仅供参考。</blockquote><p></p><p></p><p>使用 ByConity 进行全量迁移之后</p><p>查询合并资源消耗对比，CPU 消耗比之前减少了 75% 左右；数据写入资源对比，CPU 消耗比之前减少了进 35% 左右；只需要购买一半的固定资源，剩下一半靠工作日（早10晚8）定时弹性，成本相比全量购买资源降低了 25% 左右；</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/e3/e3f5ce219d8294c54d2de3c52b78d362.png\" /></p><p>当前使用的消耗情况</p><p></p><p>从当前使用的结果表中可以看到，ByConity 的 CPU 和 内存占比分别为 ClickHouse 的 34%和 48%。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/44/44017c3a2048b249cdced834b7d954e6.png\" /></p><p>加上远程存储后的消耗情况</p><p></p><p>我们在 IDC 使用 minio 来进行数据存储，使用 640 核的 CPU，4096G 内存，16个节点，单节点 40 核，256G，磁盘为 36T，把这些成本加在 ByConity 上之后，ByConity 的 CPU 和 内存占比依然低于 ClickHouse，分别为 ClickHouse 的 48% 和 68%。可以说，在资源的使用上，如按包年包月购买资源计算，ByConity 比原来至少降低 50% 左右；如按需启停，相比全量购买资源，成本将再降低 25% 左右。</p><p></p><h5>运维成本降低</h5><p></p><p></p><p>更简单的配置数据写入方式。之前我们专门配置的写入服务，常常出现 Too many parts &nbsp;等问题。高峰查询扩容更加简单，添加 pod 数量就可以很快扩容，再也没有人来问“数据查了半小时为啥没出来”。</p><p></p><p></p><h2>ByConity 替换 ClickHouse 的建议</h2><p></p><p></p><p>在业务中测试你的 SQL 是否可以在 ByConity 平台上正常运行，如果能够兼容，则基本都可运行。如个别情况下出现一些小问题，可以在社区中提出，获取快速反馈；控制测试集群的资源，测试数据集大小，对比 ByConity 集群与 ClickHouse 集群的查询结果，看是否符合预期。如果符合预期，可以进行替换计划。对于更侧重计算的任务，可能在 ByConity 中表现更好；根据测试数据集的大小，消耗的 S3 和 HDF 空间、带宽、QPS 计算资源的使用量，来评估全量数据时存储与计算需要使用的资源；将数据同时打入 ByConity 或者 ClickHouse 集群，开始一段时间的双跑，解决双跑期间出现的问题。例如我们公司在资源不足的情况下，使用是按业务进行，我们可以先在云上建一个 ByConity 集群，迁入某一部分的业务，之后逐步按业务来替换，腾出 IDC 资源以后，再把这一部分的数据迁移到线下；双跑没有问题后就可以退订 ClickHouse 集群。</p><p>在此过程中有一些注意事项：</p><p>S3 和 HDFS 远程存储的读取带宽与 QPS 可能会要求高一些，需要做一定的准备。例如，我们峰值每秒读写带宽为：写 2.5GB/读 6GB，峰值每秒 QPS 为：2～6k；Worker 节点的带宽用满，也会造成查询瓶颈；Default 节点（也就是读取计算节点）的缓存盘可以配置的适当大一些，可以降低查询时S3的带宽压力，加快查询速度。如果遇到未缓存的数据，可能会有冷启动问题。对此 ByConity 也有一些操作建议，具体还需要更多结合自己的业务进行，比如我们使用在早上进行预查的方式来将这一部分的冷启动问题进行缓解。</p><p></p><h3>未来规划</h3><p></p><p></p><p>未来我们将推动 ByConity 数据湖方案的测试与落地。</p><p>另外，我们会将数据指标管理与数仓理论相结合，将 80%的查询落到数仓上。欢迎大家一起加入体验。</p>",
    "publish_time": "2024-02-21 18:33:32",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]