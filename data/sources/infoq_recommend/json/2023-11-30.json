[
  {
    "title": "Spotify 开源 ANN 搜索库 Voyager，比Annoy快10倍",
    "url": "https://www.infoq.cn/article/OkPF1HW3oNz1xCFKbLa1",
    "summary": "<p><a href=\"https://engineering.atspotify.com/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">Spotify</a>\" 最近开源了<a href=\"https://spotify.github.io/voyager/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">Voyager</a>\"，一个近似最近邻（Approximate Nearest-Neighbor，ANN）搜索库。Voyager 基于<a href=\"https://arxiv.org/abs/1603.09320?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">Hierarchical Navigable Small Word</a>\"（HNSW）算法，比 Spotify 之前的 ANN 库 <a href=\"https://github.com/spotify/annoy?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">Annoy</a>\" 快 10 倍。</p><p></p><p>Spotify 使用 ANN 来支持其音乐推荐功能，比如 Discover Weekly。他们于 2013 年开发了 Annoy 来执行 ANN 搜索，但在 10 年后的当前规模下表现不佳。部分原因是由于底层算法：Annoy 使用树分区算法，而 Voyager 使用更新的 HNSW 算法。Voyager 比 Annoy 使用的内存少 4 倍，比 <a href=\"https://github.com/nmslib/hnswlib?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">hnswlib</a>\"（HNSW 的实现之一）少 16 倍。根据 Spotify 机器学习工程师和 Voyager 贡献者 <a href=\"https://engineering.atspotify.com/2023/10/introducing-voyager-spotifys-new-nearest-neighbor-search-library/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">Peter Sobot</a>\" 所说：</p><p></p><p></p><blockquote>Voyager 结合了 HNSW 更高的精度和速度，提供了经过充分测试、具有完善文档、可以在生产环境中使用的 Java 和 Python 绑定。Voyager 的理念是提供一个稳定、可靠、可在生产环境中使用的库，让任何人都可以在其应用中添加近似最近邻检索功能，无论使用的是 Python 还是 Java。</blockquote><p></p><p></p><p>Spotify 的推荐功能首先通过机器学习算法计算歌曲或 音轨 的 Embedding。两个音轨在播放列表中频繁出现，它们在Embedding空间中就会被映射得越近。用户也根据他们所听的歌曲被映射到这个空间。为了推荐用户可能喜欢的歌曲，Spotify 使用 ANN 搜索来找到与用户在 Embedding 空间中位置接近的音轨。Spotify 还可以使用 ANN 进行歌曲去重：通过计算音频数据的 Embedding，ANN 可以识别具有基本相同音频的音轨。</p><p></p><p>像 Spotify 这样的规模，要快速执行这种搜索要困难得多：他们的嵌入向量有数千个维度，目录中包含了数百万音轨。Annoy 显然无法提供足够好的性能，于是 Spotify 的工程师们尝试使用现有的开源库 hnswlib，但\"<a href=\"https://open.spotify.com/episode/3NLpNXBFC5bX5Oy5KlF5CL?si=09a859c813634488&amp;accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">遇到了问题</a>\"\"。其核心代码存在 Spotify 工程师无法修复的错误。他们还希望拥有更简单的 API。这导致他们开发了 Voyager，该项目考虑到了 Spotify 的生产基础设施需求。</p><p></p><p>Voyager 的设计目标是快速和轻量级。其 API 针对 Java 和 Python 做了绑定，但库本身没有 Java 依赖，并且仅需要 Python 的 NumPy库。该库可以在 Intel 和 ARM 芯片架构的机器（Linux 和 MacOS）和 Windows （Intel芯片架构）上运行。</p><p></p><p>用户在Hacker News 上将 Voyager 其与其前身 Annoy 进行了<a href=\"https://news.ycombinator.com/item?id=38072277&amp;accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">比较</a>\"：</p><p></p><p></p><blockquote>我看到的最大区别是，Annoy 使用只读索引文件（如文档所述：\"树一旦创建，就无法再添加更多的项\"），而 Voyager 允许你随时调用.add_item。</blockquote><p></p><p></p><p>Peter Sobot <a href=\"https://twitter.com/psobot/status/1715443416190910716?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">在 Twitter 的某个关于 Voyager 的帖子中回答道</a>\"：</p><p></p><p></p><blockquote>我认为 Voyager 是一个可嵌入、超轻量、快速的向量搜索库。Voyager没有向量数据库的花哨功能，但它没有依赖，并且只有大约 300KB。</blockquote><p></p><p></p><p><a href=\"https://github.com/spotify/voyager?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">Voyager 的源代码</a>\"可以在 GitHub 上获取。Voyager 已经提交到 <a href=\"https://ann-benchmarks.com/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">ANN-Benchmarks</a>\" 页面，但尚未运行<a href=\"https://github.com/erikbern/ann-benchmarks/pull/473?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDEyMzczNDUsImZpbGVHVUlEIjoibThBWk00Nk8wS0lvR05rYiIsImlhdCI6MTcwMTIzNzA0NSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.X1nX-oU-Z4nS2yFPTlqBTYNc21XQzyx-1B9MUjAB2a4\">基准测试</a>\"。</p><p></p><p>原文链接：</p><p><a href=\"https://www.infoq.com/news/2023/11/spotify-ann-voyager/\">https://www.infoq.com/news/2023/11/spotify-ann-voyager/</a>\"</p>",
    "publish_time": "2023-11-30 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "AI Agent与行业融合应用的前景及创新应用案例 | InfoQ《极客有约》",
    "url": "https://www.infoq.cn/article/XmzCkJUErlIuTsK8cvDm",
    "summary": "<p>作为一个比较新的概念，AI Agent 与行业融合应用的前景非常广阔，它们可以应用于各个领域，如医疗、金融、教育、零售等。</p>\n<p>本期《极客有约》，我们邀请到了澜码科技创始人兼 CEO 周建和澜码科技产研负责人周元剑，一同来探讨 AI Agent 目前的落地情况以及未来的发展趋势。我们还将为大家分享一些成功的 AI Agent 应用案例，以及探讨如何应对 AI Agent 应用中可能出现的挑战和问题，如数据隐私、算法透明性等。</p>",
    "publish_time": "2023-11-30 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "再访YashanDB，解密崖山新品发布会背后的技术突围",
    "url": "https://www.infoq.cn/article/Ok2fZeQW7vfGFR3AoXko",
    "summary": "<p>本月，YashanDB 举办了 2023 新品发布会。作为国产数据库行业的一颗新星，崖山数据库 YashanDB 从“出道”之初便凭借着“自研技术”成为了信创领域的一匹黑马。此次发布会则再一次引发了行业的讨论。</p><p></p><p>在这次新品发布会上，YashanDB 宣布 V23.1 版本正式发布，并且首次集中推出共享集群、分布式实时数仓以及空间数据库三款新产品，至此，具备自主内核的企业级完整产品体系全面面世。据悉，此次发布会 YashanDB 还推出了个人版，并且面向所有用户和行业免费开放，目前该版本已在官网同步上线。</p><p></p><p>关于崖山数据库的故事，早前 InfoQ 在「卓越技术团队访谈录」中有做过深访：《<a href=\"http://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;mid=2651170127&amp;idx=1&amp;sn=51d90d5f6743b2026b273cb3ffab2a99&amp;chksm=bdb85d1c8acfd40ae97e45286c4746aed63de72edd9a577b6e1e6efdf393d9337118de9fab3c&amp;scene=21#wechat_redirect\">中国的“贝尔实验室”：我们的数据库从内核的第一行代码写起</a>\"》。这一次，我们同样有幸与 YashanDB 核心团队一起，探讨 YashanDB 的新品发布和背后的技术演进。</p><p></p><p></p><h3>理论 + 技术 + 落地，三驾马车驱动 YashanDB 快速迭代</h3><p></p><p></p><p>“基础软件产业的发展，始终遵循这样的一条路径——从基础研究到技术领先再到产业强大。”YashanDB 产品总监王南在发布会上表示，YashanDB 在五年时间里通过算法理论、关键技术、应用场景三驾马车驱动产品快速成熟。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/ae/ae663b242217d5c25bee578a39c35d36.png\" /></p><p></p><p>一方面，随着全行业数字化的提速，加之大模型与 AIGC 的爆火，数据的规模、形态以及应用场景越来越多样化，由此也对数据存储、计算、分析、管理等提出了更高的要求，传统的数据库在能效比、多模态数据管理等方面面临挑战。</p><p></p><p>针对这一问题，YashanDB 将原创的有界计算理论和跨模计算理论融入到计算框架中，以应对数十亿级数据量以及关系、图、文档等多模态的分析查询需求；同时 YashanDB 采用了自适应的异步并行框架和事务调度机制来提高任务调度效率，经测试系统性能提升约 20% 至 30%，事务吞吐量提升了 137%，达成算法级别的创新。</p><p></p><p>另一方面，从业务需求来看，TP（事务处理）业务和 AP（分析处理）业务的融合是未来的趋势之一，对于企业提高资源利用率和业务处理速度、简化数据管理、促进业务创新等方面有着不小的价值。</p><p></p><p>对此，在关键技术上 YashanDB 具备了三个核心能力：一是通过向量引擎以及 SIMD 的技术为大规模数据计算提供底层并行和并发计算的基础；二是通过 LSC 引擎（Large-scale Storage Columnar Table）和 TAC 引擎 (Transaction Analytics Columnar Table) 解决实时数据与海量历史数据的融合计算问题；三是通过对象存储实现冷热数据的自动转换以优化成本，多方面助力企业降本增效。</p><p></p><p>简单理解，上述两个方面主要解决的是数据库的性能与成本等问题，但当产品落地到应用端时，有没有与之匹配的工具能力、完备的生态支持则是影响用户体验的第三大核心要素。</p><p></p><p>面对这一问题，王南表示新版本的 YashanDB 在兼容性、工具以及生态方面表现亮眼。内核层面，V23.1 支持 OCI &nbsp;(Oracle Call Intedace)，能够提供数据库高速访问的驱动性能，此外还全面兼容存量系统中大量的 PL/SQL（Procedural Language/SQL）等高级特性，以满足金融、政府以及企业核心系统的关键诉求；工具层面，一方面新版本调试能力增强，另一方面还提供了完整的迁移评估与工具体系，来确保数据迁移的快、稳、准；此外，在生态层面 YashanDB 也更加深入地联动上下游厂商做产品适配，为客户提供更完备的生态支持。</p><p></p><p>至此，一个高性能、高兼容、更开放的 YashanDB V23.1 正式诞生。</p><p></p><p>当然，除了全方位的能力迭代之外，本次发布会最受期待的便是向金融核心场景的 YashanDB 共享集群。</p><p></p><p></p><h3>首次推出面向金融关键行业核心系统的共享集群</h3><p></p><p></p><p>随着信创的持续走深，金融行业的国产化改造同样进入深水区，是否能够实现金融行业核心数据库系统的国产化替代，已然成为了国产数据库能力评估的一次大考。</p><p></p><p>由于金融行业的核心数据库系统需要处理复杂业务的账务信息，且对这些数据的准确性、安全性至关重要，所以银行核心系统对数据库的时延、数据一致性、安全性、高可用性等方面都有着极其严苛的要求。在此之前，大多数金融机构倾向于采用国外厂商提供的主机和数据库解决方案来构建其系统。其中，Oracle RAC（Oracle Real Application Clusters）一直是高端市场的佼佼者。Oracle 前后花了十年才正式推出，又经过了多次版本迭代才趋于稳定，其背后之艰，可想而知。</p><p></p><p>一般情况下，对于基于主备复制的高可用数据库来说，异步复制是常见策略，优点是性能友好，并且不会因为数据复制而带来过多的性能开销，然而异步复制有可能会造成数据丢失，在金融领域，这是不能接受的；对于分布式数据库来说，其架构决定了它天然具备一致性复制能力，但是它的价格相对高昂，并且节点数量增加，系统的运维复杂度会数量级提升。</p><p></p><p>因此，国产共享集群已然成为数据库国产化替代的一大关键，攻克了共享集群技术的国产化，才能真正实现金融核心系统快速、低成本、安全的平滑替换。对此，YashanDB 共享集群首席架构师孟凡彬在采访中表示，共享集群产品架构的复杂度极高，团队也遇到了几个关键的挑战：一是如何快速地继承和复制 YashanDB 集中式如此复杂的功能，如何解决集群间 DDL 同步和一致性的问题；二是如何进行并发控制，性能达到最优；三是如何达到秒级故障透明切换的能力。</p><p></p><p>“为了应对这些挑战，团队在研发过程中采取了多种措施。例如，通过深度定制和优化，系统化地列出故障模式库并梳理所有 DDL、DML、DCL 的流程，同时引入了故障注入打点的工程方法，对代码全覆盖，做到“故障定位精确到每一行代码”，极大提升了稳定性；另外，为了达到秒级故障透明切换的能力，我们搭建了多场景的故障测试框架，来全面验证 YashanDB 的高可用能力等等。”孟凡彬补充道。</p><p></p><p>最终在经历了多重技术突破与验证之后，YashanDB 正式推出了基于磁盘阵列的共享集群数据库系统——YashanDB for Cluster。据介绍，该数据库系统采用单数据库多实例架构，所有计算节点提供对等的多活计算能力，节点之间以强一致性方式实现并发读写，从而为用户提供透明多写、高可用、高性能的数据库能力。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/54/548237f619d7a98f244af75df3908a29.png\" /></p><p></p><p>对于崖山共享集群的技术优势，YashanDB 技术总监欧伟杰在会上称：“崖山共享集群能够为客户提供真正无差别、透明的读写能力，无论客户连接到哪个实例，都能使用全量功能特性，并且可以像使用集中式数据库一样使用集群数据库；性能方面，崖山共享集群两节点 TPCC 超过 210w，且线性扩展比＞0.8，能够为客户提供强大的性能。</p><p></p><p>据孟凡彬介绍，在早期进行内核设计时，YashanDB 充分考虑了向共享集群形态的演进，事务管理、MVCC 机制等内核技术天然适合共享集群，为后续的扩展打下坚实基础。此外，崖山共享集群的极致性能表现还离不开其背后的两项关键技术——Cohesive Memory 和 In memory FAT 技术。</p><p></p><p>Cohesive memory 系列技术主要实现了集群多实例之间的数据和锁的同步。在功能设计上，它不仅注重高性能的流程设计，还充分考虑了各类异常和故障场景下的高可用性。这种技术架构的挑战相当大，也是其被誉为“塔尖”技术的关键原因。</p><p></p><p>YashanDB 创新性地采用了本地化空间管理，有效避免了实例间的争用。此外，全局资源细粒度并发控制有效减少实例间的冲突，脏页快传技术有效减少脏页传递时的等待，实时事务状态广播几乎实时地在实例间同步状态，避免等待。</p><p></p><p>除此之外，文件系统对性能也至关重要，YashanDB 采取了 In memory FAT 专利技术，数据库通过崖山文件系统读写文件几乎零开销，文件系统元数据常住内存，数据库直连访问。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/6f/6f5afc49cdb83e1f8634bc0cd6f4fe16.png\" /></p><p></p><p>值得一提的是，在发布会现场进行了“拔网线、掐电源”极端情况下的故障模拟，崖山共享集群的 RPO（数据丢失量）为 0，能够确保故障切换不丢数据，故障恢复时间 RTO 小于 20 秒。针对高可用性，孟凡彬在发布会上表示：“YashanDB 的共享集群全面考虑了各种故障模式，包括网络故障、进程挂起、磁盘 IO 超时等，对所有业务流程进行了故障容错的设计，最终实现了端到端完备的应用连续性。”</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/7d/7dca5173e8150a2d7a52180ac995a688.png\" /></p><p></p><p>孟凡彬举例称，若上图的主机 Host1 故障，系统将会发生以下恢复动作：首先集群软件探测到节点故障，在共享存储上发起投票仲裁，将故障节点踢出集群列表；然后由幸存节点的数据库实例接管故障节点，包括全局资源的重建，重演日志将故障节点的脏页恢复，托管其事务区信息等；最后之前连接到故障节点数据库实例的客户端 Client1，将通过透明切换的能力自动连接到 Host2 的数据库实例上，恢复业务运行。</p><p></p><p>“通过右图的曲线可以直观看到效果，上面的曲线代表 Client1，在故障前连接到 Host1，故障后自动连接到 Host2 继续运行，从故障到端到端恢复正常，用时小于 20s；下面的曲线 Client2， 在故障前连接到 Host2，其业务运行会短暂受到集群冻结影响，小于 10s。”孟凡彬补充道，”故障发生后，故障自动恢复，业务是无感知的。”</p><p></p><p></p><h3>分布式实时数仓发布，七大能力全面曝光</h3><p></p><p></p><p>除了面向金融核心场景的数据库系统，分布式实时数仓——YashanDB for Data Warehouse 同样是本次发布会的一大亮点。</p><p></p><p>事实上，近几年随着国产化替代的如火如荼，有很多厂商已经推出了国产化的实时数仓产品，并且也经历了初步的市场验证，YashanDB 选择在这个节点发布实时数仓，势必要拿出一些更有市场说服力的价值点来。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/fc/fc31a4d354a3b78713d461e62e993d42.png\" /></p><p></p><p>对此，王南表示：YashanDB for Data Warehouse 是一款基于 MPP 计算架构的分布式实时数仓，跟传统的 OLAP 数仓在内核上有很大的不同。</p><p></p><p>首先是在原有的 MPP 并行计算的基础上，增加了冷 / 热数据、静态 / 动态数据的跨模融合计算能力，为用户提供一致的 SQL 能力，并且用户可以访问全量数据；同时也能实现大规模负载和计算场景资源的完整隔离，包括计算资源、内存资源、存储资源的隔离，来保证所有的任务调度互不干扰。</p><p></p><p>其次是 TAC 实时列存引擎，它专注于实时场景，基于 In-place Update 原位更新技术，能够提供强一致的事务支持，保证数据的实时写入、更新和强一致性，同时利用行列混存技术，满足实时数据写入和查询的需求。再次，YashanDB for Data Warehouse 引入了 LSC 静态列存引擎，具备存算分离和冷热转换的能力，同时能够提供 6 倍到 10 倍的数据压缩比，从而大大降低数据存储成本，并且支持对象存储。</p><p></p><p>最后还融入了原创的有界计算 AC 能力，通过近似计算能够将几十亿级的数据扫描规模缩减近千倍，由此可以带来 2-3 个数量级的性能提升，从而大幅提升行业数据模型查询、分析、处理等能力。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/17/17fd6357003e225f3031d36b248de34a.png\" /></p><p></p><p>值得一提的是，23.1 版本的 YashanDB 通过自研优化器、向量化执行、并行计算以及分布式计算能力全场景覆盖，使得 AP 并行分析查询能力进一步突破，TPC-H 性能是开源数据库的 10 倍以上，单节点导入性能达到 300MB/s。</p><p></p><p>由此，一个具备大容量、高压缩、强一致、高性能入库、强分析查询能力的实时数仓产品 YashanDB for Data Warehouse 正式诞生。</p><p></p><p>谈及崖山分布式实时数仓极致性能背后的关键技术优化，欧伟杰在会上表示，首先在 23.1 版本中 YashanDB 实现了面向行列算子的自适应 Cost 模型，结合算子计算模式，运行时动态调整模型参数，避免在不同环境下数据库性能表达差距大的痛点问题，最终通过对复杂查询场景下 Cost 模型的优化，实现了整体性能较上个版本最高 85% 的提升，并且也大大降低了性能调整的复杂性。</p><p></p><p>其次，V23.1 版本还设计并实现了多级内存管理能力，能够针对数据库内部不同使用场景采用动态的内存管理策略，降低直接从操作系统分配内存的频率，并在不同算子 / 会话间实现计算内存的重用。实测显示该方法能够有效提高复杂查询下计算内存的利用率，提升数据库整体处理能力。</p><p></p><p>当然，对于 CPU 和 I/O 资源的管控，YashanDB 也给出了它的优化思路，即面向混合负载场景设计提出细粒度资源管理诉求，设计并实现了资源管理器适配不同底层资源模块，有效降低了资源紧张场景下的 CPU 使用率。</p><p></p><p>最后则是支持基于对象存储的静态数据管理能力，虽然数据保存在远端，但利用静态数据的大颗粒度 I/O 特征和优化本地 DiskCache 能力，能够最小化远程访问的性能损耗，经 SSB 测试，YashanDB for &nbsp;Data Warehouse 的对象存储和本地存储的查询时延均小于 5%。与此同时还可以利用云基础设施实现海量数据的低成本和弹性管理。</p><p></p><p>面向未来，欧伟杰表示：“得益于 YashanDB 研发团队在技术上的不断深入打磨，崖山分布式数据库对比开源分析型数据库已经体现出了巨大优势，即便是 Q2 的单表查询也有数十倍的优势，我们相信崖山数据库仍有很大的提升空间。”</p><p></p><p></p><h3>空间数据管理能力进化！YashanDB for GIS 重磅发布</h3><p></p><p></p><p>除了金融场景和实时数仓，空间数据库同样也是国产化替代的一个核心场景，在地理信息系统、位置服务和导航、城市规划与管理等方面发挥着重要作用，尤其是随着“智慧城市”等概念的提出，空间数据库将会发挥出更大的价值。</p><p></p><p>面向空间数据管理这一场景，本次发布会同样给行业带来了一个新的选择——YashanDB for GIS。</p><p>据悉，YashanDB 空间数据库支持“原生 GIS 数据库引擎和中间件 + 关系型数据库”两种模式，具备 GIS 引擎与 SDE 双形态空间能力，支持矢量地图、激光云点、栅格、轨迹、遥感影像等空间数据的管理。</p><p>此外，YashanDB 23.1 版本还对地理空间数据管理模型进行了扩展，增加了矢量数据、标准函数、空间索引等功能，使得 YashanDB 成为具备高性能地理空间矢量数据管理能力的企业级自主研发数据库。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/fc/fc2aaf3d963d9f0ad95d6735a4f34c42.png\" /></p><p></p><p>王南表示：“我们和开源数据库也做了一个对比，我们的空间计算引擎在面向一个真实城市 55 万栋建筑数据和 10 类功能和应用场景的测试验证下，我们的性能表现是商业和开源的空间计算引擎的 3 倍以上。”</p><p>事实上，空间数据的高效访问主要依赖于空间索引，全新发布的 YashanDB 空间数据库实现了基于 R-tree 的空间索引能力，由此也带来了性能的大幅领先。</p><p></p><p>据介绍，崖山空间索引的实现基于外包框，采用了用户定义类型存储空间数据类型，在 UDT (User Defined Type）的属性中包含其外包框，能够通过自适应算法，对较大的空间对象提前计算其外包框，保证提取外包框的 I/O 消耗可控。</p><p></p><p>此外，崖山空间索引的物理存储还复用了崖山原有 B-tree 的存储组织，这使得并发分裂局部锁机制等优势在空间索引上被完美继承。</p><p></p><p>值得一提的是，崖山空间索引也实现了全节点 MVCC，支持细粒度多版本管理和空值优化等。</p><p>不难看出，YashanDB 空间数据库在确保性能的同时，也在积极拓展更多有业务需求、有场景价值的能力，而这些能力在开源的 PostGIS 中是不可见的。</p><p></p><p>除了持续优化原生空间数据计算性能外，YashanDB 也积极在和 GIS 平台进行合作，先后完成了与中地数码 MapGIS 以及超图 SuperMapGIS 的适配验证，共同打造出了全国产化解决方案。据悉，崖山空间数据库作为核心时空数字底座，已被应用于深圳龙华区数字孪生城市。</p><p></p><p>“为了支持更大规模的空间应用，空间数据的分布式并行计算、时空数据冷热分离存储都是崖山空间数据库规划探索的方向。”欧伟杰补充道。</p><p></p><p></p><h3>总结</h3><p></p><p></p><p>从共享集群技术的全面突破，到实时数仓和空间数据库的优势立显，YashanDB 给了行业不小惊喜的同时，也再一次展示了“理论 + 工程”双轨制的创新优势。</p><p></p><p>欧伟杰曾在采访中表示，正是基于“双轨制”的模式，在数据库系统研发过程中，崖山数据库系统团队会更关注研究成果如何转化，工程师不只“低头赶路”，也会“抬头看路”，互相交流。“同样，我们也欢迎有兴趣的同学和我们的技术团队交流碰撞，共同推进国产数据库行业发展。”欧伟杰在发布会总结时说道。</p><p></p><p>理论研究的专注与纯粹 + 商业版本的实践与验证，共同为 YashanDB 构筑出了持续创新的能力底座，V23.1 是 YashanDB 的一个里程碑式版本，未来我们期待 YashanDB 撬动更多的场景并广泛落地。</p>",
    "publish_time": "2023-11-30 10:23:13",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "中国移动磐基PaaS平台基于eBPF的应用可观测性建设实践",
    "url": "https://www.infoq.cn/article/39ksqKqd7W26Vz3akb1F",
    "summary": "<p>作为中国移动智慧中台的统一技术底座，磐基 PaaS 平台提供了高效的集群管理和调度功能，满足多元化的业务场景需求。该平台携手 DeepFlow 借助 eBPF 技术，解决了 APM 落地困难和组件追踪断路中的挑战，实现了全栈且无侵扰的应用可观测性。磐基 PaaS 平台将 eBPF 数据与现有的可观测数据整合，提供了开箱即用的应用可观测性，全栈无盲点的调用链追踪等能力，大大提升了各业务系统云化的底气，并促进了平台本身的快速推广。未来，平台还针对运营商等特定行业场景，进一步深化可观测性数据的融合，并将创新性地拓展其 AI 能力，以增强市场竞争力。</p><p></p><h2>背景介绍</h2><p></p><p></p><p>磐基 PaaS 平台是中国移动智慧中台统一技术底座，为算力网络提供编排调度能力，提供分钟级的集群交付，实现 ARM/X86/混部架构集群统一管控，按需调度，支撑 B、O、M 三域用户交互、计算密集、数据密集、交易密集等多种类型的业务系统，具备万级 POD 承载能力，构建双栈网络，使在线业务稳定运行、平稳应对业务高峰。</p><p></p><p>磐基 PaaS 平台整合了磐基容器平台、磐舟 Devops、算力管控、磐维数据库、磐智 AI 平台及相关能力，以战略指导、统一规划、能力解耦、有机组装、需求驱动、场景匹配、敏捷迭代、低感升级为原则，全面布局云原生 PaaS 产品能力图谱，均衡发展。</p><p></p><p>磐基 PaaS 平台目前纳管700+集群，4万+节点，6千多套组件，支撑省分公司包括CRM核心系统、BOSS 计费系统，IT 公司、各专业公司IT系统包括 AI、大数据系统等600多个业务系统上云。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/bd/bd6ed6981a4318cd26fec717ef7b82d0.png\" /></p><p></p><p>目前磐基 PaaS 平台基于可观测性三大基石（指标+追踪+日志）的指导思想，已经使用不同的组件构建完成，利用 Prometheus 获取了云原生基础设施资源（Docker、K8s 自身）、中间件（Redis、Nginx）等指标数据，利用自研的 APM 实现了微服务在代码级别的调用链追踪，利用自研日志平台收集主机、Kubernetes、组件、应用实例的日志数据。但是在业务真正落地过程中，还是存在以下一些问题：</p><p></p><h3>推广支撑力度不够&nbsp;</h3><p></p><p></p><p>信任度不足：传统APM探针技术主要采用字节码注入技术，该技术虽无需业务系统研发人员关注代码实现，但对业务系统仍有代码侵入特性，进而占用业务系统资源，或影响业务性能。高并发生产系统往往因探针可能产生的影响，而质疑其收益性。语言依赖强：字节码注入技术依赖业务系统代码语言和代码框架，导致传统 APM 技术需提供各种语言和框架的探针，才能满足企业级 PaaS 平台的可观测能力，因而在能力建设上的投入往往落后于实际生产需要。迁移难度大：SkyWalking 等 APM 产品早在非容器化时代便已普及，云原生时代同步提供了容器化操作。当业务系统与 APM 产品深度融合后，变更观测产品的推动力便极其微弱。</p><p></p><h3>观测能力覆盖不足</h3><p></p><p></p><p>云设施观测能力不全：云原生全栈式可观测融合视图应包含云原生网络层能力，但传统探针技术在 CoreDNS、NodeLocal DNS 等 Kubernetes 网络层还存在盲区。组件观测能力弱：可观测能力应尽可能地呈现业务系统及其相关的依赖组件、基础设施的全貌，但传统的探针技术因语言和框架的依赖性，在观测系统所依赖的组件内部的呈现能力还显得不足，往往只能到其表面请求入口，内部仍是黑盒状态。</p><p></p><p>基于以上痛点，磐基PaaS平台开展ebpf技术能力特性的研究，并与deepflow社区开展合作，启动基于ebpf技术的可观测平台能力建设，突破创新性的技术壁垒，致力于完善云原生场景下的应用观测图谱。</p><p></p><h2>为什么引入 DeepFlow？</h2><p></p><p></p><p>DeepFlow 基于 eBPF 实现了应用性能指标、分布式追踪、持续性能剖析等观测信号的零侵扰（Zero Code）采集，并结合智能标签（SmartEncoding）技术实现了所有观测信号的全栈（Full Stack）关联和高效存取。</p><p></p><p>零侵扰的方式支持主流应用协议的解析，包括 HTTP 1/2、HTTPS（Golang/openssl）、Dubbo、gRPC、ProtobufRPC、SOFARPC、MySQL、PostgreSQL、Redis、Kafka、MQTT、DNS，未来还将扩展更多应用协议的支持。提供了查看所有微服务应用的 RED（Request/Error/Delay）黄金指标，所有微服务之间的全景调用关系，以及网络协议栈 L4 层的吞吐、时延、建连异常、重传、零窗等指标。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/30/3055addaffe7fff6b7db815eb9e49243.png\" /></p><p></p><p>利用 eBPF 和 Wasm 技术零侵扰实现分布式追踪，支持任意语言的应用程序，完整覆盖网关、服务网格、数据库、消息队列、DNS、网卡等各类基础设施，不留下任何追踪盲点。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/3b/3b5401579779dfc28b79244dec172f06.png\" /></p><p></p><p>依托 eBPF 技术获得的无插码零侵扰能力，DeepFlow 基本能做到独立应用部署，对应用开箱即用，对外提供的 Grafana Dashboard 也非常丰富。</p><p></p><h2>磐基 eBPF 应用可观测性实践</h2><p></p><p></p><p>DeepFlow 对外提供统一的 SQL 接口查询所有类型的观测数据，磐基平台可以非常方便的将 DeepFlow 数据与自身可观测平台集成，目前磐基可观测平台基于 eBPF 数据实现了网络流量拓扑展示、eBPF 调用链火焰图展示、告警阈值配置、并将 eBPF 数据与现有的指标、日志、调用链数据融合，以实现全栈一体化的可观测性平台。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/24/2473372fab7a27c49d6b1555c86168f0.png\" /></p><p></p><p>流量拓扑展示，支持多种维度拓扑视图（应用 POD/NODE、网络 POD/NODE）；支持跨集群流量调用展示；支持黄金指标（吞吐量、错误率、延迟等）进行告警阈值配置找到异常网络路径；支持告警阈值配置控制线条颜色，展示不同颜色拓扑线条，并实时告警通知；支持灵活的过滤条件（集群、分区、工作负载、协议、节点)。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/4b/4b4a3e3bf356bb5033451ca3e21987f8.png\" /></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/9f/9ff0b8dbb588bff08ca38ddba7b7f722.png\" /></p><p></p><p>调用链火焰图，展示单条请求的全栈调用关系，包括系统进程、主机、容器节点、POD容器内的请求耗时情况。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/c7/c7b14e213d336a96ac326c73069ac271.png\" /></p><p>&nbsp;</p><p>deepflow-agent、deepflow-server、deepflow-app 等镜像进行重新编译和底包 OpenEuler 操作系统替换，并通过镜像安全扫描。从统一门户，资源中心获取用户和业务系统等数据，和eBPF可观测数据进行融合，做多租户权限隔离。将 deepflow-server 端元数据查询存储引擎 MySQL 进行改造，使其能够同时适配磐维数据库和 Postgres。将磐基自身 APM 数据转换成 OpenTelemetry 标准的调用链数据，并将 OpenTelemetry、eBPF 获取到的追踪数据进行关联， 覆盖一个应用从业务代码、系统函数、网络接口的全栈调用路径，实现真正的全链路分布式追踪。</p><p></p><h2>未来展望</h2><p></p><p></p><p>通过一段时间的探索和实践，磐基PaaS基于 eBPF 可观测取得了一些阶段性成果，后续将加速磐基 eBPF 应用可观测性平台在各个地域上生产，给业务系统上云提升信心。也将继续在功能上快速迭代，大致计划：</p><p></p><p>进一步融合 eBPF 可观测性数据与指标、日志及调用链追踪数据，构建全栈一体化可观测性平台利用 WASM plugin 实现 eBPF 内核可编程，实现业务私有协议解析能力、私有字段数据脱敏能力利用 eBPF 采集进程的性能剖析数据，实现 CPU、内存全栈性能数据分析展示结合 AI 能力，提供根因分析、故障预测、大模型智能助手等功能</p><p></p><p>同时将进一步加强与 DeepFlow 社区的合作，把磐基eBPF 可观测性在运营商行业的实际应用经验和成果分享给社区，促进开源社区的共同发展。</p>",
    "publish_time": "2023-11-30 10:32:41",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "🚀 亚马逊云科技 2023 re:Invent 精彩速递 - DAY2！",
    "url": "https://www.infoq.cn/article/EhBQWAjwyw5rZkq6FFRy",
    "summary": "<p>🐦 早上八点，开发者们蜂拥而至 re:Invent keynote 现场，亚马逊云科技 CEO Adam Selipsky 带来重磅产品发布。</p><p></p><p>🔥 亚马逊云科技发布 S3 Express One Zone、Amazon Graviton 4以及 R8g Instances for EC2 实例、Trainium2 芯片等！全面助力客户降本增效！</p><p></p><p>🔥 Amazon Bedrock 迎来重磅升级，增加了 Fine-tuning、Agents、Knowledge Bases、Guardrails等全新功能，帮助客户更高效、智能、安全地构建应用！</p><p></p><p>🔥 Amazon Q 问世，全场尖叫！这是一种以安全和隐私为重点构建的新型生成式人工智能助手，旨在帮助企业级开发者们释放生成式 AI 技术的全部潜力！</p><p></p><p>🥳 除了干货满满的Keynote ，现场各种有趣有料的科技产品，正在不断刷新开发者们的体验与认知！</p><p></p><p>详情请查看高光图集：</p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/ea/63/ea1bf03407a5801e9b557ba1696ee063.jpg\" /></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/88/7e/8834ecd6a8bbcd1b9f9bbd6ffcbf697e.jpg\" /></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/83/73/83ff401aeed5160303fe08432437a173.jpg\" /></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/fa/7d/fac4e46ea8f254ae9e0eyy20de061b7d.jpg\" /></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/fa/61/fa028a97da9d9443f6133507045f9b61.jpg\" /></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/39/5a/3961f38d92bc124e204e3059ba8ec05a.jpg\" /></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/2e/9a/2ee5651562f7fe208722458d466b7c9a.jpg\" /></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/a5/5d/a515b4f80491181cd624a74b8bf3cc5d.jpg\" /></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/a4/12/a4c153e9b694de07fa9094412271b412.jpg\" /></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/48/fc/48594a8b4f5c9ba07f849968e2dc2dfc.jpg\" /></p><p></p><p></p><p>&nbsp;更多精彩，官网直达&nbsp;<a href=\"https://dev.amazoncloud.cn/reinvent2023?visitfrom=InfoQ&amp;sc_medium=owned&amp;sc_campaign=reinvent&amp;sc_channel=InfoQ\">https://dev.amazoncloud.cn/reinvent2023?visitfrom=InfoQ&amp;sc_medium=owned&amp;sc_campaign=reinvent&amp;sc_channel=InfoQ</a>\"</p>",
    "publish_time": "2023-11-30 10:38:49",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "工银科技技术二部副总经理徐正确认出席 QCon 上海，分享前沿科技技术在工银科技的实践",
    "url": "https://www.infoq.cn/article/IvEuwF6rFudA4rq3Qe6i",
    "summary": "<p><a href=\"https://qcon.infoq.cn/2023/shanghai/?utm_source=infoqweb&amp;utm_medium=teacherart&amp;utm_campaign=8&amp;utm_term=1130&amp;utm_content=xuzheng\">QCon 全球软件开发大会</a>\"，将于 12 月在上海召开。工银科技技术二部副总经理徐正将发表题为《<a href=\"https://qcon.infoq.cn/2023/shanghai/presentation/5632?utm_source=infoqweb&amp;utm_medium=teacherart&amp;utm_campaign=8&amp;utm_term=1130&amp;utm_content=xuzheng\">前沿科技技术在工银科技的实践</a>\"》主题分享，探讨中国工商银行的金融科技实践、工银科技的产品体系，以及对外输出的案例。</p><p></p><p><a href=\"https://qcon.infoq.cn/2023/shanghai/presentation/5632?utm_source=infoqweb&amp;utm_medium=teacherart&amp;utm_campaign=8&amp;utm_term=1130&amp;utm_content=xuzheng\">徐正</a>\"，负责工银科技信贷同业输出和数据要素服务。牵头负责工行信贷业务系统对同业的输出，牵头负责工行数据交易平台的搭建和运营工作，牵头建立工行产业链金融平台创新融资业务与央企的对接。参与工行个人信贷业务系统、法人信贷业务系统等的建设工作。拥有二十多年法人和个人信贷前中后台从业经验、法人和个人信贷业务系统建设经验，推动大数据、人工智能等在工行法人信贷业务中的落地应用。他在本次会议的演讲内容如下：</p><p></p><p>演讲：前沿科技技术在工银科技的实践</p><p></p><p>为响应监管部门“推动大型银行向中小银行输出风控工具和技术”的号召，工银科技作为工商银行金融科技对外输出的窗口，持续推进银行信用风险、操作风险、市场风险、数据要素的输出，在输出系统和服务的同时，输出工行最佳实践经验。</p><p></p><p>演讲提纲：</p><p></p><p>中国工商银行的金融科技实践工银科技的产品体系</p><p>○ 信用风险管理</p><p>○ 市场风险管理</p><p>○ 反洗钱（操作风险管理）</p><p>○ 数据要素</p><p>工银科技对外输出的案例</p><p></p><p>除上述演讲外，QCon 上海还将围绕&nbsp;<a href=\"https://qcon.infoq.cn/2023/shanghai/track/1595?utm_source=infoqweb&amp;utm_medium=teacherart\">GenAI和通用大模型应用探索</a>\"、<a href=\"https://qcon.infoq.cn/2023/shanghai/track/1596?utm_source=infoqweb&amp;utm_medium=teacherart\">AI&nbsp;Agent&nbsp;与行业融合应用的前景</a>\"、<a href=\"https://qcon.infoq.cn/2023/shanghai/track/1597?utm_source=infoqweb&amp;utm_medium=teacherart\">LLM&nbsp;时代的性能优化</a>\"、<a href=\"https://qcon.infoq.cn/2023/shanghai/track/1598?utm_source=infoqweb&amp;utm_medium=teacherart\">智能化信创软件&nbsp;IDE</a>\"、<a href=\"https://qcon.infoq.cn/2023/shanghai/track/1602?utm_source=infoqweb&amp;utm_medium=teacherart\">面向人工智能时代的架构</a>\"、<a href=\"https://qcon.infoq.cn/2023/shanghai/track/1604?utm_source=infoqweb&amp;utm_medium=teacherart\">性能工程：提升效率和创新的新方法</a>\"等专题进行交流。</p><p></p><p>QCon 上海 2023，相约 12 月！ 8 折优惠还剩最后 2 天，现在购票立减￥1360！咨询购票请联系：18514549229（微信同手机号）。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/01/0113b3dfb187d5f9988b7eb16d2e0594.png\" /></p><p></p>",
    "publish_time": "2023-11-30 11:30:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "平安银行：云原生转型背景下的质效探索与思考",
    "url": "https://www.infoq.cn/article/pHPNO7ssAvsT8zg9LiCG",
    "summary": "<p></p><p>采访嘉宾 | 金艳 平安银行金融科技部 质量技术及工程效能负责人</p><p></p><p>数字化浪潮下，金融科技领域正经历着前所未有的变革与挑战。作为以金融科技为发展特色的金融企业，平安银行通过引入云原生体系，持续升级技术和工程能力，为业务提供更加坚实和灵活的技术支撑。</p><p></p><p>在<a href=\"http://mp.weixin.qq.com/s?__biz=MzkzMzQzNjQ5Mw==&amp;mid=2247486737&amp;idx=1&amp;sn=d143c11541cf3876451b079faf16cb7e&amp;chksm=c24dc033f53a49254962c75952605f82465c4898353c141a4481a4eca1fe8388ff506f5269e3&amp;scene=21#wechat_redirect\">日前举办的 FCon 大会</a>\"期间，来自平安银行总行金融科技部的质量技术及工程效能负责人金艳接受 InfoQ 采访，分享了平安银行在持续测试这一领域的实践和经验。</p><p></p><p>金艳表示，“云原生”是平安银行数字化战略的重要抓手，通过对云原生技术的运用，银行能够更好地为业务战略提供支持，实现“更敏捷创新、更稳定运行、更高效复用、更专业领先”的价值提升。全面升级工程能力，提升全行研发质效，已是平安银行科技升级的题中应有之义。</p><p></p><p>其进一步指出，“<a href=\"https://www.infoq.cn/article/uYHCyCHU27weYcA94azl?utm_campaign=geek_search&amp;utm_content=geek_search&amp;utm_medium=geek_search&amp;utm_source=geek_search&amp;utm_term=geek_search\">持续测试</a>\"”作为软件工程中先进和有效的实践，已在平安银行得到较为系统和广泛的应用，其很好地衔接起云原生软件研发流程中 CI 与 CD 间的质量鸿沟，完成软件研发生命周期的质量闭环，为金融业务价值的持续交付附上了高质量的属性。这不仅符合国家高质量发展的战略方向，同时在经济下行压力下具有降本增效的重要意义。</p><p></p><p>除了持续测试的实践外，平安银行的研发平台也广泛关注对其他新技术、新实践的探索和运用：如最近广受业界关注的 AGI 技术，以及平台工程的实践等。此外，除了朝全面云原生的目标演进，平安银行也非常关注 AI 技术的运用，比如也正探索将大模型融入到研发工具和平台之中，以实现全方位的智能化。</p><p></p><p>以下是对话全文（经 InfoQ 进行不改变原意的编辑整理）：</p><p></p><p>InfoQ：首先想请您简要介绍一下相关的工作和职责。</p><p></p><p>金艳：我在平安银行金融科技部，主要负责组织级研发流程规范、流程持续改进（EPG）、质量保障（QA）还有云计算相关平台建设与维护。如涵盖研发效能相关的数字化管理平台、开发运维一体化平台 Starlink 等等。</p><p></p><h2>关于研发效能的理解和探索</h2><p></p><p></p><p>InfoQ：您在 FCon 的演讲中提到平安银行在 DevOps 体系中持续测试能力建设的重要性。想请您再进一步谈谈，为什么平安银行对于持续测试的本质和原则如此关注？是从什么时候开始尤其关注这点的？</p><p></p><p>金艳：首先因为我们是一家银行，在金融行业，一分钱的错误都将对国计民生产生重大的影响，监管部门对我们的软件提出的要求远高于一般企业。软件的质量和安全性是金融企业立足的根本，在平安银行的工程师文化中我们就强调“质量是底线”。</p><p></p><p>另一方面，随着互联网企业的高速发展，倒逼银行业务需要更快地响应和支持。引入云原生技术体系，使我们的软件交付能力大幅提升。采用微服务、容器，以及 DevOps 的方法体系，让我们能够更灵活、快速地交付功能。然而，传统的质量保障体系难以跟上持续交付的节奏，测试成为了交付的瓶颈。</p><p></p><p>在社会降本增效的大趋势和金融行业对软件质量的高要求下，如何让软件交付做到“既好又快”，这是我们以及众多同业在转型、升级中共同面临的重要课题。“持续测试”就是我们在此背景下积极引入和持续探索的有效方法。</p><p></p><p>InfoQ：能否回顾一下平安银行在研发效能投入方面的历程，这个历程中有哪些关键的阶段或里程碑？</p><p></p><p>金艳：我们的云原生建设始于 2018 年，从微服务、DevOps 到容器 这样一路走过来。2019 年，我们开始引入 DevOps 的实践和方法，推动 Starlink（平安银行统一的开发运维一体化平台） 的建设。到了 2020 年，我们逐步替换了原有的一些研发工具和平台，将工具底座纳入整个 DevOps 平台，支持全行的研发工作。这个时期，暂称为“云原生 1.0 时期”</p><p></p><p>2022 年，平安银行提出了数字化升级的“新三年”的规划，我们迎来了全面云原生的新阶段。从 2022 年开始，我们将逐步完成对全行应用的云原生改造，实现技术底座和工程能力的全面升级。</p><p></p><p>在云原生 1.0 时期，我们主要聚焦于持续集成持续部署（CICD）能力的建设。随着云原生 2.0 的启动，我们融入了更多工具，包括持续测试（CT）能力的建设，以及全流程的整合与完善。</p><p></p><p>关于平台升级后的实际业务情况，我们在研发交付效率和质量两方面同时推进。随着敏捷的实施，开发交付速度加快，而我们也希望测试能够跟上开发的步伐，以“既快又好”地实现业务的价值。</p><p></p><p>在这个阶段，我们采取了一些持续测试的策略，进行工具体系的建设以及工程实践的运用和推广。比如我们开始倡导测试在软件开发的早期（需求、设计、开发阶段）就介入，通过各类评审、单元测试等实践，让质量问题得以在软件开发的早期就被发现和修复，即大家所了解的“测试左移”。</p><p></p><p>同时我们也开始关注软件在预发布环境和生产环境中的质量表现，通过建设全链路压测能力、混沌工程能力、流量模拟和仿真数据的使用，形成质量保证的闭环，让测试获得充分的反馈和学习，这是“测试右移”的实践；另外我们也纵向提升各个环节（包括传统测试环节）的自动化、智能化、精准化、服务化能力，引入自动化测试、精准测试、无码化 / 智能化案例生成能力，让测试的每个环节都获得效率及质量的全面提升。</p><p></p><p>InfoQ：在持续测试策略这块，有更具体的实践可以分享吗？</p><p></p><p>金艳：关于左移的实践，以持续集成中的单元测试自动化为例，过去，开发人员提交代码给测试团队，等待测试结果可能需要一周时间，遇到变更则更耗时。所以后面出现了单元测试的实践，通过让开发人员编写单元测试的代码，让代码在集成过程中就完成对功能的检验。但有一个问题，单元测试过程需要开发花费时间和精力去设计和维护单元测试代码，这往往成为推行单元测试的阻力。</p><p></p><p>在我们的持续测试体系中，我们引入并有效整合了单元测试案例自动生成的能力，开发人员在编写完程序并进行编译之后，系统会自动生成相关的单元测试案例。这些自动生成的单元测试案例会被提交给测试团队。这大大降低了开发人员实施单元测试的阻力，并形成了开发与测试更高效的协作形式。不仅可以提高版本质量，反馈周期也从一周的时间缩短到一两天，使单元测试和 TDD 实践更易于推广。</p><p></p><p>在测试右移的实践中，混沌工程是我们开展得比较早和相对成熟的实践。在传统情况下，只有在生产环境中发生节点故障或者发布后某个服务器不可用时，运维团队才能意识到问题，并采取应急措施。</p><p></p><p>通过混沌工程，我们可以在预发布环境中（金融企业无法在生产环境中做）引入一些受控的“捣蛋鬼”，模拟系统可能遇到各种故障和异常情况。研发团队可以观察系统在这些情况下的表现，并将这些观察结果作为一些测试准出的参考。这样一来，我们可以在系统上线之前就提前识别和规避一些潜在的问题，这种预防性的方法有助于提高系统的稳定性和可靠性。特别是对于分布式系统，这种方法极具价值。</p><p></p><p>此外，我们还可以利用混沌工程结合流量录制技术，将生产环境的数据导入灰度环境中。通过混沌工程的能力，进行一些对系统健壮性的验证，包括系统的韧性、抗压力等方面的测试，从而补充测试案例。</p><p></p><p>InfoQ：在追求研发效能的过程中，平安银行是如何平衡研发效能和满足业务需求之间的关系的？有哪些经验或实践可以分享？</p><p></p><p>金艳：首先，我们提升研发效能就是为了满足业务需求，是为客户提供更好服务、更及时响应的重要手段，“磨刀不误砍柴功”嘛。</p><p></p><p>但确实如你所说，在进行技术升级和工程实践推广时，我们面临着一些挑战。进入云原生 2.0 后，我们的业务研发团队时常面临着满足业务需求和升级技术与工程能力的权衡，因为研发人员的精力和研发资源是有限且珍贵的。</p><p></p><p>在这个过程中，最大的矛盾在于资源是有限的，业务部门并不关心研发基础能力，他们可能难以理解研发项目提升对他们的好处是什么。业务需要的是研发点对点地完成相应的业务需求，不喜欢研发投入资源去做这些“多余”的事情。</p><p></p><p>所以这个问题涉及到业务对“全面云原生”升级背后价值的理解，以及在研发资源分配上的一些共识。在我们的实践中，我们与业务达成了共识，形成了两个原则：即业务优先和价值优先。在资源冲突时，我们以业务为优先，同时保障有 15% 的 IT 资源用于技术体系改造等基础能力的升级建设。</p><p></p><p>价值导向也是判断哪些任务优先进行的关键，这里不得不提到 BizDevOps 的实践。<a href=\"https://www.infoq.cn/article/RFGAkFHxTtyrAaphHBh0?utm_campaign=geek_search&amp;utm_content=geek_search&amp;utm_medium=geek_search&amp;utm_source=geek_search&amp;utm_term=geek_search\">BizDevOps 的实践</a>\"主张将业务拉到同一战线，让业务参与到整个研发过程中来。 在实践里，我们通过透明化研发流程，为业务展示每一个需求的完成过程，同时建立统一的价值评价体系，将业务需求价值和 IT 升级改造的价值拉到同一个评判体系下进行排序，用同一套标准将需求分为不同层级（P0~P3）进而确定优先级，更有效地交付价值。”价值最大化”是平安在文化层面的共识。</p><p></p><h2>研发效能团队的挑战与成长</h2><p></p><p></p><p>InfoQ：相信历史技术债是每个研发效能团队都会面临的挑战，能否结合实际案例说说平安银行是如何处理研发历史债的？</p><p></p><p>金艳：对于“存量”的问题。我们从两个方向上来进行处理：一是治标，处理“症状”，我们行内有专门的工程治理团队，会结合行内的实际情况，制定整体的工程治理方案，推进整体的治理实施，业务团队通过对关键功能代码的修复或有意识的“重构”，整体上解决紧急程度较高的债务，这相当于“还债”；</p><p></p><p>二是治本，这里我们通过升级技术能力和组织能力，让团队获得研发质效的提升，进而获得高效处理技术债的能力，比如我们分享的“持续测试”体系能力，比如我们整理的云原生建设，这相当于提升我们的收入水平，过去的债务压力随着我们水平的提升，变得没有那么大了。</p><p></p><p>近两年我们一直在推动一个名为 “工程训练营” 的项目。在这个项目中，我们集结了全行各业务团队中研发质效领域的“种子选手”，通过对他们进行工程效能领域方法、实践的培训和指导。通过最后认证考试的选手将被视作全行工程质效领域的专家。</p><p></p><p>“工程训练营”的专家成员肩负着两个使命：一是配合全行总体的“工程治理”，配合工程治理组织在年初时进行工程架构的梳理，制定组织级的目标计划，确认各自团队需要进行的工程治理和架构改造项目，作为“代言人”推进相应治理和改造；二是作为工程方法和实践的“指导者”，规范团队行为，传递最佳实践。</p><p></p><p>InfoQ：除了处理当前的历史债务，平安银行的研发效能团队是否采取了一些预防措施，以避免未来积累更多的技术债务？</p><p></p><p>金艳：“工程训练营”面向的是“存量”技术债，另一项措施则针对“增量”。在这方面，我们会实施技术栈的统一，即进入我们银行的系统和框架的东西，即使是由外部第三方厂商引入的系统，我们都要求其达到我们的标准，进行规范化要求，确保新增系统基本上没有治理方面的问题。</p><p></p><p>InfoQ：除了研发债务，平安银行的研发效能团队在整个发展过程中可能面临了其他一系列挑战。您能否进一步谈谈这些挑战？</p><p></p><p>金艳：近年来，科技不断进步，对于团队来说，意味着我们需要更快地进行迭代，迭代速度要超过业务侧的开发和测试同学，需要不断学习，然后将学到的能力运用到实践中。因此，我们的团队面临的挑战除了工程效能的要求不断提高，我们对人才效能的要求也变得更高。目前团队成员都具备较强的抗压力和学习能力。</p><p>另外我们需要保持对行业的关注，可能需要参与行业大会、定期交流、与同行交流。近年来，我们加强了这方面的沟通频率，希望通过行业间的交流，反向审视我们团队在哪些方面做得还不够到位。因此，像 FCon 这类大会的分享不仅让我们充当了老师，也是学员，我们也在关注其他行业中是否有更好的实践。</p><p></p><h2>未来发展与持续优化</h2><p></p><p></p><p>InfoQ：面向未来，平安银行在研发效能方面有哪些短期或中长期的发展规划 / 持续优化的计划？能否分享一些关键的方向或目标？</p><p></p><p>金艳：一方面我们会将 AI 技术融入到研发工具和平台中，比如运用相对成熟的大模型，实现对整个研发体系的智能化升级，将 AI 纳入工具和平台，使它们更加智能。</p><p></p><p>另外我们将持续测试作为重要的发展方向。这与国家和行业对高质量发展的要求相契合，尤其在当前经济下行和降本增效的大环境下，云原生是一个有力的落脚点，既能支持持续测试，又能实现高质量发展。通过容器技术等手段，实现敏捷创新、组件高效复用，并提高系统的可用性、安全性和稳定性。</p><p></p><p>平安银行明年的重点是实现全面云原生，目标是让大部分系统实现云原生。这意味着不仅是技术的更新，还包括对工程工具和人才培养体系的全面升级。</p><p></p><p></p><h5>报告推荐</h5><p></p><p>《2023 银行数字化转型报告》正式发布，本报告重点探索作为金融服务核心的银行机构，在面临用户消费模式变化、银行业务结构调整、新兴金融机构竞争加剧等因素的影响下，如何推进五大重点场景的数字化转型，并总结输出大中小型银行的两条数字化转型路径，期望为不同类型和规模的银行业企业提供研究内容支撑。关注「InfoQ 数字化经纬」公众号，回复「银行报告」免费获取。</p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/2c/64/2c468684a87c935f1c8ab83cf111c164.jpg\" /></p><p></p>",
    "publish_time": "2023-11-30 12:13:36",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "分布式数据库 GaiaDB-X 的金融应用实践",
    "url": "https://www.infoq.cn/article/s6IOIUsSjUGbDLAqZkrl",
    "summary": "<p>第三期课程《分布式数据库 GaiaDB-X 的金融应用实践》中，百度智能云数据库架构师罗后启将介绍银行新一代核心系统建设背景及架构以及百度GaiaDB-X数据库面向金融场景开发的分布式特性及应用实践。</p>",
    "publish_time": "2023-11-30 13:54:27",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "又一场AI“宫斗”要上演？盈利困难、投资人开撕CEO，Stable Diffusion背后公司被曝正寻求收购",
    "url": "https://www.infoq.cn/article/zDvZXRKvc7jGFr0IXw2G",
    "summary": "<p></p><blockquote>这场交易并非迫在眉睫，Stability AI 最终可能决定不出售。&nbsp;</blockquote><p></p><p></p><p></p><h2>消息称因与投资方关系紧张，Stability AI正寻求收购</h2><p></p><p>&nbsp;</p><p>当地时间11月29日，据彭博社报道，Stable Diffusion图像生成器背后的英国AI初创公司Stability AI正考虑接受整体收购，理由是投资者对其财务状况不满、并开始向管理层不断施加压力。</p><p>&nbsp;</p><p>据多位知情人士透露，这家总部位于伦敦的公司最近几周已经表示将考虑接受收购，并与多家公司进行了早期沟通。由于讨论内容并未对外公开，因此消息来源要求保持匿名。他们提到，交易不会很快达成，Stability AI也有可能中途放弃寻求收购。</p><p>&nbsp;</p><p>由此看来，曾经备受风投青睐的Stability AI与各大投资者之间确实闹得越来越僵。有知情人士指出，Stability AI的投资者Coatue Management在上个月给管理团队的一封信中，明确要求公司CEO Emad Mostaque辞职。其中一位知情人士提到，Coatue方面一年之前曾参与融资领投，当时Stability AI本希望能将自身市场估值拉升至5亿美元，但实际筹款金额超出预期，因此最终估值来到了10亿美元。</p><p>&nbsp;</p><p>Stability AI公司发言人在邮件采访中表示，“虽然有多方对收购Stability AI表达了兴趣，但我们并不打算选择出售，而是专注于发布更多领先模型”，例如近期推出的视频生成产品。</p><p>&nbsp;</p><p>知情人士称Coatue已经明确表态，称Mostaque的领导已经逼近多位高管人士离职，并导致这家初创公司的财务状况愈发脆弱。</p><p>&nbsp;</p><p>另外，部分 Stability AI 的雇员也对 Mostaque 的领导风格“失去信心”。Mostaque 此前主要的职业生涯是对冲基金分析师，虽然他有计算机科学的学位，但并没有科研经验，更不用说AI研究了。但 Mostaque 倾向于给 AI 研究人员非常大的自由度，例如在没有监管的情况下不限时地随意使用昂贵的云服务。一位前雇员表示，更离谱的是，Mostaque 有时也会突然介入接管一个项目。</p><p>&nbsp;</p><p>但Stability AI公司发言人还是对这位CEO进行了维护，该发言人回应称，“我们CEO的领导和管理在Stability AI 的成功中起到了重要作用。近期的超预期融资，也再次凸显出投资者对于这片快速增长的新兴市场的坚定信心。”</p><p>&nbsp;</p><p>Coatue方面的代表拒绝对此发表置评。</p><p>&nbsp;</p><p>其中一位知情人士表示，作为潜在买家之一，致力于帮助客户构建自有AI产品的加拿大初创公司Cohere与Stability AI进行了沟通。但Cohere方面不愿公开讨论此事。</p><p>&nbsp;</p><p>Stability还接触了AI初创公司Jasper，后者专门提供软件以帮助客户高效输出营销素材。</p><p>Cohere和Jasper双方的代表均拒绝发表置评。</p><p>&nbsp;</p><p>Stability AI于2022年筹得1.01亿美元，确立了自身在初创市场上的独角兽地位。投资者之所以被其吸引，原因就是Stability AI的软件能够根据简单的提示词生成引人注目的图像。同年10月，该公司正从英特尔手中获得近5000万美元的可换股票据投资。</p><p>&nbsp;</p><p>Stable Diffusion这类工具在市场上一直饱受争议。主要问题集中在有人利用它们生成真假难辨的图像，例如身着羽绒服的弗朗西斯教皇、由著名演员Amma Watson扮演的美人鱼，以及被FBI特工追捕的前美国总统特朗普等。人们担心这类内容传播过广将彻底毁掉民众的公共信任。</p><p>&nbsp;</p><p></p><h2>月支出超800万美元，投资人要求披露高管和CEO具体薪资</h2><p></p><p>&nbsp;</p><p>但值得一提的是，这样的负面声音似乎并没有对Stability AI公司造成太大影响，反而让他们投入更多资金来发展业务。两位知情人士透露，在与英特尔达成协议时，Stability AI月度支出与工资开销已经高达约800万美元，而运营收入只能覆盖其中的很小一部分。</p><p>&nbsp;</p><p>在 11 月 9 日向 PYMNTS（美国知名的新闻评论网站）提供的一份声明中，当有报道 Stability AI 筹集了约 5000 万美元融资时，该公司发言人表示：“Stability AI 处于强大、健康的地位，可以继续在生成式人工智能领域保持领先。去年我们的收入增加了十倍，随着我们继续推出新产品，我们的目标是在今年年底前进一步增加收入。”&nbsp;</p><p>&nbsp;</p><p>根据Mostaque本周一发布的推文，该公司今年8月的收入为120万美元，而11月的软件和服务收益有望突破300万美元。但现在这条推文已被删除。</p><p>&nbsp;</p><p>Stability AI发言人拒绝对该推文发表评论。</p><p>&nbsp;</p><p>知情人士还提到，Coatue给Stability AI公司的这封“逼宫”信发送于10月底，即后者获得英特尔注资之后。Coatue方面还要求Stability AI披露Mostaque及其他高管成员的具体薪酬数字。</p><p>&nbsp;</p><p>过去一年来，Stability AI迅速扩大招聘规模，从科技巨头处吸纳研究人员，希望能加快其开源软件的发布速度。但据彭博新闻今年8月的报道，在前对冲基金员工及加密货币创业者Mostaque的领导下，Stability内部风气混乱、迫使多位高管成员选择离职。</p><p>&nbsp;</p><p>其实上，该公司与投资者之间的关系也一直不稳定。有人认为Coatue普通合伙人Sri Viswanath之所以辞去董事职务，就是因为其持有英特尔竞争对手AMD的大量股份，而英特尔此次注资Stability致使Viswanath地位尴尬。据彭博社报道，Lightspeed Venture Partners的一位合伙人此前也辞去了Stability AI公司的董事会观察员职务。</p><p>&nbsp;</p><p>今年9月，英特尔曾表示Stability公司是其新型AI超级计算机的“主要客户”。两位知情人士也表示，芯片巨头之所以在之后两个月内慷慨注资，就是考虑到Stability AI将在计算任务中大量使用英特尔处理器。</p><p>&nbsp;</p><p>Sability发言人则澄清道，“虽然我们无法透露合作伙伴关系的具体细节，但Stability AI公司收到的投资截至目前并不受任何特定硬件或云服务的影响。”</p><p>&nbsp;</p><p>英特尔发言人拒绝对此发表置评。</p><p>&nbsp;</p><p>参考链接：</p><p><a href=\"https://www.bnnbloomberg.ca/stability-ai-has-explored-sale-as-investor-urges-ceo-to-resign-1.2004917\">https://www.bnnbloomberg.ca/stability-ai-has-explored-sale-as-investor-urges-ceo-to-resign-1.2004917</a>\"</p><p></p><p><a href=\"https://www.pymnts.com/acquisitions/2023/report-stability-ai-positioning-itself-for-acquisition/\">https://www.pymnts.com/acquisitions/2023/report-stability-ai-positioning-itself-for-acquisition/</a>\"</p><p></p><h2>&nbsp;</h2><p></p>",
    "publish_time": "2023-11-30 14:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]