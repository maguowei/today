[
  {
    "title": "Visual Studio 17.9第2个预览版发布，改进.NET MAUI、C++、远程Linux单元测试、团队工具包等",
    "url": "https://www.infoq.cn/article/kXKT2GwtAGfLT0lejshe",
    "summary": "<p>微软发布<a href=\"https://devblogs.microsoft.com/visualstudio/visual-studio-17-9-preview-2-has-arrived/\">Visual Studio 2022 17.9第2个预览版</a>\"，这是2023年最后一个版本，也是对2023年开发工作的一个总结。在<a href=\"https://www.infoq.com/news/2023/11/vs2022-v17-9-preview-1/\">11月发布的第1个预览版</a>\"的基础上，本次更新带来了C++、.NET MAUI、远程Linux单元测试、团队工具等方面的改进和新特性。</p><p>&nbsp;</p><p>对于C++，#include诊断有了显著的改进。这个增强使得这项功能变得更为健壮，让开发人员可以可视化代码中每条#include指令的出现次数。</p><p>&nbsp;</p><p>如前所述，开发人员可以通过单击指令顶部的引用计数来查看特定的引用，并可以通过双击导航到任何引用。此外，该特性经过扩展之后还可以显示#include指令在Build Insights之后的编译时间，从而提供有价值的代码库洞察。</p><p>&nbsp;</p><p>另外一项重要的增强是<a href=\"https://devblogs.microsoft.com/visualstudio/visual-studio-17-9-preview-2-has-arrived/#auto-surround-with-quotes-or-brackets\">自动添加引号或括号</a>\"，提高生产力。现在，开发人员可以非常轻松地给选中的内容加上括号分隔符（包括双引号、单引号和圆括号）。该功能可以在Visual Studio中通过工具&gt;选项下的文本编辑器设置打开或关闭。</p><p>&nbsp;</p><p><a href=\"https://devblogs.microsoft.com/visualstudio/visual-studio-17-9-preview-2-has-arrived/#live-property-explorer-support-for-net-maui\">Live Property Explorer(LPE)</a>\"的引入增强了. NET MAUI的开发体验。该工具旨在简化开发，让开发人员可以在调试时检查XAML属性。Live Property Explorer可以与XAML Live Preview和Live Visual Tree结合使用，为调试、性能优化和属性检查提供了一个很好的解决方案。</p><p>&nbsp;</p><p>要使用Live Property Explorer，开发人员需要开始调试他们的.NET MAUI应用，并导航到Debug &gt; Windows &gt; Live Property Explorer。启用之后，Live Property Explorer将为开发人员提供一种在运行时实时浏览和编辑属性的方法。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/5d/5d17624d4cf0ef112ab2530fac7a181b.png\" /></p><p></p><p>Live Property Explorer的用法，<a href=\"https://learn.microsoft.com/en-us/visualstudio/releases/2022/release-notes-preview#live-property-explorer-support-with-net-maui\">图片来源</a>\"：Visual Studio发布说明</p><p>&nbsp;</p><p>据报道，根据用户反馈，Visual Studio 2022现在支持<a href=\"https://developercommunity.visualstudio.com/t/ctest-support-for-remote-linux-targets/431771\">远程Linux单元测试</a>\"。这个增强功能支持在Test Explorer中的WSL或远程系统上执行面向Linux的C++项目的单元测试。据说，一些特定场景中存在的限制将在17.9的第3个预览版中得到修复。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/a8/a8c4622f7f9e74e373f6e37115d8506e.png\" /></p><p></p><p>远程Linux单元测试的用法，<a href=\"https://devblogs.microsoft.com/visualstudio/visual-studio-17-9-preview-2-has-arrived/\">图片来源</a>\"：Visual Studio 17.9 Preview 2发布公告</p><p>&nbsp;</p><p>该版本还有一项重要的更新是<a href=\"https://learn.microsoft.com/en-us/visualstudio/releases/2022/release-notes-preview#sql--ssdt\">SQL/SSDT改进</a>\"，例如删除ADDefaultAuthentication中Username的红色警告图标。其次，它还引入了3种新的身份验证类型，以便与Subsystem标准保持一致：ActiveDirectoryManagedIdentity、ActiveDirectoryServicePrincipal和ActiveDirectoryDefault。此外，它还实现了一些标准的Bug修复和性能改进。</p><p>&nbsp;</p><p>现在，在Visual Studio IDE右上角的身份选择器旁边，Visual Studio企业版和专业版用户会看到一个新图标<a href=\"https://learn.microsoft.com/en-us/visualstudio/releases/2022/release-notes-preview#benefit-awareness-diamond-for-visual-studio-enterprise-and-professional-subscribers\">Benefit Awareness Diamond</a>\"。据报道，该功能的目的是让付费用户未来可以更方便地获取福利信息以及更新。</p><p>&nbsp;</p><p>在生产力方面，Git储存库窗口、分支和tag标签现在可以动态调整大小，这改进了Git图的可视度，为开发人员提供了更好的体验。</p><p>&nbsp;</p><p>最后，<a href=\"https://learn.microsoft.com/en-us/visualstudio/releases/2022/release-notes-preview#microsoft-teams-toolkit\">Microsoft Teams Toolkit</a>\"的改进包括支持在工具包模板中选择dotnet框架版本。此外，工具包模板还为Outlook和Office.com提供了预览和调试功能，扩展了工具包的功能和兼容性。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/47/474699c08923cdd6e4de714102d2c7ac.png\" /></p><p></p><p>使用dotnet框架选项新建一个Teams应用，<a href=\"https://learn.microsoft.com/en-us/visualstudio/releases/2022/release-notes-preview#live-property-explorer-support-with-net-maui\">图片来源</a>\"：Visual Studio发布说明</p><p>&nbsp;</p><p>微软和开发团队鼓励用户提供<a href=\"https://learn.microsoft.com/en-us/visualstudio/ide/how-to-report-a-problem-with-visual-studio?view=vs-2022\">反馈</a>\"并分享关于新特性和改进的<a href=\"https://developercommunity.microsoft.com/VisualStudio/suggest\">建议</a>\"，并保证会不断增强Visual Studio的体验。</p><p>&nbsp;</p><p>最后，如果想进一步了解关于Visual Studio 2022 IDE这个版本和其他版本的更新、更改和新特性，请查看<a href=\"https://learn.microsoft.com/en-us/visualstudio/releases/2022/release-notes-preview#1790-pre20--visual-studio-2022-version-179-preview-2\">发布说明</a>\"。</p><p>&nbsp;</p><p>&nbsp;</p><p>原文链接：</p><p><a href=\"https://www.infoq.com/news/2023/12/vs2022-v17-9-preview-2/\">https://www.infoq.com/news/2023/12/vs2022-v17-9-preview-2/</a>\"</p>",
    "publish_time": "2024-01-12 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "简单而强大：这些场景无JavaScript也能轻松应对",
    "url": "https://www.infoq.cn/article/bqpC7hkyz9VREYX6OTpi",
    "summary": "<p>请不要因为文章的标题而对我心怀敌意。对于JavaScript，我只有喜爱没有讨厌，与此同时，我每天还会编写大量的JavaScript代码。不过，除了JavaScript之外，CSS和HTML也都是我非常喜爱的技术。我之所以偏爱这三种技术是有些原因的。</p><p></p><p></p><h1>最小能力原则</h1><p></p><p>&nbsp;</p><p>Web开发的第一核心原则就是“最小能力原则”。换而言之，也就是当我们实现目标时，应该选择相对较轻量的编程技术去实现。</p><p>&nbsp;</p><p>依据此原则，也就意味着在Web开发中，对于相同功能的实现，开发者应该优先考虑HTML，其次是CSS，最后才是JS。由于JS使开发者可以控制浏览器的行为，所以JS在三种技术中使用的最广泛。不过，JS也会因为诸如外部资源加载失败、解析异常、执行错误等原因，从而导致其对浏览器的控制失效。此外，JS对诸如依赖键盘、依赖额外辅助设备等对可访问性有要求的用户的支持也不够友好。</p><p>&nbsp;</p><p>与命令式的JS不同，HTML和CSS是声明式的。因此与使用JS的情况不同，在使用HTML和CSS时，开发者是告诉浏览器做什么，而不是怎么做。这也就意味着浏览器可以自己选择怎么做，从而以最高效的方式实现。</p><p>&nbsp;</p><p>由于HTML和CSS的各项功能都是浏览器原生支持的，因此这些功能通常会有更好的性能、更原生、具备更好的用户体验，对可访问性的支持也更好。虽然并非所有的场景都优于JS（特别是在可访问性方面），但大多数时候，利用浏览器原生功能来实现复杂逻辑，会给用户带来更好的使用体验。</p><p>&nbsp;</p><p></p><h1>但是，我离不开JS</h1><p></p><p>&nbsp;</p><p>也许你会想：“我用JS实现的所有功能，都需要JS才能实现。”这种想法可能是对的，但值得注意的是，无论是浏览器制造商还是规范编写者，他们已经将许多功能转移到了CSS和HTML上，这些功能在几年前还必须使用JS才能实现。这就是本文要讨论的内容。</p><p>&nbsp;</p><p>Web开发中的一个棘手之处在于，一旦你学会了如何构建某个东西，就再也没有必要重新再学一次。因为这是Web开发行业达成的常识约定：Web是向后兼容的（虽然有极少数例外情况，但第一个网页在当前所有现代浏览器上仍然可以正常运行）。</p><p>&nbsp;</p><p>这也就意味着，你所学到的实现方案将会成为你工具箱中的一部分，你可以一直重复实现它，并且每次都能正常运行。所以我接下来会给出一些比较酷的示例，希望文章中的这些示例让你能明白，那些当初你认为必须通过JavaScript才能解决的问题，其实并不一定现在仍然需要（这也是我为什么列举这些示例的原因）。所以，如果你能时不时尝试这些设想，或许你能开发出更好的网站。</p><p>&nbsp;</p><p></p><h1>自定义开关</h1><p></p><p>&nbsp;</p><p>自定义开关，是所有Web开发人员都不可规避的一个功能，那么我们就从如何实现一个自定义开关来开始本文。设计师的需求是实现一个漂亮的开关功能而不是一个复选框。与使用div、onclick事件处理程序和内部状态的JS解决方案不同，这里我们将通过普通的checkbox和:checked伪类来实现。下面是我们将要用到的HTML代码：</p><p>&nbsp;</p><p><code lang=\"null\"><label>\n  <input type=\"checkbox\" />\n  My awesome feature\n</label></code></p><p>&nbsp;</p><p>在上面的代码中有一个label元素，里面包含一个复选框。这样做的好处是浏览器会默认为我们做一些事情。由于输入框位于label标签的内部，因此浏览器会将它们关联起来，所以现在我们在label标签的任何位置进行点击，都能操作复选框的切换，而无需任何onclick事件的处理程序。浏览器免费为我们实现了这个功能。如果单单就功能而言，我们就已经完成了。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/15/150f2d89a51f33e5a98cf563f6346ace.png\" /></p><p></p><p>&nbsp;</p><p>当然，上面这种外观，设计师可能不喜欢，所以我们需要创建一个外观开看起来还不错的自定义开关。那么接下来，让我们给自定义开关添加一些CSS：</p><p>&nbsp;</p><p><code lang=\"null\">input {\n  appearance: none;\n  position: relative;\n  display: inline-block;\n  background: lightgrey;\n  height: 1.65rem;\n  width: 2.75rem;\n  vertical-align: middle;\n  border-radius: 2rem;\n  box-shadow: 0px 1px 3px #0003 inset;\n  transition: 0.25s linear background;\n}\ninput::before {\n  content: \"\";\n  display: block;\n  width: 1.25rem;\n  height: 1.25rem;\n  background: #fff;\n  border-radius: 1.2rem;\n  position: absolute;\n  top: 0.2rem;\n  left: 0.2rem;\n  box-shadow: 0px 1px 3px #0003;\n  transition: 0.25s linear transform;\n  transform: translateX(0rem);\n}</code></p><p>&nbsp;</p><p>上面样式的具体细节并不重要，但我希望你注意第一条样式规则：appearance: none。</p><p>&nbsp;</p><p>表单元素和图像元素都属于一种被称为“替换内容”的元素。这意味着，在HTML中这些元素的内容是由浏览器提供的，而非标签本身。在浏览器渲染HTML过程中，当发现替换内容时，它会为其留下一个盒子，然后会用实际内容来替换该盒子。这就是为什么诸如图像、表单等 “替换内容”元素不能有伪元素的原因：当浏览器把整个元素替换掉时，这些伪元素也会同时被替换掉。</p><p>&nbsp;</p><p>给元素设置appearance，是禁止浏览器这种行为的方式之一。它告诉浏览器：“谢谢，但我想自定义我的表单控件样式”。这样我们就可以使用::before伪元素了。现在输入框本身就是我们开关的背景，而::before伪元素就是其中负责切换功能的小圆</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/11/119de8a028c45f7944b978d8aa262db0.png\" /></p><p></p><p>&nbsp;</p><p>点击仍然会触发复选框选中和未选中的切换，但由于我们替换了元素，所以选中和未选中的状态展示需要我们自己处理。因此我们引入:checked伪类来实现此功能：</p><p>&nbsp;</p><p><code lang=\"null\">:checked {\n  background: green;\n}\n:checked::before {\n  transform: translateX(1rem);\n}</code></p><p>&nbsp;</p><p>当你点击复选框时，:checked伪类开始匹配，从而实现样式的更新。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/2c/2cc77b9ebf8a6432b7db492fcf41948d.png\" /></p><p></p><p>&nbsp;</p><p>到目前为止，通过原生的HTML元素和一些CSS我们创建了一个外观漂亮的自定义开关，但事情还没完。因为，对于使用鼠标的用户来说，可以很明显的知道他们正在与哪个表单控件进行交互（因为他们可以指向并点击），而对于使用键盘的用户来说，情况就不那么容易了。</p><p>&nbsp;</p><p>译注：下图是使用键盘操作的时候出来的样式：</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/72/724b0201aee0d79427512519a6af31db.png\" /></p><p></p><p>&nbsp;</p><p>我相信你对下面这段CSS代码会很熟悉。这段CSS代码是为了将那个丑陋的、虚线的、方形的外边框去掉。</p><p>&nbsp;</p><p><code lang=\"null\">input:focus {\n  outline: none;\n}</code></p><p>&nbsp;</p><p>如果你正在阅读这篇文章，那么后面会知道这不是一个好的实现方式。但是我们如何才能让它看起来更好呢？在这方面，浏览器也进行了更新，为我们提供了更好的体验。现在元素边框的圆角设置同样会在外边框上生效，并且我们还可以将其偏移或嵌入到元素内部：</p><p>&nbsp;</p><p><code lang=\"null\">input:focus-visible {\n  outline: 2px solid dodgerblue;\n  outline-offset: 2px;\n}</code></p><p>&nbsp;</p><p>现在，当用户使用键盘与元素进行交互（你可以尝试在点击后按下空格键，或者使用Tab键切换到它），:focus-visible会生效（使用鼠标时不会），并且它们会在元素周围显示一个好看的、蓝色的轮廓线。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/cd/cd5966fd22e50b0009121cdfe86d0159.png\" /></p><p></p><p>&nbsp;</p><p>最后，我希望你将上面那个outline: none替换为如下内容：</p><p>&nbsp;</p><p><code lang=\"null\">input:focus {\n  outline-color: transparent;\n}</code></p><p>&nbsp;</p><p>两个CSS代码都将产生相同的效果：这里是通过将外边框颜色设置为透明，而不是通过隐藏外边框来实现的。这样做的好处是，对于打开了高对比度模式（也称为强制颜色）的用户而言，此时外边框会再次显示出来，因为在高对比度模式下，透明颜色会被用户所选择的颜色替代，从而帮助他们看清楚正在与之交互的内容，即使他们使用鼠标也一样有效果。</p><p>&nbsp;</p><p>本文篇幅不足以详细介绍强制颜色的功能，但如果你想了解更多，请查看我的文章<a href=\"https://polypane.app/blog/forced-colors-explained-a-practical-guide/\">《强制颜色解析》</a>\"。</p><p>&nbsp;</p><p></p><h1>Datalist，一个原生的自动输入建议元素</h1><p></p><p></p><p>在你的下一个项目中，不要安装任何实现自动输入建议的框架，尝试使用一下datalist元素。该元素是浏览器内置的一种实现用户在输入框中输入时，自动以数据列表显示输入建议的方式。</p><p>&nbsp;</p><p><code lang=\"null\"><input list=\"frameworks\" />\n<datalist id=\"frameworks\">\n  <option>Bootstrap</option>\n  <option>Tailwind CSS</option>\n  <option>Foundation</option>\n  <option>Bulma</option>\n  <option>Skeleton</option>\n</datalist></code></p><p>&nbsp;</p><p>你可以通过在HTML中添加一个带有ID属性和一组选项值的datalist元素来使用它。不用担心，该元素默认是不可见的。然后，你需要在输入框上通过设置list属性来将两者关联起来。使用效果如下：</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/ef/ef67fc7120257221f7ebb742617f7dba.png\" /></p><p></p><p>&nbsp;</p><p>当用户在输入框中输入时，浏览器会将datalist显示为下拉列表，并根据用户输入自动过滤选项。由于它本质上依然是一个普通的输入框，所以用户仍然可以输入自定义值。最后，用户可以通过选择输入框来查看数据列表，并通过箭头建进行数据导航。当然，用户也可以通过点击浏览器默认添加的下拉图标来查看所有的数据选项。</p><p>&nbsp;</p><p></p><h1>功能丰富的颜色选择器</h1><p></p><p></p><p>市面上有很多外观漂亮的颜色选择器，这些颜色选择器除了拥有漂亮的画布界面之外，还有通过上百行JS代码实现的滑块功能。但是你知道吗？其实你可以使用浏览器原生的颜色选择器。</p><p>&nbsp;</p><p><code lang=\"null\"><label> <input type=\"color\" /> Color </label></code></p><p>&nbsp;</p><p>这一行HTML代码就可以给你一个带有漂亮界面的颜色选择器，这就已经节省了大量的JavaScript代码。除此之外，因为我们将实现让给了浏览器来处理，所以实际上我们还可以免费获得更多功能。在Chromium浏览器中，这个原生的颜色选择器还可以让你从屏幕上的任何位置选择颜色，这真的是太棒了！</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/7f/7f4e1540ee2bcdea26c7d9c8ca555b68.png\" /></p><p></p><p>&nbsp;</p><p>不过这里值得注意的一点是，虽然浏览器显示了一个漂亮的颜色选择器，但不一定你的所有用户都可以使用它。因此提供其他选择颜色的方式（比如常规文本输入）仍然是一个好的选择。</p><p>&nbsp;</p><p></p><h1>手风琴（Accordions）</h1><p></p><p></p><p>Accordions是一种很好的帮助我们更好地组织页面上的大量内容，使其结构更清晰，避免展示杂乱无章的方式。而浏览器也已经为我们提供了免费的实现方式，开发者通过使用details和summary元素来实现：</p><p>&nbsp;</p><p><code lang=\"null\"></code></p><details><code lang=\"null\">\n  My accordion\n  <p>My accordion content</p>\n</code></details><p></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/41/41bf3a16382f4e49f32135172074037b.png\" /></p><p></p><p>&nbsp;</p><p>&nbsp;</p><p>默认情况下，details元素中除了summary元素之外，其余元素内容都是隐藏的。当用户点击summary元素时，浏览器才会显示其余的内容。</p><p>&nbsp;</p><p>通常情况下，在一组accordions中，会有一个默认处于展开状态，而其他的则默认处于收起状态。这一点，你可以通过使用open属性来实现：</p><p>&nbsp;</p><p><code lang=\"null\"></code></p><details open=\"\"><code lang=\"null\">\n  My accordion\n  <p>My accordion content</p>\n</code></details><p></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/63/63000a1ef369372c855456d414075829.png\" /></p><p></p><p>&nbsp;</p><p>如果你是React使用者，可能会认为：“太好了，现在它有了open属性，就再也不会收起了。”但还好并非如此。open属性只是初始状态，当用户与accordions进行交互时，它会根据用户的操作自动进行更新。</p><p>&nbsp;</p><p>在样式上，details元素也为我们提供了解决方案。那个小三角形（一旦设计师看到它，就会立刻想要替换掉）是一个伪元素::marker，你可以对其进行样式设置：</p><p>&nbsp;</p><p><code lang=\"null\">summary::marker {\n  font-size: 1.5em;\n  content: \"📬\";\n}\n[open] summary::marker {\n  font-size: 1.5em;\n  content: \"📭\";\n}</code></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/f9/f913a0d82635444e561a27ceeda7c712.png\" /></p><p></p><p>&nbsp;</p><p>但值得注意的是，更改内容可能会影响辅助技术对你的accordions的解析。你可以阅读Manuels的文章<a href=\"https://www.matuzo.at/blog/2023/details-summary\">《details/summary的一致性问题》</a>\"来了解更多。此外，对于Safari浏览器，你需要使用::-webkit-details-marker伪元素来处理浏览器差异性问题。</p><p>&nbsp;</p><p>伪元素::marker的样式设置选项相对有限（许多 CSS 属性对其不起作用，例如无法将其完全定位到不同的位置）。但你可以替换其内容，例如使用表情符号，或设置背景颜色或图像，并更改其字体大小。</p><p>&nbsp;</p><p>通过open属性，你可以轻松地分别为展开状态和收起状态设置不同的样式。</p><p>&nbsp;</p><p>最后，我们需要对summary元素进行一些处理。虽然它是可点击的，但其与a链接元素和按钮元素都不同；当鼠标悬停的时候，它既没有指针光标，也没有类似按钮那样的hove态。因此，我认为我们应该为它添加鼠标悬停和焦点状态，以帮助访问者可以意识到它是可点击的：</p><p>&nbsp;</p><p><code lang=\"null\">summary:hover,\nsummary:focus {\n  cursor: pointer;\n  background: deeppink;\n}</code></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/e6/e6a619e3c63edc6c54bc3b1d9c8e1be3.png\" /></p><p></p><p>&nbsp;</p><p>在这里，我不想进行“只有链接才应该具有指针光标”的讨论，我的主要观点是你需要做一些处理来提醒用户。</p><p>&nbsp;</p><p></p><h1>对话框</h1><p></p><p></p><p>有时候，你需要向用户展示一些信息，或者询问他们问题，或者让他们确认某些事情。在JavaScript中，这就是alert()、prompt()和confirm()的作用。但它们有一个很大的问题：它们会锁定主线程。这意味着你的页面无法做其他任何事情。而且它们是浏览器原生的，无法根据你的设计进行样式定制化。</p><p>&nbsp;</p><p>如果你自己构建一个对话框，也会遇到一些麻烦：为了支持可访问性，你需要确保对话框内部能获得焦点，此外还需要声明它是模态对话框，以确保用户无法意外关闭它，最后还要与可能设置了z-index为2147483647的聊天小部件进行斗争（如果你知道这些小部件的存在的话）。</p><p>&nbsp;</p><p>因此，现代浏览器为我们提供了原生的对话框元素：</p><p>&nbsp;</p><p><code lang=\"null\"></code></p><dialog><code lang=\"null\">\n  <form method=\"dialog\">\n    <h3>This is a pretty dialog</h3>\n    <button type=\"submit\">Close</button>\n  </form>\n</code></dialog><p></p><p>&nbsp;</p><p>默认情况下，对话框元素不会显示出来。现在，我会稍微作弊一下，通过JavaScript来控制其显示和隐藏：</p><p>&nbsp;</p><p><code lang=\"null\">document.querySelector(\"button\").addEventListener(\"click\", () =&gt; {\n  document.querySelector(\"dialog\").showModal();\n});</code></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/f7/f7febad86d2160db7349a98921bf88f8.png\" /></p><p></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/be/be0e77e0bcba8f4c72b00878e8598b51.png\" /></p><p></p><p>&nbsp;</p><p>虽然行业正在推动不依赖JavaScript来控制对话框的显示，有一些工作正在进行中，但它们尚未完全规范化，更不用说实现了。所以目前，我们仍然需要使用JavaScript来打开对话框。但仅此而已，其余的都是原生的HTML和CSS。</p><p>&nbsp;</p><p>对话框元素具有一个叫做showModal()的函数，通过它来打开对话框。对话框会打开在一个称为Top layer的东西上面，这是浏览器中的一个新概念。如果你想了解更多信息，请参阅MDN上关于<a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Top_layer\">Top layer</a>\"的解释。</p><p>&nbsp;</p><p>Top layer是一个与你的HTML分离的新层，你可以将元素“提升”到这个层级。这意味着，不管元素的z-index和堆叠上下文嵌套如何，位于Top layer的元素将始终在其他所有元素之上。</p><p>&nbsp;</p><p>你可能会注意到浏览器并没有给打开状态的对话框提供任何用户界面。对话框实际上只是一个div元素（不是按钮！），因此你需要自己为对话框提供用于关闭的用户界面。这就是上面代码中的表单元素的作用。你可能已经注意到，该表单的method属性值是\"dialog\"。此时，当该表单被提交时，浏览器会将其视为关闭对话框的信号。</p><p>&nbsp;</p><p>通过这种方式，你还可以创建确认对话框，提供两个按钮，每个按钮都有自己的值。</p><p>&nbsp;</p><p><code lang=\"null\"></code></p><dialog><code lang=\"null\">\n  <form method=\"dialog\">\n    <p>Tabs or spaces?</p>\n    <button type=\"submit\" value=\"wrong\">Tabs</button>\n    <button type=\"submit\" value=\"correct\">Spaces</button>\n  </form>\n</code></dialog><p></p><p>&nbsp;</p><p>可以通过监听对话框的close事件来处理用户的按钮点击，并通过“returnValue”属性来获取对应按钮的值。</p><p>&nbsp;</p><p><code lang=\"null\">dialog.addEventListener(\"close\", function () {\n  console.log(dialog.returnValue);\n});</code></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/90/90bb0683b80f6e872cb61e6d6a12aa61.png\" /></p><p></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/eb/ebfe14a2fed1ce7880686118baf7156a.png\" /></p><p></p><p>&nbsp;</p><p>如果对话框中还有其他表单数据，你也可以以<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/FormData\">formData</a>\"的方式读取它们。</p><p>&nbsp;</p><p>由于对话框本质上是一个div元素，你可以根据自己的喜好进行样式设置。浏览器会自动将其居中显示在屏幕上，但其他所有内容你都可以自定义。</p><p>&nbsp;</p><p>除此之外，对话框还提供了一个称为::backdrop的新伪元素。它位于对话框和页面其他部分之间，你可以对其进行样式设置，例如调暗页面的其他部分或以其他方式引导用户关注对话框。例如，你可以添加一个白色覆盖层并模糊页面。</p><p>&nbsp;</p><p><code lang=\"null\">dialog::backdrop {\n  background: #fff5;\n  backdrop-filter: blur(4px);\n}</code></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/6c/6c9b6579f097f8e3d90b486482b19c43.png\" /></p><p></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/5d/5d26004ba60d6d3df6d29d4761d628d9.png\" /></p><p></p><p>&nbsp;</p><p>与对话框元素本身一样，背景层也是由浏览器自动进行定位。因此你不需要担心页面滚动、固定元素和浏览器大小调整等情况。这一切都由浏览器自动处理。</p><p></p><h1>最后</h1><p></p><p></p><p>通过这篇文章，我希望你从中能发现了一些让你在下一个项目中可以少用一点JavaScript的东西。不过，每当你将一个经过大量实战验证的实现方式改成新的方式时，最好进行测试，特别是涉及到可访问性的时候，以确保你不会忽略任何用户。</p><p>&nbsp;</p><p>下面这些是我没有加到本文中的示例：</p><p>&nbsp;</p><p>使用scroll-behavior: smooth实现原生平滑滚动（但仅当prefers-reduced-motion: no preference匹配时才能生效），使用scroll-snap实现原生轮播图，使用position: sticky实现“视图内固定”的元素，……以及所有的和容器查询相关的示例。</p><p>&nbsp;</p><p>而且，如果我们展望未来的话，我们将会有更多很酷的东西：</p><p>&nbsp;</p><p>滚动驱动的动画使用grid-template-rows: masonry替代masonry.js实现砌砖布局使用新的selectlist元素实现完全可样式化的选择框（你可以对选择框的每个部分进行样式设置，而不破坏其所带来的所有原生功能）:has()选择器将消除一整类JavaScript选择器</p><p>&nbsp;</p><p>这篇文章是我在一个会议上做的演讲的改编版本，如何想更详细地了解关于本文内容的介绍或其他主题，你可以在观看视频：<a href=\"https://www.youtube.com/watch?v=ZTMUJu26b7Q\">不要再通过JavaScript实现它们：迁移JS功能到CSS和HTML</a>\"</p><p><a href=\"https://www.youtube.com/watch?v=ZTMUJu26b7Q\">https://www.youtube.com/watch?v=ZTMUJu26b7Q</a>\"</p><p>&nbsp;</p><p>所以，让我再次强调这篇文章的主要观点：</p><p>&nbsp;</p><p>仅仅因为你知道某个功能需要JavaScript，但并不意味着它仍然需要。如果你不时地测试这些尝试，你可以制作出更好的网站。</p><p>&nbsp;</p><p>&nbsp;</p><p>原文链接：</p><p><a href=\"https://www.htmhell.dev/adventcalendar/2023/2/\">https://www.htmhell.dev/adventcalendar/2023/2/</a>\"</p><p></p><p></p><h5>相关阅读：</h5><p></p><p><a href=\"https://xie.infoq.cn/article/819c7ae045ecc83936afed4d1\">全网最全&nbsp;ECMAScript&nbsp;攻略</a>\"</p><p><a href=\"https://www.infoq.cn/article/dDXbcLHT7teNYSPL3sm7\">“TypeScript 不值得！... 反向迁移到&nbsp;JavaScript&nbsp;引争议</a>\"</p><p><a href=\"https://xie.infoq.cn/article/a4f9a16ebc0f866e312a06176\">JavaScript&nbsp;作用域深度剖析：动态作用域</a>\"</p><p><a href=\"https://xie.infoq.cn/article/6ff79700fb3bfa972c1beebf3\">TypeScript 与&nbsp;JavaScript：你应该知道的区别</a>\"</p>",
    "publish_time": "2024-01-12 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "我职业生涯最严重事故：基础设施变更引发的自动化灾难！",
    "url": "https://www.infoq.cn/article/yfoKmyc45XAh0rjqBhrH",
    "summary": "<p>作为一名高级工程师，最近我和我的团队经历了我职业生涯中最严重的一次事故。在 2023 年旧金山 QCon 大会的演讲中，我分享了这次故事。一个基础设施变更引入的自动化意外删除了关键客户数据。我们花了三天时间才完全解决故障并恢复数据。</p><p></p><p>回顾过去，有许多方面我们本可以做得更好——从防止最初的事故到改进我们的响应流程。我也看到了高级工程师在事故过程的各个阶段都有机会推动积极的变化。</p><p></p><p></p><h2>事故简况</h2><p></p><p></p><p>在发生事故的公司，基础设施是通过 Terraform 来管理的。平台团队（我的团队）评审并通过了 Terraform 的变更 PR，但这些变更是由产品团队提交的。当时，我们没有集中的系统来应用 Terraform 变更，这导致了基础设施变更的透明度较低，不清楚谁在什么时候做出了什么样的变更。这次事故是由一小段 Terraform 代码变更引起的，它判断自动化在 24 小时后过期并将数据对象标记为软删除。如果我们没有及时发现并解决问题，那么在下一个 24 小时后将永久删除这些关键的客户数据对象。</p><p></p><p>过了一天，我们的监控系统才开始向我们发出问题警报。在最初的问题诊断阶段，我们止住了损失并防止数据丢失，但不慎引发了第二次事故。不幸的是，这次事故被我们的客户率先发现。到了这个时候，许多处理事故的人已经感到疲倦或心烦意乱，而且试图解决问题的多个团队之间没有很好的协调。</p><p></p><p>花了三天时间，我们的高级和技术员工程师才修复了问题，几乎涉及了平台的每个部分。这是一系列问题和失误的汇合，就是这些问题和失误的汇合让这个变更成为漏网之鱼。</p><p></p><p></p><h2>影响因素</h2><p></p><p></p><p>瑞士奶酪模型是一种在风险分析或根本原因分析中经常用到的隐喻，说明使用多层次系统方法来保证安全性的必要性。我第一次了解到这个模型是在肯尼迪航天中心参与航天飞机项目时，在那里，安全性是重中之重。如果将这个模型应用于软件事故，那么每一片奶酪都代表我们对事故的一层防御。</p><p></p><p>在最初的事故中，虽然我们设置了多层防御来保护自己免受事故的影响，但所有的漏洞都神奇般对齐了，让这个问题成为漏网之鱼：</p><p></p><p>测试——没有在预生产环境中测试变更，验证是否按照预期的行为运行。代码评审——代码评审批准了变更，但没有任何问题或讨论。部署验证——在部署到生产环境后，没有验证变更是否按照预期行运行。</p><p></p><p><img src=\"https://static001.geekbang.org/wechat/images/b3/b3d3dd8710113d9d1454f46741100781.png\" /></p><p></p><p></p><h2>让防御性增强形成文化</h2><p></p><p></p><p>我们已经拥有一个充满支持性和包容性的文化。然而，没有哪种环境是完美的，甚至是一成不变的。即使是一个很好的文化仍然可能存在盲点，我们也是如此。在一个企业里，不断关注和培育文化是非常重要的。没有完美的文化，文化也不存在终点。作为技术领导者，你可以成为关注和培育文化的倡导者。</p><p></p><p>回顾这次事故，加强支持性文化可能会为我们的防御提供更多的保护。作为技术领导者，我可以树立积极的行为榜样——提升工作的透明度，承认知识上的不足，不断收集信息，并质疑假设。我也可以指导队友这么做。改进安全网可以让工程师们更出色地完成工作。</p><p></p><p></p><h3>测试与文化</h3><p></p><p></p><p>变更提交者应该知道测试的重要性。在后来的讨论中，我了解到他们不知道如何为这个变更制定适当的测试计划。深入挖掘后，我们发现他并不熟悉做出变更的领域。我们可以问，如果他不熟悉并且不知道如何测试，为什么不寻求帮助呢？问题是，我们没有问他为什么没有寻求帮助，只能推测他可能不愿意向任何人寻求帮助。</p><p></p><p>如果不知道他们为什么会有这种感觉，深入探究造成这种不适的因素可能具有挑战性。这是组织文化中需要持续关注和培育的重要方面。高级工程师在这方面具有很大的影响力。花点时间问问自己：“应该如何让他们更愿意寻求帮助？”然后跟进这些变化，这是非常值得的。我们可以推测，如果变更提交者知道他们应该测试他们所做的变更，并且愿意寻求帮助，可能就能够避免这次事故。</p><p></p><p></p><h3>代码评审与文化</h3><p></p><p></p><p>只要求进行代码评审是不够的。评审人员可能不会提出问题或关注点，即使他们不完全理解这些变更。我承认我也是这样的评审人员，我也不会提出问题，也不去进行调查，即使我知道这个变更属于我们平台的一个关键部分。我很关心代码，但不愿意向我的新团队承认我不理解潜在的影响。如果我提出问题，如果我有勇气袒露出自己的脆弱，并公开表示我不知道某些事情，也许能够帮我们避免这次的事故。</p><p></p><p>要解决人们不敢提问或承认自己不了解某些事情的问题并不容易。这是一个人类心理问题。即使你可以创造最具支持性、包容性的环境，人们有时仍然可能感到不舒适或不安全。作为领导者，我们应该始终努力改善环境，尽可能地包容每个人。</p><p></p><p></p><h3>部署验证与文化</h3><p></p><p></p><p>对于部署验证防御层，我们可以问变更提交者为什么在部署后没有验证他们的变更。虽然在事后分析中我们没有专门讨论这个问题，但我可以猜测可能是因为对如何验证这个问题并没有明确的期望。这一点，再加上变更提交者不了解如何验证他们的变更，很可能导致根本没有进行部署验证。这是另一个可以改善我们的文化来加强防御的地方。</p><p></p><p>我们可以将开发和测试的最佳实践融入到文化中，并清晰地定义开发人员或变更提交者完成任务需要完成哪些职责。高级工程师可以在培育这样的文化方面发挥重要作用。他们可以做出榜样，监督和指导队友遵循这些最佳实践。</p><p></p><p></p><h2>有效的事故响应</h2><p></p><p></p><p>一旦事故发生，随之而来的压力和迅速恢复服务的紧迫性意味着响应者的行为是被动的，协调不足。我们缺少权威的事故指挥官来维持大局。糟糕的交接导致在碎片化的工作流中做着重复的工作。疲劳导致了覆盖范围的空白。有些人去休息了，但没有明确说明什么时候会重新上线。</p><p></p><p></p><h3>事故指挥官角色</h3><p></p><p></p><p>高级工程师具备担任事故指挥官的能力。保持冷静，建立结构，推动定期的进度更新，并适时升级事故，让参与修复问题的人可以集中精力。</p><p></p><p>我们并不总是有一个明确指定的人来担任事故指挥官。如果有，那个人也会深入到诊断、故障排除和修复问题中。他们过于专注于自己的工作，导致他们很难充分地看到大局，管理更新，并与利益相关者沟通，或在必要时寻求适当的帮助。</p><p></p><p>我们也没有人协调时间表、期望或可交付成果。人们只是自愿或不自愿地承担某些事情，随时进入和退出，没有明确的工作交接或计划时间表。</p><p></p><p>高级工程师是担任事故指挥官角色的理想人选，他们甚至不需要加入到受影响的团队，事实上，如果不这样做可能会更好。</p><p></p><p>在面对突发事故时，需要有人能够保持头脑清醒，看清大局。事故指挥官可以从那些忙于工作的人那里收集状态，并与利益相关者进行沟通，让实际做事的人专注于他们的工作。他们可以做协调工作和消除障碍。他们可以确保清晰的沟通和期望，指明谁在做什么、他们的时间表和计划是什么。如果需要交接，事故指挥官也可以确保交接顺利进行。</p><p></p><p>事故指挥官也可以为自己考虑一下，如果你是事故指挥官，需要休息，或者随着情况的变化不再适合这个角色，你可以要求其他人接替你。任何人都不应该因为认为自己会被困在指挥岗位上而犹豫要不要去承担这个角色。整个事故过程中的任何一个角色和责任都应该能够根据情况的变化而变化。当事情发生变化时，我们只需要明确地做出说明。</p><p></p><p>所有这些都是高级工程师应该具备的技能和能力。一个高效的事故指挥官确实可以决定事故响应的成败。</p><p></p><p></p><h2>通过事后总结推动持续改进</h2><p></p><p></p><p>在解决问题之后，一个无责备的事后分析可以发掘出有价值的见解。它确实对我们有所帮助。但是，如果没有后续的行动项，这些价值就会退化。这又是一个提供务实领导的机会——在不做评判的情况下促进强有力的对话，并在彻底分析根本原因的基础上制定解决方案。</p><p></p><p>我们使用了一个自动化事故管理工具，有一个自动生成事后总结文档的模板，还有了关于进行事后总结讨论会议的指南和格式。我们甚至在每次事后总结讨论会议开始时都会阅读回顾原则，提醒每个人我们的无责备风格：</p><p></p><p></p><blockquote>“我们的事故处理过程是无责备的，我们不寻找或归咎责任，甚至不会将原因归咎于个人。无论我们发现了什么，我们都理解并真诚地相信每个人在当时的情况、他们的技能和能力、可用资源以及所处的情况下都已尽力而为。”</blockquote><p></p><p></p><p><img src=\"https://static001.geekbang.org/wechat/images/b2/b2f56a24e26126474e038e3eb0fee722.png\" /></p><p></p><p>最近，我们注意到主持这些总结会议的人只是阅读模板和走过场。他们只是确保他们召开了总结会议并写了事后总结文档，但质量很低。在根本原因分析或回顾事故管理流程方面几乎没有付出什么努力。他们很少有行动项，而那些已确定的行动项经常被遗忘或没有坚持到底。</p><p></p><p>这就是培育文化可以带来改变的一个例子。增加流程并不会帮助我们进行更有效的事后总结——我们已经有了很多流程。人们在这些会议上只是走过场，并不是因为他们懒惰，而更可能是因为这些工程师对于管理和促进反思相对生疏，不知道如何推动这些对话。真正的差异在于环境和文化。</p><p></p><p>作为工程文化的引导者，高级工程师应该抓住事故提供的关键的成长机会。我们应该持续改进，在加强安全、信任和弹性的基础上取得进步。即使你不是会议的组织者，也可以问一些试探性的问题。你可以表现出好奇心而不加评判。你可以进行模式化和指导根本原因分析。你可以帮助一起确定务实的行动项解决方案。</p><p></p><p>即使你没有直接参与事故处理，作为高级工程师，你也应该参加事后总结讨论会并阅读文档，这样你就可以影响整个过程，帮助提高产出的质量。事故是总结教训和找到改进空间的关键机会，高级工程师的参与有助于实现这一目标。</p><p></p><p></p><h2>根本原因分析</h2><p></p><p></p><p>在事后总结讨论中，进行彻底的根本原因分析是至关重要的。这有助于确定可以防止将来发生类似事故的措施。然而，在进行根本原因分析时，我们不应该只停留在第一个起因上。我们需要回顾每一个起因，并不断问为什么，直到没有更多的起因为止。当你在进行这种程度的分析时，常常会发现，环境或文化的某些因素导致了我们的防御层出现了相应的漏洞。作为技术领导者，你有绝佳的机去发现可能导致事故的文化差异，并确定解决这些问题的方法。改善工程师的文化是理想的做法，而不是增加更多可能影响生产力的流程。</p><p></p><p></p><h2>结论</h2><p></p><p></p><p>你无法只是通过改善工程文化来阻止所有的事故发生，但可以减少事故数量，并显著缩短解决这些事故所需的时间。你可以塑造、培育和鼓励一种学习型文化，在这种文化中，问题和脆弱性都是可被接受的。你可以担任事故指挥官，并有许多机会来改进事故响应。当事故发生时，你可以帮忙高效地解决问题。你可以提高事后总结过程的质量。你可以按照最适合改进你的环境并防止未来类似事故发生的方式来推动确定行动项。</p><p></p><p>原文链接：</p><p><a href=\"https://www.infoq.com/articles/staff-engineers-impact-incidents/\">https://www.infoq.com/articles/staff-engineers-impact-incidents/</a>\"</p>",
    "publish_time": "2024-01-12 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "Java近期新闻：Eclipse GlassFish 8.0.0-M1以及Spring、BellSoft和WildFly年度回顾",
    "url": "https://www.infoq.cn/article/C5VLiGGbPpthbVafxFfY",
    "summary": "<p></p><h4>OpenJDK</h4><p></p><p><a href=\"https://www.linkedin.com/in/biboudis/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Oracle高级技术员Aggelos Biboudis</a>\"<a href=\"https://mail.openjdk.org/pipermail/amber-spec-observers/2023-December/004183.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">发布</a>\"了<a href=\"https://openjdk.org/jeps/455?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">JEP 455</a>\"（模式、instanceof和switch中的原始类型(预览)）的更新<a href=\"https://cr.openjdk.org/~abimpoudis/instanceof/jep455-20231213/specs/instanceof-jls.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">草案规范</a>\"。这个JEP由Amber项目提出，目前处于Candidate状态，旨在通过允许在模式上下文中使用原始类型模式以及通过扩展instanceof和switch来支持原始类型来增强模式匹配。</p><p></p><h4>JDK 23</h4><p></p><p>近一周的<a href=\"https://jdk.java.net/23/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">JDK 23早期访问构建</a>\"版本没有变化。<a href=\"https://github.com/openjdk/jdk/releases/tag/jdk-23%2B3?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Build 3</a>\"仍然是最新的<a href=\"https://github.com/openjdk/jdk/compare/jdk-23%2B2...jdk-23%2B3?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">更新</a>\"版本。关于此版本的更多详细信息，请参阅<a href=\"https://jdk.java.net/23/release-notes?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">发布说明</a>\"。</p><p></p><h4>JDK 22</h4><p></p><p>同样，<a href=\"https://jdk.java.net/22/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">JDK 22的早期访问构建</a>\"版本也没有变化。最新的[更新]版本(https://github.com/openjdk/jdk/compare/jdk-22%2B28...jdk-22%2B29)仍然是<a href=\"https://github.com/openjdk/jdk/releases/tag/jdk-22%2B29\">Build 29</a>\"。关于此构建版本的更多详细信息，请参阅<a href=\"https://jdk.java.net/22/release-notes\">发布说明</a>\"。</p><p></p><p>对于<a href=\"https://openjdk.org/projects/jdk/23/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">JDK 23</a>\"和<a href=\"https://openjdk.org/projects/jdk/22/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">JDK 22</a>\"，开发者可以通过<a href=\"https://bugreport.java.com/bugreport/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Java Bug Database</a>\"报告错误。</p><p></p><h4>Eclipse GlassFish</h4><p></p><p>Eclipse <a href=\"https://glassfish.org/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">GlassFish</a>\" 8.0.0的<a href=\"https://twitter.com/OmniFishEE/status/1739022035534205001?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">第一个里程碑版本</a>\"支持Jakarta EE 11-M1，并完整实现了<a href=\"https://jakarta.ee/specifications/security/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Jakarta Security</a>\" 4.0.0-M1和<a href=\"https://jakarta.ee/specifications/faces/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Jakarta Faces</a>\" 4.1.0-M1规范，以及<a href=\"https://jakarta.ee/specifications/servlet/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Jakarta Servlet</a>\" 6.1.0-M1部分规范。目前要求最低的JDK版本为17，但可能会在下一个里程碑版本更新到JDK 21。关于此版本的更多详细信息，请参阅<a href=\"https://github.com/eclipse-ee4j/glassfish/releases/tag/8.0.0-M1?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">发布说明</a>\"。</p><p></p><h4>GraalVM</h4><p></p><p>Oracle宣布Oracle GraalVM可以作为<a href=\"https://paketo.io/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Paketo</a>\"构建包。Oracle与Paketo团队合作，将GraalVM集成到<a href=\"https://github.com/paketo-buildpacks/oracle/blob/main/README.md?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Oracle构建包</a>\"中。开发人员现在可以将Native Image和Oracle构建包都添加到构建包配置文件中来执行应用程序。</p><p></p><h4>Apache软件基金会</h4><p></p><p><a href=\"https://www.mail-archive.com/announce@apache.org/msg08800.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Apache Camel 3.22.0发布</a>\"，修复了错误、升级了依赖项，并增加了新功能和改进，例如：在<a href=\"https://camel.apache.org/components/4.0.x/quartz-component.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Camel Quartz</a>\"组件中支持开始和结束日期；可以使用旧的Micrometer计量器名称或遵循新的Micrometer命名约定；作为从<a href=\"https://camel.apache.org/components/3.21.x/others/opentracing.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Camel OpenTracing</a>\"迁移过程的一部分，提供了跟踪策略，用于追踪<a href=\"https://camel.apache.org/components/3.21.x/others/opentelemetry.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Camel OpenTelemetry</a>\"中的每一个处理器。更多关于此版本的详细信息，请参阅<a href=\"https://camel.apache.org/releases/release-3.22.0/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">发布说明</a>\"。</p><p></p><h4>Gradle</h4><p></p><p>Gradle 8.6的<a href=\"https://github.com/gradle/gradle/releases/tag/v8.6.0-RC1?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">第一个正式候选版本</a>\"提供了以下功能：通过GRADLE_ENCRYPTION_KEY环境变量来配置缓存中的自定义加密密钥；改进了错误和警告报告；改进了<a href=\"https://docs.gradle.org/8.6-rc-1/userguide/build_init_plugin.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Build Init Plugin</a>\"，支持各种类型的项目；增强了插件开发者和构建工程师的构建编写过程，方便开发自定义构建逻辑。关于此版本的更多详细信息，请参阅<a href=\"https://docs.gradle.org/8.6-rc-1/release-notes.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">发布说明</a>\"。</p><p></p><h4>Spring Framework</h4><p></p><p>Broadcom的Spring开发者布道者<a href=\"https://www.linkedin.com/in/joshlong/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Josh Long</a>\"发布了<a href=\"https://spring.io/blog/2023/12/26/this-year-in-spring-2023/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">2023年Spring亮点回顾</a>\"。其中包括：引入<a href=\"https://github.com/spring-projects/spring-ai/blob/main/README.md?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Spring AI</a>\"项目，支持人工智能；在<a href=\"https://spring.io/projects/spring-boot/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Spring Boot</a>\" 3.0+中持续支持GraalVM原生镜像；支持虚拟线程和<a href=\"https://wiki.openjdk.org/display/loom/Main?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Project Loom</a>\"；Spring Boot 3.2<a href=\"https://www.infoq.com/news/2023/12/spring-boot-virtual-threads/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">版本</a>\"支持协调恢复时检查点（CRaC）；支持基于Docker的开发，其中Spring Boot可以从本地Docker Compose描述文件或Testcontainers获取连接信息；以及<a href=\"https://www.infoq.com/news/2023/08/spring-modulith-1-0/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">发布</a>\"<a href=\"https://spring.io/projects/spring-modulith/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Spring Modulith</a>\" 1.0，提供了生产就绪性、IDE支持和改进的可测试性。</p><p></p><p>Long还发布了<a href=\"https://spring.io/blog/2023/12/28/a-bootiful-podcast-trifork-cto-joris-kuipers/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">最新一期</a>\"与<a href=\"https://trifork.com/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Trifork</a>\" CTO和前VMware高级顾问<a href=\"https://www.linkedin.com/in/jkuipers/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Joris Kuipers</a>\"一起录制的A Bootiful Podcast。在2023年10月阿姆斯特丹SpringOne大会的现场<a href=\"https://www.youtube.com/watch?v=97zcc5nKv40&amp;accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">视频</a>\"中。Long与Kuipers讨论了他的职业生涯、Spring生态系统和GraalVM等话题，并与观众进行了互动。</p><p></p><h4>BellSoft</h4><p></p><p>BellSoft CEO <a href=\"https://www.linkedin.com/in/alexanderbelokrylov/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Alex Belokrylov</a>\"<a href=\"https://bell-sw.com/blog/bellsoft-s-achievements-in-2023/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">回顾</a>\"了BellSoft在2023年的亮点，指出：</p><p></p><p></p><blockquote>这一年，我们克服了挑战，抓住了机遇，参加了富有成效的活动，参加了令人难忘的活动。</blockquote><p></p><p></p><p>技术亮点包括：引入<a href=\"https://bell-sw.com/alpaquita-containers-for-spring-boot-apps/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Alpaquita Containers</a>\"；推出性能版产品线，发布Liberica <a href=\"https://bell-sw.com/libericajdk-performance-edition/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">JDK 11 Performance Edition</a>\"；推出<a href=\"https://bell-sw.com/libericajdk-with-crac/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Liberica JDK with CRaC</a>\"；并持续致力于OpenJDK和GraalVM方面的工作，发布四个季度的安全补丁和关键修复。</p><p></p><p>BellSoft与Java社区的合作亮点包括：Bellsoft性能架构师<a href=\"https://www.linkedin.com/in/dchuyko/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Dmitry Chuyko</a>\"在JNation和Devoxx等全球28个技术活动中进行了30次演讲；参与了2023年9月在纽约举行的<a href=\"https://www.infoq.com/news/2023/09/jcp-25th-anniversary/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Java社区流程25周年庆典</a>\"。</p><p></p><h4>WildFly</h4><p></p><p>Red Hat高级首席软件工程师<a href=\"https://www.linkedin.com/in/brian-stansberry-5220636/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">Brian Stansberry</a>\"做了WildFly和Java社区贡献方面的年终<a href=\"https://www.wildfly.org/news/2023/12/22/Year-end-message/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">总结</a>\"。亮点包括：WildFly 28、29和30三个主要版本的发布；为<a href=\"https://github.com/eclipse/microprofile-telemetry/blob/main/README.adoc?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">MicroProfile Telemetry</a>\"和<a href=\"https://github.com/eclipse/microprofile-lra/blob/main/README.adoc?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MDQ5NjQ4NzMsImZpbGVHVUlEIjoiS3JrRWw1RDlyT1NuYUpxSiIsImlhdCI6MTcwNDk2NDU3MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.5ZXWWw-GJGPEoc1lX5sbWhKkwuDAhh_spJfYa2v6gFE\">MicroProfile Long-Running Actions</a>\"规范提供了新的扩展；在即将发布的WildFly 31中实现了MicroProfile 6.0规范的大部分内容，并对MicroProfile 6.1进行了更新；支持JDK 21；在WildFly主要代码中解决了2000多个问题和增强功能；将WildFly代码库的许可协议改为Apache License 2.0。</p><p></p><p>他们还做了大量与改进WildFly入门相关文档和工具的工作。Stansberry还宣布，WildFly 31将于2024年1月发布。</p><p></p><p>原文链接：</p><p><a href=\"https://www.infoq.com/news/2024/01/java-news-roundup-dec25-2023/\">https://www.infoq.com/news/2024/01/java-news-roundup-dec25-2023/</a>\"</p>",
    "publish_time": "2024-01-12 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "查询速度提升15倍！银联商务基于 Apache Doris 的数据平台升级实践",
    "url": "https://www.infoq.cn/article/5o9kIvM4cimqXSfh3RFH",
    "summary": "<p></p><blockquote>导读：在长期服务广大规模商户的过程中，银联商务已沉淀了庞大、真实、优质的数据资产数据，这些数据不仅是银联商务开启新增长曲线的基础，更是进一步服务好商户的关键支撑。为更好提供数据服务，银联商务实现了从 Hadoop 到 Apache Doris 的架构升级，使数据导入性能提升 2-5 倍、ETL 场景性能提升 3-12 倍、查询分析响应速度提升 10-15 倍，满足大规模数据导入和实时极速查询的业务需求，解决了业务和数据快速增长问题，提升了数据应用构建的效率，充分助力业务提效与数字资产的服务化，推进数字化进程的落地，展示了 <a href=\"https://doris.apache.org/\">Apache Doris</a>\" 在推动金融科技创新方面的巨大潜力。</blockquote><p></p><p></p><p>银联商务是国内大型的非银行支付机构，提供以银行卡收单、网络支付为基础的综合支付服务，以及多样化和专业化的商户增值和科技创新服务，始终致力于为商户、合作伙伴及消费者构筑普惠、便捷、高效、安全的支付环境。截至 2023 年 12月，银联商务已累计服务大中型、知名企业在内的各类商户超过 2500 万家，累计铺设终端超 4000 万台，实体服务网络覆盖中国大陆所有地级以上城市及港澳地区，收单交易笔数连续十年蝉联尼尔森亚太地区收单机构榜首。</p><p></p><p>如今，数据已经成为了推动经济增长的新动力，数字技术正在成为社会发展的重要引擎。随着数字经济的迅猛发展，金融企业纷纷加大在金融科技领域的投入，以提升自身的数字化运营能力，加速数字化转型的进程。在这一背景之下，银联商务以 “全量打通、准确实时、随需自助、智能交互” 为数字化转型目标，加快推进数字基础设施建设。</p><p></p><p>在长期服务广大规模商户的过程中，银联商务已沉淀了庞大、真实、优质的数据资产数据，这些数据不仅是银联商务开启新增长曲线的基础，更是进一步服务好商户的关键支撑。为了实现数据资产可管理、可视化、可赋能的建设目标，银联商务早在 2015 年就基于 Hadoop 体系构建了大数据平台，为公司及商户提供了数据支持。但随着业务的不断扩展，银联商务总公司各部门和分子公司对于数据应用的建设需求不断涌现，早期基于 Hadoop 的大数据平台已无法高效支撑拓展性、时效性与便捷性的业务需求，因此数据平台的迭代升级势在必行。</p><p></p><p>2020 年起，银联商务开启了数据平台的升级之旅，基于 Apache Doris 构建了新一代实时数据仓库架构，使数据导入性能提升 2-5 倍、ETL 场景性能提升 3-12 倍、查询分析响应速度提升 10-15 倍，满足大规模数据导入和实时极速查询的业务需求，解决了业务和数据快速增长问题，提升了数据应用构建的效率，充分助力业务提效与数字资产的服务化，推进数字化进程的落地。</p><p></p><h2>应用场景</h2><p></p><p>在长期为各行各业的海量商户提供服务的过程中，银联商务沉淀了大量的交易数据、用户数据、终端数据以及经营数据等。通过对这些数据的挖掘和利用，为银联商务总、分、子公司以及商户提供多元化的数据服务，可以发掘隐藏在其中的价值和消费趋势，成为掌握经营掌控、进行经营决策的有效工具。典型数据服务场景包括：</p><p></p><p>经营分析场景：建设指标体系和驾驶舱，帮助业务方及管理者实时了解整体业务经营状态。业务运营场景：建设标签体系，更好理解用户画像及需求，从而提供精准的产品和业务服务。数据分析和挖掘场景：构建自助分析和报表服务，更好地了解自己的业务情况并做出科学决策。对外数据服务场景：构建对账单、报表和数据报告服务，以帮助商户更好地了解市场需求。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/8e/8e1a5f364e7f8ed19c0fd124b255a3f8.png\" /></p><p></p><p>为满足上述场景需求，银联商务早在 2015 年就引入了 Hadoop 体系构建了大数据平台，并基于 Hive 构建了离线数仓。该架构整合了来自 MySQL、Oracle、MongoDB 等多业务系统的数据，按照 T+ 1 的时效性归集到 Hive 离线数仓中，经由 Hive 数仓各层的加工处理后分别同步至不同组件中提供数据查询服务，包括基于 Kylin 与 HBase 构建 Cube 进行指标查询分析，并使用 HBase 进行增量数据的质量监测，同时还将处理完毕的数据同步到 Oracle 中提供业务数据查询。</p><p></p><p>该架构各组件各司其职、整体架构清晰，在早期承载了业务对于数据查询服务的需求。在移动支付快速席卷的浪潮下，支付场景更加多元化，银联商务业务规模稳步增长、总部及分子公司对于数据应用的建设需求不断涌现，而传统的大数据平台已经无法高效支撑业务和数据的不断增长，痛点逐步展现出来：</p><p></p><p>数据时效性：整体数据处理链路较长，大规模数据导入和加工处理的效率低，最新业务数据从生产到应用的时间间隔太长，无法充分发挥实时数据的价值；查询效率低：Kylin 早期承担了大多指标查询分析的需求，随着业务量增长、数据预处理的成本越来越高、无法支持灵活快速的分析诉求，而 Hive 在应对复杂查询时性能不足、只能依赖于堆加机器，这无疑大大增加了硬件资源成本；运维成本和可扩展性：整体架构涉及多个组件，运维工作量较大，在应对业务需求增长的过程中可扩展性不足，无法敏捷响应数据的快速增长和数据应用快速上线的要求。</p><p></p><h2>目标及选型</h2><p></p><p>面向各行各业的数千万商户、行业特点和实际需求各不相同，在对企业内部众多平台系统以及对客户提供的产品进行全面梳理后，银联商务确定了数字化转型要实现的核心目标——“全量打通、准确实时、随需自助、智能交互”。</p><p></p><p>具体而言，“全量打通”即各平台间充分互通、数据融合共享，便于更全面掌握数据主题的全方位信息、充分发挥数据的协同效应；“准确实时”即充分发挥数据的实时价值，并根据技术手段保证数据又“快”又“准”，为后续分析打好坚实基础；“随需自取”即提供自助式的服务，灵活组合、按需取用，甚至实现量身定制、因客而变；“智能交互”即充分利用技术手段，从被动式的接受服务，变成主动式的能力输出，提供分析、预测、辅助决策等智能服务，响应用户需求、实现双向交互。</p><p></p><p>而具体到数据服务层面，在为内外部客户提供数据服务的过程中，银联商务注意到用户对数据分析的性能、分析模式的灵活性、数据服务的稳定性以及数据应用的时效性有着更高的期望，因此我们决定对现有架构升级，旨在满足新的业务诉求、解决早期架构存在的问题，于是在 2020 年正式启动了银联商务数据架构的升级之旅，升级目标主要包含几方面：</p><p></p><p>统一、简洁：单一系统即可完成数据加工和服务的统一，以简化数据处理流程，提高工作效率；稳定、高效：支持高效的数据加工和高性能的数据查询，同时系统和平台的稳定性得以充分的保证；准确、实时：支持数据实时更新以及接入，保证数据准确、不丢不重；安全、可靠：确保数据访问和数据存储的安全性，支持集群灾备、数据高可靠；</p><p></p><p>基于以上目标，我们进行了深入的调研，在对比了多种大数据组件后，选择引入 Apache Doris 来构建新一代实时数据仓库架构。</p><p></p><h2>基于 Apache Doris 的新一代实时数仓架构</h2><p></p><p>在架构的迭代过程中，一方面我们需要务必保证业务无缝运转、避免系统切换造成业务体验受影响，另一方面需要兼顾与旧有架构的兼容、根据实际情况逐步迭代、渐进式调整，同时也希望充分发挥全新架构的能力优势，因此建设路径逐步明晰：</p><p></p><p>引入实时数据处理和分析链路，提升数据时效性；推动数据应用从离线迁至实时，并持续提升查询分析效率，为业务提效；打通离线与实时数据链路的屏障，统一数据口径和数据服务出口，提供一致性的数据服务体验；</p><p></p><p>因此在新的架构中，在原有离线数据仓库体系中增加了一条实时链路，通过 Kafka 将 MySQL 等各类业务数据库中的实时数据归集并传输到 Apache Doris 中，并利用 Flink 和 Doris SQL 对数据进行加工处理，在 Doris 内部构建了从 ODS 到 ADS 的数仓分层体系。同时基于 Doris 提供的 Multi-Catalog 能力打通对 Hive 数据的查询，避免了繁重的数据迁移成本。各上层数据应用统一对接 Doris 即可，无需在离线数据和实时数据间进行切换，由 Doris 统一对外提供查询服务。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/0a/0a30d003c4823df7e80cae36292d5b94.png\" /></p><p></p><p>这一升级，极大提升了数据处理的效率和查询的便捷性，当前我们正逐步推进离线数仓向以 Apache Doris 为核心的实时数仓迁移，为更高效和更大规模的数据管理和分析做好准备。</p><p></p><p>接下来我们将介绍基于 Apache Doris 的实时数仓架构的规划与设计，我们将从数据模型、分桶策略、数据同步与加工方式出发，分享实时架构搭建的实践经验。</p><p></p><h2>实时数据仓库体系的建设与实践</h2><p></p><p>在建设数据仓库体系时，银联商务遵循边治理、边建设、边赋能的原则，数据治理为关键一环，而统一规划又是其核心内容。因此数据仓库的统一规划能够确保数据仓库结构设计的合理性，不仅有利于后续对架构的管理维护，也有利于对数据可靠性和一致性的保障。因此我们在数据仓库统一规划方面采取了以下措施：</p><p></p><h3>数仓分层的合理规划</h3><p></p><p>合理的数仓分层对数据的管理以及查询性能的充分发挥起着关键作用，基于 Apache Doris 丰富的数据模型，我们对数仓的分层进行了提前规划。先来了解 Doris 数据模型都具备哪些特性：</p><p></p><p>Duplicate Key 模型：适用于明细数据查询场景，可支持任何维度的即席查询；Unique Key 模型：适用于对数据有唯一性约束的场景、需要支持数据精确去重，或者有数据更新需求、可支持大宽表的多流 Upsert 和部分列更新；Aggregate Key 模型：适用于报表查询场景，通过数据的预聚合来加速报表分析。</p><p></p><p>结合实际应用场景和数据模型，我们来介绍银联商务数仓分层策略：</p><p></p><p>ODS 层主要采用 Duplicate Key 模型，例如在交易清算场景中，银联商务每天有几千万的清算数据需处理，清算日期跨度长达一年，这就要求所有数据能被完整地存储。为了满足这一需求，我们在 ODS 层选择 Duplicate Key 模型，完全按照导入文件中的明细数据进行存储，没有任何聚合操作。而部分商户订单数据涉及到订单状态的更新，因此采取 Unique Key 模型，在数据导入过程中如果商户 id 以及订单 id 相同时自动更新成最新状态。DWD 与 DWS 层所采取的数据模型基本相同，其本质差异在于对于业务数据的抽象程度，主要采用的是 Unique Key 模型，而部分有明细数据存储的场景还保留了 Duplicate Key 模型。以结算划付场景为例，将结算日期作为分区字段，设置表模型为 Unique Key 模型，通过这种方式能够实现跨度长达一年结算数据状态的自动更新。ADS 层作为高度业务数据的抽象，采用了 Aggregate Key 模型，通过对所有结算数据进行预聚合，可大幅提高数据查询和分析的效率，减少实时计算的压力。</p><p></p><h3>分桶分区策略的合理设置</h3><p></p><p>分区分桶是优化数据存储和提升查询效率的重要手段，合理设置分桶数和分桶字段可以有效提升查询速度和数据加工脚本的执行效率。在数仓应用中，我们参考实际数据规模和官网的设置建议，会对每一张表均规划了分桶字段和分桶数。例如，在分店宽表中经常需要查询分店维度数据，因此我们将分店作为分桶字段，并根据表的大小设置分桶数。以下是我们在不同 Tablet 下 Bucket 设置的数量，可供参考：</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/59/59eca389d0aca1f34a2acea94ff40430.png\" /></p><p></p><h3>多源数据迁移方案</h3><p></p><p>在银联商务各分支机构数据迁移至 Doris 的过程中，我们发现分支机构本地系统采用的数据库种类繁多，文件存储格式也比较复杂，这给数据迁移工作带来不小的挑战。为确保数据迁移的顺利进行，我们针对不同数据和文件格式制定了相应的迁移方案。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/a8/a811ac850cb61e5848da052be85a5278.png\" /></p><p></p><p>Doris 支持多种丰富的数据迁移方式，无论是离线数据同步还是实时数据同步，都能找到高效快捷的数据迁移方式：</p><p></p><p>在实时场景中，使用 Flink CDC 方式实时获取 MySQL Binlog，其中一部分数据直接通过 Flink CDC 写入 Doris，另一部分高流量数据则先同步至 Kafka 中进行削峰、再经由 Flink-Doris-Connector 写入到 Doris 中。在离线场景中，数据来源更加多样、并且文件格式也更加复杂，因此采用了多种方式进行数据迁移。对于 S3 和 HDFS 上的历史数据及增量数据，使用 Broker Load 进行批量导入；对于 Hive 及 JDBC 外表存储的数据，使用 Insert into 方式进行同步；对于文件格式的数据，使用 Flink Ftp Connector 和 Flink Doris Connector 同步（因 Ftp 方式在银联商务内部是跨系统的数据文件交互方式，文件的格式复杂，因此开发了 Flink Ftp Connector，可支持复杂的数据格式、支持多换行符等复杂应用场景）。</p><p></p><p>丰富的数据迁移方式使得我们可以轻松地将数据从各类数据库迁移至 Doris 中来，同时，多文件格式的同步解决了分支机构数据不统一、不规范的问题，大大降低了各分支机构数据迁移的难度及成本，为银联商务的数据整合和统一管理提供了有力支持。</p><p></p><h3>全量与增量数据的同步</h3><p></p><p>在大量离线数据同步的过程中，业务的连续性和数据的准确性保证十分重要，因此我们采取了两种方式来应对全量数据同步和增量数据同步。</p><p></p><p>在全量同步场景中，我们首先创建相同表结构的临时表，将全量数据导入临时表后、再利用 ALTER TABLE t1 REPLACE WITH TABLE t2 语句对临时表和正式表进行原子替换操作，该临时表即成为正式表，且前端业务查询不会有任何的阻滞。在增量同步场景则创建了新的增量分区，将增量数据直接同步至增量分区。</p><p></p><p><code lang=\"sql\">alter table ${DB_NAME}.${TBL_NAME} drop partition IF EXISTS p${P_DOWN_DATE};\nALTER TABLE ${DB_NAME}.${TBL_NAME} ADD PARTITION IF NOT EXISTS  p${P_DOWN_DATE} VALUES [('${P_DOWN_DATE}'), ('${P_UP_DATE}'));\n\nLOAD LABEL ${TBL_NAME}_${load_timestamp} ...\n</code></p><p></p><h3>离线数据加工任务迁移</h3><p></p><p>当前我们已经把离线数仓的数据加工任务直接迁移到 Doris 进行，采用 Doris SQL 进行数据加工处理，通过调度平台进行任务调度。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/3a/3a8880ec045d0ab470922231d2e2ad42.png\" /></p><p></p><p>以清分流水交易宽表场景为例，过去每天需加工三千万条数据、在 Hive 离线数仓采用的 TEZ 计算引擎进行数据加工，在分配 2T 的计算资源下，整条链路加工耗时长达 2.5 小时。当将数据加工任务迁移至 Apache Doris 后，仅使用过去一半的计算资源，即可将整条链路加工耗时缩短为 0.5 小时，整条链路执行效率提升 5 倍以上，且单个脚本执行时效也从 8 分钟提升到 10 秒。</p><p></p><h2>金融级数仓稳定性最佳实践</h2><p></p><p>当前 Apache Doris 在银联商务已广泛应用于多个业务场景，服务了内部各类经营分析报表、用户标签、自助取数平台等应用，并对外部商户提供了对账单、报表、数据报告等多种数据服务，因此集群的稳定性和可用性对于平台用户体验和业务连续性而言至关重要，任何集群故障或不稳定因素都可能导致业务决策受阻、用户信任度受影响。</p><p></p><p>因此银联商务采取大量措施来保证集群稳定性和可用性，包括多租户资源隔离、精细权限管理、集群灾备以及多种稳定性调优策略。</p><p></p><h3>多租户资源隔离</h3><p></p><p>在实际业务运行过程中，往往存在多个业务或者不同部门同时查询同一份数据的情况发生，在有限的资源条件下往往可能因查询任务件的资源抢占导致查询性能下降甚至集群不稳定，同时针对组织架构的不同层级对于数据的可见性要求也不一致，因此我们结合自身业务类型以及 Apache Doris 多租户资源隔离能力进行了深度应用。</p><p></p><p>单查询资源限制，保证查询间资源可控</p><p></p><p>在对内部多个应用进行梳理后，我们根据业务分析负载对场景和租户进行了细分，主要划分为数据加工（ETL）、数据探索（Ad-hoc）、数据看板（Reporting）和数据服务（Data Serving）四个场景。为确保各个场景及租户之间的独立性，我们对每个场景的单查询进行了资源限制。具体来说，我们为每个租户设置了四类 Doris 账号，并对账号的 CPU 和内存使用资源进行了限制，初始值统一设置为 5 CPU，后续则根据各租户使用情况进行微调，以达到适配的资源分配。目前银联商务各场景分配情况如下：</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/e1/e11e007e8ee3462b7efc1ecf2fbab75d.png\" /></p><p></p><p>该策略的优点在于，即使单个租户的资源使用量增加，也只会影响该租户在特定场景下的使用，不会对其他租户、其他场景产生任何影响，有效提升了平台的稳定性。</p><p></p><p>基于 Resource Tag 的多租户数据与查询隔离</p><p></p><p>而面对总-分公司的数据使用场景，我们采用了基于 Resource Tag 的资源组物理****隔离方式，以确保数据的安全性和独立性。</p><p></p><p>目前在 Apache Doris 中存储了丰富多样的数据，基于数据安全的角度考虑，对数据可见范围进行了精细划分，总公司可以访问到公司层的全部数据，而分公司只能访问自身业务范畴内的数据。除此以外，还有部分数据是由总公司授权分公司进行查询，或者分公司个性化数据需要与总公司数据进行关联。在这一场景之下，我们采取了 Resource Tag 的资源隔离模式，将数据和集群可用资源单独划分开来。</p><p></p><p>具体而言，我们为分公司配置独立的资源组，将分公司个性化数据以三副本的方式存储到独立资源组中，同时将总公司数据设置为四副本，将其中三副本存储在总公司资源组中，剩余单副本存储到分公司独立资源组中。当分公司查询总公司数据时，仅会查询分公司资源组中的单副本数据，通过这样的方式即保证了数据的安全性，也提高了系统的稳定性及可靠性。具体方案如下：</p><p></p><p>设置 BE 节点标签：分配总公司资源组和分公司资源组，并在服务器上设置对应标签。设置数据分布：建表时设置replication_allocation，同时将总分公司比例设置为 3:1，该比例可结合总分公司的实际使用情况灵活调整。设置用户资源组：为用户设置对应的默认资源组，总、分公司使用各自资源组，从而实现总分公司查询隔离。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/53/53125f0e70a5f923968356110bd9857b.png\" /></p><p></p><p>更灵活的资源隔离方案</p><p></p><p>基于 Resource Tag 的资源隔离方案实现的是物理层级的资源隔离，尽管在独立性方面更佳、但在资源的利用率方面还存在一定的优化空间，并且无法保证进程内更细粒度的资源隔离，因此 Apache Doris 在 2.0 版本中推出了 Workload Group 资源软限制。</p><p></p><p>从实现原理来看， Workload Group 通过对工作负载分组管理，将用户执行的 Query 与 Workload Group 相关联，可限制单个 Query 在 BE 节点上的 CPU 和内存资源的百分比，并可以配置开启资源组的内存软限制。当集群资源紧张时，可自动终止内存占用较大的查询任务以缓解集群压力。当集群资源空闲时，当 Workload Group 使用资源超过预设值时，其他 Workload Group 可以共享空闲集群资源，并自动突破阙值、确保查询任务的稳定执行，通过这一方式实现内存和 CPU 资源的精细化管控。</p><p></p><p>我们也在持续探索新版本特性与业务的结合，后续对于数据加工、数据探索、数据看板和数据服务等场景的单查询资源限制可以通过 Workload Group 来实现，并且还可以进一步利用任务优先级和任务排队机制来保证关键业务的优先运转。</p><p></p><h3>精细用户权限管理</h3><p></p><p>为了满足业务需求和法规合规的要求，银联商务建立了严格的用户权限管理制度。该制度明确了不同用户群体的角色和权限，确保了用户只能访问其需要的功能和数据。以下为银联商务用户权限管理的方案：</p><p></p><p>用户权限设置：针对每个分支机构不同场景的不同用户，为用户设置不同的数据使用权限。库、表、行级权限管理：为满足各分公司权限管理需求，一般会为每个分公司建立视图，该方式操作繁琐，且与 Hive 数仓的使用有较大差异，可能需要对表、语句进行修改。通过 ROW POLICY机制可以便捷实现库、表、行级的权限控制，并可以将原来 Hive 数仓的任务较为无缝地迁移到 Doris 中。列级权限管理：当前采用构建视图的方式进行列级权限管理。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/46/469711c24b991a3ecd6d5c665fcf8a1e.png\" /></p><p></p><h3>集群稳定性保障</h3><p></p><p>SQL 熔断：平台对内部用户开放后，经常会面临用户查询 SQL 不规范消耗过多资源的情况，针对于这种情况，采用 SQL 熔断机制对高危的 SQL 及时熔断，以保证集群的稳定运行。导入并发控制：考虑我们经常需将历史数据同步到平台中，这就会涉及大量数据修改任务，可能对集群会造成比较大的压力。因此，我们使用了 Unique Key 模型的 Merge-on-Write 更新模式、启用了 Vertical Compaction 和 Segment Compaction 并通过调整 Compaction 参数调整，以控制数据导入频率、减轻集群的压力。网络流量控制：针对离线、实时不同场景设置了 QoS ，通过 QoS 策略进一步实现网络隔离。考虑到银联商务内部有上海和武汉两套集群，异地网络交互过程中的流量至关重要，因此，我们通过 QoS 策略来实现了精确的网络隔离操作，确保不同场景下的网络服务质量与稳定性。监控报警：为满足公司内部夜班值班监控的要求，我们使用 Doris 与内部监控报警平台进行对接。将 Doris 相关的监控报警与声光监控、CU 即时通讯软件以及邮件进行了对接，实现了对问题的实时监控和处理。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/c9/c9570d065f44690fb4ae5bafb5d67121.png\" /></p><p></p><h3>基于 CCR 的集群灾备能力</h3><p></p><p>对于金融企业而言，服务稳定性和数据安全性是至关重要的一环，而灾备方案是确保业务连续性和数据安全性的重要措施，通过集群灾备，能够在灾难或故障发生时迅速恢复业务和数据，最大程度地减少损失和风险。</p><p></p><p>对于银联商务的核心业务数据，我们期望能够实现跨集群异地的灾备，因此我们基于跨集群数据复制能力构建主备集群的双活方案。正常业务查询访问的是主集群，关键业务数据会同步写入至备用集群且保持实时更新，这样即使某个集群发生宕机事件，也可以迅速切换到备用集群，以快速恢复核心业务和数据。</p><p></p><h2>总结与规划</h2><p></p><p>面对日益增长的数据处理和分析需求，银联商务选择基于 Apache Doris 构建新一代实时数据仓库，截至目前 Apache Doris 已经服务了经营分析报表、用户标签、自助取数等多个内部业务以及对外商户数据服务场景。</p><p></p><p>仅以对账单查询场景为例，在半年对账单场景下数据查询时效从 8 分钟降低到 3 秒，提速超 100 倍，在全年对账单查询中耗时也缩短至 2 分钟内，多数典型查询场景性能提升了 10- 15 倍，整体查询分析效率得到极大幅度提升。此外，数据导入性能平均提升了 2- 5 倍，数据处理加工速度效率提升了 3- 12 倍，数据应用的时效性得到大幅增强。</p><p></p><p>通过更高效、更实时、更灵活的数据分析支持，银联商务能够更好地理解市场、把握机会、优化运营，从而实现业务的持续增长和创新发展。未来，银联商务还将继续深入使用  Apache Doris ，并在以下三个方面进行探索和实践：</p><p></p><p>统一查询引擎：将 Doris 作为联邦查询的统一入口，通过 Multi-Catalog 接入底层各数据源。同时将 Doris 完全作为对外数据服务的统一出口，实现数据查询服务的统一路由，为用户提供更便捷、更高效的数据查询服务。存算分离架构：进一步探索存算分离架构、实现资源的弹性扩缩容，并将离线数仓任务全部迁移到 Doris 中，实现实时化改造以及计算负载的进一步隔离。自动化运维：对接公司内部的业务流程，实现相关工作的自动化运维处理，并完成业务问题的快速排查；基于 Doris 实现更灵活的数据血缘分析，帮助银联商务更好地理解数据之间的关系和影响，为业务决策提供更准确的数据管理支持。</p>",
    "publish_time": "2024-01-12 09:38:12",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "升级企业数智化底座 驾驭数智未来",
    "url": "https://www.infoq.cn/article/ypWD97ILgUjbqjBUqiZ5",
    "summary": "<p>在经济环境不确定因素增多、市场普遍由增量竞争转向存量竞争的当下，数智化转型无疑是所有大型企业关注的焦点课题。结合“企业数智化进阶模型”来看，如今大多数企业的数智化处于数智化2数据驱动层级，企业需要升级数智化底座，实现全面数据服务。此外，快速崛起的生成式 AI 技术在众多行业掀起了技术和业务全面创新的浪潮，大型企业也希望借此撬动自身的潜在价值，在 AI 全面普及的时代占得领先地位。</p>\n<p>更懂业务、技术领先、体系完整的用友BIP-iuap平台已成为众多行业领先企业升级数智化底座的优选。在本册电子书中，我们深度分析了用友iuap数智化底座将如何满足企业的数智化转型需求，以及如何激发企业数据价值，如何通过生成式 AI 等技术助力企业业务提效增质，如何进行商业创新、开拓新的增长空间。与此同时，我们还收录了中建五局、中国矿产、中船信息、旭阳数科、远东数智采等行业领先企业升级数智化底座的领先实践。</p>\n<p>希望通过本册电子书，能为大型企业带来有价值的参考和启发，加快形成新质生产力，早日成为数智企业，实现高质量发展！</p>",
    "publish_time": "2024-01-12 09:41:33",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]