[
  {
    "title": "企业上云优势与挑战，美团资源管理与成本优化实践",
    "url": "https://www.infoq.cn/article/gwjhkh58FqGeyxe9c6BD",
    "summary": "<p>上云是企业数字化转型的必经之路，它带来的资源申请便利性很好的支撑了企业的高速发展。用好云可给企业开发、运维及稳定性保障成本带来有效改善。然而业界时常报出一些科技巨头，云计算成本账单膨胀到令人瞠目结舌状态的情况。表明在资源管理和成本优化上存在一些挑战和优化点。</p><p></p><p>本次演讲会给大家介绍美团在资源管理和成本优化上的一些工作，将从实际场景出发，讲述在机器选型、预算制定、资源交付、使用管控运营等资源全生命周期管理各阶段的问题和应对策略。</p><p>&nbsp;</p><p></p><h1>资源运营特点及现状</h1><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/a2/a2fcb6c5c7b4cef7b5b443ba2ccf09af.png\" /></p><p></p><p>首先看一下资源运营的特点和现状。资源运营是什么？一句话，根据业务的预算去采购服务器，然后将服务器高效交付给业务的可用资源，并将这些可用资源合理分配业务使用的一个过程。这个过程主要要实现两个主要的目标，第一个是保障业务的资源供应，另外一个是要降低业务资源的使用成本。从图上来看，资源运营主要分为供给层、平台层和业务层这三层的联动。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/d3/d398b0ef7839a61b28bf4a95dfef1d7c.png\" /></p><p></p><p>接下来我们看一下资源运营的特点。从供给层来看，其实产业链是比较长的，服务器交付涉及到上中下三游很多环节，其中一个环节出现问题，都有可能导致资源交付受到影响。比如近几年，美国对中国的无端制裁，导致芯片及其他的一些配件供应不足。前几年我们出现了一些服务器采购比较紧张的情况，业务层资源需求是变化比较快的，变化主要有两类特征，一类是周期性高低峰的变化，另外一类是热点事件的凸增需求。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/0d/0d67ecb013da48e5336b9c506ed573a9.png\" /></p><p></p><p>以上两个特点对平台层的资源保障造成了比较大的压力。再加上平台层资源运营能力不足，平台层只能通过资源冗余的方式去解决这种资源的问题，势必会造成资源的浪费这里有三个数据来说明云资源的运营现状，第一个是4,000亿美元，这是甘特评估的2022年公有云资源的市场规模，可以看到规模还是比较大的。第二个是29%，这是flex在2022年云计算报告里面预估的接下来12个月的云资源规模的增长比例，我们可以看到云计算资源规模的增长还是比较迅猛的。第三个是32%，这个也是flex在2022年云计算资源报告里面提到的，云计算资源的浪费比例，其实这个比例还是比较触目惊心的。从这三个数字我们可以看到，云资源规模是比较大的，增长也比较迅猛，浪费其实是比较严重的。在全球经济比较低迷的情况下，业务发展也比较缓慢，浪费就会显得更加明显了。</p><p></p><h1>降本增效挑战及思路</h1><p></p><p></p><h2>降本增效挑战</h2><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/78/78c436ab9cf014de4fa7233839837d5f.png\" /></p><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/49/49c7271f19b109807eae23d168f760a8.png\" /></p><p></p><p>现在大家逐渐把云资源的降本增效提上日程，但是2022年云计算报告里面也提到，云计算资源的降本增效连续三年位于具有挑战事项的Top3，为什么这么有挑战性？我从三个方面做一些阐述。</p><p></p><p>第一个方面就是资源运营本身是一个重流程的业务，它涉及的相关方是比较多的，要跨团队的推进是十分困难的。右下角那个图是我根据美团的一个资源运营的流程梳理的阶段，能看到每个阶段里面要完成的事项是比较多的，然后涉及的参与方也是比较多的，势必就会给资源运营相关的推进带来很多团队协作的难点。</p><p></p><p>第二个方面是资源运营相关的管理系统体系化和自动化不足，导致我们成本优化的效率是比较低的。专营管理体系化不足主要体现在三个方面，一个是关键性建设不足，成本分散不合理，导致我们不知道资源用在哪里，哪里可以进行成本优化。第二个体现是缺失工具平台，自动化能力不足，特别是在多元管理方面，有一些还是靠人工去做，不仅耗时耗力，还容易出现一些问题。第三个体现是成本运营本身和稳定性保障分不开，这两个的权衡不是一个0和1的问题，需要综合考虑多种因素寻求平衡。在平台建设不足的情况下，对于平衡的挑战是更大的。</p><p></p><p>第三个方面是智能云本身是长流程，降本增效需要持续运营，但在持续运营过程当中，涉及到的团队比较多，很容易导致职责划分收益分配不合理的情况。稍有不慎可能导致做事故摊责的时候更容易产生团队协作的问题。再加上成本运营本身的见效也比较慢。</p><p>综上原因，就很容易导致降本增效项目流产。</p><p></p><h2>降本增效策略</h2><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/74/74cd84778c6011b5aafe9fff2451708d.png\" /></p><p></p><p>那么我们怎么样去推进我们的降本增效？FinOps定义了一系列的云成本管理的原则和最佳实践，通过帮助财务团队技术团队和业务团队彼此的协作，进行数据驱动和业务价值驱动的成本优化决策，帮助团队提升资源的投入产出比。</p><p></p><p>其中有两个比较重要的点，第一个是成本实施的原则，包括：</p><p></p><p>倡导中心化团队驱动，多团队协作，只有中心化团队驱动才能保证目标的高度统一，而多团队协作会提升我们的执行力。倡导数据驱动和业务价值驱动，只有这样才能保障是基于我们的业务现状有的放矢。倡导是灵活运用公有云的或者私有云的成本模型去做一些这种优化的实施。</p><p></p><p>具体实施主要是三三阶段的模型，成本洞察提供可观测的资源分析和成本分摊，便于发现资源的一个瓶颈。提供自动化的智能化的工具手段，保障成本优化高效，最终实现业务资源按需使用和预留最小。资源管理是长流程的过程，降本增效也需要持续运营迭代，基于FinOps的理念，业界结合自身的特点落地实践。</p><p></p><h1>资源运营在美团的实践</h1><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/11/11c07261c636cbdbb0e5fe8588224233.png\" /></p><p></p><p>接下来我们看一下资源运营在美团的实践。多数情况下，大家认为 FinOps是帮助我们去优化成本省钱的，但是其实我们忽略了一点，其实finOps是通过可视化投入产出比去衡量资源的管理决策，可以更好地帮助我们聚焦高优核心业务的资源供应保障。所以说美团在资源运营方面像资源保障和成本优化，作为一个整体来看的，这体现在我们的业务目标上面，首先我们要保障业务的资源供给，其次再是降低成本，其实因为美团资源的交付还是以私有云为主，形式上面主要还是预算采购交付过程。</p><p></p><p>尽管我们尽量去缩短周期，但还是一种以静态的资源容量预估去满足动态变化的需求的过程。美团的业务特点其实和大家业界的特点比较类似，业务形态比较多，需求突增也是常态化的，平台的资源规模也是比较大的，这些特点都给资源运营管理带来了比较大的挑战。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/2e/2e2f9d8571a80bfb7c4d5b0a271f3425.png\" /></p><p></p><p>在资源运营管理实施之初，我们也有很多这种痛点，主要体现在三个方面：</p><p></p><p>资源成本可观测性比较差，我们就很难回答资源到底够不够，资源有没有浪费，更无从下手去做保障和成本优化。资源管理自动化程度比较低，最初资源交付可能是按周计的，这种资源运维主要靠人工，耗费大量人力物力。持续运营机制不完善，主要是一些运动式的推进，导致收益是不持续的。</p><p></p><p>针对以上问题，我们结合FinOps理念与内部的实践经验，确定了从资源保障和成本优化两方面闭环去建设能力，然后基于数据驱动去做运营的策略思路。</p><p></p><h2>资源运营思考</h2><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/53/53c3945013727b141d8b783cb3407e86.png\" /></p><p></p><p>基于资源供给和成本优化的全链路，我们沉淀了一个六层双水位的资源运营管理模型，这个模型涵盖资源的全生命周期，在每层之间做到数据的对等、数据可校准。在每层内做领域的闭环，建设相应的能力和做精细化的运营。虚拟层和主要是对应双水位的整体资源，包括水位。配额层主要是运营业务的资源水位。美团的资源交资源交付是从整体的资源池交付到对应业务的虚逻辑的资源池。业务申请资愿的时候，都会从自己的逻辑资源池里面去申请和释放，基于业务单独的逻辑资源池的水位，我们可以看到单个业务的资源的健康状态，在上面6层模型的基础上，我们梳理了资源交付的整个流程，自上自下建设资源实时供给能力，自上而下去建设资源的成本优化能力。</p><p></p><h2>资源运营落地的关键</h2><p></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/c5/c5e69125b1fa7b9452dce05bfa094a7b.png\" /></p><p></p><p>我们梳理出来了一个资源能力架构，主要包括4个方面的能力，第一个是可观测能力，第二个是资源保障能力，第三个是成本优化，最上层是持续运营的能力，可观测性主要集中在资源追踪和成本分摊，保证资源的整体视图。</p><p></p><p>资源保障主要是建设自动交付和风险识别的能力，成本优化主要是基于自动优化的工具能力建设，做好层间协同，最终体现在服务器的采购数量上，因为我们是私有云为主，上层的资源优化如果没有体现在采购服务器的数量的减少上面，其实对于公司意味着成本没有得到优化。</p><p></p><p>我们建设了相应的持续运营机制，基于这个指标去做持续的迭代和运营优化。下面我们分别从以上4个方面看一下我们资源运营落地的关键。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/94/943689e15ca5c263687e784d80028c79.png\" /></p><p></p><p>首先是在可观性方面，我们主要做到资源可追踪，成本合理分摊。我们梳理了资源在业务流转的全生命周期的状态机，实时监听这些资源状态的变化，基于这些状态变化的事件，去分析资源的状态停留时长或业务的资源使用合理性。另外我们引入了业务结算单元的概念，建立服务结算单元和组织的对应关系，以保证成本分摊到具体的实际组织，便于进行优化推进。我们建设了精细的计费能力，账单层面支持这种下钻，支持秒级计费，可以保证业务成本优化的实时性，账单的成本节省对于业务的积极性的提升还是比较有帮助的。我们也提供了满足不同业务需求的不同的资源类型，在成本分摊方面，我们尽量真实反映业务的不同类型的资源占用，基于每个成本每类产品内部收支平衡去做到合理定价。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/96/960aa347ead0740f060448daf4db3fb4.png\" /></p><p></p><p>资源交互保障方面，首先，我们打通了全流程的自动交付流程，基于buffer水位和业务的重要性，确定分级保障级别和要保障的对象，最终实现核心业务、高优业务优先保障的结果。左边的图是我们资源交付的流程，可以看到资源的buffer起到比较重要的作用，我们实时监控资源(包括水位)，去触发资源的腾挪或者是补给。右边是我们分级保障的示意图，会根据资资源余量确定要保障业务的极点。</p><p></p><p>第二，针对这种资源结构性交互不足的问题，我们建设了常态化的资源迁移承诺能力。资源结构性不足主要是指业务资源的机房需求和平台侧资源机房是不对等的，满足不了业务特定机房的需求，我们把这个称为资源的结构性不足。针对这种问题，我们建设了自动化的迁移能力，能够业务无感地将一些对机房不敏感的业务，从一个机房迁到另外一个机房，然后把对应机房的资源腾空出来给高危业务去使用。</p><p>第三，针对活动和节假日波动比较大保障困难的问题，我们会联合业务提前做压测和资源的准备。</p><p></p><p>第四，为了应对私有云交付异常，或者业务资源需求凸增的场景，我们也建设了混合云的能力，通过混合云去提升资源的可扩展性。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/f5/f551c18376041aabd60c332e2485d8a6.png\" /></p><p></p><p>接下来我们看一下成本优化的具体的实践。基于前面的资源交付的过程，我们梳理出来一个成本优化的漏斗模型，每一层的资源形态都存在已使用和未使用的分布。</p><p></p><p>针对这个情况，我们确定了成本优化的整体策略，就是在层内极致地去减少未使用的资源量，确保已使用的资源量是合理的，对不合理使用的资源能够做到及时的回收，层间做上下层的联动，在上层优化，保证能够及时体现在下层需求，最终体现在最下层资源采购量的减少。</p><p></p><p>具体落地包括建设需求预测的能力，多维度成本洞察和根因下钻的可观测能力，提供自动化能力去做高效的优化。接下来从成本漏洞模型里面的应用层、平台层和采购层这三个方面讲一下我们在成本优化方面的一些具体动作。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/ca/ca8220b3a4a58d5e2c511870e88366f4.png\" /></p><p></p><p>在应用层成本优化方面，我们根据应用层成本的一个公式，能看到应用层成本和资源的单价，实际的配置副本数和使用时长是强相关的，所以说我们成本优化也是基于这4个方面去做。</p><p></p><p>第一个方面就是降资源单价，美团提供不同的资源类型，方便业务根据它的业务特点去选择性价比比较高的类型。</p><p></p><p>第二个是降低资源配置。这里边主要涉及到两个方面，一个是减少CPU内存或磁盘大小，另外一个是优化CPU/内存配比，我们主要是提供资源利用率的视图，帮助业务发现低资源利用率的容器，进行一键降配，或者是资源机器资源配比的更新。</p><p></p><p>第三方面是降低副本数，主要分两种场景，如果是业务的资源副本是满足容灾的情况，可以通过直接减少部署节点数来达到优化的效果。对于部署节点已经最小的服务，也提供了合并部署的方式去减少节点数。</p><p></p><p>最后一个是减少资源的使用时长，主要是利用业务的高低峰，通过高峰期扩容和低峰期缩容去减少业务的资源使用。在美团内部，我们提供基于负载或者是周期性触发的弹性伸缩，为业务无缝自动扩缩，降低业务的低峰期的资源浪费。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/7d/7d659c653d1f5f47209ed01b26f3b904.png\" /></p><p></p><p>接下来看一下我们平台层的成本优化，主要分成两个方面，一个是管理面的成本，还有数据面的成本。</p><p>首先看管理面成本优化，管理面成本优化主要涉及集群的管理成本，服务器的管理成本或者是虚拟化的成本，甚至最上层可能还有为保障业务的配额使用必须要做的一些预留资源的办法。</p><p></p><p>对于服务器的管理成本优化，我们主要是建设服务器的自动运维能力，提升资源的流转效率，减少服务器的控制率，对于集群的管理成本，主要通过提升单集群的规模，降低集群管理资源在平台资源的占比。</p><p></p><p>虚拟化成本主要还是通过容器化利用容器相对VM更轻量的方式去降低管理成本。美团在18年开始就推动容器化，两年前就完成了全量容器化。</p><p></p><p>对于业务配额成本优化，主要通过合理性的监控，建设需求预测，尽量减少资源的预留。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/07/0733bc3828a8c81b88f879e1f6bdbde8.png\" /></p><p></p><p>对于这个宿主机的成本，可以简单理解为宿主机的数量。在业务上层我们这里给出来一个数量的公式，在分子业务需求业务利用状态一定的情况下，数据平均配置一定的情况下，数据成本的优化可以转换成提升宿主机的资源利用率和提升超售比，去减少宿主机的数量。</p><p></p><p>我们主要从三个方面去做这种成本优化。</p><p></p><p>首先提供平台的弹性伸缩能力，实现平台层的资源错峰复用，提升平台资源的利用率，降低平台资源的容量。二是在调度优化方面，我们主要还是基于的调度算法的优化，比如集群负载自动均衡管理系统，通过调度算法的优化，实现更高的时空复用，比如通过超卖混部等策略提升分配率和资源利用率。</p><p></p><p>三是建设混合云的管理能力，建设公有云数据的自动购买、释放业务侧自动腾退的能力，合理利用按量计费的实例，做峰值的资源应对，避免低峰期资源大量空置。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/3c/3c40d36c8b5150591f973a7e9c267055.png\" /></p><p></p><p>最后介绍一下采购层的一个成本优化。应用层和平台层主要还是保障存量资源的最大化利用。供应采购这一层，一方面要将上层的技术或者成本优化的红利体现到服务器的采购，另外一方面还会联合我们平台和业务做好新硬件的引入，借助技术红利去降低增量资源的采购成本。</p><p></p><p>现在在美团已经或即将落地的优化手段，包括：</p><p></p><p>AEP引⼊解决搜索、推荐等业务⼤内存需求HDD机型去Raid降低采购单价，适⽤于⽆状态在线业务场景⾼密机型、AMD、ARM引⼊，降低单核成本</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/f9/f9d922b0bae3ba305fcaac6a1e5bcd03.png\" /></p><p></p><p>在运营方面我们主要还是参照FinOps的一些原则和业界的实践，通过集中决策和多团队协作的方式进行持续推进。</p><p></p><h2>资源运营落地的难点</h2><p></p><p>&nbsp;</p><p><img src=\"https://static001.geekbang.org/infoq/a1/a1d14f148dbbdd07b755f18c529f93ae.png\" /></p><p></p><p>接下来我们介绍一下资源运营落地的难点，成本优化势必会带来宿主机的负载的增加，资源增强也会加剧，如何保障服务质量也是我们绕不开的一个问题。</p><p></p><p>美团主要是从事前事中事后三个阶段去保障线上业务的服务质量。事前主要是通过能力建设，比如内核的隔离能力、调度的抢占能力，建设服务画像服务分级，通过精细化的运营去保障要求更高优的业务的资源获得SUV。另外我们在调度层面去做调度算法的优化，做提前调度规避，比如避免高优的业务被调度在已经负载比较高的宿主机上。事中主要建设及时的发现，自动处理能力，比如能够较快识别高负载的宿主机，然后通过重调度或者驱逐的方式及时恢复问题。故障的发现和自动处理是在建设的一个故障治愈平台，会支持更多资源问题的处理，也支持业务自定义一些异常的规则，还有处理的规则。事后主要是保障问题的跟进机制，通过定期复盘去反向推动前面能力的优化提升。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/13/130562c7e63efd56c85527d23e7c2184.png\" /></p><p></p><p>第二个难点是，资源管理流程⻓，场景多变，如何⾼效实现⾃动化？从前面的介绍可以看到，不管是资源的保障还是成本的优化，都能看到资源管理的流程比较长，场景也比较多，优化推进如果完全靠人工去做，肯定拿不到好的结果，甚至团队成长也会比较慢。我们需要通过自动化的方式去支持业务。</p><p>那么如何在这种流程长场景多的情况下高效实现自动化的交付？我们主要从以下三点去做：基础能⼒内聚复⽤、流程引擎：流程可编排 、规则引擎：策略可配置。</p><p></p><p>接下来看一下我们资源运营落地的效果。21年在线服务基本上实现了全量的容器化。20年容器宿主机的资源利用率提升10%左右，通过服务器资源管理自动化的建设和运营，我们整体的服务器资源空置率降低20%。在新硬件引入方面，我们完成了高密机型的切换，比如AEP、去Raid化得到规模应⽤。</p><p></p><h1>总结思考</h1><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/31/310b623a394cb3d7eb98eaa11af7b16d.png\" /></p><p></p><p>美团针对资源运营的特点和挑战，主要从可观测性建设、资源保障、成本优化和持续运行这4个方面进行了思考和落地。未来规划会围绕资源保障和提效去成本优化这方面去做：</p><p></p><p>保供给方面，我们会基于DPU和快存储去实现分钟级的资源交付，提升资源风险的应对能力。在提效方面，我们要去做资源需求的预测能力建设，自动化、智能化应急保障或成本优化。</p><p></p><p>最后，性能、稳定性、成本本身是相互制约的三个主体，如何在降本增效的前提下去做好服务质量的保障，始终是一个比较难回答的问题，我们会通过精细化监控、管控能力的建设去探索两方面更好的平衡。</p><p></p><p>接下来说一下我的一些思考：</p><p></p><p>降本增效是个系统性⼯程，需要魄⼒和团队精诚协作FinOps是不错的系统⽅法，需要基于业务现状、投⼊产出做好侧重运营重流程、耗⼈⼒，需要做好⼯具产品沉淀指标运营需要持续并不断精进迭代</p><p>&nbsp;</p><p></p><h4>嘉宾介绍</h4><p></p><p></p><p>侯⾦轩，15年加⼊美团，现为基础软件系统运营团队负责⼈， 负责容器云资源运营管理、故障运营管理、集群运维 及⼯具平台研发。曾负责Gravity流程平台、EagleES搜索服务平台研发。</p><p></p><p></p><h5>相关阅读：</h5><p></p><p><a href=\"https://www.infoq.cn/article/kdiaQ7QATUtZXj12eYuu\">亚马逊 CEO：我们将重视“降本增效”</a>\"</p><p><a href=\"https://xie.infoq.cn/article/b14696263a58d961487c9368e\">多云之下，京东云的降本增效之道</a>\"</p><p></p>",
    "publish_time": "2023-09-06 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "JetBrains为IntelliJ IDE和.NET工具推出AI助手功能",
    "url": "https://www.infoq.cn/article/C7hfaBjlWNGD5NsW5jLp",
    "summary": "<p><a href=\"https://www.jetbrains.com/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">JetBrains</a>\"，一家以开发<a href=\"https://www.jetbrains.com/idea/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">IntelliJ IDEA</a>\"而闻名的软件开发公司，已通过其早期访问计划（EAP）为其所有基于IntelliJ的IDE和.NET工具<a href=\"https://blog.jetbrains.com/idea/2023/06/ai-assistant-in-jetbrains-ides/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">推出</a>\"了一种新的AI助手。这一重大发布旨在通过将<a href=\"https://en.wikipedia.org/wiki/Generative_artificial_intelligence?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">生成式AI</a>\"和<a href=\"https://en.wikipedia.org/wiki/Large_language_model?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">大语言模型</a>\"（LLM）集成到JetBrains产品中来改变软件开发工具的格局。</p><p></p><p>AI助手被无缝集成到核心IDE用户的工作流中，并增强代码理解能力，这一直是JetBrains IDE的强项。AI功能由JetBrains AI服务提供支持，该服务将用户连接到不同的LLM，并在JetBrains产品内启用特定的AI功能。在发布时，该服务支持OpenAI，并托管了由JetBrains创建的多个小模型。JetBrains计划将来将支持更多的供应商，让用户能够有更多的可选项和可用模型。</p><p></p><p>AI助手提供了一系列功能，其中一个关键功能是AI Chat，用户可以通过它与LLM对话，可以提问或迭代任务。例如，如果开发人员需要重构某个方法，他们可以通过从上下文菜单中选择AI Chat来请求重构建议：AI Actions &gt; Suggest Refactoring。该功能提供了更高水准的辅助，使得重构过程更高效、更不容易出错。</p><p></p><p></p><p><img src=\"https://imgopt.infoq.com/fit-in/1200x2400/filters:quality(80)/filters:no_upscale()/news/2023/07/jetbrains-unveils-ai-assistant/en/resources/1pasted%20image%200-1690216236187.png\" /></p><p></p><p>另一个功能是文档生成。用户可以使用LLM为声明的内容生成文档，目前支持Java、Kotlin和Python。当用户重命名Java、Kotlin或Python声明时，AI将根据声明的内容建议名称选项，这一功能叫作Name Suggestions。</p><p></p><p>AI助手还提供了提交消息生成功能。提交消息对话框现在有一个“使用AI助手生成提交消息”的按钮，用户可以点击它，将变更的差异发送给LLM，LLM将生成用于描述变更的提交消息。</p><p></p><p>然而，AI助手也存在一些限制。JetBrains计划支持本地模型，但本地模型支持的功能可能会受到限制。此外，目前只有OpenAI服务可用的<a href=\"https://www.jetbrains.com/legal/docs/terms/jetbrains-ai/service-territory/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">地区</a>\"才能访问AI服务。</p><p></p><p>在EAP期内，AI服务是免费使用的，JetBrains表示将在以后提供许可和定价模型。这意味着一旦EAP结束，使用AI服务将会产生成本。</p><p></p><p>另外需要注意的是，JetBrains AI服务可能不会立即对所有人开放。JetBrains会先让一定数量的用户使用，一旦达到最大容量，其他用户将被添加到等待队列中。在未来几周内，JetBrains将逐渐邀请更多的人体验该产品。</p><p></p><p>JetBrains强调了对用户隐私的承诺，在用户使用AI功能时，IDE需要将请求和代码发送给LLM供应商。在<a href=\"https://www.jetbrains.com/help/ai/data-collection-and-use-policy.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">数据收集和使用政策</a>\"方面，JetBrains AI服务会收集与AI功能使用相关的两种数据：行为数据和细节数据。这两种类型的数据收集都由用户完全控制。来自JetBrains AI服务的数据被发送给第三方语言模型供应商（如OpenAI），这意味着这些数据也会在这些供应商的服务器上被处理（根据供应商的政策）。用户和JetBrains都无法控制第三方数据处理。JetBrains确保收集的数据不用于训练生成代码或文本的ML模型或向其他用户公开。数据存储时间有限，不超过一年。</p><p></p><p>最近的<a href=\"http://www.linkedin.com/feed/update/urn:li:activity:7087778731422842881/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">LinkedIn调查问卷</a>\"显示，尽管数据隐私仍然是一些人关注的问题，但开发人员对这项技术的普遍反应是积极的。近期，在<a href=\"https://teqnation.com/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">TeqNation</a>\"和<a href=\"https://www.devbcn.com/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">DevBCN</a>\"共同举办的一场题为“<a href=\"https://www.devbcn.com/talk/444145?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">AI编码助手之战</a>\"”的演讲中，<a href=\"https://www.linkedin.com/company/cinqict/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">CINQ ICT</a>\"首席技术官<a href=\"https://www.linkedin.com/in/bouke-nijhuis-0a9227/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">Bouke Nijhuis</a>\"对比了TabNine、Github Copilot和ChatGPT，并说：</p><p></p><p></p><blockquote>我认为这是编程的未来。将来，你不一定要独自开发软件，你可以与你的配对AI程序员一起完成工作。</blockquote><p></p><p></p><p>目前，JetBrains希望能够听到用户对新功能的反馈，包括成功故事、AI未能达到预期效果的情况以及其他AI可能为用户提供帮助的场景。开发人员可以通过点击AI助手工具窗口中的“分享反馈”<a href=\"https://surveys.jetbrains.com/s3/ai-assistant-survey?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">参与问卷调查</a>\"，并通过向<a href=\"https://youtrack.jetbrains.com/issues/LLM?_ga=2.221126879.612247337.1689102359-1932734722.1682954001&amp;_gl=1*1mmjq6e*_ga*MTkzMjczNDcyMi4xNjgyOTU0MDAx*_ga_9J976DJZ68*MTY4OTIxODUxMC40Ni4xLjE2ODkyMTg1MTUuMC4wLjA.&amp;accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">YouTrack</a>\"报告问题来分享想法和建议。</p><p></p><p></p><p>原文链接：</p><p><a href=\"https://www.infoq.com/news/2023/07/jetbrains-unveils-ai-assistant/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTM1NDgxNzksImZpbGVHVUlEIjoiWGFWSUNnQlhVZ0VYeFBaeSIsImlhdCI6MTY5MzU0Nzg3OSwiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.KJFJ0XcdCYzaivxKGD9AuG7sPPyuwrA8wGhIT969iA0\">https://www.infoq.com/news/2023/07/jetbrains-unveils-ai-assistant/</a>\"</p><p></p><p>相关阅读：</p><p><a href=\"https://www.infoq.cn/article/rA9ISmFDMSat7ZluPryJ\">JetBrains为IntelliJ IDEA推出Kotlin Notebook Plugin</a>\"</p><p><a href=\"https://www.infoq.cn/article/adcCDFjOWA1stLKY7pJZ\">无距离编程，使用JetBrains Rider进行远程开发</a>\"</p><p><a href=\"https://www.infoq.cn/article/adcCDFjOWA1stLKY7pJZ\">无距离编程，使用JetBrains Rider进行远程开发</a>\"</p>",
    "publish_time": "2023-09-06 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "阿里云开源视频生成大模型I2VGen-XL，2分钟生成高清电影级效果视频",
    "url": "https://www.infoq.cn/article/8DKQ4KcOYLfkSZCP4OYP",
    "summary": "<p>近日，阿里云推出全新视频生成大模型I2VGen-XL，并在魔搭社区开放体验，用户上传一张图片后2分钟左右即可生成一段1280*720的高分辨率视频。据介绍，该模型的训练还使用了多种风格的视频数据，可生成科技感、电影色、卡通风格和素描等类型丰富的视频。目前，I2VGen-XL的模型和代码均已开源。</p><p>&nbsp;</p><p>在此之前，阿里云曾推出AI绘画创作大模型通义万相（基座模型Composer）和可控视频生成模型VideoComposer，团队在该领域发表60多篇CCF-A类论文，并在国际顶级视觉竞赛中获得10余项冠军。</p><p>&nbsp;</p><p>和AI绘画创作大模型相比，视频生成大模型的技术门槛更高，其需要克服文本和视频内容匹配度、视频画面质量、画面连续性等诸多技术挑战。在此之前，阿里云和微软等科技公司相继推出一系列可控视频生成研究成果，例如用户可通过定义空间布局、运动模式等条件来生成视频，但其画面清晰度难以满足真实场景应用的需求。</p><p>&nbsp;</p><p>针对该问题，阿里云进一步提出创新思路，I2VGen-XL模型设计了两个阶段：首先在低分辨率条件下保证生成结果和给定图像语义的匹配度，随后通过视频扩散模型(VLDM)来提高视频分辨率，并同时提升时间和空间上的一致性，保证最终视频内容的清晰度和连贯性，最终实现1280*720高分辨率的突破，并且在画面细节的展现上大幅领先现有模型。</p><p>&nbsp;</p><p>I2VGen-XL模型研发负责人表示，未来将进一步实现2K超清效果，可应用于短视频内容生产、电影制作等场景。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/5e/5eedf89a8b35aa68a63a2592c69f2786.png\" /></p><p>&nbsp;</p><p>目前，I2VGen-XL模型已吸引国内外用户和开发者的广泛体验和二次开发，涌现了大量创意AI视频生成内容，例如在城堡上展翅的恐龙、宇航员在飞船中行走的科幻电影画面等等……知名AI社交媒体分析师Ahsen Khaliq在推特发布多条由该模型生成的视频效果，并表示模型在清晰度、纹理、语义和时间连续性方面有优势。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/1b/1b9636afa1fc53d5dd9e91fec9429442.png\" /></p><p></p><p>模型体验地址：</p><p><a href=\"https://modelscope.cn/studios/damo/I2VGen-XL-Demo/summary\">https://modelscope.cn/studios/damo/I2VGen-XL-Demo/summary</a>\"</p>",
    "publish_time": "2023-09-06 11:27:50",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "X86+ARM,容器服务 ACK 多架构应用部署最佳实践",
    "url": "https://www.infoq.cn/article/ZrzUOJQHeksMM0ZlK54T",
    "summary": "<p><img alt=\"\" src=\"https://static001.infoq.cn/resource/image/a0/48/a0f78266bd4afc0cd7330e7b4174f048.png\" /></p>",
    "publish_time": "2023-09-06 12:12:43",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "东亚银行（中国）有限公司战略及数字化办公室总监洪建帮确认出席 FCon ，分享东亚中国数字化转型与数据中台建设",
    "url": "https://www.infoq.cn/article/66KTwyHqeJtXq8Rdv3qo",
    "summary": "<p><a href=\"https://fcon.infoq.cn/2023/shanghai/?utm_source=infoqweb&amp;utm_medium=atricle\">FCon 全球金融科技大会</a>\"，将于 11 月在上海召开。东亚银行（中国）有限公司战略及数字化办公室总监洪建帮将发表题为《<a href=\"https://fcon.infoq.cn/2023/shanghai/presentation/5484?utm_source=infoqweb&amp;utm_medium=article\">东亚中国数字化转型与数据中台建设</a>\"》主题分享，介绍东亚中国在数据中台建设领域，通过构建企业级数据湖和基于 TDC 的数据中台解决方案，解决了数据获取难、数据标准不统一等问题。同时，建立了针对不同业务领域的主题集市和相应的数据应用和服务，以支持业务数字化转型和释放数据价值。</p><p></p><p><a href=\"https://fcon.infoq.cn/2023/shanghai/presentation/5484?utm_source=infoqweb&amp;utm_medium=article\">洪建帮</a>\"，中欧国际工商学院全球 EMBA 硕士学位，现任东亚银行（中国）有限公司执行委员会成员、战略及数字化办公室总监。被 2023“金麒杯”中国金融行业信息化评选为年度杰出信息化人物。</p><p></p><p>2021 年以来，洪建帮先生从 0 到 1 全面推动东亚中国的数字化转型工作，率先在外资银行启动数字化转型三年发展战略。</p><p></p><p>● 在外资银行落地首个国产化大数据平台，实现全行数据 100% 统一入湖；</p><p>● 在外资银行建成首个数据管控平台，打造全流程数据治理体系；</p><p>● 打造外资银行首个国产化灵活数据分析平台 EUREKA，实现业务条线自助取数 50% 替代；</p><p>● 打造外资银行首个外部数据平台，全面助力零售贷款和信用卡智能风控；</p><p>● 打造新一代客户管理平台 COMPASS，降低一线营销人员手工操作 30%；</p><p>● 联合人力资源条线打造“数赢”数字化人才培养体系，该项目荣获 2022 年《中国培训杂志》（新华报业下设单位）“2022 年数字人才培养先锋组织”称号；</p><p>● 与香港人工智能实验室合作，在大湾区成立首家深港跨境金融科技创业孵化器“BEAST”。</p><p></p><p>他在本次会议的演讲内容如下：</p><p></p><p>演讲：东亚中国数字化转型与数据中台建设</p><p></p><p>东亚银行成立于 1918 年，并于 2007 年为首批成立的法人外资银行。在数字化转型上，东亚中国以打基础、补短板作为数字化转型策略，数据方面，构建大数据平台、数据管控平台和灵活数据分析平台；在流程方面，打造客户关系管理系统司南系统，积极通过 RPA+AI 提升客户体验；人才方面，自上而下推行数字化文化；创新方面，成立大湾区首家深港跨境金融科技创业孵化器。力争在上述四个方面成为内地数字化领先的外资银行。</p><p></p><p>数据中台建设领域，为了解决业务条线 / 部门在应用数据过程中面临的种种问题——如数据获取难、数据标准不统一、数据检索困难、数据分析工具不便捷等。东亚中国以企业级数据湖为基础、以基于 TDC 的数据中台解决方案为整体架构，统一了全行数据的存储和管理，并从业务领域的应用需求为出发点，建立了对公、零售、反洗钱、内审等业务主题集市，以及相应的数据应用和服务，进一步支持业务的数字化转型，释放数据价值。</p><p></p><p>演讲提纲：</p><p></p><p>东亚银行简介东亚中国数字化转型：</p><p>○ 数据、流程、人才、创新</p><p>数据中台建设：释放数据价值总结：关于原则、策略、执行的三个体会</p><p></p><p>你将获得：</p><p></p><p>○ 了解银行数据化转型实践、策略、路径的经验分享</p><p>○ 获得银行数据中台架构方案参考</p><p>○ 了解中小型银行在数据化转型上的最新探索实践</p><p>○ 了解融合了数据治、用、管的数据中台方案</p><p></p><p>除上述演讲外，FCon 上海还将围绕&nbsp;<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1580?utm_source=infoqweb&amp;utm_medium=atricle\">DevOps&nbsp;在金融企业落地实践</a>\"、<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1591?utm_source=infoqweb&amp;utm_medium=atricle\">金融行业大模型应用</a>\"、<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1576?utm_source=infoqweb&amp;utm_medium=atricle\">创新的金融科技应用</a>\"、<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1577?utm_source=infoqweb&amp;utm_medium=atricle\">金融实时数据平台建设之路</a>\"、<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1588?utm_source=infoqweb&amp;utm_medium=atricle\">金融安全风险管控</a>\"、<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1589?utm_source=infoqweb&amp;utm_medium=atricle\">数据要素流通与数据合规</a>\"等进行交流。</p><p></p><p>FCon 上海 2023，相约 11 月！现在购票，前 100 人可享 5 折特惠购票，咨询购票请联系：13269078023（微信同手机号）。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/a8/a8ec7f7fb25c7949931b2b8a5deffddd.png\" /></p><p></p>",
    "publish_time": "2023-09-06 14:47:32",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "从Snowflake迁移到Databricks，成本下降50%？Snowflake被迫解释",
    "url": "https://www.infoq.cn/article/LjmkQcjcAUEJS171gmu2",
    "summary": "<p></p><blockquote>如果成本能优化掉一半，那么总让人觉得有什么地方不对劲。</blockquote><p></p><p>&nbsp;</p><p>不久前，日杂百货配送公司Instacart在其IPO文件第280页处的一句无心表述，意外掀起了两家大数据厂商之间的口水战。</p><p>&nbsp;</p><p>Instacart公司董事会成员Frank Slootman同时也是Snowflake公司CEO，后者是一家帮助企业客户在云端存储和管理大量工作负载的上市企业。Slootman于2021年加入Instacart董事会，出于这层关系，Instacart在招股申请中就必须年其与Snowflake之间的业务关系。</p><p>&nbsp;</p><p>乍看之下，Instacart的支出数字似乎令Snowflake颇感不安。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/84/84940c0afa217f0ffa050eb150b17669.jpeg\" /></p><p></p><p>&nbsp;</p><p>Instacart方面表示，他们在2020年“向Snowflake支付了1300万美元”，这个数字在2021年迅速增长至2800万美元，到2022年更是为“基于云的数据仓库服务”支付了5100万美元。可时间来到2023年，开销数字似乎出现了逆转，Instacart表示“我们预计全年将向Snowflake支付约1500万美元。”</p><p>&nbsp;</p><p>这可是高达71%的同比降幅，我们当然好奇背后究竟发生了什么。</p><p>&nbsp;</p><p>但Snowflake公司则一再强调，这些数字并不能反映真实趋势，而是应当结合招股文件中更深层次的细节来还原真相。</p><p>&nbsp;</p><p>但无论如何，混乱之门已经就此打开。</p><p>&nbsp;</p><p></p><h2>迁移到Databricks来节省开支？</h2><p></p><p>&nbsp;</p><p>今年5月，Instacart公司发表一篇题为《Instacart如何运用智能湖仓架构与Spark建立模块化数据管线》（How Instacart Ads Modularized Data Pipelines With Lakehouse Architecture and Spark，<a href=\"https://archive.ph/NLn3L\">https://archive.ph/NLn3L</a>\"）的博文。文章描述了用于支持Instacart广告基础设施的软件，还讨论了迁移至Databricks的智能湖仓技术和由此带来的成本节约效果。</p><p>&nbsp;</p><p></p><blockquote>“我们用 Kafka 和 Spark 取代了 Kinesis Firehose，以 Delta 格式将数据传输到 S3 上。”</blockquote><p></p><p>&nbsp;</p><p></p><blockquote>“虽然还有其他可用的表格式，例如 Apache Hudi 和 Apache Iceberg，但我们发现 Delta 由于 <a href=\"https://www.infoq.cn/article/EvYEXsLPh8KMkfNrsG7D\">Databricks</a>\" 平台提供的成熟集成和支持而脱颖而出。”</blockquote><p></p><p>&nbsp;</p><p></p><blockquote>“这意味着我们可以更灵活地选择最适合我们的数据量和 SLA 要求的硬件，从而显着降低成本（节省 50% 以上）。”</blockquote><p></p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/a6/a68b54cfea40e721105cb16caba478eb.png\" /></p><p></p><p>Instacart 的现代数据堆栈：<a href=\"https://www.instacart.com/company/how-its-made/the-next-era-of-data-at-instacart/\">https://www.instacart.com/company/how-its-made/the-next-era-of-data-at-instacart/</a>\"</p><p>&nbsp;</p><p>这些文章似乎暗示着，Instacart在 Snowflake 上的支出减少，在 Databricks 上的支出增加。</p><p>&nbsp;</p><p>Snowflake的竞争对手Databricks的员工抓住机会发起猛攻。他们在社交媒体上大肆宣扬Snowflake收入明显下降，并表示这主要是因为Instacart开始将工作负载转移至Databricks基础设施。</p><p>&nbsp;</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/f4/f4df2c4a47a041d942ed28a57814d2aa.jpeg\" /></p><p></p><p>&nbsp;</p><p>Snowflake方面的员工很快予以反击，称这些数字完全是断章取义，并指责Databricks放出的正不断蚕食Snowflake业务份额的消息纯粹是凭空捏造。</p><p>&nbsp;</p><p>双方对喷之下，Reddit、LinkedIn和X（原Twitter）上的不少相关帖子也被迅速删除。</p><p>&nbsp;</p><p>就连Instacart也主动撤销了部分争议内容。</p><p>&nbsp;</p><p>然而，随着IPO申请激发的网上热议，Instacart决定删除这篇博文。如今，访问此帖的读者只能面对404错误。Databricks也撤下了一份关于Instacart如何应用其技术的详尽案例研究报告，但其官方网站上仍保留在今年早些时候发布的相关演示。</p><p>&nbsp;</p><p>Instacart、Snowflake以及Databricks公司的代表均拒绝对此发表置评。</p><p>&nbsp;</p><p>这场争议之所以会被曝光，单纯是因为Slootman身兼Instacart公司的董事会成员，同时撞上了Snowflake与Databricks在云、数据和AI等热门技术领域中激烈对抗的当口。之前社交媒体上就曾多次爆发过类似的冲突，以至于一位Reddit用户几个月前曾撰写文章，题为《Databricks和Snowflake：别在社交媒体上对喷了行吗？》（Databricks and Snowflake: Stop fighting on social.” A commenter responded）的文章，评论区也有用户打趣道“这到底是数据工程，还是职业摔跤？”</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/c8/c8313b359900c3115194e44e06ca9548.png\" /></p><p></p><p>2020年4月7日，马萨诸塞州法尔茅斯，Instacart采购员正在新冠疫情之下为顾客送货。由于亚马逊、Instacart等多家企业的员工要求提高工资、危险津贴和病假时长，相当一部分服务开始由个体卖家承担。</p><p>&nbsp;</p><p>Snowflake于2020年上市，凭借超30亿美元的资金筹集总额成为美国有史以来规模最大的商业软件IPO。即使经历了去年的市场暴跌，Snowflake的市值仍稳稳超过500亿美元。</p><p>&nbsp;</p><p>Databricks则仍处于私营状态，但也是目前最为风险投资公司看好的企业之一。2021年，私人投资者对该公司的估值为380亿美元；而彭博社上周报道称，该公司正在就估值430亿美元的融资进行谈判。</p><p>&nbsp;</p><p>为了拓展AI业务领域，Snowflake最近以1.85亿美元收购了AI搜索引擎Neeva；另一方面，Databricks则砸下13亿美元收购了生成式AI初创公司MosaicML。</p><p>&nbsp;</p><p></p><h2>Instacart这边的开支下降究竟是怎么回事?</h2><p></p><p>&nbsp;</p><p>介绍了事件背景，下面咱们回头剖析Instacart文件中的开支下降问题。</p><p>&nbsp;</p><p>虽然Databricks确实从Instacart这边分到了一部分预算，但Instacart在S-1文件中关于Snowflake合作关系的注释部分表明，这并不是导致Snowflake相关开支急剧萎缩的根本原因。</p><p>相反，这里最重要的其实是Instacart核算运营费用的具体方法（即Snowflake的实际业务数额）。该数额在2021年时为2800万美元，2022年也是2800万美元，之后到2023年上半年为1100万美元。虽然今年之内确实有所下降，但按年化计算降幅比例约为21%，根本不是恐怖的71%。</p><p>&nbsp;</p><p>更令人困惑不解的是，“关联方交易”下的脚注并没有提到Slootman或者Snowflake，仅仅是用“软件供应商的执行官”来指代。</p><p>&nbsp;</p><p>随着网上讨论热度的提升，Snowflake希望出面澄清事实——至少他们自己是这么理解的。于是上星期，该公司发布了一篇解释性的博文，题为《关于Snowflake和Instacart的事实》（Snowflake and Instacart: The Facts，<a href=\"https://www.snowflake.com/blog/snowflake-and-instacart-the-facts/\">https://www.snowflake.com/blog/snowflake-and-instacart-the-facts/</a>\"）。</p><p>&nbsp;</p><p>帖子开篇就写道，“最近几天来，社交媒体上有人歪曲了Instacart使用Snowflake产品的范围和趋势。”文章中倒是没有一句提到Databricks，这也是Snowflake的惯常作法了。即使是在财务文件中，Snowflake也从来不会将Databricks列为竞争对手。</p><p>&nbsp;</p><p>Snowflake继续表示，他们正在与Instacart合作以“优化效率”，也就是说要用更少的资源完成更多任务。另外，其技术“得到了Instacart几乎所有内部团队的广泛使用，包括目录团队、机器学习、广告、购物服务、零售商、客户和物流组织等部门。”</p><p>&nbsp;</p><p>之后，该帖又强调了文件脚注中列出的使用数据，声称“在某些社交媒体帖子中，作者错误将付款时间差跟实际使用量混为一谈，就此得出支出大幅下降的结论——实际情况并非如此。”</p><p>翻译过来，就是我们Snowflake的相应支出下降，绝不是因为业务被某家不宜点名的公司给抢走了。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/7a/7a73dc203bd113bab798c7ebd0ee7618.jpeg\" /></p><p></p><p>Youtube视频：Instacart 如何将 Snowflake 成本优化 50%</p><p>&nbsp;</p><p>问题在于，展示客户如何能够“优化”他们的 Snowflake 工作负载也可以被解读为承认该公司的部署和收费模式能导致意想不到的高昂账单。</p><p>&nbsp;</p><p><a href=\"https://www.theregister.com/2023/09/05/snowflakes_instacart_protestations_opinion/\">据之前的媒体报道</a>\"，曾有内部人士表示，Snowflake每个集群可以处理8个并发用户，这意味着当系统添加更多用户时，成本就会增加。“ Snowflake 的即用即付模式产生的成本不可预测，成本的不可预测性对 （使用 Snowflake） 的人们来说可能是一个巨大的冲击。”</p><p>&nbsp;</p><p>对于Instacart这件事，有网友评论说，他曾在最近的两份工作中都用到过Snowflake，“这个产品有很多让人喜欢的地方，但成本管理一直是一门‘魔法（black art）’。也许就是故意的。Snowflake 的内置成本管理工具非常差，根据我的观察，大多数客户最终不得不构建自己的工具。这是Snowflake需要改进的地方。”“也许他们更忙于为股东服务，无暇顾及客户……”</p><p>&nbsp;</p><p>参考链接：</p><p><a href=\"https://archive.ph/NLn3L#selection-1061.0-1069.55\">https://archive.ph/NLn3L#selection-1061.0-1069.55</a>\"</p><p><a href=\"https://www.linkedin.com/posts/alighodsi_how-instacart-ads-modularized-data-pipelines-activity-7066465465493057536-b6fc/\">https://www.linkedin.com/posts/alighodsi_how-instacart-ads-modularized-data-pipelines-activity-7066465465493057536-b6fc/</a>\"</p><p><a href=\"https://www.snowflake.com/blog/snowflake-and-instacart-the-facts/\">https://www.snowflake.com/blog/snowflake-and-instacart-the-facts/</a>\"</p><p><a href=\"https://www.cnbc.com/2023/09/02/instacart-ipo-filing-fans-controversy-between-snowflake-databricks-.html\">https://www.cnbc.com/2023/09/02/instacart-ipo-filing-fans-controversy-between-snowflake-databricks-.html</a>\"</p><p><a href=\"https://www.youtube.com/watch?v=up3bTjrBvTA\">https://www.youtube.com/watch?v=up3bTjrBvTA</a>\"</p><p><a href=\"https://www.theregister.com/2023/09/05/snowflakes_instacart_protestations_opinion/\">https://www.theregister.com/2023/09/05/snowflakes_instacart_protestations_opinion/</a>\"</p><p><a href=\"https://twitter.com/GergelyOrosz/status/1697196428735504388\">https://twitter.com/GergelyOrosz/status/1697196428735504388</a>\"</p><p><a href=\"https://twitter.com/modestproposal1/status/1695177654822191184\">https://twitter.com/modestproposal1/status/1695177654822191184</a>\"</p>",
    "publish_time": "2023-09-06 14:50:19",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]