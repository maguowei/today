[
  {
    "title": "Java 19新特性一览",
    "url": "https://www.infoq.cn/article/Zf6wLOe3l8elAjPlKiVz",
    "summary": "<p>Oracle<a href=\"https://mail.openjdk.org/pipermail/jdk-dev/2022-September/006933.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2NjQyNDcwMjcsImZpbGVHVUlEIjoia1ZJNXdhVUZMOTQ0Mk1pSCIsImlhdCI6MTY2NDI0NjcyNywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.6nEXDfklFT9wb-xCOB1PKgeV_pQVkXD20uU5xKolE3M\">发布</a>\"了Java 19及虚拟机。这个最终的特性集中包含了如下7个JEP。</p><p></p><p>JEP 405：记录模式（预览）；JEP 422：Linux/RISC-V移植；JEP 424：外部函数和内存API（预览）；JEP 425：虚拟线程（预览）；JEP 426：Vector API（第四轮孵化器）；JEP 427：switch的模式匹配（第三次预览）；JEP 428：结构化并发（孵化器）。</p><p></p><p>Java 19的新特性发布节奏与JDK 18的9个新特性差不多，但少于JDK 17的14个新特性、JDK16的17个新特性、JDK 15的14个新特性和JDK 14的16个新特性。</p><p></p><p>这个版本包含了来自Amber、Loom和Panama项目的JEP，以及将JDK移植到Linux/RISC-V指令集的新特性。我们在这里介绍其中的一些新特性。值得注意的是，在JDK 19中没有代表Valhalla项目的JEP。</p><p></p><h2>Panama项目</h2><p></p><p></p><p>JEP 424和JEP 426属于Panama项目，这个项目旨在改进和丰富JVM与“外来”（即非java）API之间的互操作性，这些API极有可能包含C语言库中常用的接口。</p><p></p><p>JEP 424，即外部函数和内存API（预览），为Java应用程序引入一个API，通过高效调用外部函数和安全访问不受JVM管理的外部内存来实现与Java运行时之外的代码和数据的互操作。这个JEP演化自JEP 419（即外部函数和内存API（第二轮孵化器），在JDK 18中交付）和JEP 412（即外部函数和内存API（孵化器），在JDK 17中交付），并针对Java社区的反馈进行了增强。</p><p></p><p>JEP 426，即Vector API（第四轮孵化器），根据前三轮孵化的反馈进行了改进——JEP 417（即Vector API（第三轮孵化器），在JDK 18中交付）、JEP 414（即Vector API（第二轮孵化器），在JDK 17中交付），以及JEP 338（即Vector API（孵化器），在JDK 16中作为孵化器模块交付）。JEP 426提议对Vector API进行增强，从MemorySegment（JEP 424，即外部函数和内存API（预览））加载或存储Vector。</p><p></p><p>关于如何实现外部函数和内存API的示例应用程序，可以在这个<a href=\"https://github.com/carldea/panama4newbies?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2NjQyNDcwMjcsImZpbGVHVUlEIjoia1ZJNXdhVUZMOTQ0Mk1pSCIsImlhdCI6MTY2NDI0NjcyNywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.6nEXDfklFT9wb-xCOB1PKgeV_pQVkXD20uU5xKolE3M\">GitHub代码库</a>\"中找到，由Azul的高级开发布道师Carl Dea提供。</p><p></p><h2>Loom项目</h2><p></p><p></p><p>JEP 425和JEP 428属于Loom项目，这个项目旨在探索、孵化和交付Java VM特性和API，其目的是支持易于使用、高吞吐量的轻量级并发和新的编程模型，可以通过虚拟线程、定界续体（Delimited Continuation）和尾部调用来实现。</p><p></p><p>JEP 425，即虚拟线程（预览），向Java平台引入了虚拟线程。这是一种轻量级线程，极大地减少了编写、维护和观察高吞吐量并发应用程序的工作量。</p><p></p><p>JEP 428，即结构化并发（孵化器），提议通过引入一个新的库来简化多线程编程，这个库将运行在不同线程中的多个任务视为单个工作单元。这可以简化错误处理和取消操作，提高可靠性，并增强可观察性。</p><p></p><p>关于如何实现虚拟线程和结构化并发API的示例应用程序可以在这些代码库中找到：由Oracle的Java开发布道师Nicolai Parlog提供的<a href=\"https://github.com/nipafx/loom-lab?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2NjQyNDcwMjcsImZpbGVHVUlEIjoia1ZJNXdhVUZMOTQ0Mk1pSCIsImlhdCI6MTY2NDI0NjcyNywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.6nEXDfklFT9wb-xCOB1PKgeV_pQVkXD20uU5xKolE3M\">GitHub代码库</a>\"和由Contrast Security公司高级软件工程师Bazlur Rahman提供的<a href=\"https://github.com/rokon12/project-loom-slides-and-demo-code?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2NjQyNDcwMjcsImZpbGVHVUlEIjoia1ZJNXdhVUZMOTQ0Mk1pSCIsImlhdCI6MTY2NDI0NjcyNywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.6nEXDfklFT9wb-xCOB1PKgeV_pQVkXD20uU5xKolE3M\">GitHub代码库</a>\"。</p><p></p><h2>Amber项目</h2><p></p><p></p><p>JEP 405和JEP 427属于Amber项目，这个项目旨在探索和培养较小的用于提升生产力的Java语言特性。</p><p></p><p>JEP 405，即记录模式（预览），提议用记录模式来解构记录值。记录模式可以与类型模式一起使用，“支持强大的、声明式的和可组合的数据浏览和处理形式”。类型模式最近已通过JEP 406（即switch的模式匹配（预览），在JDK 17中交付）和JEP 420（即switch的模式匹配（第二次预览），在JDK 18中交付）被用在switch的case子句中。</p><p></p><p>JEP 427，即switch的模式匹配（第三次预览），针对前两轮预览反馈进行了增强——JEP 406（即switch的模式匹配（预览），在JDK 17中交付）和JEP 420（即switch的模式匹配（第二次预览），在JDK 18中交付）。JEP 420以来的变更包括——保护模式被替换为switch块中的when子句；当选择器表达式的值为空时，模式switch的运行时语义与遗留switch的语义更为接近。</p><p></p><p>关于如何实现switch的记录模式和模式匹配的示例应用程序可以在这个<a href=\"https://github.com/wesleyegberto/java-new-features?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2NjQyNDcwMjcsImZpbGVHVUlEIjoia1ZJNXdhVUZMOTQ0Mk1pSCIsImlhdCI6MTY2NDI0NjcyNywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.6nEXDfklFT9wb-xCOB1PKgeV_pQVkXD20uU5xKolE3M\">GitHub代码库</a>\"的java-19目录中找到，作者是Global Points的Java技术主管Wesley Egberto。</p><p></p><h2>JDK 20</h2><p></p><p></p><p>目前还没有针对或者集成到JDK 20的JEP。但是，根据最近提交的JEP草案和JEP候选版本，我们在这篇<a href=\"https://www.infoq.com/news/2022/09/java-19-so-far/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2NjQyNDcwMjcsImZpbGVHVUlEIjoia1ZJNXdhVUZMOTQ0Mk1pSCIsImlhdCI6MTY2NDI0NjcyNywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.6nEXDfklFT9wb-xCOB1PKgeV_pQVkXD20uU5xKolE3M\">新闻报道</a>\"中猜测了哪些JEP有可能被包含在JDK 20中。</p><p></p><p>JDK 20的正式发布日期还没有公布，但按照6个月的发布节奏，它预计在2023年3月中旬发布，并在2022年12月中旬进行功能冻结。</p><p></p><p>JDK 19现在可以从<a href=\"https://jdk.java.net/19?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2NjQyNDcwMjcsImZpbGVHVUlEIjoia1ZJNXdhVUZMOTQ0Mk1pSCIsImlhdCI6MTY2NDI0NjcyNywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.6nEXDfklFT9wb-xCOB1PKgeV_pQVkXD20uU5xKolE3M\">Oracle网站</a>\"下载，其他二进制文件预计将在未来几天内可用。</p><p></p><p>原文链接：</p><p><a href=\"https://www.infoq.com/news/2022/09/java19-released/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2NjQyNDcwMjcsImZpbGVHVUlEIjoia1ZJNXdhVUZMOTQ0Mk1pSCIsImlhdCI6MTY2NDI0NjcyNywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.6nEXDfklFT9wb-xCOB1PKgeV_pQVkXD20uU5xKolE3M\">Java 19 Delivers Features for Projects Loom, Panama and Amber</a>\"</p>",
    "publish_time": "2022-09-28 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]