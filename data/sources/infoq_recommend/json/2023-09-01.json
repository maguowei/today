[
  {
    "title": "ChatGPT和OpenAI都在用的Redis，是如何从传统数据库升级为向量数据库的？",
    "url": "https://www.infoq.cn/article/TXWfVNYFWQPfPS1WKIbb",
    "summary": "<p>各行业的公司越来越认识到，制定数据驱动的决策是现在、未来 5 年、未来 20 年甚至更长时间内竞争的必要条件。数据增长（尤其是非结构化数据增长）达到了前所未有的水平，数据泛滥和人工智能时代已经来临。</p><p>&nbsp;</p><p>这一现实隐含的是，人工智能可以对海量数据进行有意义的分类和处理——不仅对 Alphabet、Meta 和微软等拥有庞大研发业务和定制人工智能工具的科技巨头是这样，对普通企业甚至中小型企业而言也是如此。</p><p>&nbsp;</p><p>精心设计的基于人工智能的应用程序可以极快地筛选极其庞大的数据集，以产生新的见解并最终推动新的收入来源，从而为企业创造真正的价值。但是，如果没有新出现的新事物——向量数据库，任何数据增长都无法真正实现可操作性和民主化。</p><p>&nbsp;</p><p>随着大语言模型的爆火，向量数据库也成为了热门话题。只需几行简单的 Python 代码，向量数据库就可以充当大语言模型廉价但高效的“外部大脑”。但我们真的需要一个专门的向量数据库吗？向量数据库究竟是炒作还是刚需？</p><p>&nbsp;</p><p>近期，在北京QCon大会之际，InfoQ有幸采访到了Redis 高级架构师史磊，听他聊一聊Redis向量数据库技术实践。</p><p>&nbsp;</p><p>在9月3-5日即将召开的QCon 北京 2023上，Redis 高级架构师史磊将带来以<a href=\"https://qcon.infoq.cn/202309/beijing/presentation/5477\">《搜索、探索、求索：Redis 向量数据库》</a>\"为主题的演讲分享。会前，InfoQ对史磊老师进行了专访，听他聊一聊Redis向量数据库技术实践。</p><p>&nbsp;</p><p>以下为访谈实录，经编辑。</p><p>&nbsp;</p><p>InfoQ：史磊老师您好，能先做下自我介绍吗？</p><p>&nbsp;</p><p>史磊：我目前在 Redis 工作，担任高级产品架构师，负责管理 Redis 在亚太区的技术事务。我的主要职责是协助 Redis 客户优化他们的 Redis 实例，指导他们在使用 Redis 的新功能时能够得到最佳体验；以及帮助Redis在中国的服务商取得成功。</p><p>&nbsp;</p><p>作为 Redis 原厂，我们维护着开源社区版，并且提供了企业版（Redis Enterprise）的软件。在亚太区，越来越多的客户开始了解 Redis 企业版的价值。然而，目前大多数人对 Redis 的理解还停留在开源版本或者一些经过修改的第三方版本上，对于 Redis 的核心功能和应用场景可能了解有限。因此，我主要的使命是帮助客户更好地利用 Redis 提供的工具，解决实际问题，满足业务需求。</p><p>&nbsp;</p><p>我在去年加入 Redis，之前我在新加坡从事科研工作，后来在一家金融科技创业公司负责开发 AI 产品。在那个公司，我已经使用 Redis 大约七八年时间，但主要限于开源版。加入 Redis 原厂后，我更深入地了解了 Redis 企业版，掌握了更多强大的功能。我希望借助自己的经验，帮助客户充分发挥 Redis 的潜力。</p><p>&nbsp;</p><p>InfoQ：您是什么时候开始关注向量数据库这个领域的？</p><p>&nbsp;</p><p>史磊：在加入 Redis 之前，我主要从事 AI 和大数据方面的产品开发。我涉猎过特征生成、存取方式以及实时 AI 处理等领域，并使用了许多工具。然而，直到我加入 Redis 原厂，我才真正了解到 Redis 也在向量数据库方向提供支持。Redis 的这种布局实际上已经有一段时间了。</p><p>&nbsp;</p><p>我们最初是通过一个搜索模块来支持搜索功能，这个模块从大约 2018 年开始就存在了。Redis 2.0 的搜索功能将其提升到了一个新的水平，使其更加容易和方便。从 Redis 2.4 开始，也就是去年 3 月份开始，我们正式支持向量搜索。在大型语言模型引起轰动之前，Redis 就已经开始在向量数据库领域布局。由于 Redis 在各行业广泛应用，一经推出向量搜索功能，全球范围内的许多客户就开始使用了。</p><p>&nbsp;</p><p>随着大型语言模型的兴起，向量数据库的应用进入了新的阶段。起初，人们可能只是用向量查询来处理简单的图片、视频、音频或文档等内容，提取和搜索一些基本的向量特征。但随着大型模型的普及，人们开始探索如何更好地使用向量数据库，将其应用到更高的维度、更广泛的范围以及更快的请求速度上。对于一个向量数据库而言，以前大家的认识更多是小众、性能要求不高，而现在这些观念正在被快速转变。在这个过程中，Redis 经历了很多考验。作为一个向量数据库，随着大型模型的兴起，许多核心企业应用，比如像 ChatGPT、OpenAI 这样的应用，开始在后台使用 Redis。这使得 Redis 在满足客户需求方面有了更多的合作机会。</p><p>&nbsp;</p><p>同时，Redis 的搜索模块也在不断发展壮大。我们通过收集来自客户的第一手资料，产品团队将客户在实际应用中遇到的需求以及在 AI 和大数据环境下的新需求，迅速转化为产品，更好地为客户提供服务。</p><p></p><h2>Redis向量数据库技术实践</h2><p></p><p>&nbsp;</p><p>InfoQ：我注意到您提到了 ChatGPT 和 OpenAI，他们已经在使用 Redis。那他们是否将 Redis 作为唯一的向量数据库使用？这方面有哪些信息可以分享吗？</p><p>&nbsp;</p><p>史磊：根据我了解，ChatGPT 和 OpenAI 并不仅仅使用 Redis 作为唯一的向量数据库，他们也在与其他向量数据库合作。因为技术的更新和迭代非常迅速，Redis 已经成立了专门的团队来负责向量数据库的研究和开发，并与多个不同的企业合作。</p><p>&nbsp;</p><p>在 Redis 的官网上，我们已经展示了与许多 AI 大模型领域的合作案例，包括与 ChatGPT 等的合作。然而，具体细节和哪些实际用例正在使用 Redis，以及它们的具体情况，因为这些领域变化迅速，所以我目前没有最新的相关信息。</p><p>&nbsp;</p><p>InfoQ：您之前提到的是在 2018 年，Redis引入了向量搜索的模块。当时具体是什么情况？我们是基于客户需求开发这个功能的吗？还是我们自己看到了这个大的趋势？</p><p>&nbsp;</p><p>史磊：从 2018 年开始，Redis引入了一个搜索模块。当时，这个搜索模块主要支持标量搜索，而不是向量搜索。在那时，Redis使用中的一个痛点是，尽管它是一个内存中的键值存储系统，查询时如果不逐个扫描每个键，就没有很好的方法来根据查询条件检索数据。</p><p>&nbsp;</p><p>因此，2018 年的版本主要是为了解决搜索这一痛点。它允许用户在 Redis 中存储大量的键，而且这些键的检索速度非常快。但是，如何在这些键中快速找到满足特定条件的数据呢？通过内部迭代和升级，从 1.0 版本到 2.0 版本，我们收集了许多客户的需求。这些需求主要集中在如何快速创建索引、如何快速执行查询，以及如何让应用程序自动完成这些操作。2020 年我们推出的 2.0 版本中就着重于这些方面。随后，在 2.4 版本中（从去年3月开始，在ChatGPT等大模型流行之前），我们正式引入了向量搜索功能。在这个过程中，我们收到了许多客户的请求，他们问是否可以将 Redis 的快速标量搜索扩展到向量化数据的搜索。我们的产品团队听取了这些客户的需求，在初期支持了基本的向量相似性搜索功能。</p><p>&nbsp;</p><p>随着时间的推移，我们不断地加入各种主流搜索模式和算法，逐步完善这个功能，使其变得更加成熟。现在，Redis 在 7.2 版本中进行了重大更新，带来了许多新功能。值得注意的是，我们不再将搜索作为一个模块进行推广，而是将其视为 Redis 提供的主要功能之一。这意味着 Redis 不仅可以用作缓存和主数据库，还可以用作向量数据库。</p><p>&nbsp;</p><p>InfoQ：随着功能的增加，Redis的定位也发生了一些变化？</p><p>&nbsp;</p><p>史磊：是的。最初，Redis的产品定位确实是作为一种内存数据库，专注于提供内存存储，并通过模块来扩展其功能。然而，随着时间的推移，我们对Redis进行了重新定位。现在，我们提供了Redis企业版软件，将所有功能集成在其中。只要使用Redis企业版，就能够获得全部功能，无需额外购买或部署特定组件，即可直接使用。</p><p>&nbsp;</p><p>对于客户而言，如果他们已经在使用Redis作为缓存，他们现在只需将向量存储到Redis中，便可以直接进行向量搜索。这对客户来说非常直观且易用，同时也不会增加额外的系统复杂性，无需引入其他产品或功能。</p><p>&nbsp;</p><p>InfoQ：我想了解一下关于这个模组研发历程的情况，以及它在研发过程中所经历的一些迭代。此外，当它与 Redis 数据库结合时，是否遇到了什么问题？如果有技术上的难题，您是如何解决的？能介绍一下相关的技术实践过程吗。</p><p>&nbsp;</p><p>史磊：Redis在不同领域的广泛应用促使我们从各个领域收集了对Redis搜索的需求。起初，有客户提出了希望在内存中进行向量搜索的需求。我们认真倾听了这些客户的意见，并着手实现这个功能。</p><p>&nbsp;</p><p>在实现过程中，从初始的POC（Proof of Concept）项目开始，我们将这个功能作为一个附加组件添加到Redis中。随着时间的推移，我们将它演变成了Redis的主推功能。在这个过程中，Redis的主产品与我们的模组功能相互协同进化。举个例子来说，Redis企业版在解决日常应用中的痛点方面拥有许多特性，比如内建的强大代理（proxy）。这个代理能够自动将请求导向相应的分片，不管是单一分片还是集群模式，从而保证了Redis的存储和吞吐量能够自动调整，无需额外干预。对客户而言，借助内建的代理，可以简化业务逻辑，无需关心是单一模式还是集群模式。这同时也解决了搜索的难题，因为Redis每个分片是单线程模式，如果请求集中在一个分片上，性能会受到影响。但如果使用集群模式，客户端需要维护连接并了解每个分片上的数据，这会使得业务逻辑变得复杂。</p><p>&nbsp;</p><p>企业版解决了这些困难，同时也使得搜索更加容易。在Redis集群版中，由于已经内置了代理，搜索请求能够自动分配到各个分片上执行，并以最低的成本整合结果。这确保了Redis在搜索中不再受制于单一分片的性能，同时提供更大量、更快速的搜索。这种搜索的扩展性和速度得益于Redis企业版内置的代理。</p><p>&nbsp;</p><p>在开发Redis搜索过程中，由于需要维护额外的数据结构，如索引，我们的产品团队进行了优化，确保快速的分配和查询这些结构，使得Redis企业版性能比开源版有了显著提升。</p><p>&nbsp;</p><p>此外，我们正在推出的企业版本中，包括最新的7.2版本，已经引入了预览版的功能。在搜索方面，我们解决了每个分片上搜索仍然受限于单线程限制的问题。通过多线程方式，我们实现了同时搜索，这在测试中已经实现了超过10倍甚至16倍的性能提升。这也说明了搜索有许多方法可以进一步优化性能，这是一个不断进化和不断完善的过程。</p><p>&nbsp;</p><p>InfoQ：把上述功能融入到 Redis ，赋能 Redis数据库，时间上花了多久呢？</p><p>&nbsp;</p><p>史磊：这项技术的演进过程从最初的讨论到研究，再到研发，以及现在的预览版功能，经历了相当长的时间。根据我了解，这个功能的实际测试时间至少超过一年，从最初的讨论到实际测试的过程确实需要一段时间。而在规划和实施这些功能之前，所花费的时间绝对不止一年。</p><p>&nbsp;</p><p>Redis的产品团队投入了大量的时间和精力，甚至设立了一个专门的团队，负责确定Redis作为向量数据库需要实现的功能。这个团队需要思考有哪些核心组件可以完成这些功能，还需要与其他团队合作。整个过程需要跨足多个团队的合作，因此这是一个长期发展的过程。</p><p>&nbsp;</p><p>InfoQ：鉴于大模型如此受欢迎，以及数据库的重要性，您是否认为在这个人工智能与大数据的时代，数据库变得尤为重要？是否必须要研发新的数据库，以满足不断增长的需求？</p><p>&nbsp;</p><p>史磊：我认为现在的向量数据库已经成为刚需，因为它解决了传统数据库无法解决的几个核心问题。传统数据库主要基于关键词进行精确搜索，即存在或不存在的模式。而向量数据库提供的是近似搜索，当我提供一张图片、一段文字或者一个语音时，它能够找到相似的匹配项，而不仅仅是0和1的结果。它通过打分机制给出近似值，这是传统数据库无法实现的。</p><p>&nbsp;</p><p>同时，传统的关系型数据库的索引方法也无法直接适用于现在的向量数据库。因为在底层，包括计算、数据存储以及应用层面，向量数据库与传统数据库完全不同。起初，向量数据库可能只是作为关系数据库的一个补充。然而，随着大数据、大模型和人工智能的发展，对于向量的存储和查询以及快速性能都提出了更高的要求，只有向量数据库才能够满足这些要求。</p><p></p><h2>向量数据库的需求会持续上升吗</h2><p></p><p>&nbsp;</p><p>InfoQ：未来向量数据库的需求会持续上升吗？</p><p>&nbsp;</p><p>史磊：我认为这是一个持续上升的过程。随着大模型的兴起，对向量数据库的需求不断增加。许多传统的向量数据库也在不断进行迭代和更新，一些以前不支持向量数据库的产品也在声称自己支持，不断地添加这一功能。因此，这种需求将持续存在，这是一个不断洗牌、淘汰不足的过程。</p><p>&nbsp;</p><p>InfoQ：目前有一些人认为未来的每个数据库都会自然而然地、本地支持向量嵌入和向量搜索。您对这种观点有何看法？如果这种趋势确实出现，它会对向量数据库行业产生什么影响，可能会有哪些积极的方面，或者可能会带来哪些挑战？</p><p>&nbsp;</p><p>史磊：从技术角度来看，几乎任何存储系统或查询系统都可以通过添加功能来支持向量搜索、查询或存储。从这个角度来说，技术上并没有问题。然而，在实际应用中，我们可能会逐渐趋向于一种或两种常用的类型，其他的方式可能会逐渐淘汰。尽管它们都是数据存储或数据库系统，但它们通过不同的方法来满足索引和查询的需求。传统的数据库很难直接支持向量查询，因为在底层设计上缺乏对向量查询的有效支持。尽管可以通过添加功能来实现，但这可能变得笨拙且不够便捷。</p><p>&nbsp;</p><p>新兴的向量数据库可能更适应当前的需求，但它们可能会引入系统的复杂性。例如，客户可能需要同时使用传统数据库、关系数据库和向量数据库，这会增加维护、成本和开销。因此，我们需要找到一个良好的平衡点，一个系统既能满足向量数据库的要求，同时也能满足传统查询功能的需求。找到这样的组合是关键。作为客户，如果能够使用一个系统来高效地完成不同类型的功能，而不是选择传统系统再另外添加功能，维护成本和各种成本都会降低。</p><p>&nbsp;</p><p>在这种情况下，我认为 Redis 可以很好地实现这种平衡。Redis不仅是广泛使用的应用，作为企业版，它还提供了完整的企业级应用生态系统，可以帮助客户满足各种需求。无论是向量搜索还是标量搜索，在 Redis 中都是以 key-value 的方式存储在内存中，查询效率都很高。此外，Redis还具有强大的混合查询功能，允许同时查询向量和其他类型的数据，如文本、数值或GPS信息。这种原生的混合查询功能使得 Redis 在向量数据库领域具有显著优势，同时保持高性能。</p><p></p><h2>AIGC浪潮下，开发者该如何“武装”自己？</h2><p></p><p>&nbsp;</p><p>InfoQ：作为一个在数据库领域有多年经验的老师，您认为现在程序员如果希望在AI和向量数据库领域发展，需要掌握哪些关键技能呢？</p><p>&nbsp;</p><p>史磊：当前技术的迭代速度极快，去年使用的产品和经验可能在今年已经变得过时，或者新的技术已经涌现。在这种情况下，我认为首先我们需要更深入地了解现有系统。以 Redis 为例，大多数人可能知道它在缓存方面表现出色，但除此之外，Redis在其他领域的应用可能并不为人所知。作为技术从业者，了解主流产品的底层架构和功能，以及它们能够实现的功能非常重要。</p><p>&nbsp;</p><p>我们需要不断地更新知识，尤其是在向量数据库和大模型等新兴技术兴起之后。作为技术人员，要积极拥抱新技术，深入了解它们的工作原理和应用场景。不是从已有技术跳跃到崭新的技术，而是要利用自身积累的经验，将新技术应用于现有的工作中。虽然这种技术转换是存在成本的，但我们需要找到最有效的方法来将转换成本降至最低，让技术为我们服务，而不是成为技术的奴隶。这需要经验、技术洞察力和不断的探索精神来实现。</p><p></p><h2>未来向量数据库市场会正向地“卷”</h2><p></p><p>&nbsp;</p><p>InfoQ：老师的话确实给了我们很有价值的启示。最后，我们可以探讨一个广泛受关注的话题，即向量数据库未来的发展。当前，向量数据库已经进入了热门阶段，许多相关技术也变得非常成熟，包括向量索引和传统数据库技术。然而，人们普遍关心的是，未来的发展将会走向何方，以及我们应该关注哪些趋势？</p><p>&nbsp;</p><p>史磊：根据我的个人观点，结合我多年来在 AI 和大数据领域的经验，以及对传统数据库的了解，我要说，几年前我无法预料到数据库领域能够如此迅速地发展至今的程度。</p><p>&nbsp;</p><p>在向量数据库方面，我认为它的出现受到了强烈的驱动力，这种驱动力能够快速淘汰那些不合适的技术，同时也会促使新技术的不断涌现，这是一个逐步筛选的过程。从长远来看，我坚信向量数据库将不断成熟，同时也会为不同的应用场景提供更加精准的向量搜索结果。</p><p>&nbsp;</p><p>以一个简单的例子来说明，我们可能需要实时、快速的搜索，也可能需要大规模特征搜索。在未来，这些需求可能会逐渐演变成不同的维度。我相信会有一些特定领域的向量数据库逐渐崭露头角，可能会涌现出一两个或者更多的适应特定场景的数据库类型。每个类型可能会在特定的领域得到优化，这将是一个整合与优化的过程。</p><p>&nbsp;</p><p>InfoQ：未来向量数据库会不像传统数据库那样，在国内涌现200多家出来？</p><p>&nbsp;</p><p>史磊：我认为数据库市场的持续扩张是不可避免的，这主要是因为技术的迭代速度非常快，同时技术门槛也在逐渐降低。当前存在着大量的需求，这将吸引越来越多的数据库甚至向量数据库加入竞争。然而，从业界角度看，这种市场扩张是有利的。它可以促使更多的技术和业务参与，尽管市场在一定范围内会有限制，但这将在一场竞争中筛选出更优秀的技术和解决方案，以更好地满足需求。</p><p>&nbsp;</p><p>我希望看到更多竞争者涌现在这个领域，同时也期待看到哪些技术能够经受住应用的考验，证明自己在实践中的可行性。对我而言，这种市场扩张应当是良性的。我们不希望看到恶性竞争，也不应该是通过贬低其他应用来凸显自身的优越性。我认为这对于行业的生态是不利的。相反，我期待一种良性竞争，让人们有更多优质的选择，从而推动整个领域的进步。</p><p>&nbsp;</p><p>嘉宾简介：</p><p>&nbsp;</p><p>史磊，现担任 Redis 高级架构师 (Senior Solution Architect)，致力于使用 Redis 企业版为客户提供产品架构方案咨询及设计、性能优化、Redis 技术的应用及推广等服务。他拥有超过十年的软件架构设计开发、大数据系统调度及优化、计算机视觉、金融科技人工智能等方面的产品及技术研发经验，拥有八年多的 Redis 开发、运维及使用经验。在加入 Redis 之前，他曾任新加坡某金融科技创新公司的人工智能架构负责人（Head, AI Architect）、新加坡国立大学数据科学研究所 (Institute of Data Science, NUS) 首席架构师等职位。</p><p>&nbsp;</p><p></p><h4>活动推荐：</h4><p></p><p>&nbsp;</p><p>以「启航·AIGC 软件工程变革」为主题的 <a href=\"https://qcon.infoq.cn/202309/beijing/schedule?utm_source=infoqweb&amp;utm_medium=wenzhang&amp;utm_campaign=10\">QCon 全球软件开发大会·北京站</a>\"将于 9 月 3-5 日在北京•富力万丽酒店举办，此次大会策划了向量数据库、大前端新场景探索、大前端融合提效、大模型应用落地、面向 AI 的存储、AIGC 浪潮下的研发效能提升、LLMOps、异构计算、微服务架构治理、业务安全技术、构建未来软件的编程语言、FinOps 等近 30 个精彩专题。</p><p>&nbsp;</p><p>会上，史磊老师将做以<a href=\"https://qcon.infoq.cn/202309/beijing/presentation/5477\">《搜索、探索、求索：Redis 向量数据库》</a>\"为主题的分享，探寻Redis数据库如何从传统数据库升级为向量数据库背后的技术实践，点击下方图片中的【二维码】了解详情~</p><p>&nbsp;</p><p><img src=\"https://static001.geekbang.org/infoq/4e/4e9f1ee9456d9e354efc7b53f9c02376.png\" /></p><p></p><p>大会报名仅剩最后 2 天，咨询购票优惠信息可联系票务经理 18514549229（微信同手机号）。</p>",
    "publish_time": "2023-09-01 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "谷歌发布Hive-BigQuery开源连接器，加强跨平台数据集成能力",
    "url": "https://www.infoq.cn/article/ew2TK8PeMsF5qfHt3jEX",
    "summary": "<p>最近，谷歌宣布<a href=\"https://cloud.google.com/blog/products/data-analytics/the-hive-bigquery-connector-is-ga\">正式发布Hive-BigQuery Connector</a>\"，简化Apache Hive和Google BigQuery之间的集成和迁移。这个开源连接器是一个Hive存储处理程序，它使Hive能够与BigQuery的存储层进行交互。</p><p>&nbsp;</p><p>这个新增选项支持在Hive中使用类SQI查询语言<a href=\"https://cwiki.apache.org/confluence/display/Hive/LanguageManual\">HiveQL</a>\"对BigQuery进行读写。这样，数据工程师就可以在不移动数据的情况下访问和查询BigQuery数据集，而BigQuery的用户则可以利用Hive的工具、库和框架进行数据处理和分析。谷歌云解决方案架构师<a href=\"https://www.linkedin.com/in/julienphalip/\">Julien Phalip</a>\"写道：</p><p>&nbsp;</p><p></p><blockquote>Hive-BigQuery连接器实现了Hive StorageHandler API，使Hive工作负载可以与BigQuery和BigLake表集成。所有的计算操作（如聚合和连接）仍然由Hive的执行引擎处理，连接器则管理所有与BigQuery数据层的交互，而不管底层数据是存储在BigQuery本地存储中，还是通过BigLake连接存储在云存储桶中。</blockquote><p></p><p>&nbsp;</p><p><a href=\"https://hive.apache.org/\">Apache Hive</a>\"是一个构建在Hadoop之上的流行的分布式数据仓库选项，它允许用户在大型数据集上执行查询。<a href=\"https://cloud.google.com/bigquery/\">BigQuery</a>\"是谷歌云提供的无服务器数据仓库，支持对海量数据集进行可扩展的查询。为了确保数据的一致性和可靠性，<a href=\"https://github.com/GoogleCloudDataproc/hive-bigquery-connector\">这次发布的开源连接器</a>\"使用Hive的元数据来表示BigQuery中存储的表。</p><p>&nbsp;</p><p>该连接器支持使用MapReduce和Tez执行引擎进行查询，在Hive中创建和删除BigQuery表，以及将BigQuery和BigLake表与Hive表进行连接。它还支持使用Storage Read API流和Apache Arrow格式从BigQuery表中快速读取数据。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/82/8216fb07c296ce7bfb3060ec6d6b5295.png\" /></p><p></p><p>图片来源：谷歌数据分析博客</p><p>&nbsp;</p><p>根据谷歌云的说法，Hive-BigQuery连接器可以在以下场景中为企业提供帮助：确保迁移过程中操作的连续性，将BigQuery用于需要数据仓库子集的需求，或者保有一个完整的开源软件技术栈。</p><p>&nbsp;</p><p>借助<a href=\"https://cloud.google.com/bigquery/docs/migration-intro\">BigQuery Migration Service</a>\"，谷歌提供了<a href=\"https://cloud.google.com/bigquery/docs/batch-sql-translator\">BigQuery批处理SQL转换器</a>\"和<a href=\"https://cloud.google.com/bigquery/docs/interactive-sql-translator\">交互式SQL转换器</a>\"支持，可以将Hive查询转换为BigQuery特有的兼容ANSI的SQL语法。Phalip解释说：</p><p>&nbsp;</p><p></p><blockquote>这个新的Hive-BigQuery连接器提供了一个额外的选项：你可以保留原来的HiveQL方言的查询，并继续在集群上使用Hive执行引擎运行这些查询，但让它们访问已迁移到BigQuery和BigLake表的数据。</blockquote><p></p><p>&nbsp;</p><p>这不是谷歌为分析不同的数据集并减少数据转换而发布的第一个开源连接器：<a href=\"https://github.com/GoogleCloudDataproc/hadoop-connectors/tree/master/gcs\">Cloud Storage Connector</a>\"实现了Hadoop Compatible File System（HCFS） API，用于读写Cloud Storage中的数据文件，而<a href=\"https://github.com/GoogleCloudDataproc/spark-bigquery-connector\">Apache Spark SQL connector for BigQuery</a>\"则实现了Spark SQL Data Source API，将BigQuery表读取到Spark的数据帧中，并将数据帧写回BigQuery。</p><p>&nbsp;</p><p>Hive-BigQuery连接器支持Dataproc 2.0和2.1。谷歌还大概介绍了有关分区的一些限制。由于Hive和BigQuery的分区方式不同，所以该连接器不支持Hive PARTITIONED BY子句。但是，开发人员仍然可以使用BigQuery支持的时间单位列分区选项和摄入时间分区选项。</p><p>&nbsp;</p><p>感兴趣的读者，可以从<a href=\"https://github.com/GoogleCloudDataproc/hive-bigquery-connector\">GitHub</a>\"上获取该连接器。</p><p>&nbsp;</p><p>原文链接：</p><p><a href=\"https://www.infoq.com/news/2023/07/google-hive-bigquery-connector/\">https://www.infoq.com/news/2023/07/google-hive-bigquery-connector/</a>\"</p>",
    "publish_time": "2023-09-01 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "从Kinesis到Timestream：探讨基于AWS的无服务器分析架构",
    "url": "https://www.infoq.cn/article/0dy0IW732TOp01GwiUNW",
    "summary": "<p>在基于事件驱动架构构建SaaS应用程序时，分析能力已经成为核心功能，因为它可以更容易地监控使用模式并以可视化的方式呈现数据。因此，这一功能很快成为SaaS平台用户的需求也就不足为奇了。</p><p>&nbsp;</p><p>这让我们灵光乍现，我们意识到，在为客户构建这个新功能的同时，我们也可以通过内部分析仪表盘更好地了解客户如何使用我们的系统。</p><p>&nbsp;</p><p><a href=\"https://jit.io/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTI1OTU4NjMsImZpbGVHVUlEIjoienUwZXdmek5udElBMGdxSiIsImlhdCI6MTY5MjU5NTU2MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.LtCig9TctTpJUbCostCcJ30OjGyB0xhIlKNW2Cvv8JM\">Jit</a>\"是一家安全创业公司，旨在帮助开发团队快速识别并轻松解决应用程序中的安全问题。我们的产品已经达到了一定的成熟度，在这个阶段，让用户能够直观地了解他们在他们的安全旅途中所处的位置是至关重要的。同时，我们也希望了解哪些产品功能对我们的客户和用户最有价值。</p><p>&nbsp;</p><p>我们开始思考如何最有效地构建一个分析解决方案，它从同一个源获取数据，并将数据呈现到几个不同的目标。</p><p>&nbsp;</p><p>第一个目标是客户指标湖，其本质上是一个随时间变化、租户分离的解决方案。其他目标则是第三方可视化和研究工具，利用相同的数据摄取架构进行更好的产品分析。</p><p>&nbsp;</p><p>在撰写本文时，我们的产品团队有在使用这类工具，如Mixpanel和HubSpot。团队使用这些工具收集关于单个租户使用情况和产品总体使用趋势的宝贵数据。</p><p>&nbsp;</p><p><img src=\"https://static001.geekbang.org/infoq/7e/7e6c112e7210183be7d14b9a6b5e8d67.png\" /></p><p></p><p></p><p><img src=\"https://static001.geekbang.org/infoq/d8/d8bac381c1122e6417f2af54d5a5a545.png\" /></p><p></p><p>如果你曾遇到过类似的工程挑战，那么阅读本文就对了，我们很乐意深入探讨如何使用无服务器架构从头开始构建这样一个系统。</p><p>&nbsp;</p><p>作为一个基于无服务器的应用程序，我们的主要数据存储是DynamoDB。然而，我们很快就明白，它并没有我们聚合和呈现分析数据所需的时间序列能力。使用我们现有的工具来实现这些将需要更长的时间，并且对于我们希望监控、度量并呈现给客户的每一个新指标，都需要大量的投入。因此，我们决定使用AWS构建块从头开始快速构建一个能够为我们提供我们需要的双重功能的东西。</p><p>&nbsp;</p><p>我们意识到，为了能够为每个客户创建个性化的图表，我们必须以时间序列的方式处理数据。此外，我们还要保持强大的租户隔离，确保每个客户只能访问他们独有的数据，从而防止任何潜在的数据泄露，这是这个架构的一个关键设计原则。这让我们开始寻找最经济、管理成本最低的工具。在本文中，我们将介绍我们为内部和外部用户构建新的分析仪表盘所需的技术考量和实现。</p><p>&nbsp;</p><p></p><h1>分析功能架构设计</h1><p></p><p>&nbsp;</p><p>架构设计从数据来源开始——即Jit的微服务写入的事件。这些事件代表了整个系统中发生的所有小事件，例如新发现的安全问题、已修复的安全问题，等等。我们的目标是监听所有这些事件，最终能够以时间序列的方式查询它们，并基于它们向用户呈现图表。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/9c/9c4f753ae228d2bdf17bba96840fb072.png\" /></p><p></p><p></p><h1>AWS EventBridge</h1><p></p><p>&nbsp;</p><p>然后这些事件被喂给<a href=\"https://aws.amazon.com/eventbridge/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTI1OTU4NjMsImZpbGVHVUlEIjoienUwZXdmek5udElBMGdxSiIsImlhdCI6MTY5MjU5NTU2MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.LtCig9TctTpJUbCostCcJ30OjGyB0xhIlKNW2Cvv8JM\">AWS EventBridge</a>\"，它会根据预定义的标准处理和转换事件将它们转换为由数据、元数据和指标名称组成的统一格式。这可以通过使用<a href=\"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-rules.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTI1OTU4NjMsImZpbGVHVUlEIjoienUwZXdmek5udElBMGdxSiIsImlhdCI6MTY5MjU5NTU2MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.LtCig9TctTpJUbCostCcJ30OjGyB0xhIlKNW2Cvv8JM\">EventBridge Rule</a>\"来实现。由于我们的架构已经是事件驱动的，而且所有这些事件已经被写入到不同的事件桥中，所以我们只需要在希望将“KPI相关”数据喂给分析源的地方通过编程的方式添加EventBridge Rule即可，这很容易做到。</p><p>&nbsp;</p><p>一旦数据和相关事件被转换成EventBridge Rule的一部分，它们就会被发送到Amazon Kinesis Firehose。这可以通过EventBridge Rule的Target功能来实现，它可以将转换后的事件发送给各种目标。</p><p>&nbsp;</p><p>被转换为统一Schema的事件必须包含以下参数才不会被过滤掉：</p><p>&nbsp;</p><p>metric_name字段，它映射到被度量的指标。元数据字典——包含有关事件的所有元数据，每个表（租户隔离）最终都是根据tenant_id参数创建的。数据字典——必须包含event_time，它告诉我们事件到达的实际时间（因为分析和指标总是需要在一段时间内进行度量和可视化的）。</p><p>&nbsp;</p><p>Schema结构：</p><p><code lang=\"null\">{\n \"metric_name\": \"relevant_metric_name\",\n \"metadata\": {\n   \"tenant_id\": \"relevant_tenant_id\",\n   \"other_metadata_fields\": \"metadata_fields\",\n   ...\n },\n \"data\": {\n   \"event_time\": ,\n   \"other_data_fields\": ,\n   ...\n }\n}</code></p><p>&nbsp;</p><p></p><h1>AWS Kinesis Firehose</h1><p></p><p>&nbsp;</p><p><a href=\"https://aws.amazon.com/kinesis/data-firehose/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTI1OTU4NjMsImZpbGVHVUlEIjoienUwZXdmek5udElBMGdxSiIsImlhdCI6MTY5MjU5NTU2MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.LtCig9TctTpJUbCostCcJ30OjGyB0xhIlKNW2Cvv8JM\">AWS Kinesis Data Firehose</a>\"（简称Firehose）是为分析引擎聚合多个事件并将其发送到目标S3存储桶的服务。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/3b/3b4c9c912e89f8274e7e95eb1c05d30c.png\" /></p><p></p><p>&nbsp;</p><p>一旦事件数超过阈值（可以是大小或时间段），它们就以批次的形式发送给S3存储桶，等待被写入时间序列数据库和其他事件订阅者，例如需要获取所有租户事件的系统。</p><p>&nbsp;</p><p>Firehose在架构中发挥着重要作用。因为它会等待数据达到阈值，然后按照批次发送事件，所以当我们的代码启动并开始处理事件时，我们将从处理大小可预测的小批次事件开始，避免发生内存错误和其他意外问题。</p><p>&nbsp;</p><p>一旦达到其中一个阈值，Kinesis对要发送的数据执行最后的验证，验证数据严格是否符合所需的Schema格式，并丢弃任何不符合的数据。</p><p>&nbsp;</p><p>我们可以调用Firehose中的lambda来丢弃不符合要求的事件，并进行额外的转换和填充，如添加租户名称。这涉及到查询外部系统并使用环境运行信息来填充数据。这些属性对于下一阶段在时间序列数据库中为每一个租户创建表来说至关重要。</p><p>&nbsp;</p><p>在下面的代码部分中，我们可以看到：</p><p>&nbsp;</p><p>定义了批次窗口，在例子中是60秒或5MB（只要满足其中一个即可）；验证和转换所有到达事件的数据转换lambda，确保事件可靠、统一且有效。</p><p>&nbsp;</p><p>处理数据转换的lambda叫作enrich-lambda。请注意，<a href=\"https://github.com/serverless/serverless?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTI1OTU4NjMsImZpbGVHVUlEIjoienUwZXdmek5udElBMGdxSiIsImlhdCI6MTY5MjU5NTU2MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.LtCig9TctTpJUbCostCcJ30OjGyB0xhIlKNW2Cvv8JM\">Serverless Framework</a>\"会将其名称转换为叫作EnrichDashdataLambdaFunction的lambda资源，所以如果你也在使用Serverless Framework，请注意这个问题。</p><p>&nbsp;</p><p><code lang=\"null\">MetricsDLQ:\n Type: AWS::SQS::Queue\n Properties:\n   QueueName: MetricsDLQ\nKinesisFirehouseDeliveryStream:\n Type: AWS::KinesisFirehose::DeliveryStream\n Properties:\n   DeliveryStreamName: metrics-firehose\n   DeliveryStreamType: DirectPut\n   ExtendedS3DestinationConfiguration:\n     Prefix: \"Data/\" # This prefix is the actual one that later lambdas listen upon new file events\n     ErrorOutputPrefix: \"Error/\"\n     BucketARN: !GetAtt MetricsBucket.Arn # Bucket to save the data\n     BufferingHints:\n       IntervalInSeconds: 60\n       SizeInMBs: 5\n     CompressionFormat: ZIP\n     RoleARN: !GetAtt FirehoseRole.Arn\n     ProcessingConfiguration:\n       Enabled: true\n       Processors:\n         - Parameters:\n             - ParameterName: LambdaArn\n               ParameterValue: !GetAtt EnrichDashdataLambdaFunction.Arn\n           Type: Lambda # Enrichment lambda\nEventBusRoleForFirehosePut:\n Type: AWS::IAM::Role\n Properties:\n   AssumeRolePolicyDocument:\n     Version: '2012-10-17'\n     Statement:\n       - Effect: Allow\n         Principal:\n           Service:\n             - events.amazonaws.com\n         Action:\n           - sts:AssumeRole\n   Policies:\n     - PolicyName: FirehosePut\n       PolicyDocument:\n         Statement:\n           - Effect: Allow\n             Action:\n               - firehose:PutRecord\n               - firehose:PutRecordBatch\n             Resource:\n               - !GetAtt KinesisFirehouseDeliveryStream.Arn\n     - PolicyName: DLQSendMessage\n       PolicyDocument:\n         Statement:\n           - Effect: Allow\n             Action:\n               - sqs:SendMessage\n             Resource:\n               - !GetAtt MetricsDLQ.Arn</code></p><p>&nbsp;</p><p>下面是将Jit系统中的事件映射到统一结构的代码。这个EventBridge将数据发送到Firehose（以下是serverless.yaml的代码片段）。</p><p>&nbsp;</p><p>我们事件映射的代码示例。</p><p>&nbsp;</p><p><code lang=\"null\">FindingsUploadedRule:\n Type: AWS::Events::Rule\n Properties:\n   Description: \"When we finished uploading findings we send this notification.\"\n   State: \"ENABLED\"\n   EventBusName: findings-service-bus\n   EventPattern:\n     source:\n       - \"findings\"\n     detail-type:\n       - \"findings-uploaded\"\n   Targets:\n     - Arn: !GetAtt KinesisFirehouseDeliveryStream.Arn\n       Id: findings-complete-id\n       RoleArn: !GetAtt EventBusRoleForFirehosePut.Arn\n       DeadLetterConfig:\n         Arn: !GetAtt MetricsDLQ.Arn\n       InputTransformer:\n         InputPathsMap:\n           tenant_id: \"$.detail.tenant_id\"\n           event_id: \"$.detail.event_id\"\n           new_findings_count: \"$.detail.new_findings_count\"\n           existing_findings_count: \"$.detail.existing_findings_count\"\n           time: \"$.detail.created_at\"\n         InputTemplate: &gt;\n           {\n             \"metric_name\": \"findings_upload_completed\",\n             \"metadata\": {\n               \"tenant_id\": ,\n               \"event_id\": ,\n             },\n             \"data\": {\n               \"new_findings_count\": ,\n               \"existing_findings_count\": ,\n               \"event_time\": <time>,\n             }\n           }</time></code></p><p>&nbsp;</p><p>我们将在系统中已经存在的一个叫作“findings-uploaded”的事件（被其他服务监听）转换为即将被指标服务摄取的事件。</p><p>&nbsp;</p><p></p><h1>Timestream——时间序列数据库</h1><p></p><p>&nbsp;</p><p>作为一种实践，如果可能的话，你应该先使用你已经在使用的内部技术，然后在必要的情况下采用其他技术（以减少复杂性）。但对于Jit来说，DynamoDB已经不适用了。</p><p>&nbsp;</p><p><img src=\"https://static001.geekbang.org/infoq/77/77b92f10e644067ff310aa3e46d17788.png\" /></p><p></p><p>&nbsp;</p><p>为了在AWS上处理时间序列数据（并执行各种查询）的同时保持服务合理的总拥有成本（TCO），我们需要探索新的选项。这些数据将在每个客户的自定义仪表盘（需要时间序列功能中呈现，并严格遵循上述的格式。在比较了可能的解决方案后，我们决定将Timestream作为架构的核心，它是一种全托管、低成本的数据库，具有SQL风格的查询功能。</p><p>&nbsp;</p><p>这是在实际当中查询这个数据库的示例代码片段。</p><p>&nbsp;</p><p><code lang=\"null\">SELECT * FROM \"Metrics\".\"b271c41c-0e62-48d2-940e-d8c80b1fe242\" \nWHERE time BETWEEN ago(1d) and now()</code></p><p>&nbsp;</p><p>虽然我们还调研了其他技术，比如Elasticsearch，但我们意识到，将其作为时间序列数据库要么难以管理和实现（例如，索引和执行租户隔离会更困难），要么成本会更高。而使用Timestream，每个租户一个表，这很简单，而且它更加经济，因为仅按使用收费，包括写入、查询和存储。乍一看收费的地方似乎很多，但我们的比较显示，根据我们可预测的使用情况和使用它提供的“心智上的轻松”（鉴于它是一个几乎零管理开销的无服务器亚马逊服务），它是更具经济可行性的解决方案。</p><p>&nbsp;</p><p>Timestream中的数据有三个核心属性可用于优化（你可以在<a href=\"https://docs.aws.amazon.com/timestream/latest/developerguide/concepts.html?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTI1OTU4NjMsImZpbGVHVUlEIjoienUwZXdmek5udElBMGdxSiIsImlhdCI6MTY5MjU5NTU2MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.LtCig9TctTpJUbCostCcJ30OjGyB0xhIlKNW2Cvv8JM\">文档</a>\"中了解更多相关信息）。</p><p>&nbsp;</p><p>维度（Dimensions）；度量（Measures）；时间（Time）。</p><p>&nbsp;</p><p>维度本质上是描述数据的字段，在我们的例子中就是每个客户的唯一标识符（取自用户元数据）和环境。我们利用这些数据从事件中提取出tenant_id，并将其作为Timestream的表名，从而实现了租户隔离。剩余的数据可根据这些字段进行分区，这使以后查询数据变得非常方便。我们使用的维度越多，查询时需要扫描的数据就越少。这是因为数据是根据这些维度进行分区的，从而有效地创建了索引。这反过来提高了查询性能并为我们带来了更大的规模经济效益。</p><p>&nbsp;</p><p>度量本质上是你要递增或枚举的值（如温度或重量）。在我们的例子中，这些是我们在不同事件中测量的值，非常适合聚合数据。</p><p>&nbsp;</p><p>时间很简单直观，它是事件的时间戳（写入数据库时），这在分析中也是一个关键功能，因为大多数查询和测量都基于特定的时间段或窗口来评估成功或改进。</p><p>&nbsp;</p><p></p><h1>使用Mixpanel和Segment可视化数据</h1><p></p><p>&nbsp;</p><p>在有了摄取、转换、批量写入和查询技术之后，构建仪表盘就很容易了。我们研究了使用Grafana和Kibana等流行的开源工具，它们与Timestream集成得很完美，但我们想在客户的UI中为客户提供最大化的定制能力，所以我们决定使用内部开发的可嵌入式图表。</p><p>&nbsp;</p><p>在Firehose按照预期格式将数据写入S3后，有一个专门的Lambda可以读取数据，然后将其转换为Timestream记录并写入（如上所述，每个租户一个表，在元数据字段中包含tenant_id）。然后另一个lambda将这些预格式化的数据发送到Segment和Mixpanel，为内部摄取和外部用户使用提供整个租户数据的俯瞰视图。</p><p>&nbsp;</p><p>我们利用Mixpanel和Segment的数据和公开查询Timestream的API（通过IAM权限实现租户隔离）为客户构建UI，让每个客户只能可视化他们自己的数据。</p><p>&nbsp;</p><p><img src=\"https://static001.geekbang.org/infoq/8d/8d52e21a1167545092ae4a93b6c38c7c.png\" /></p><p></p><p>这使得我们能够利用Mixpanel和Segment作为分析的支撑，为客户提供像乐高积木那样的图表构建块。</p><p>&nbsp;</p><p>通过利用Mixpanel和Segment等工具，我们可以对图表进行跨租户和跨客户洞察，并以此来优化我们为用户提供的功能和产品。</p><p>&nbsp;</p><p></p><h1>重要的注意事项</h1><p></p><p>&nbsp;</p><p>当说到Timestream和决定完全无服务器化，确实需要考虑成本和规模限制问题。我们上面讨论了Timestream的属性，每一个属性都有一个不能超过的阈值，知晓这一点很重要。例如，每个表的维度限制为128，度量的最大值为1024，因此你必须确保系统架构不超过这些阈值。</p><p>&nbsp;</p><p>在内存方面，主要有两种配置：内存和磁性存储（即长期存储。注意，这里的“磁性”是指AWS Timestream的长期经济型高效存储，而不是磁带）。相比之下，内存存储价格更高，但查询速度更快，时间窗口有限（在我们的例子中是2周）。理论上，你可以在磁性存储上存储多达200年的数据，但这一切都有成本问题（我们选择了一年，因为我们觉得这已经足够了，并且可以根据需要动态升级）。 AWS服务的好处在于大量繁重的工作是自动完成的，例如数据分层会自动从磁性存储迁移到磁盘。</p><p>&nbsp;</p><p>其他限制包括每个账户的表数量（阈值为50K），查询也需要至少10MB数据量（查询时间为1秒——可能不如其他引擎快，但成本优势足以让我们在查询速度上做出妥协）。因此，你应该了解总拥有成本，并优化查询，让它们始终高于10MB的限制，在可能的情况下甚至更高，同时还要减少客户端的延迟。解决这些问题的一个好办法是缓存数据，不要进行实时的完整查询，你可以通过联合查询将多个查询合并为单个查询。</p><p>&nbsp;</p><p></p><h1>无服务器乐高积木，永远的王</h1><p></p><p>&nbsp;</p><p>通过利用现有的AWS服务，我们能够快速提升分析能力，管理和维护开销很小，采用低成本的按用计费模式让我们获得了成本效益。这个可伸缩、灵活的系统的最大好处在于，随着客户需求的增加，它也可以轻松地添加新的指标。</p><p>&nbsp;</p><p>由于所有事件已经存在于系统中，并通过事件桥进行了解析，要找到新的相关指标并加入到现有框架中就变得很容易。你可以创建相关的转换，然后立即在系统中拥有一个可以查询的新指标。</p><p>&nbsp;</p><p>通过这个框架，我们可以在未来很容易地基于相同的聚合数据添加“消费者”。通过利用类似乐高的无服务器构建块，我们能够开发出一个可扩展的解决方案，不仅支持大量指标的并行增长，而且可以让架构适应业务和技术的不断演化。</p><p>&nbsp;</p><p>原文链接：</p><p><a href=\"https://www.infoq.com/articles/jit-analytics-architecture/?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE2OTI1OTU4NjMsImZpbGVHVUlEIjoienUwZXdmek5udElBMGdxSiIsImlhdCI6MTY5MjU5NTU2MywiaXNzIjoidXBsb2FkZXJfYWNjZXNzX3Jlc291cmNlIiwidXNlcklkIjo2MjMyOH0.LtCig9TctTpJUbCostCcJ30OjGyB0xhIlKNW2Cvv8JM\">https://www.infoq.com/articles/jit-analytics-architecture/</a>\"</p><p></p><p></p><h5>相关阅读：</h5><p></p><p><a href=\"https://xie.infoq.cn/article/1ec9c642934b678e33feb4ab0\">什么是无服务器架构技术</a>\"</p><p><a href=\"https://xie.infoq.cn/article/9f25ab64f0c1e577b774df664\">引领下一代云计算技术的变革：无服务器架构</a>\"</p><p><a href=\"https://www.infoq.cn/article/dO8a2awAXclEWTUovyYb\">基于无服务器的架构落地与实践</a>\"</p><p><a href=\"https://www.infoq.cn/article/PfajEYJ1miEJyst7F5a8\">论无服务器架构的特征</a>\"</p>",
    "publish_time": "2023-09-01 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "智谱AI上线首款生成式AI助手智谱清言：基于中英双语对话模型ChatGLM2，支持100余种编程语言",
    "url": "https://www.infoq.cn/article/Keo5MOT4MavSIyyxTmII",
    "summary": "<p>8 月 31 日，<a href=\"https://www.infoq.cn/article/s4UU34IIB2IuFiJeeJ3L\">智谱AI</a>\"正式上线首款生成式AI助手“智谱清言”。目前，用户可通过苹果商店App Store、安卓主流应用市场（华为、OPPO、vivo、应用宝及小米）下载或在微信小程序搜索“智谱清言”进行体验。</p><p>&nbsp;</p><p>智谱清言基于智谱 AI 自主研发的中英双语对话模型 ChatGLM2，通过万亿字符的文本与代码预训练，结合有监督微调技术，以通用对话的产品形态成为更懂用户的智能助手，在工作、学习和日常生活中赋能用户，解答用户各类问题，满足用户问询需求。此外，智谱清言的代码生成能力让其化身为程序员们的编程助手，支持100 余种编程语言，代码生成更快更精确，问答更智能。</p><p>&nbsp;</p><p>作为生成式 AI 助手，创作和写作场景是用户最为广泛的需求之一，智谱清言对此进行了针对性打磨，在预训练、微调和强化学习的各个阶段进行了优化。ChatGLM2强大的语言理解能力让智谱清言可以更深入理解文本信息之间的逻辑关系，从非结构化的文本信息中抽取所需的结构化信息，源源不断地产生丰富、广泛、新颖的高质量原创内容，一方面让文案内容更专业更精准，一方面让用户拥有更加自由的文案创作空间，进而帮助用户实现“文案创作”场景下的提质增效。</p><p>&nbsp;</p><p>此外，智谱清言产品团队还创新集成了“灵感大全”模块，帮助用户轻松写需求，以便更好地驱动个人 AI 助手。截至目前，智谱清言“灵感大全”已收录300+个场景的需求模版，覆盖文案创作、职场必备、生活创意、虚拟对话、代码指令等垂直领域的常用生产需求，帮助新用户快速认知其作为提效助手的工作能力。同时，用户可通过“编辑后发送”功能在原有模板上修改，满足用户的个性化需求，多场景激发用户使用灵感。</p><p>&nbsp;</p><p>智谱清言还具备Improve功能，降低使用门槛。用户只需要确认自己要完成的任务，例如“爆款标题”“视频脚本”“采访提纲”，产品就可结合用户的输入行为理解用户意图，匹配到最适用的模板，还可以根据提示增加条件描述。</p><p>&nbsp;</p><p>据了解，智谱AI于2020年底开始研发 GLM 预训练架构，并训练了百亿参数模型GLM-10B，2021年利用MoE架构成功训练出万亿稀疏模型，2022年合作研发了双语千亿级超大规模预训练模型GLM-130B，并基于此千亿基座模型打造大模型平台及产品矩阵。</p><p>&nbsp;</p><p>今年6月，智谱AI将千亿模型ChatGLM升级到二代，模型支持的上下文长度扩展到32K，并大幅提高推理速度。基于基座模型能力的增强，智谱清言已具备更强大的性能，在多轮对话当中，作为一个“有知识、有记忆”的AI助手，智谱清言对上下文理解长度已从2K拓展至32K，储备了包括科学、技术、历史、文化、艺术、商业和其他垂直领域的丰富知识，以此保障用户人机对话体验，持续畅聊无压力。目前产品已具备通用问答、多轮对话、创意写作、代码生成以及虚拟对话等丰富能力，未来还将开放多模生成能力。</p>",
    "publish_time": "2023-09-01 11:01:26",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "AI浪潮让这个加勒比小岛GDP 增加了 10%",
    "url": "https://www.infoq.cn/article/KWTpoitNkWxEMEHlj5jk",
    "summary": "<p><a href=\"https://www.bloomberg.com/news/articles/2023-08-31/ai-startups-create-digital-demand-for-anguilla-s-website-domain-name\">据彭博社</a>\"报道，一个加勒比小岛凭借其独特的互联网域名，可以从人工智能热潮中赚取 3000 万美元。</p><p>&nbsp;</p><p>安圭拉是英国海外领土，人口仅约1.6万人。但互联网名称与数字地址分配机构（Internet&nbsp;Corporation for&nbsp;Assigned&nbsp;Names and&nbsp;Numbers，简称ICANN）也为其分配了“ai”国家/地区代码，这意味着任何想要获得以“.ai”结尾网址的人都必须从安圭拉政府那里获得。</p><p>&nbsp;</p><p>据悉，马斯克的xAI、Facebook、谷歌、微软等公司以及蓬勃发展的行业中的许多初创公司都已经拥有“.ai”域名。</p><p>&nbsp;</p><p>软件开发人员Vince Cate 自 20 世纪 90 年代以来一直代表该地区管理该域名，他告诉彭博社，“.ai”注册总数在过去一年中几乎翻了一番，达到 287,432 个。他补充道，自去年 11 月 ChatGPT 公开发布以来，“这里的情况变得非常不同”。</p><p>&nbsp;</p><p>据悉，虽然去年 12 月到今年3 月出现了一个注册高峰，之后便趋于平缓，但今年人工智能热潮仍可为安圭拉带来了 3000 万美元的域名注册费。</p><p>&nbsp;</p><p>根据联合国最新数据，2021 年安圭拉的 GDP 为 2.88 亿美元。这意味着 .ai 域名的价值可能约占其国内生产总值的 10%。</p><p>&nbsp;</p><p></p><p>参考链接：</p><p><a href=\"https://www.businessinsider.com/tiny-caribbean-island-set-to-make-30-million-from-ai-domain-report-2023-8\">https://www.businessinsider.com/tiny-caribbean-island-set-to-make-30-million-from-ai-domain-report-2023-8</a>\"</p><p><a href=\"https://www.bloomberg.com/news/articles/2023-08-31/ai-startups-create-digital-demand-for-anguilla-s-website-domain-name#xj4y7vzkg\">https://www.bloomberg.com/news/articles/2023-08-31/ai-startups-create-digital-demand-for-anguilla-s-website-domain-name#xj4y7vzkg</a>\"</p>",
    "publish_time": "2023-09-01 11:35:19",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "蚂蚁集团隐私计算部隐语总经理、隐语开源框架负责人王磊博士，确认担任 FCon 数据要素流通与数据合规专题出品人",
    "url": "https://www.infoq.cn/article/VuiZQVjkPTmVKkosS2VW",
    "summary": "<p><a href=\"https://fcon.infoq.cn/2023/shanghai/?utm_source=infoqweb&amp;utm_medium=atricle\">FCon 全球金融科技大会</a>\"，将于 11 月在上海召开。蚂蚁集团隐私计算部隐语总经理、隐语开源框架负责人王磊博士将担任「<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1589?utm_source=infoqweb&amp;utm_medium=article\">数据要素流通与数据合规</a>\"」的专题出品人。在此次专题中，你将了解到隐私计算是当前网络数据计算安全保护的核心技术之一，包括多个技术子集，本质上都是避免原始数据泄露的安全保护措施，实现数据计算过程结果的隐私保护。</p><p></p><p><a href=\"https://fcon.infoq.cn/2023/shanghai/track/1589?utm_source=infoqweb&amp;utm_medium=article\">王磊博士</a>\"，浙江大学计算机博士，2022 年《麻省理工科技评论》中国隐私计算科技创新人物。多年来牵头并主导隐私计算框架“隐语 (SecretFlow) ”的一系列研发创新、开源共建及产业落地应用。拥有海内外隐私计算相关授权专利 41 项，带领团队于 AAAI、NeurlPS、KDD、USENIX ATC、S&amp;P 等国际顶会 / 期刊发表论文 20 余篇，主导和参与制定国际 / 国家 / 行业 / 团体标准 11 项。</p><p></p><p>相信王磊博士的到来，可以帮助提升此专题的质量，让你学习到，隐私计算与传统的加密、去标识化单一技术相比，因融合了密码学、统计学等交叉学科，为解决复杂数据处理过程中的隐私保护问题提供了更高效、更安全的解决方案。</p><p></p><p>除上述专题外，FCon 上海还将围绕&nbsp;<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1580?utm_source=infoqweb&amp;utm_medium=atricle\">DevOps&nbsp;在金融企业落地实践</a>\"、<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1591?utm_source=infoqweb&amp;utm_medium=atricle\">金融行业大模型应用</a>\"、<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1576?utm_source=infoqweb&amp;utm_medium=atricle\">创新的金融科技应用</a>\"、<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1577?utm_source=infoqweb&amp;utm_medium=atricle\">金融实时数据平台建设之路</a>\"、<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1588?utm_source=infoqweb&amp;utm_medium=atricle\">金融安全风险管控</a>\"、<a href=\"https://fcon.infoq.cn/2023/shanghai/track/1589?utm_source=infoqweb&amp;utm_medium=atricle\">数据要素流通与数据合规</a>\"等专题进行交流。</p><p></p><p>FCon 上海 2023，相约 11 月！现在购票，前 100 人可享 5 折特惠购票，咨询购票请联系：13269078023（微信同手机号）。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/a8/a8ec7f7fb25c7949931b2b8a5deffddd.png\" /></p><p></p>",
    "publish_time": "2023-09-01 15:14:55",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "国外20家大型科技公司薪资揭秘",
    "url": "https://www.infoq.cn/article/y55jfEuDRXvWTWYpHbMo",
    "summary": "<p>虽然美国许多大型科技公司今年早些时候都经历了裁员，但随着它们取得了令人印象深刻的增长，这些公司正卷土重来。</p><p>&nbsp;</p><p>今年3月，美国计算机行业协会（CompTIA）在<a href=\"https://www.cyberstates.org/\">报告</a>\"中指出，未来10年，科技行业就业岗位的预计增长率几乎是全国就业岗位增长率的两倍。按照这份报告的说法，今年将净增27万个科技岗位。</p><p>&nbsp;</p><p>当公司通过H-1B签证项目雇佣外国员工时，需要披露包括工资（或者在某些情况下，披露工资范围）在内的信息，这使得我们可以了解到，这些科技巨头愿意为招揽人才支付多少薪水。</p><p>&nbsp;</p><p>因此，为了了解该行业目前的薪酬情况，Insider分析了美国外籍劳工认证办公室（Office of Foreign Labor Certification）披露的<a href=\"https://www.foreignlaborcert.doleta.gov/performancedata.cfm\">关于永久和临时外籍员工的数据</a>\"，以便了解这些公司为工程师、设计师和销售人员等关键职位支付的薪酬。</p><p>&nbsp;</p><p>当你看完这些行业数据后，可以再看一下<a href=\"https://www.businessinsider.com/salary-database-google-goldman-amazon-how-much-top-jobs-pay-2021-7?r=bigtech-salary-lp\">Insider网站的可搜索数据库</a>\"，里面有250多家公司的25万多条薪酬数据，这样你就知道自己应该拿多少工资了。</p><p>&nbsp;</p><p></p><h2>谷歌的工程师可以挣到30多万美元</h2><p></p><p></p><p>谷歌经常被说成是最好的工作场所之一，它也有着可以匹配这种说法的薪酬。</p><p>&nbsp;</p><p>签证申请数据显示，有一名软件工程师的年薪为32.5万美元，而一名高级副总裁最近获得了100万美元的年薪。根据泄漏的薪资数据，有一名软件工程师的薪酬为71.8万美元，而一名工程经理的薪酬为40万美元。点击<a href=\"https://www.businessinsider.com/google-salaries-1-million-see-what-engineers-other-staff-make-2022-9\">这里</a>\"查看谷歌其他职位的工资。&nbsp;<a href=\"https://www.businessinsider.com/google-salaries-leaked-data-employees-engineers-sales-cloud-2023-7\">这里</a>\"有一份根据泄露的数据整理而成的谷歌员工的工资、股权和奖金。</p><p>&nbsp;</p><p>该公司的云业务一直在积极扩充员工队伍，<a href=\"https://www.businessinsider.com/alphabet-earnings-analysts-google-cloud-2021-2?r=bigtech-salary-lp\">试图赶上规模更大的云计算竞争对手</a>\"亚马逊云科技（Amazon Web Services）和微软Azure。点击<a href=\"https://www.businessinsider.com/google-cloud-pay-engineers-salespeople-salary-data-2022-3\">这里</a>\"了解谷歌云支付给美国工程师、经理等的薪水。</p><p>&nbsp;</p><p></p><h2>亚马逊的高级软件开发经理可以赚34万美元</h2><p></p><p></p><p><a href=\"https://www.businessinsider.com/amazon-maverick-initiative-generative-ai-security-2023-8\">亚马逊</a>\"还在继续招聘技术和业务人才，以支持其电子商务和占主导地位的云计算业务。但最近，该公司要求大多数员工返回办公室或搬到距离团队最近的办公室，这使得RTO异常变得极为少见。</p><p>&nbsp;</p><p>Insider查阅了亚马逊2022年的H-1B签证申请数据，从中可以看到该公司向软件开发人员、数据科学家、营销人员、销售人员、业务分析师等支付的薪酬。最资深的软件开发工程师可以赚到近30万美元，而高级软件开发经理可以赚到34万美元。</p><p>&nbsp;</p><p>了解详情请点击<a href=\"https://www.businessinsider.com/amazon-salaries-pays-engineers-data-scientists-2023-3\">这里</a>\"。</p><p>&nbsp;</p><p></p><h2>亚马逊的云软件工程师可以赚到26万多美元</h2><p></p><p></p><p>亚马逊的云计算部门目前<a href=\"https://www.businessinsider.com/adam-selipsky-new-amazon-web-services-ceo-has-one-job-2021-3?r=bigtech-salary-lp\">由Adam Selipsky负责</a>\"，该部门<a href=\"https://www.amazon.jobs/en/business_categories/amazon-web-services?r=bigtech-salary-lp\">仍在继续招聘技术和业务人才</a>\"，以支撑<a href=\"https://www.businessinsider.com/amazon-aws-microsoft-google-cloud-earnings-digital-transformation-growth-2021-4?r=bigtech-salary-lp\">其占主导地位的云计算业务</a>\"。</p><p>&nbsp;</p><p>Insider查阅了亚马逊云计算部门2022年的H-1B签证申请数据，从中可以看出该部门向软件开发人员、数据科学家、营销人员、销售人员、业务分析师等支付的薪酬。根据这些数据，收入最高的员工其基本工资可达26.15万美元。</p><p>&nbsp;</p><p>了解详情请点击<a href=\"https://www.businessinsider.com/aws-salaries-what-it-pays-engineers-analysts-and-other-workers-2023-5\">这里</a>\"。</p><p>&nbsp;</p><p></p><h2>苹果可以为高级主管职位支付40万美元</h2><p></p><p></p><p>2022年9月，<a href=\"https://www.businessinsider.com/category/apple\">苹果公司</a>\"又度过了成功的一年，<a href=\"https://www.businessinsider.com/guides/tech/best-iphone\">iPhone</a>\"、iPad、Mac以及其他设备和服务的销售收入达到3943亿美元。</p><p>&nbsp;</p><p>去年，苹果公司成为第一家<a href=\"https://www.businessinsider.com/apple-3-trillion-stock-market-analysis-investing-outlook-bulls-bears-2022-1\">市值达到3万亿美元</a>\"的公司，此前它也是第一家<a href=\"https://www.businessinsider.com/apple-1-trillion-company-stock-2018-8\">市值达到1万亿美元</a>\"和<a href=\"https://www.businessinsider.com/apple-2-trillion-company-market-value-stock-powerful-iphone-ecosystem-2020-8\">2万亿美元的公司</a>\"。苹果公司正在引入一批持有签证的海外员工来帮助其发展。</p><p>&nbsp;</p><p>在2022年第二季度的工作签证申请数据中，年薪最高的是一名高级主管，达41.5万美元.</p><p>&nbsp;</p><p>从<a href=\"https://www.businessinsider.com/see-how-much-apple-pays-engineers-analysts-and-thousands-others-2022-9\">这里</a>\"可以查看苹果公司为软件开发人员、电气工程师、计算机和信息系统经理以及统计学家等职位支付的工资。</p><p>&nbsp;</p><p>苹果的广告业务名声在外，其广泛的营销努力是公司成功不可或缺的一部分。这家iPhone制造商经常因其<a href=\"https://www.businessinsider.com/apple-history-through-advertising-40-years-anniversary-2017-2#1994-before-after-11?r=bigtech-salary-lp\">电影般的宣传活动</a>\"而受到关注。该公司为许多高薪的营销岗位提供了签证担保。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/tech-marketing-salaries-facebook-google-amazon-twitter-microsoft-uber-airbnb-2020-8?r=bigtech-salary-lp\">这里</a>\"查看苹果和其他科技巨头（包括Airbnb和Facebook）为广告和营销相关的职位提供的薪酬。</p><p>&nbsp;</p><p></p><h2>戴尔大多数员工的薪资都在6位数范围内——当然也有一些例外</h2><p></p><p>&nbsp;</p><p>疫情期间，<a href=\"https://www.bloomberg.com/news/articles/2020-11-24/hp-reports-sales-profit-that-top-estimates-on-pandemic-pc-surge\">硬件需求增加</a>\"，使得戴尔等公司在供应链陷入困境的情况下仍然实现了<a href=\"https://www.yahoo.com/now/dell-q2-earnings-beat-revenues-163504720.html\">创纪录的盈利</a>\"。得益于公司的发展，有些员工获得了近20万美元的收入。</p><p>&nbsp;</p><p>虽然高级职位往往是收入最高的职位，但Insider在对戴尔381名获批H-1B签证的员工分析时发现，德克萨斯州软件工程部门的一名技术人员的收入达到了19.8083万美元。</p><p>&nbsp;</p><p>这达到了最高薪酬段，但许多其他职位，包括工程、分析师和销售职位，至少也能挣到六位数的工资——也有一些例外，如一些商业和销售分析师。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/dell-salaries-compensation-how-much-dell-pays-engineers-analysts-salespeople-2021-10\">这里</a>\"查看戴尔为美国的工程师、分析师、产品管理和销售职位支付的薪酬。</p><p>&nbsp;</p><p></p><h2>DoorDash在工程和销售领域的高级职位年薪超过25万美元</h2><p></p><p></p><p>DoorDash的服务已经成为全国各地家庭的主要服务。该公司正在进入食品杂货快速配送领域，并向海外扩张，它一直在花钱吸引合适的员工，以满足公司发展的需要。</p><p>&nbsp;</p><p>根据Insider汇编的薪酬数据，DoorDash的软件工程师年薪可达24.5多万美元。计算机和信息系统经理的年薪为26万美元。技术和业务职位的高薪反映了该公司在与大型竞争对手竞争时的人才需求。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/how-much-doordash-pays-engineers-product-managers-and-others-2022-6\">这里</a>\"查看DoorDash的其他职位和薪水。</p><p>&nbsp;</p><p></p><h2>惠普的软件设计人员年薪可达23.2259万</h2><p></p><p></p><p>惠普（Hewlett Packard Enterprise）接下来会与<a href=\"https://www.businessinsider.com/pensando-hpe-distributed-services-switch-john-chambers-cisco-2021-10\">网络初创公司Pensando</a>\"合作开发硬件，帮助企业就近处理数据。</p><p>&nbsp;</p><p>为此，该公司在员工身上投入了大量的资金。Insider分析了惠普员工已获批的签证，发现加州、北卡罗来纳州和德克萨斯州的软件员工收入一直处于16万美元至23.2259万美元之间。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/hpe-salaries-hewlett-packard-enterprise-engineers-managers-salespeople-cloud-2021-10\">这里</a>\"查看惠普为工程师、经理和销售人员提供的完整薪酬列表。</p><p>&nbsp;</p><p></p><h2>IBM员工的基本工资可达33.5美元</h2><p></p><p></p><p>在首席执行官<a href=\"https://www.businessinsider.com/ibm-ceo-arvind-krishna-reactions-positive-2020-1?r=bigtech-salary-lp\">Arvind Krishna</a>\"的领导下，IBM正设法自我重塑，以适应云计算时代的发展要求。目前，那是一个由<a href=\"https://www.businessinsider.com/amazon-aws-microsoft-google-cloud-earnings-digital-transformation-growth-2021-4?r=bigtech-salary-lp\">亚马逊、微软、阿里巴巴和谷歌</a>\"所主导的时代。</p><p>&nbsp;</p><p>2019年，IBM以340亿美元的价格收购了开源软件公司红帽（Red Hat），这是<a href=\"https://www.businessinsider.com/ibm-rob-thomas-turbonomics-acquisition-ai-hybrid-cloud-aiops-2021-4?r=bigtech-salary-lp\">该公司在混合云和人工智能上押下重注</a>\"的一个决定性时刻。IBM的重塑包括在<a href=\"https://www.businessinsider.com/ibm-ceo-on-return-to-work-and-hybrid-remote-plans-think-2021-5?r=bigtech-salary-lp\">已有的35万多名员工</a>\"的基础上，增加云、混合云、人工智能以及战略、咨询和业务分析等领域的工程人才。</p><p>&nbsp;</p><p>Insider分析了IBM在2021年申请的241份H-1B签证，从中可以了解到该公司为工程师、商业分析师和顾问、数字策略师等提供的薪酬。数据显示，薪酬最高的IBM员工基本工资可达33.5万美元。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/ibm-salaries-engineers-business-analysts-digital-strategists-2021-6?r=bigtech-salary-lp\">这里</a>\"可以查看该公司所有的职位和薪酬。</p><p>&nbsp;</p><p></p><h2>Instacart工程经理年薪超过20万美元</h2><p></p><p></p><p>在首席执行官Fidji Simo的领导下，Instacart正加倍努力与杂货店合作，提供配送服务。</p><p>&nbsp;</p><p>在Instacart，工程经理的年薪是24万美元；高级软件工程师的年薪高达19万美元。在业务领域，一名客户经理一年可以赚16万美元。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/how-much-instacart-pays-engineers-data-scientists-product-managers-2021-12\">这里</a>\"查看Instacart内部整理的薪酬数据。</p><p>&nbsp;</p><p></p><h2>英特尔的工程经理年薪超过26万美元</h2><p></p><p></p><p>英特尔正在努力应对<a href=\"https://markets.businessinsider.com/news/stocks/intel-stock-outlook-3-reasons-bearish-ceo-semiconductor-plan-bofa-2021-4-1030339632?r=bigtech-salary-lp\">收入增长放缓</a>\"、利润缩水以及来自台积电（Taiwan Semiconductor）、AMD、英伟达（Nvidia）等公司日益激烈的竞争。</p><p>&nbsp;</p><p>此外，他们还需要应对半导体短缺的问题，而苹果等大客户正在设计自己的芯片。</p><p>&nbsp;</p><p>为此，英特尔需要依赖于科学家、研究人员、管理人员、营销人员以及不同类型的软件和硬件工程师。</p><p>&nbsp;</p><p>从2022年第二季度的工作签证申请数据中可以看出，收入最高的是来自加州的两名工程经理，他们的年薪为26.3952万美元。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/intel-salaries-compensation-engineers-analysts-2022-9\">这里</a>\"查看我们根据英特尔公司提交的签证申请数据整理而成的部分薪酬数据。</p><p>&nbsp;</p><p></p><h2>Lyft的工程职位年薪在12.2万到18.91万美元之间</h2><p></p><p></p><p>按收入计算，Lyft可能是排名第二的拼车公司，但其员工工资与其头号竞争对手优步（Uber）不相上下。</p><p>&nbsp;</p><p>Lyft的工程师——根据专业的不同——年薪在12.2万美元到18.91万美元之间，而工程经理的年薪为23.5654万美元。这些平均值是根据Insider对美国外国劳工认证办公室（Office of Foreign Labor Certification）薪资数据的分析得出的。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/how-much-lyft-pays-employees-software-engineers-analysts-salaries-2021-10\">这里</a>\"查看Lyft为18个科技和非科技岗位的员工支付的薪酬。&nbsp;</p><p></p><h2>Meta软件工程师的收入为29万美元</h2><p></p><p></p><p>Meta的前身是Facebook，其员工的收入一直都在6位数。软件工程师和工程经理的年薪最高可达29万美元。产品经理的年薪则高达28万美元。</p><p>&nbsp;</p><p>虽然在过去几年里，Meta支持远程办公，但最近该公司制定了更严格的政策，<a href=\"https://www.businessinsider.com/all-rules-of-metas-new-aggressive-strict-rto-mandate-2023-8\">要求员工重返办公室</a>\"。如果员工每周去办公室的次数不足三次，则可能会<a href=\"https://www.businessinsider.com/meta-rto-policy-updates-stricter-mandate-2023-8\">丢掉工作</a>\"。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/how-much-facebook-pays-engineers-analysts-managers-and-more-roles-2022-6\">这里</a>\"查看Meta最新的薪酬数据。</p><p>&nbsp;</p><p></p><h2>微软收入最高的职位包括软件工程师、销售经理和研究人员</h2><p></p><p>我们分析了微软2022年的有效外籍员工签证数据，从中找出了薪酬最高的职位，并提供了每个职位的薪资范围。我们发现，商业策划的最高年薪是31万美元。</p><p>&nbsp;</p><p>从<a href=\"https://www.businessinsider.com/leaked-microsoft-polls-show-workers-feel-worse-about-culture-leaders-2023-7\">Insider获得的微软内部调查数据</a>\"可以看出，今年7月，48%的员工表示，即使能在另一家公司找到一份薪酬和福利类似的职位，他们也会留在微软。这一比例低于1月份的68%。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/microsoft-salaries-revealed-engineers-employees-layoffs-2023-3\">这里</a>\"查看微软提供的职位和薪酬的完整列表，其中包括云解决方案架构师、硅工程师和软件工程师等职位。</p><p>&nbsp;</p><p></p><h2>Salesforce的软件工程师年薪超过30万美元</h2><p></p><p></p><p>Salesforce开发云软件来帮助企业管理客户。</p><p>&nbsp;</p><p>Insider分析了Salesforce在2022年申请的H-1B签证，以了解该公司在工程、数据分析和产品管理等领域向员工支付的薪酬。数据显示，软件工程师的年薪可达30多万美元。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/salesforce-salaries-engineers-employees-layoffs-2023-3\">这里</a>\"查看Salesforce提供的职位和薪酬的完整列表。</p><p>&nbsp;</p><p></p><h2>Snap提供的基本工资从5万美元到50万美元不等</h2><p></p><p></p><p>Snapchat的母公司Snap在人工智能、增强现实和短视频等领域可谓雄心勃勃。</p><p>&nbsp;</p><p>根据Business Insider对其H-1B签证申请数据的分析，2021年，Snap为各种职位提供的基本年薪从5万美元到50万美元不等。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/how-much-snap-pays-engineers-product-managers-researchers-and-more-2022-4\">这里</a>\"查看Snap提供的职位和薪酬的完整列表。</p><p></p><h2>SpaceX的工资一般，但它会从其他方面补偿员工</h2><p></p><p></p><p>埃隆·马斯克的火箭公司SpaceX素以工作时间长和工资“一般”而闻名。不过，该公司会通过其他方式补偿员工。</p><p>&nbsp;</p><p><a href=\"https://www.businessinsider.com/spacex-elon-musk\">SpaceX</a>\"的一位外部投资者告诉Insider，该公司有一种为员工提供资产流动性的聪明方法。他说，SpaceX的金融系统——《洛杉矶时报》曾将其描述为“内部股票市场”——不仅帮助员工获得高于工资的报酬，让他们努力工作，而且还让SpaceX能够精确管理拥有公司股份的员工。</p><p>&nbsp;</p><p>想要了解更多关于SpaceX员工如何获得公司股票的信息，请点击<a href=\"https://www.businessinsider.com/spacex-stock-options-internal-market-tender-offer-2020-1\">这里</a>\"。</p><p>&nbsp;</p><p></p><h2>特斯拉的软件工程师年薪为17.5万多美元</h2><p></p><p></p><p>特斯拉一直都是电动汽车制造领域的领导者。最近，由于在电动汽车市场面临的竞争愈加激烈，特斯拉下调了Model S和Model X的价格。该公司还凭借赛博卡车（<a href=\"https://www.businessinsider.com/tesla-truck-cybertruck\">Cybertruck</a>\"）进入了电动皮卡领域。</p><p>&nbsp;</p><p>根据2020年底至2021年中期的签证申请数据，软件开发工程师的年薪超过17.5万美元。</p><p>&nbsp;</p><p><a href=\"https://www.businessinsider.com/how-much-tesla-pays-salaries-engineers-managers-and-analysts-2021-11\">这里</a>\"是埃隆·马斯克支付给特斯拉工程师、经理和分析师的薪酬。</p><p>&nbsp;</p><p></p><h2>TikTok工程经理的实得工资可达43.8万美元</h2><p></p><p></p><p>根据Insider对已获批外国劳工认证申请数据的分析，ByteDance及其子公司、人气飙升的社交媒体应用TikTok，从2020年底到2022年底，向员工支付了每小时29美元的薪水，而年薪可达43.8万美元。</p><p>&nbsp;</p><p>技术职位年薪偏高，工程经理的年薪最高可达43.8万美元。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/tiktok-bytedance-us-salaries-for-jobs-careers-in-product-engineering-2020-12\">这里</a>\"查看TikTok和ByteDance为产品、工程、数据科学、研究、商业化及其他职位提供的薪酬。</p><p>&nbsp;</p><p></p><h2>优步在与硅谷最大的公司竞争，从它的员工薪酬就可以看出来</h2><p></p><p></p><p>尽管近年来优步经历了几轮裁员，但其许多全职职位的薪酬与<a href=\"https://www.businessinsider.com/how-much-big-tech-faang-companies-pay-salaries-google-amazon-2020-6?r=bigtech-salary-lp\">硅谷最大的科技公司</a>\"相比也仍然很有竞争力。</p><p>&nbsp;</p><p>高级工程师的年薪可达34.5万美元，而数据科学家和高级产品经理的年薪可达17万多美元，其中不包括任何股权或奖金。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/see-how-much-uber-pays-engineers-developers-and-hundreds-others-2022-10\">这里</a>\"查看优步提供的职位和薪酬的完整列表。</p><p>&nbsp;</p><p>X公司（之前的Twitter）的工程师基本工资可达30多万美元</p><p></p><p></p><p>亿万富翁埃隆·马斯克于2022年底接管了推特。此后，他将公司改名为X，并将首席执行官的职位交给了前NBC环球传媒高管Linda Yaccarino。X公司一半以上的员工被解雇或离开了公司。目前，该公司正在重新招聘。</p><p>&nbsp;</p><p>X的大部分收入来自广告，但自从马斯克接管后，许多广告客户离开了。马斯克希望将X重塑为一款“万能应用”，并提供支付和长视频功能。不过，它也面临着来自Meta等公司的竞争，该公司最近推出了一个名为<a href=\"https://www.businessinsider.com/linda-yaccarino-says-x-keeping-eye-on-everything-threads-does-2023-8\">Threads</a>\"的应用，成了X的直接竞争对手。</p><p>&nbsp;</p><p>根据2022年第二季度的签证申请数据，当时Twitter还是一家上市公司，工程师的基本工资可达30多万美元。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/guide-to-how-much-twitter-pays-salaried-workers-2022-10\">这里</a>\"查看这家社交媒体公司的分析师、经理和其他员工拿多少薪水。</p><p>&nbsp;</p><p></p><h2>OpenAI表示，研发工程师的基本薪酬有望达到20至37万美元</h2><p></p><p>&nbsp;</p><p>很少有行业能像人工智能和大数据行业发展的那么迅猛，OpenAI的ChatGPT聊天机器人引发了人们对生成式人工智能的大量需求。<a href=\"https://files.pitchbook.com/website/files/pdf/2023_Vertical_Snapshot_Generative_AI_1402.pdf\">据PitchBook估计</a>\"，到2023年，生成式人工智能市场将达到426亿美元，到2026年将达到980亿美元。所有这些投资将推动就业市场的爆炸性增长。</p><p>&nbsp;</p><p>Insider分析了来自公司招聘启事和Levels.fyi（这是一个开放的数据库，工程师们可以在这里提交他们的薪酬信息，以及通过与业内人士交谈收集到的见解）的薪酬数据，以了解科技公司在大数据和机器学习领域向工程师、研究人员和其他专业人士支付的薪酬。</p><p>&nbsp;</p><p>点击<a href=\"https://www.businessinsider.com/ai-engineer-developer-salary-jobs-2023-6\">这里</a>\"查看谷歌、微软、OpenAI和英伟达等公司人工智能职位的薪资数据。</p><p></p><p></p><p>原文链接：</p><p></p><p><a href=\"https://www.businessinsider.com/big-tech-salaries-what-you-make-google-apple-amazon-meta-ibm\">https://www.businessinsider.com/big-tech-salaries-what-you-make-google-apple-amazon-meta-ibm</a>\"</p>",
    "publish_time": "2023-09-01 15:29:09",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "用Rust拯救60岁老程序员：用Ada写了几十年的飞机程序，现在终于可以改用Rust了",
    "url": "https://www.infoq.cn/article/GjkPGctetjh2Yv9s6Lfe",
    "summary": "<p></p><blockquote>针对具有更高安全需求的行业，AdaCore表示将为其Rust fork提供长期支持。</blockquote><p></p><p>&nbsp;</p><p>对于安全问题较为重视的行业如今都对Rust语言抱有兴趣，就连微软最近也承认Rust可能是安全系统编程的最佳选项。但对于汽车、航空航天及国防等其他行业来说，开源语言那快速变化的特性又总会让人望而却步。</p><p>&nbsp;</p><p>AdaCore公司专门为这些比较特殊的行业提供软件开发与验证工具。AdaCore最初诞生时专门支持Ada语言——这是一种由美国国防部于上世纪80年代初开发的编程语言，用以替代更早那些复杂且极易出错的语言。</p><p>&nbsp;</p><p>AdaCore公司产品经理兼技术策略师Tony Aiello表示，“从意愿上讲，人们其实越来越渴望把Rust引入那些以安全认证为重点的长期项目当中。我们感受到了这波趋势，也从客户那里了解到不少需求。他们目前的主要顾虑是当下的开源工具发展太快，而能够从开源社区处获取到的专业支持还不完善，导致他们迟迟不敢在Rust上迈出这重要的一步。”</p><p>&nbsp;</p><p>Aiello这里说的顾虑，是指客户担心开源选项不能像传统服务商那样在几天内修复bug，或者帮助企业解决工具链中可能出现的深层技术问题。他承认，大多数开源项目都无法在几天之内响应上报的问题。</p><p>&nbsp;</p><p>“但这种快速响应能力在航空航天和国防领域已经非常重要，特别是考虑到此类系统都有很长的使用寿命。我们面对的往往是飞行了几十年的飞机，这些机体上搭载的软件栈也大多稳定运行了几十年。”</p><p>&nbsp;</p><p>作为另外一种需要长期支持的应用方向，人们对于Rust在嵌入式设备上的表现也抱有兴趣。</p><p>“很多人都吵着要使用Rust，对这种新的内存安全语言充满热情。即使是在航空航天和国防等具有严格安全要求的领域，这样一份对于工作的热情和冲劲也同样难能可贵。”</p><p>&nbsp;</p><p></p><h2>古老的Ada编程语言</h2><p></p><p>&nbsp;</p><p>Ada源于美国军方的一个计划，旨在整合美军系统中运行着上百种不同的程序设计语言编写的程序。其名是为了纪念埃达·洛夫莱斯（Ada Lovelace）而使用Ada命名。</p><p>&nbsp;</p><p>也就是说Ada早期是美国军方的专用计算机语言，后来逐渐被应用到商业航空、铁路运输、科学航天器等领域。在Ada文档中的最佳案例上，其中有一个就是波音 777，<a href=\"https://www.infoq.cn/article/udffxh75apuoadx*cv3b\">该机型的软件 99%</a>\"是用 Ada 完成，其中制动系统完全用 Ada 来完成。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/d3/d3944a19ec0cfd4de92aac1bc87c9d04.jpeg\" /></p><p></p><p>&nbsp;</p><p>Ada虽然在军事和航空领域应用广泛，但在商业领域使用场景有限。世界公认的Ada专家Bruce Krell曾言，自1983年Ada问世以来，他始终致力于Ada编程，专注于国防和航空领域。然而，自1994年他离开航空航天领域后，再未有机会使用Ada。因为他遇到的所有商业工作都以C++、Java和C#完成。他坦言，初入商业世界时，他感受到了一种文化冲击，对C/C++和零软件工程的综合依赖犹如回到了恐龙时代。</p><p>&nbsp;</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/0f/0f8fd104e7801986658b2742b6e2da24.jpeg\" /></p><p></p><p>&nbsp;</p><p>至于具体有哪些项目使用了Ada，从事Ada编程和教学30年，白发苍苍的Jim Rogers在Quora上回复道，如你所见Ada 已被用于构建商用、民用飞机、军用飞机、卫星及其运载火箭的软件。F-22战斗机的航电软件全部用Ada编写。“以前有一位老教授维护了一份清单，但他在2014年退休了，这份清单就从此再也没人能维护了。”</p><p></p><h2>从Ada到Rust</h2><p></p><p>AdaCore综合计算各类操作系统和硬件之间的组合，AdaCore现可支持50多种不同平台。</p><p>&nbsp;</p><p>Ada的语法源自Pascal，而且跟Rust也有很多共同点，特别是内存安全。二者都属于强类型语言，就是说会严格限定存放在变量当中的数据类型，由此防止因类型不匹配而导致的错误。</p><p>&nbsp;</p><p>Aiello还补充道，Rust的类型强度高于C甚至C++。与Rust一样，Ada也是一种静态类型语言，就是说会在编译时（而非运行时）检查数据类型，从而防止错误的发生。</p><p>&nbsp;</p><p>GNAT Pro是AdaCore打造的开发平台，其中包含编译器、链接器、调试器和语言运行时。Aiello表示，GNAT Pro订阅用户可以使用Rust语言开发出可安全认证的嵌入式应用程序，并享受到AdaCore提供的技术支持。</p><p>&nbsp;</p><p>Aiello在采访中解释道，“我们提供所有服务选项并随附保障承诺，这跟大家以往的开源工具链使用体验完全不同。在实践当中，专业开发团队一旦在使用我们的工具时发现bug，则可立即向我们提交工单，AdaCore会尽快为您完成修复。”</p><p></p><h2>打造Rust&nbsp;Fork</h2><p></p><p>AdaCore之所以选择分叉Rust，是为了更好地提供长期支持并实现向下兼容性。AdaCore在其中采用了Rust编译器、build加包管理器（Cargo），以及面向x86_64 Linux&nbsp;及各Linux交叉目标的调试器（gdb）。该公司表示，GNAT Pro for Rust 25计划于明年10月正式推出，届时将提供与gprbuild的全面集成，同时带来先进的Ada-Rust双向绑定以支持更多平台。</p><p>&nbsp;</p><p>“从某种意义上说，这将是一项相当独特的服务，也把我们与典型的开源软件市场区分开来。在典型的开源市场中，用户往往不清楚旧版本的编译器会出哪些问题。一旦在旧版本中发现bug，问题可能长期得不到修复。因为每位贡献者都在继续前进、展望未来，所以对以往的缺陷并不是特别关注。这在某些开发环境中有其合理性，但却不适合那些需要长生命周期和稳定认证的应用场景。”</p><p>&nbsp;</p><p>AdaCore还通过GNAT Pro Assurance提供Rust技术支持。只要客户需要，这项计划就会持续通过分支为整个工具链提供长效支持。</p><p>&nbsp;</p><p>为了支持这套Rust fork，AdaCore还会定期从更新流中提取反馈，不断听取客户对于功能的具体需求，确定将哪些内容整合到其版本当中。</p><p>&nbsp;</p><p>Aiello总结称，“我们会获取整个代码仓库，为其创建副本，并以此为基础持续更新多个分支。当我们将Rust移植到新平台时，也会全面推动支持包的上游化，保证移植成果能够反哺开源社区。”</p><p>&nbsp;</p><p>对比Rust，Ada无疑可以算作一种“上古”编程语言。虽然Ada不会消亡，但年轻人也并不愿意去学它。如果Ada的应用领域从此逐渐能用Rust语言代替，看起来并不是坏事。</p><p>&nbsp;</p><p>使用Ada的程序员，普遍也都不年轻了。但那些年老的Ada程序员看到 AdaCore 支持Rust，心中却五味杂陈，跟我们想象中的欢欣鼓舞不太相同，他们实际上很担心Ada的覆盖范围会进一步收窄。</p><p>&nbsp;</p><p>一位退休的Ada程序员表示很担忧Ada从此会被忽视。“一个典型的例子：当 Rational 在 80 年代中期出现时，他们击败了其他 Ada 开发环境。然后他们开始支持其他语言（都是出于良好的商业原因），对Ada 支持开始减弱，最终，他们停止发展他们的 IDE， Rational Ada 也交给其他人了。”</p><p>&nbsp;</p><p>另一位Ada程序员也对此表示赞同，他甚至预测不久后AdaCore会更名，以淡化 Ada 的重要性。“他们之前也支持多语言，比如C和和 C++ ，但（据我所知）他们从未支持 C 和 C++ 的进步（即对 C 和 C++的发展做出贡献），但现在他们对 Rust 的支持程度显然不一样。”</p><p>&nbsp;</p><p>参考链接：</p><p><a href=\"https://github.com/AdaCore/gprbuild\">https://github.com/AdaCore/gprbuild</a>\"</p><p><a href=\"https://en.wikipedia.org/wiki/Ada_(programming_language)\">https://en.wikipedia.org/wiki/Ada_(programming_language)</a>\"</p><p><a href=\"https://thenewstack.io/how-adacores-rust-fork-may-make-the-language-more-adoptable/\">https://thenewstack.io/how-adacores-rust-fork-may-make-the-language-more-adoptable/</a>\"</p><p><a href=\"http://archive.adaic.com/projects/atwork/boeing.html\">http://archive.adaic.com/projects/atwork/boeing.html</a>\"</p><p><a href=\"https://www.quora.com/Is-it-possible-to-write-code-on-a-plane-with-Ada-programming-language\">https://www.quora.com/Is-it-possible-to-write-code-on-a-plane-with-Ada-programming-language</a>\"</p><p><a href=\"https://www.reddit.com/r/ada/comments/10xvmka/adacore_joins_the_rust_foundation/\">https://www.reddit.com/r/ada/comments/10xvmka/adacore_joins_the_rust_foundation/</a>\"</p>",
    "publish_time": "2023-09-01 16:46:15",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "比Spark快9倍，超越ClickHouse，在大语言模型时代构建全新数据平台",
    "url": "https://www.infoq.cn/article/YkoAO2bNtwRX7usWIoPG",
    "summary": "<p>采访嘉宾 | 关涛</p><p>编辑 | Tina</p><p>&nbsp;</p><p>人工智能的迅速发展正在改变着我们的世界，对于大数据企业来说更是如此。</p><p>&nbsp;</p><p>在大语言模型的引领下，数据平台领军企业Databricks和Snowflake的未来正在被重新书写。这两家企业在不久前的发布会上强调了大语言模型和AI能力的重要性，试图通过一体化的方式满足用户的数据处理需求。与此同时，随着大语言模型的引入，一般企业面临着一个新的挑战，即如何在现有的数据平台中充分发挥LLM的潜力。在这一大趋势的驱动下，传统的数据平台需要进行相应的补充和优化，而云器科技数据平台Lakehouse也在这个时机崭露头角。</p><p>&nbsp;</p><p>云器科技的一体化平台，在数据分析部分，通过引入新的计算范式——增量计算，统一了流计算、批处理和交互分析，不同分析场景下，云器的性能比批处理引擎Spark快了九倍，同时超越交互分析产品ClickHouse。在AI支持部分，平台同时支持半/非结构化数据存储以及对应的AIOps，做到BI+AI一体化。</p><p>&nbsp;</p><p>我们与关涛进行了深入的交谈，探讨了Databricks和Snowflake等知名平台的演进，同时聚焦于计算平台的变革与发展。在人工智能成为一等公民的背景下，他如何看待LLM对大数据企业的影响和改变？数据的管理和处理方式是否已经发生了根本性的变化？作为数据库和计算平台领域的权威，他的深刻见解将引领我们深入思考，探索计算平台未来的一些可能性。</p><p>&nbsp;</p><p></p><h4>采访嘉宾：</h4><p></p><p>关涛（Tony），云器科技联合创始人/CTO，分布式系统和大数据平台领域专家。前阿里云计算平台事业部研究员，阿里巴巴通用计算平台 MaxCompute、Dataworks 负责人，层负责阿里巴巴主线大数据平台。前阿里巴巴和蚂蚁集团技术委员会计算平台领域组长、阿里云架构组大数据组组长。回国加入阿里云之前，在微软云计算和企业事业部工作 9 年，主持和参与开发了包括 Azure Datalake，Cosmos/Scope，Kirin 在内的多套超大规模分布式存储和计算平台。并著有多篇国内外会议论文和专利。</p><p>&nbsp;</p><p>关涛是2023 QCon北京“<a href=\"https://qcon.infoq.cn/202309/beijing/track/1557\">从 BI 到 BI+AI，新计算范式下的大数据平台</a>\"”专题出品人，QCon北京将于2023年9月3日-9月5日在北京·富力万丽酒店举行。</p><p>&nbsp;</p><p></p><h2>AI给大数据行业带来哪些影响？</h2><p></p><p>&nbsp;</p><p>InfoQ：<a href=\"https://mp.weixin.qq.com/s/fKHQyThOqxY8nyADLfDcCw\">您在21年的采访中</a>\"给出了数据平台领域一系列趋势预测，比如提到“湖仓一体是一个新兴的方向，但有望成为业界新标准“。两年之后回头看，当年哪些预测已经实现了？ 哪些还没有？为什么？</p><p>&nbsp;</p><p>关涛: 两年前，我们从四个方向上做了一个趋势预测：离线到实时的全频谱；湖仓一体新架构；IoT数据成为新增长点；AI将成为数据库、数据平台的一等公民。</p><p>&nbsp;</p><p>现在我们可以来看看当时的预测，哪些方向相对是准确的。首先，离线到实时的全频谱，是比较明确的方向（这也是云器科技的方向）。当下无论是存储领域的Delta、Hudi、Iceberg，还是实时化数据处理领域的Databricks、Snowflake，都在追求这一方向，以支持更全面覆盖的流批交互能力，而不是聚焦在单一方向的优化上。</p><p>&nbsp;</p><p>其次是湖仓一体。两年前可能还是探索性方向，但如今国内已有更多实践将数据湖和数据库优势结合起来，这在一体化方向上得到了认可，特别是随着人工智能的兴起，数据湖的优点被放大，与数据仓库平起平坐，追求两者的优势已成为一个原则。</p><p>&nbsp;</p><p>然后IoT成为新的热点，我觉得对了一半。随着智能制造和智能汽车的兴起，这些领域的大规模数据正成为新的发展方向，是目前数据产生端最大的增量。但IoT数据采集和处理，目前仍处于早期阶段，毕竟大多数企业没有部署很多IoT类设备，相关应用也在早期。</p><p>&nbsp;</p><p>最后还有一个很明确的趋势：AI将成为数据库、数据平台的一等公民。在大语言模型爆火之前这个趋势还不够清晰，分析仍然是数据平台最主流的方向。大语言模型出现之后，人们将 BI 和AI视为并列的能力，甚至对AI的潜力期望更高。因此，许多平台都在声称拥有AI支持能力，无论是Snowflake还是Databricks。在不久的将来，所有平台可能会考虑弥补这种能力的不足，例如半结构化数据的存储和向量检索等，这一方向已经很明确。</p><p>&nbsp;</p><p>InfoQ：LLM是目前的热门话题，您认为LLM的到来，能给大数据企业带来哪些改变？</p><p>&nbsp;</p><p>关涛: 大模型给企业带来的改变范围很广。它可以帮助企业取代许多人的工作，例如数据开发、数据调优、数据库管理员（DBA）等。甚至在客服领域，大约百分之七八十的工作已经被机器替代了。许多重复性工作，如基础的预算管理、初级的技术核验，甚至审计和财务工作等，都可以在一定程度上通过大模型辅助完成，从而提升工作效率。</p><p>&nbsp;</p><p>另一个方面，大模型的成功依赖于三个要素：模型、数据和算力。模型目前比较同质化，算力取决于资金支持能力，而数据反而成为至关重要的因素。拥有优质专业的数据能够使模型更加精准。因此，如果某个企业在数据领域具有独特的优势，当大模型时代来临时，它将具备额外的竞争力。</p><p>&nbsp;</p><p>举个例子，之前Bloomberg公司发布了一款名为“BloombergGPT”的大模型，专注于新闻和财经领域。由于在这个领域积累了丰富的数据，其生成的大模型在知识深度和逻辑结构方面更为优越。这使得他们能够为客户提供更有价值的服务，从而获得更多收益。</p><p>&nbsp;</p><p>另外，大模型在交互方面有着出色的表现。我们所谈论的大型模型实际上是语言模型，它最擅长于以自然语言的方式进行交互，你可以用语言提问，它以语言方式回答。大型模型在交互方面可能是其主要应用领域。但在这个领域内，它可以带来很多改变。</p><p>&nbsp;</p><p>所以这个问题的答案，即大模型给企业带来哪些改变，是有三个主要改变。首先，它可以大幅提升效率，可以成为大数据企业的核心战略；第二，如果你拥有优质独特的数据，结合大模型，可以带来额外的核心竞争力。第三，大幅降低使用数据平台的门槛（通过自然语言和数据平台交互），数据平台可以突破原有的限制，开放给所有人，例如高管可能不会写SQL或编程，但通过大模型，可以轻松与系统进行沟通。这种转变可以使企业从只有20%的人能够使用数据平台提升到所有人，效率的提升是巨大的，甚至可以说是颠覆性的。</p><p>&nbsp;</p><p>InfoQ：GPT浪潮到来之后，对于一般企业来讲，要想让企业数据结合LLM并发挥出数据的价值，传统的数据平台最需要补齐的环节是什么？为什么？</p><p>&nbsp;</p><p>关涛：从大的逻辑上来说，需要将AI作为核心功能融入数据平台。以往很多数据平台将分析或BI作为唯一设计目标，现在需要将数据与AI结合，将AI也作为一等公民。这是一个较大的转变。数据平台架构需要进一步升级，同时能扩展BI+AI。</p><p>&nbsp;</p><p>具体而言，首先是存储层面，需要额外支持半结构化和非结构化数据的处理。其次，在数据管理方面，需要支持所谓的“异构”数据管理能力，涵盖非结构化和半结构化数据的统一管理。第三，保持数据的开放性，支持多种引擎对接。</p><p>&nbsp;</p><p>第二个方面是计算层面，需要支持基础的功能，例如针对大型模型的计算。这涉及一些细节技术，如向量存储和向量检索的能力。此外，还涉及到处理非结构化数据，如图像数据的识别和净化数据的打通，以及在计算层面针对大规模的Finetune和向量检索。</p><p>&nbsp;</p><p>最后一点是保持架构的开放性，能够有更好的插件化体系。目前AI链路还在快速演进中，变化很多。企业基础设施需要能保持灵活性。插件化体系本身可以通过UDF、FunctionCompute或者专门的PipelineManagement系统来解决。</p><p>&nbsp;</p><p>特别的，对于LLM，目前针对LLM应用的组件已有很多，比如LangChain、向量数据库、LLM runtime，这些组合可以很容易搭建起来一个端到端LLM服务链路。很多新兴的更易用的LLMOps组件都在涌现，比如<a href=\"https://lapton.ai/\">Lapton.ai</a>\", <a href=\"https://doc.xorbits.cn/user_guide/index.html\">XInference</a>\"。</p><p>&nbsp;</p><p></p><h2>为什么需要一套新的系统？</h2><p></p><p>&nbsp;</p><p>InfoQ：与流行的开源产品Spark/Flink/Clickhouse、以及SaaS化的Snowflake相比，云器具备的技术差异点是什么？</p><p>&nbsp;</p><p>关涛：云器科技Lakehouse是通过基于增量计算范式的一个引擎覆盖批、流、交互三种典型场景，并通过类似Snowflake的SaaS模式给客户提供服务。</p><p>&nbsp;</p><p>题目中的三个开源产品，它们分别代表了数据分析领域三种主流的计算形式，总结为批处理、流处理和交互分析。这三个模式通常组合在一起，形成一个较为完善的数据分析平台。这种组合在开源领域中是一个典型的形式，称之为Lambda架构。</p><p>&nbsp;</p><p>Lambda架构存在架构复杂、数据存储、管理、语义不统一等诸多问题。而云器在技术方面的优势是通过一套系统来打破这种组合式架构，实现数据存储的统一、数据管理的统一、用户语义的统一、开发体验的统一，以及提高效率、降低成本的效果。</p><p>&nbsp;</p><p>与Snowflake的对比，首先是相似之处，我们都是基于SaaS模式提供服务。通过云上的即开即用模式为客户提供服务。与开源模式不同，用户不需要购买硬件、部署和运维。SaaS化的解决方案用户无需担忧这些事务。</p><p>&nbsp;</p><p>与Snowflake的不同之处在于，Snowflake还是更偏数仓，对数据湖的支持相对较弱，主要联邦查询上做了一些工作。云器从设计之初就基于原生Lakehouse的新架构，这种新架构不仅仅适用于数据分析，还支持其他不同的工作负载。另一方面，Snowflake更偏向批处理，交互分析在其次，并且几乎没有流的能力。而云器系则致力于将流处理、批处理、交互分析这三条线都统一起来。</p><p>&nbsp;</p><p>InfoQ：那么云器是重新开发了一套系统吗？</p><p>&nbsp;</p><p>关涛: 对，整个系统都是从零开发的。我们引入了一个新的计算范式，称为增量计算。</p><p>&nbsp;</p><p>一体化是我们第一天就追求的设计方向。通过分析已有的批处理、流计算和交互分析三种计算范式，它们各自有自己的优化方向和设计模式，有不同的存储计算表达，无法彼此取代。具体的差异可以看下面这张表格。</p><p>&nbsp;</p><p>因此，我们提出了第四种新的计算方式，即增量计算。我们希望通过增量计算来统一这三种传统计算模式，最终形成一个一体化的引擎。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/a4/a45a65f575e6000f790a856120a348f0.png\" /></p><p></p><p>&nbsp;</p><p>InfoQ：业界也有基于Flink的增量入湖解决方案？</p><p>&nbsp;</p><p>关涛: 对，Flink是比较早去尝试做一体化的解决方案，并且提出过“流批一体”的口号，目前看落地案例并不太多。这实际上是因为流处理和批处理的计算方式不同，存储系统也不同。</p><p>&nbsp;</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/4a/4ae2ff627bd78ffc65638f603a80ee02.png\" /></p><p></p><p>&nbsp;</p><p>云器的方案，我们通过通用的计算方式来统一流批交互模式，然后我们使用一套通用的存储来支持整个存储层面。这个存储的形态是湖仓一体的增量存储，是一种通用增量存储。它和顶层的计算引擎是一个相互支撑的关系。通用的增量存储不仅仅能为我们之前谈到的支持增量计算的统一数据分析引擎提供服务，还可以支持其他的AI引擎。这就是我们的目标，也是与其他产品的不同之处。</p><p>&nbsp;</p><p>InfoQ：您能更具体的解释一下性能提升的原理吗？</p><p>&nbsp;</p><p>关涛: 首先是基础引擎的能力。当前数据分析引擎架构选型已经比较稳定，比如向量化引擎、完全的列式存储、存算分离的设计、基于代价的优化器，采用了Native的代码等方法。这些都体现在我们的产品中（主要语言为C++）。这些特性保证我们引擎性能达到高水平。</p><p>&nbsp;</p><p>但上述技术，我们认为不算创新，是State of the art的水平，是我们的基础能力。创新来自于下面几方向：</p><p>&nbsp;</p><p>除了这些基础能力之外，我认为刚才提到的增量计算是一个关键方向。通过增量计算，我们在进行计算时可以尝试记住先前已经计算过的部分，而无需再次计算。这些先前计算过的部分往往可以表示为物化视图或者Result Cache。这些物化视图可以在透明的情况下被用户的查询引用。举个例子，当用户发出查询时，如果已经计算过的结果被保留，而且只需计算新增加的部分，这将极大地提升引擎的性能。</p><p>&nbsp;</p><p>此外，我们还拥有一种称为“AI4D”的技术。我们可以通过AI学习的方法优化数据存储和计算。例如，你经常对两张表进行Join操作，这些计算是重复的，那就可以被预计算起来。当预计算的结果满足你的查询条件时，可以直接返回。实际上，这也是一种增量计算，只是加入了智能化的数据计算和准备过程。是一个Learn base过程，通过AI的方式自动化的优化。通过这种自动化的优化方式，同样可以大幅提升性能。而且这种优化可以对用户透明。可以理解成数据平台的自动驾驶（AutoPilot）。</p><p>&nbsp;</p><p>总结一下，我认为我们在引擎的实现方面几乎达到了当前业界最好水平，他是个基础。但更大的提升潜力主要集中在两个方面：第一，增量计算，在计算范式上的创新；第二，AI4D自动优化的创新。这两者的提升都能极大地提升性能，并有好的潜力。</p><p>&nbsp;</p><p>&nbsp;</p><p>InfoQ: 这样的架构是否已经有落地，实际效果如何？</p><p>&nbsp;</p><p>关涛: 是的，我们已经在一些客户中得到了应用。</p><p>&nbsp;</p><p>我们的产品有几个主要卖点能得到客户认可。首先，许多企业认为选择更轻的SaaS架构是一个好选择。客户认为当前开源自建架构已经不能带来技术先进性和差异化，同时自建架构需要重资产投入，包括硬件和团队，这种模式已经老旧。相比之下，云器的轻量化、多云的云中立的SaaS模式更具吸引力。许多客户正是出于这个原因而选择我们。</p><p>&nbsp;</p><p>其次是在性能方面的表现。无论是批处理、交互还是流处理，对比现有系统，我们都实现了显著的高性能。例如，在批处理方面，我们的性能比Spark快了九倍。在交互问题上，我们的性能也可能比市场上最优秀的产品ClickHouse更快一些。这些性能提升对许多客户来说都是非常关键的，尤其是当性能提升达到倍级水平时。</p><p>&nbsp;</p><p>最后就是许多客户对我们试图解决Lambda组装式架构带来的一系列问题感兴趣，认为这是我们的核心突破点，觉得这是很好的技术创新。他们在当前架构上能够切身体会到，Lambda架构将几个不同计算引擎组合在一起可能会引发各种问题。云器通过一体化引擎统一数据分析平台，使得用户在需要调整业务时，可以在不同的计算范式之间灵活切换，这种模式对他们非常有帮助。例如，在国内一家知名的智能制造新能源汽车厂商中，POC测试结果显示云器平台能够以非常低的成本实现全链路实时化，他们对这个效果非常满意。</p><p>&nbsp;</p><p></p><h2>大语言模型时代的数据平台</h2><p></p><p>&nbsp;</p><p>InfoQ：BI和AI/ML正在逐渐融合，一些企业想提供一站式服务，但从数据库角度入手对数据管理有优势，从湖仓出发则更利于机器学习，那么用一个平台结合这两方面的优势，其挑战主要来自哪里？</p><p>&nbsp;</p><p>关涛: 我认为主要的挑战来自如下几个方面。</p><p>&nbsp;</p><p>首先是系统解耦/开放与高性能的平衡。我之前提到，很多数仓系统是存储与计算一对一的系统，其存储就针对上层的计算做专门优化来做到高性能。然而，如果我们希望支持多种不同类型的工作负载，比如存储系统同时支持分析引擎和AI引擎，存储与计算的解耦和开放性就非常关键。</p><p>&nbsp;</p><p>这里难点在于解耦和开放的同时能继续保持高性能。实现这种模块间的解耦，在同时追求高性能的平衡上是相对困难的挑战。这就是我认为的第一个方面。</p><p>&nbsp;</p><p>另一个挑战是两种计算模式的联动。数据分析领域SQL是主流语言，AI领域Python最流行，如何方便地编程两种系统，是关键挑战。SQLML、SQL+UDF内嵌Python、Python的SQLAlchemy库、原生Python接口等都是选择。</p><p>&nbsp;</p><p>最后一个挑战是新的面向AI的数据链路。之前数据分析BI的全链路比较成熟，数据集成、ETL/ELT、建模、分析、BI等模式清楚。AI链路正在重新构建中，组件和模式与BI都不相同。这部分对业界都是新课题，目前有非常多的框架/平台在尝试。</p><p>&nbsp;</p><p>InfoQ：要支持BI+AI/ML，甚至是LLM，数据平台也需要逐渐支持OLAP、OLTP、流、Graph、向量？兼容这么多种类的话，您认为比较好的解决方案会是什么样的？</p><p>&nbsp;</p><p>关涛: 一体化有天然的架构简单的优势，是技术领域的“圣杯”。业界一直未停止探索。</p><p>&nbsp;</p><p>如果我们把数据领域分成OLTP、OLAP、AI三个大方向，我认为，OLAP数据分析领域内的典型场景基本固定，Lambda架构问题业界有明确共识，一体化架构统一所有分析类的Workload是未来方向。这也是云器在尝试的方向。从我们当前的探索和实践来看，流处理、批处理和交互，这三类计算范式是可以被统一处理的。</p><p>&nbsp;</p><p>OLTP与OLAP的一体化，HTAP也是业界方向。部分产品在这个方向发力，也有很多客户落地场景。</p><p>&nbsp;</p><p>OLAP+AI一体化是目前的热点，这两类数据的重合度以及交互的诉求都够强。Databricks一直主打这个方向，它一直坚持Data+AI的战略。Snowflake从OLAP领域出发，最近也在加速同时支持AI的布局，比如一直在发力的SnowPark。</p><p>&nbsp;</p><p>就云器科技本身的定位，是用单一引擎的方式统一OLAP中三个计算范式。同时通过Lakehouse架构支持AI的能力，支持SQL与Python混合编程，支持插件化的AIOps支持。</p><p>&nbsp;</p><p>InfoQ：在“兼容AI”的要求下，数据平台发展得越来越复杂，那么考量一个平台的好处主要看哪些方面？</p><p>&nbsp;</p><p>关涛: 个人认为可以按照如下方式评价。</p><p>&nbsp;</p><p>首先是数据的全频谱。存储平台能否存储和管理全域数据。就像之前提到的湖仓一体，这是一个明确的方向，将数据湖和数据仓融合在一起，再加上统一的全域数据接入，同时保持开放性。</p><p>&nbsp;</p><p>其次，能否同时支持数据分析和其它计算范式。SQL引擎和AI引擎都能支持好。</p><p>&nbsp;</p><p>再就是系统必须具备扩展性的能力。所谓的扩展性，就是在面对未来的变化时，能够通过插件化的方式快速集成其他模块，对资源调度、系统整体设计都有一定考验。在这里有个建议，就是可以使用云模式来做设计，这样才能更容易达到这个目标。因为云的模式在资源弹性和模块丰富度方面都表现出色。</p><p>&nbsp;</p><p>InfoQ：两年之后，我们再展望未来，您觉得未来计算平台领域会发生哪些变化？发展趋势是怎样的？</p><p>&nbsp;</p><p>关涛: 我想大致会有以下几个趋势。</p><p>&nbsp;</p><p>第一个，数据加速爆炸式增长。IoT类的数据加上Agent类的数据，将成为数据增长的新动力。这其中的背景是，数据的第一波增长源自于数据库，例如账单报表类的数据，虽然数据量较小，但对于银行等机构来说具有很高的价值。而数据的第二波爆发则主要发生在大数据领域。许多人的行为数据被记录下来，比如你在淘宝上购买了什么商品、浏览了什么内容等。这些行为数据最终会转化为用户画像和个性化推荐等服务的一部分。这些数据是过去20年数据增长的核心推动力和来源。第三波增长来源于人类行为数据以及设备数据，比如车辆上的摄像头、家中的智能开关等。随着AI的兴起，许多智能机器人也会涌现出来，它们会广泛应用于各个行业，因此这些智能机器人产生的数据也会被自动收集起来，构成数据的第三波增长点。</p><p>&nbsp;</p><p>与此同时，还有一个平行的增长点，即大规模模型和深度学习带来的半结构化数据处理能力的显著增强，这类数据也会持续涌现。因此，数据的爆炸式增长仍然是一个重要趋势。</p><p>&nbsp;</p><p>第二个，数据分析的架构将趋于统一。在数据分析领域，大家最终可能都会向着增量计算的方向发展，从而逐渐打破Lambda架构的限制，一体化的架构会成为未来。跟我们前两年预测湖仓一体会成为未来一样，希望一体化架构两年后也会真正落地。</p><p>&nbsp;</p><p>第三个，大语言模型带来了半结构化和非结构化数据处理能力的显著增强。以前处理这些数据几乎是很困难的，但现在已经变得相对容易。以前阅读一个PDF文件，很难理清其中的内容，而现在这方面的处理变得更加简便。在这个层面上，如果以前我们只能处理结构化数据，现在又多了两类，半结构化和非结构化数据。处理这些数据能力的显著增强，势必会带来存储和计算的需求显著增长。</p><p>&nbsp;</p><p>第四个，大语言模型到来，数据交换/隐私保护会得到更多投资。数据的安全和隐私的要求进一步提升了，数据共享的需求变得更加迫切。因为数据本质上就是知识，而这些知识可以提升智力水平，进而变成一种隐含的价值。因此，数据隐私保护和数据共享之间的平衡成为一个重要议题，特别是在大规模模型的应用下，可能会引发显著的变化。目前我们尚不清楚如何应对这一挑战。例如，很多企业不允许使用公开的大语言模型服务，尤其在美国，主要是因为担心在与模型交互时可能导致企业内部隐私泄露。而一旦模型被私有化部署，其知识范围可能会受限，无法获取与外部交互的内容。因此，数据交换和隐私保护变得尤为关键，这可能是未来的一个发展趋势。</p><p>&nbsp;</p><p>第五个，BI+AI成为数据平台必选项，数据平台需要内置或插件化支持异构数据、finetune、向量检索等AIOps技术。AI让所有的平台智能化，数据平台的智能化也成为必然。大幅降低使用门槛的数据平台会被更多人所使用，因此这也给“平台傻瓜化”带来额外的要求。</p><p></p><p>延伸阅读：</p><p><a href=\"https://www.infoq.cn/article/EvYEXsLPh8KMkfNrsG7D\">让大模型融入工作的每个环节，数据巨头 Databricks 让生成式 AI 平民化 | 专访李潇</a>\"</p><p><a href=\"https://www.infoq.cn/article/5tnj2yul0sxedwwq4dyt\">计算范式巨变前夜，云器发布多云及一体化数据平台云器 Lakehouse</a>\"</p><p><a href=\"https://www.infoq.cn/article/uvkqaltdvkllojwqndhz\">云器科技宣布完成数亿元融资，打造多云及一体化数据平台</a>\"</p><p><a href=\"https://www.infoq.cn/theme/202\">《再谈数据架构》暨云器科技产品发布会</a>\"</p><p></p><h4>活动推荐</h4><p></p><p>以「启航·AIGC 软件工程变革」为主题的 QCon 全球软件开发大会·北京站将于 9 月 3-5 日在北京•富力万丽酒店举办，此次大会策划了从 BI 到 BI+AI，新计算范式下的大数据平台、大前端新场景探索、大前端融合提效、大模型应用落地、面向 AI 的存储、AIGC 浪潮下的研发效能提升、LLMOps、异构计算、微服务架构治理、业务安全技术、构建未来软件的编程语言、FinOps 等近 30 个精彩专题。</p><p></p><p><img src=\"https://static001.geekbang.org/infoq/9a/9a12e80aa9dfab4b5a64f04d24887c27.jpeg\" /></p><p></p><p>咨询购票优惠信息可联系票务经理 18514549229（微信同手机号）。点击<a href=\"https://qcon.infoq.cn/202309/beijing/schedule?utm_source=wechat&amp;utm_medium=infoqart2&amp;utm_campaign=10&amp;utm_term=0829&amp;utm_content=lixiao\">链接</a>\"即可查看 QCon 北京站完整日程，期待与各位开发者现场交流。</p><p>&nbsp;</p>",
    "publish_time": "2023-09-01 17:05:09",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]