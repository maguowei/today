[
  {
    "title": "NGINX 模块现在可以用 Rust 编写了",
    "url": "https://www.infoq.cn/article/0MHbyQtDeTl9kiv8BbFe",
    "summary": "<p>NGINX 近日公布了 <a href=\"https://github.com/nginxinc/ngx-rust\">ngx-rust</a>\" 项目，允许开发人员使用 Rust 编写 NGINX 模块。 Rust 编程语言因其稳定性、多种安全特性、丰富的生态系统和强大的社区支持而成为一种强大且流行的语言选项。</p><p>&nbsp;</p><p>NGINX 是一款高性能、开源的 Web 服务器和反向代理服务器软件，大部分互联网网站都在使用它。 NGINX 最初由 Igor Sysoev 于 2002 年创建，此后一直在发展，并广泛流行于 Web 托管、内容交付和应用程序部署领域。它的性能、可扩展性和多功能优势闻名于世，也因此成为提供 Web 内容和有效管理互联网流量的网站关键组件。</p><p>&nbsp;</p><p>NGINX 的三大功能分别是：</p><p>Web 服务器：NGINX 主要扮演 Web 服务器的角色，用于处理 HTTP 和 HTTPS 请求。它可以提供静态 Web 内容，例如 HTML 文件、图像和 JavaScript，因而成为托管网站和 Web 应用程序的重要组件。反向代理服务器：NGINX 可以作为反向代理服务器，充当客户端请求和后端服务器之间的中介。常见的部署方式是用它来跨多个后端服务器分发传入请求，确保负载平衡和容错性。这在高流量环境中特别有用。负载均衡器：NGINX 可以充当负载均衡器，在多个服务器之间分配传入的网络流量。这可确保各个服务器不会过载，优化资源的使用率并为用户提供无缝体验。</p><p>&nbsp;</p><p>一开始，ngx-rust 是为了推动用户使用 NGINX 开发与 Istio 兼容的服务网格产品而诞生的。不过这个项目沉寂了一段时间，在此期间社区积极参与其中，分叉存储库并基于 ngx-rust 提供的 Rust 绑定示例来创建他们的项目。</p><p>&nbsp;</p><p>最近，F5 的分布式云机器人防御团队需要将 NGINX 代理集成到他们的防护服务中，这需要开发一个新模块。与此同时，F5 希望可以扩展其 Rust 产品组合并改善开发体验，以满足不断变化的客户需求。通过内部创新赞助以及与 ngx-rust 原作者的合作，F5 重振了 ngx-rust 项目。他们发布了 ngx-rust crate，优化了文档，构建也变得更友好，更适合社区使用了。</p><p>&nbsp;</p><p>NGINX 实现大多数功能的基本构建块是模块（Modules）。NGINX 用户还能自定义模块的功能来支持特定的用例。传统上，NGINX 只支持用 C 编写的模块，但计算机科学和编程语言理论的进步让 Rust 等语言也可以用于 NGINX 模块开发了。</p><p>&nbsp;</p><p>想要使用 ngx-rust 的话，你可以选择在本地从源代码构建、为 ngx-rust 项目做出贡献，或者直接从 crates.io 获取 crate。 ngx-rust 自述文件提供了贡献指南和本地构建要求。虽然 ngx-rust 仍处于开发的早期阶段，但 F5 计划在社区支持下提升其质量，带来更多特性。</p><p>&nbsp;</p><p>ngx-rust 项目包含两个关键的 crate：</p><p>nginx-sys：这个 crate 从 NGINX 源代码生成绑定，通过 bindgen 代码自动化来自动创建外部函数接口（FFI）绑定。ngx：这个主 crate 负责实现 Rust 粘合代码、API，并重新导出 nginx-sys。模块编写者通过 ngx 符号与 NGINX 交互，并且有了 nginx-sys 的重新导出就不需要显式导入了。</p><p>&nbsp;</p><p>初始化 ngx-rust 项目工作区时，需要创建一个工作目录、初始化 Rust 项目和设置依赖项：</p><p><code lang=\"rust\">cd $YOUR_DEV_FOLDER\nmkdir ngx-rust-howto\ncd ngx-rust-howto\ncargo init --lib</code></p><p></p><p>创建 Rust 模块时，需要实现 HTTPModule 特征（trait），该特征定义了 NGINX 入口点，包括后配置、预配置、create_main_conf 等。新模块只需要实现针对其特定任务所需的函数。以下代码是 postconfiguration 方法实现的示例：</p><p></p><p><code lang=\"rust\">struct Module;\nstruct Module; \nimpl http::HTTPModule for Module { \n    type MainConf = (); \n    type SrvConf = (); \n    type LocConf = ModuleConfig; \n    unsafe extern \"C\" fn postconfiguration(cf: *mut ngx_conf_t) -&gt; ngx_int_t { \n        let htcf = http::ngx_http_conf_get_module_main_conf(cf, &amp;ngx_http_core_module); \n        let h = ngx_array_push( \n            &amp;mut (*htcf).phases[ngx_http_phases_NGX_HTTP_ACCESS_PHASE as usize].handlers, \n        ) as *mut ngx_http_handler_pt; \n        if h.is_null() { \n            return core::Status::NGX_ERROR.into(); \n        } \n        // set an Access phase handler \n        *h = Some(howto_access_handler); \n        core::Status::NGX_OK.into() \n    } \n}  </code></p><p><a href=\"https://github.com/f5yacobucci/ngx-rust-howto\">ngx-rust-howto</a>\" 存储库提供了更多示例代码和实现。</p><p>&nbsp;</p><p>随着 ngx-rust 项目的推出，NGINX 正在拥抱 Rust 编程语言，为开发人员提供了一种编写 NGINX 模块的新方式。该举措旨在增强 NGINX 的能力，并为开发人员提供一种更安全、更符合习惯的方式来使用 Web 服务器。此外，Cloudflare 开始使用 Rust 来实现 NGINX 模块，这篇博客<a href=\"https://blog.cloudflare.com/rust-nginx-module/\">文章</a>\"介绍了相关细节。</p><p>&nbsp;</p><p>原文链接：</p><p><a href=\"https://www.infoq.com/news/2023/10/nginx-modules-rust/\">https://www.infoq.com/news/2023/10/nginx-modules-rust/</a>\"</p>",
    "publish_time": "2023-11-11 08:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  },
  {
    "title": "深度解锁用云经验！火山引擎公共云·城市分享会开启云上新未来",
    "url": "https://www.infoq.cn/article/plCgkM3joyRCdX3vCK6s",
    "summary": "<p>数智化时代的来临，不仅激发了行业对云计算的资源需求，也重构了云计算的技术架构及产品布局，给业务场景带来更多可能性，让云计算成为企业走向高效治理的一剂“良方”。随着业务的多样化、复杂化，企业应该如何借助云计算构建更高扩展性的IT架构，同时平衡成本与效率、应对治理和安全等挑战？11 月10日，在北京举办的“乘云·向未来”火山引擎公共云·城市分享会上，<a href=\"https://www.infoq.cn/news/WPmK0BeY0dDJB6wLL0zM\">火山引擎</a>\"给出了答案。</p><p>&nbsp;</p><p><img src=\"https://static001.infoq.cn/resource/image/ab/49/ab2135133341d22d9244f0cb6b9f3049.png\" /></p><p></p><p>当前云计算市场的规模化态势，让众多云计算厂商再次迎来新的拐点。字节跳动基础架构负责人赵鹏伟表示，伴随着字节跳动业务的多样性和复杂性发展，火山引擎基于“敏捷迭代”、“数据驱动”、“体验创新”三大云上增长要素，以“短时间内完成基础设施产品三代演进”和“不断追求规模、技术、运营极致性价比”两大后发优势，为业务增长构建了数字化基石。</p><p>&nbsp;</p><p></p><h2>多云之下开辟“坦途”</h2><p></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/f9/79/f9722141b0534f05cc37463b0efaf579.png\" /></p><p></p><p>云服务经过多年的演进，已经发展出了多云、混合云、边缘云等多种形态。字节跳动在发展过程中，伴随着业务对底层架构需求的不断增加，也逐渐走向“多云”模式。然而，多云下的云原生演进之路并非坦途，运维复杂度增加、互操作性难、数据管理难度大、成本控制复杂等挑战浮出水面。</p><p>&nbsp;</p><p>面对多云落地中的难点，火山引擎云原生平台负责人沈健认为，“云原生始于对资源的需求，终于对资源效率、运维效率以及业务效率的释放。”为此，火山引擎早在 2019 年就开始进行集群联邦建设，到 2021 年正式实现了全场景应用编排和资源管理的标准化、统一化。2023 年，火山引擎再次提出“多云管控+多云多活”的解决方案，打造了分布式云原生平台和计算平台体系两大底层算力架构，从多个层面实现多云环境下的高效管理和运营。</p><p>&nbsp;</p><p></p><h2>业务增速下的大算力进化之道</h2><p></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/ff/aa/ffd2f47bce884a072d4cebeab2db4baa.png\" /></p><p></p><p>火山引擎整体的大算力基础设施在高性能计算和存储集群、云原生和计算协同调度、资源池化和在离线融合等方面都具备一定优势。火山引擎云基础产品负责人罗浩表示，伴随 AI 应用在不同行业生根落地的趋势，<a href=\"https://www.infoq.cn/article/kYUsofsTMx21MQRsL0It\">火山引擎</a>\"将以高性价比、高利用率、高开发体验、低运维部署的大算力基础设施，打造更贴合客户场景的整体解决方案。</p><p>&nbsp;</p><p></p><h2>超大规模数据库技术演进的可行性验证</h2><p></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/23/8a/23aa9e1e88a6bbdd40c417e8c55bc08a.png\" /></p><p></p><p>在基础设施全面“云化”的今天，字节跳动的数据量迎来将近 100 倍的增长。面对增速如此迅猛的数据规模，火山引擎数据库负责人张雷称，字节数据库团队始终在思考更优秀的数据管理和数据治理之策。</p><p>&nbsp;</p><p>基于<a href=\"https://www.infoq.cn/article/S2Zh7B2P0V1xtZVXYAvv\">字节跳动</a>\"数据库体系呈现产品多样化、规模化、融合化、智能化特征，火山引擎提供了自研的 veDB 系列存算分离数据库服务，以及开源托管产品和配套工具；同时，火山引擎通过产品技术创新，在内部打磨类似 HTAP、图、分布式 KV 等多款自研数据库，未来希望把这些好的产品提供给广大客户，帮助其解决企业发展过程中的数据管理难题；也希望通过应用场景方面的融合和基础设施层面的分离和整合，以横纵双融合的系统重塑应用缓存和数据库，为用户带来便捷。</p><p>&nbsp;</p><p></p><h2>以可信赖的能力携手伙伴迈向“智”高点</h2><p></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/88/6d/88b0c228258c6c71101b32d8601cdc6d.png\" /></p><p></p><p>作为火山引擎在自动驾驶领域的重要伙伴，毫末智行亮相本次大会。毫末智行数据智能科学家贺翔分享了最新实践成果。在中国智能辅助驾驶市场大爆发阶段，毫末智行在乘用车辅助驾驶系统、末端物流自动配送车和智能硬件/机器人等多个领域均保持业内第一的优异成绩。其中，面向末端物流自动配送行业打造的“小魔驼”已全新升级至 3.0 版本，以极致性价比迅速抢占市场。</p><p>&nbsp;</p><p>为了进一步提升小魔驼无人配送的安全运营能力，毫末智行与火山引擎强强联手，基于火山引擎视频云打造了远程驾舱和远程运营平台解决方案，提升末端物流自动配送规模化落地中的安全性和完整性，促进无人配送更安全、更快商业落地。</p><p>&nbsp;</p><p></p><h2>“内外统一”服务多用户云上增长</h2><p></p><p></p><p><img src=\"https://static001.infoq.cn/resource/image/a2/96/a2da7da53ee561e6cc6b906f832a4096.png\" /></p><p></p><p>经过多阶段的演进，字节跳动基础架构体系已在研发、技术、产品方面形成了完整的解决方案。据火山引擎云基础解决方案负责人王佳毅介绍，字节跳动基础架构核心技术体系包括池化存储 ByteStore、统一资源调度 Godel 等，具备实时推荐、实时计算等特征，并与火山引擎形成了业务无感、资源融合、技术一体的“内外统一”研发体系，更好地承载集团内外业务发展。</p><p>&nbsp;</p><p>云计算规模化成为必然趋势，企业IT架构需要更高可扩展性来承载核心业务快速增长。未来，火山引擎将持续为各行业领域的企业客户提供优质的产品服务，帮助企业客户更好地应对业务规模化之下的IT挑战，助力企业客户突破瓶颈、自由计算、自由增长。</p><p>&nbsp;</p><p>据悉，接下来，火山引擎公共云·城市分享会还将陆续登陆上海和深圳，与更多行业伙伴共同探讨高效用云之道，携手“乘云·向未来”！</p>",
    "publish_time": "2023-11-11 09:00:00",
    "source": {
      "name": "infoq_recommend",
      "desc": "InfoQ推荐",
      "icon": "https://raw.githubusercontent.com/maguowei/today/master/imgs/icon/infoq.png"
    }
  }
]